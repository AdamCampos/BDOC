(window.webpackJsonp=window.webpackJsonp||[]).push([[64],{"8/ms":function(e,t,s){"use strict";s.d(t,"a",(function(){return q}));var i=s("fXoL"),n=s("LUpO"),c=s("Ejbi"),a=s("+eYH"),o=s("U7l/"),r=s("Xfz+"),l=s("biIz"),d=function(e){return e[e.TASK=0]="TASK",e[e.TASKITEM=1]="TASKITEM",e[e.WORKFLOW=2]="WORKFLOW",e[e.CHECKLIST=3]="CHECKLIST",e}({}),h=s("wZkO"),u=s("ofXK"),S=s("zCQ7"),f=s("Cy33"),O=s("+T9e");function T(e,t){if(1&e&&i.Tb(0,"sda-object-details",1),2&e){const e=i.lc();i.sc("id",e.recentSelectedObject.obid)("config",e.recentSelectedObject.config)("showTodoListForm",!0)}}let g=(()=>{class e{constructor(e){this.sdaTranslateService=e,this.selectedObjects=[],this.orientation=f.a.Left,this.actionsPanelWidth=300,this.actionsPanelMinWidth=150,this.actionsPanelMaxWidth=450,this.TODO_LIST_MULTI_SELECT_DETAILS=this.sdaTranslateService.get("TODO_LIST_MULTI_SELECT_DETAILS","Details for multiple selections cannot be displayed")}ngOnChanges(){this.selectedObjects&&this.selectedObjects.length>0&&(this.recentSelectedObject=this.selectedObjects[this.selectedObjects.length-1])}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(c.a))},e.\u0275cmp=i.Mb({type:e,selectors:[["sda-step-task-info"]],inputs:{selectedObjects:"selectedObjects"},features:[i.Cb],decls:1,vars:1,consts:[[3,"id","config","showTodoListForm",4,"ngIf"],[3,"id","config","showTodoListForm"]],template:function(e,t){1&e&&i.Sc(0,T,1,3,"sda-object-details",0),2&e&&i.sc("ngIf",1===t.selectedObjects.length)},directives:[u.t,O.a],styles:["[_nghost-%COMP%]{display:flex;flex:1;height:100%}[_nghost-%COMP%]     sda-tabbed-grid-view{border-left:1px solid #cad0d7}[_nghost-%COMP%]     sda-object-details .object-details{flex-shrink:0}"]}),e})();var b=s("TLn4"),I=s("K2mS"),p=s("LRne"),C=s("IzEk"),m=s("lJxs"),D=s("JIr8"),L=s("POgZ"),_=s("41Lq"),v=s("Ab/9"),w=s("gfD1");function A(e,t){if(1&e){const e=i.Zb();i.Yb(0,"sda-list-edit-grid",1),i.hc("afterSaveChanges",(function(t){return i.Kc(e),i.lc().createChkLstCompletedByRel(t)})),i.Xb()}if(2&e){const e=i.lc();i.sc("isBackButtonRequired",!1)("columnSetName",e.columnSetName)("objectOBIDs",e.checkListItemOBIDs)}}let k=(()=>{class e{constructor(e,t,s,i,n){this.stepCheckListGridService=e,this.listEditColumnService=t,this.exceptionService=s,this.notificationService=i,this.sdaTranslateService=n,this.columnSetName="ChecklistColumnSet",this.checkListItemOBIDs=[],this.isChecklistCompleted=!1,this.CHECKLIST_COMPLETED=this.sdaTranslateService.get("CHECKLIST_COMPLETED","Successfully completed checklist")}ngOnChanges(){this.checkListItemOBIDs=[],this.checkListOBID&&(this.getCheckListDataSubscription&&this.getCheckListDataSubscription.unsubscribe(),this.getCheckListDataSubscription=this.stepCheckListGridService.getCheckListData(this.checkListOBID).pipe(Object(C.a)(1)).subscribe(e=>{e&&(this.checkListItemOBIDs=e.CheckListItemOBIDs,this.isChecklistCompleted=e.IsCheckListCompleted)}))}ngOnDestroy(){this.getCheckListDataSubscription&&this.getCheckListDataSubscription.unsubscribe()}createChkLstCompletedByRel(e){const t=e.Data,s=e.CellUIDs,i=this.listEditColumnService.columns.find(e=>"SPFWFSCHKValue"===e.columnItemDetails.PropertyDefUID);let n;if(i&&(n=i.columnItemDetails.PropertyName),n){let e=!1;if(s.find(e=>e===n)&&(e=!0),this.loginUserOBID&&e){let e=!1;t.find(e=>null==e[n]||0===e[n].trim().length)&&(e=!0),e?this.isChecklistCompleted&&this.terminateRel().subscribe():this.createRel().subscribe()}}}terminateRel(){return this.stepCheckListGridService.terminateAndRelateCompletedByRel(this.checkListOBID,this.loginUserOBID,"SPFWorkflowStepChkLstCompletedBy",!0,!0,!1).pipe(Object(C.a)(1),Object(m.a)(e=>{let t=!0;return e.forEach(e=>{(e.statusCode<200||e.statusCode>=300)&&(this.exceptionService.handleException(e.data),t=!1)}),t&&(this.isChecklistCompleted=!1),Object(p.a)(t)}),Object(D.a)(e=>(this.exceptionService.handleException(e),Object(p.a)(void 0))))}createRel(){return this.stepCheckListGridService.terminateAndRelateCompletedByRel(this.checkListOBID,this.loginUserOBID,"SPFWorkflowStepChkLstCompletedBy",!0,this.isChecklistCompleted,!0).pipe(Object(C.a)(1),Object(m.a)(e=>{let t=!0;e.forEach(e=>{(e.statusCode<200||e.statusCode>=300)&&(this.exceptionService.handleException(e.data),t=!1)}),t&&(this.isChecklistCompleted||(this.isChecklistCompleted=!0),this.notificationService.success(this.CHECKLIST_COMPLETED))}),Object(D.a)(e=>(this.exceptionService.handleException(e),Object(p.a)(void 0))))}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(v.a),i.Sb(L.a),i.Sb(n.a),i.Sb(_.a),i.Sb(c.a))},e.\u0275cmp=i.Mb({type:e,selectors:[["sda-step-check-list-grid"]],inputs:{stepOBID:"stepOBID",checkListOBID:"checkListOBID",loginUserOBID:"loginUserOBID"},features:[i.Cb],decls:1,vars:1,consts:[[3,"isBackButtonRequired","columnSetName","objectOBIDs","afterSaveChanges",4,"ngIf"],[3,"isBackButtonRequired","columnSetName","objectOBIDs","afterSaveChanges"]],template:function(e,t){1&e&&i.Sc(0,A,1,3,"sda-list-edit-grid",0),2&e&&i.sc("ngIf",t.checkListItemOBIDs&&t.checkListItemOBIDs.length>0)},directives:[u.t,w.a],styles:["[_nghost-%COMP%]{display:flex;height:100%}"]}),e})();var B=s("7Ihv");function E(e,t){if(1&e&&(i.Yb(0,"span",7),i.Uc(1),i.Xb()),2&e){const e=i.lc();i.sc("title",e.TODOLIST_TAB_TASK),i.Eb(1),i.Vc(e.TODOLIST_TAB_TASK)}}function y(e,t){if(1&e&&i.Tb(0,"sda-step-task-info",8),2&e){const e=i.lc();i.sc("selectedObjects",e.selectedSteps)}}function R(e,t){1&e&&i.Tb(0,"sda-loading-indicator",10),2&e&&i.sc("size",14)("centered",!0)}function x(e,t){if(1&e&&(i.Yb(0,"span",7),i.Uc(1),i.mc(2,"sdaTruncate"),i.Xb(),i.Sc(3,R,1,2,"sda-loading-indicator",9)),2&e){const e=i.lc();i.sc("title",e.TODOLIST_TAB_TASK_ITEM_LABEL),i.Eb(1),i.Vc(i.oc(2,3,e.TODOLIST_TAB_TASK_ITEM_LABEL,35)),i.Eb(2),i.sc("ngIf",e.showLoadingIndicator)}}function j(e,t){if(1&e&&i.Tb(0,"sda-step-task-info",8),2&e){const e=i.lc();i.sc("selectedObjects",e.selectedWFObjects)}}function P(e,t){if(1&e&&(i.Yb(0,"span",7),i.Uc(1),i.Xb()),2&e){const e=i.lc();i.sc("title",e.TODOLIST_TAB_TASK_WORKFLOW),i.Eb(1),i.Vc(e.TODOLIST_TAB_TASK_WORKFLOW)}}function M(e,t){if(1&e&&i.Tb(0,"sda-part-workflow-viewer",12),2&e){const e=i.lc(2);i.sc("stepOBID",e.selectedSteps[0].obid)("config",e.selectedSteps[0].config)("enableFullView",!1)("launchViewInSamePage",!0)}}function F(e,t){if(1&e&&i.Sc(0,M,1,4,"sda-part-workflow-viewer",11),2&e){const e=i.lc();i.sc("ngIf",1===e.selectedSteps.length)}}function K(e,t){if(1&e&&(i.Yb(0,"span",7),i.Uc(1),i.mc(2,"sdaTruncate"),i.Xb()),2&e){const e=i.lc(2);i.Ib("mandatory",e.isMandatory),i.sc("title",e.TODOLIST_TAB_CHECK_LIST_LABEL),i.Eb(1),i.Vc(i.oc(2,4,e.TODOLIST_TAB_CHECK_LIST_LABEL,35))}}function W(e,t){if(1&e&&i.Tb(0,"sda-step-check-list-grid",14),2&e){const e=i.lc(3);i.sc("stepOBID",e.selectedSteps[0].obid)("checkListOBID",e.selectedSteps[0].data.DynStepCheckListOBID)("loginUserOBID",e.selectedSteps[0].data.DynLoginUserOBID)}}function U(e,t){if(1&e&&i.Sc(0,W,1,3,"sda-step-check-list-grid",13),2&e){const e=i.lc(2);i.sc("ngIf",1===e.selectedSteps.length)}}function N(e,t){1&e&&(i.Yb(0,"mat-tab"),i.Sc(1,K,3,7,"ng-template",1),i.Sc(2,U,1,1,"ng-template",2),i.Xb())}let q=(()=>{class e{constructor(e,t,s,n,c){this.sdaTranslateService=e,this.todoListConfigService=t,this.exceptionService=s,this.todoListService=n,this.change=c,this.closeDetailsPane=new i.o,this.selectedSteps=[],this.selectedWFObjects=[],this.showLoadingIndicator=!1,this.TODOLIST_TAB_TASK=this.sdaTranslateService.get("TODOLIST_TAB_TASK","Task"),this.TODOLIST_TAB_TASK_WORKFLOW=this.sdaTranslateService.get("TODOLIST_TAB_TASK_WORKFLOW","Workflow"),this.TODOLIST_TAB_CHECK_LIST_LABEL=this.sdaTranslateService.get("TODOLIST_TAB_CHECK_LIST_LABEL","Checklist"),this.selectedTabIndex=d.TASK,this.isMandatory=!1,this.showCheckListTab=!1,this.changeTabIndexSubscription=this.todoListService.onTabIndexUpdated$.subscribe(e=>{this.selectedSteps&&(this.selectedTabIndex=e)})}ngOnChanges(){let e=this.selectedTabIndex;this.clearData(),this.setUpData(),this.setTheTaskItemTitle(),this.showCheckListTab=!1,this.isMandatory=!1,this.selectedSteps&&this.selectedSteps[0]&&this.selectedSteps[0].data&&this.selectedSteps[0].data.DynStepCheckListOBID?(this.showCheckListTab=!0,this.selectedSteps[0].data.DynSPFStepCompChkListInd&&"true"===this.selectedSteps[0].data.DynSPFStepCompChkListInd.toLowerCase()&&(this.isMandatory=!0),e=d.CHECKLIST):this.showCheckListTab||3!==e||(e=d.TASK),this.selectedTabIndex=e,this.change.detectChanges()}ngOnDestroy(){this.changeTabIndexSubscription&&this.changeTabIndexSubscription.unsubscribe()}onSelectedTabChange(e){this.selectedTabIndex=e.index}onClose(){this.closeDetailsPane.emit()}setTheTaskItemTitle(){this.TODOLIST_TAB_TASK_ITEM_LABEL="",this.selectedWFObjects.length>1?this.TODOLIST_TAB_TASK_ITEM_LABEL=this.sdaTranslateService.get("TODOLIST_TAB_TASK_MULTIPLE_ITEMS","Multiple Items"):this.selectedWFObjects.length?(this.showLoadingIndicator=!0,this.todoListConfigService.getTaskItemTitle(this.selectedWFObjects[0].obid,this.selectedWFObjects[0].config).subscribe(e=>{this.TODOLIST_TAB_TASK_ITEM_LABEL=e||this.sdaTranslateService.get("TODOLIST_TAB_TASK_ITEM","Task Item"),this.showLoadingIndicator=!1},e=>{this.TODOLIST_TAB_TASK_ITEM_LABEL=this.sdaTranslateService.get("TODOLIST_TAB_TASK_ITEM","Task Item"),this.showLoadingIndicator=!1,this.exceptionService.handleException(e)})):this.TODOLIST_TAB_TASK_ITEM_LABEL=this.sdaTranslateService.get("TODOLIST_TAB_TASK_ITEM","Task Item")}setUpData(){this.selectedObjects.map(e=>{let t;e.data&&(t=new a.a(e.data.DynWorkflowItemOBID,e.data.DynWorkflowItemName,e.data.DynWorkflowItemConfig?e.data.DynWorkflowItemConfig:o.b,void 0,void 0,e.data),this.selectedWFObjects.push(t)),e.config=e.config?e.config:t&&t.config?t.config:o.b}),this.selectedSteps=this.selectedObjects}clearData(){this.selectedSteps=[],this.selectedWFObjects=[],this.selectedTabIndex>=d.WORKFLOW&&this.selectedObjects.length>1&&(this.selectedTabIndex=d.TASK)}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(c.a),i.Sb(r.a),i.Sb(n.a),i.Sb(l.a),i.Sb(i.h))},e.\u0275cmp=i.Mb({type:e,selectors:[["sda-step-details-base"]],inputs:{selectedObjects:"selectedObjects"},outputs:{closeDetailsPane:"closeDetailsPane"},features:[i.Cb],decls:13,vars:3,consts:[[3,"selectedIndex","selectedTabChange"],["matTabLabel",""],["matTabContent",""],[3,"disabled"],[4,"ngIf"],[1,"close-details"],["matSvgIcon","close",3,"onClick"],[3,"title"],[3,"selectedObjects"],[3,"size","centered",4,"ngIf"],[3,"size","centered"],[3,"stepOBID","config","enableFullView","launchViewInSamePage",4,"ngIf"],[3,"stepOBID","config","enableFullView","launchViewInSamePage"],[3,"stepOBID","checkListOBID","loginUserOBID",4,"ngIf"],[3,"stepOBID","checkListOBID","loginUserOBID"]],template:function(e,t){1&e&&(i.Yb(0,"mat-tab-group",0),i.hc("selectedTabChange",(function(e){return t.onSelectedTabChange(e)})),i.Yb(1,"mat-tab"),i.Sc(2,E,2,2,"ng-template",1),i.Sc(3,y,1,1,"ng-template",2),i.Xb(),i.Yb(4,"mat-tab"),i.Sc(5,x,4,6,"ng-template",1),i.Sc(6,j,1,1,"ng-template",2),i.Xb(),i.Yb(7,"mat-tab",3),i.Sc(8,P,2,2,"ng-template",1),i.Sc(9,F,1,1,"ng-template",2),i.Xb(),i.Sc(10,N,3,0,"mat-tab",4),i.Xb(),i.Yb(11,"div",5),i.Yb(12,"sda-button",6),i.hc("onClick",(function(){return t.onClose()})),i.Xb(),i.Xb()),2&e&&(i.sc("selectedIndex",t.selectedTabIndex),i.Eb(7),i.sc("disabled",t.selectedSteps.length>1),i.Eb(3),i.sc("ngIf",t.showCheckListTab))},directives:[h.c,h.a,h.d,h.b,u.t,S.a,g,b.a,I.a,k],pipes:[B.a],styles:['[_nghost-%COMP%]{display:flex;flex:1;height:100%;overflow:hidden}[_nghost-%COMP%]   sda-part-workflow-viewer[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;height:100%}[_nghost-%COMP%]   sda-part-workflow-viewer[_ngcontent-%COMP%]     .wf-svg{overflow:auto}.close-details[_ngcontent-%COMP%]{z-index:100!important;position:fixed;right:9px;display:flex;justify-content:space-around;align-items:center;height:45px}.mandatory[_ngcontent-%COMP%]:after{content:"*";color:#d7142c;font-size:16px}']}),e})()},"Ab/9":function(e,t,s){"use strict";s.d(t,"a",(function(){return o}));var i=s("lJxs"),n=s("HLw3"),c=s("J7mc"),a=s("fXoL");let o=(()=>{class e{constructor(e,t){this.dataService=e,this.batchRequestFactory=t}getCheckListData(e){return this.dataService.post("GetCheckListData",JSON.stringify({checkListOBID:e}))}getUnCompletedCheckLists(e){const t=this.batchRequestFactory.createBatchRequest(),s=`(${e.map(e=>`OBID eq '${e}'`).join(" or ")})`;return t.addGetRequest(`Objects?$filter=${s}&$expand=SPFWorkflowStepChkLstCompletedBy_12`),t.execute().pipe(Object(i.a)(e=>{const t=[];return e&&e.length>0&&e.forEach(e=>{e&&e.data&&e.data.value.length>0&&e.data.value.forEach(e=>{e.SPFWorkflowStepChkLstCompletedBy_12&&e.SPFWorkflowStepChkLstCompletedBy_12.length>0||t.push(e.OBID)})}),t}))}terminateAndRelateCompletedByRel(e,t,s,i,n,c){const a=this.batchRequestFactory.createBatchRequest(),o=a.createChangeset();return n&&o.addUnrelate(e,t,s,i,n),c&&o.addRelateRequest(e,t,s,i),a.addChangeset(o),a.execute()}}return e.\u0275fac=function(t){return new(t||e)(a.dc(c.a),a.dc(n.a))},e.\u0275prov=a.Ob({token:e,factory:e.\u0275fac}),e})()},FTkg:function(e,t,s){"use strict";s.d(t,"a",(function(){return O}));var i=s("ofXK"),n=s("wZkO"),c=s("l3mi"),a=s("F+hv"),o=s("txXS"),r=s("uDAI"),l=s("s+i/"),d=s("Ab/9"),h=s("fXoL");let u=(()=>{class e{}return e.\u0275mod=h.Qb({type:e}),e.\u0275inj=h.Pb({factory:function(t){return new(t||e)},providers:[d.a],imports:[[i.c,l.a]]}),e})();var S=s("K9v4");let f=(()=>{class e{}return e.\u0275mod=h.Qb({type:e}),e.\u0275inj=h.Pb({factory:function(t){return new(t||e)},imports:[[i.c,S.a]]}),e})(),O=(()=>{class e{}return e.\u0275mod=h.Qb({type:e}),e.\u0275inj=h.Pb({factory:function(t){return new(t||e)},imports:[[i.c,n.e,r.a,f,a.a,o.a,c.a,u]]}),e})()},Mkyw:function(e,t,s){"use strict";s.d(t,"a",(function(){return m}));var i=s("XNiG"),n=s("LRne"),c=s("z6cu"),a=s("Kj3r"),o=s("Z9D8"),r=s("Ejbi"),l=s("fXoL"),d=s("ofXK"),h=s("NFeN");function u(e,t){if(1&e&&l.Tb(0,"mat-icon",1),2&e){const e=l.lc();l.sc("title",e.TODO_LIST_OVER_DUE_TASK)}}let S=(()=>{class e{constructor(e){this.sdaTranslateService=e,this.dataItem={},this.isVisible=!1,this.TODO_LIST_OVER_DUE_TASK=this.sdaTranslateService.get("TODO_LIST_OVER_DUE_TASK","Task is overdue")}updateTodoListOverdueCellComponent(){this.isVisible="true"===(this.dataItem.DynValue&&this.dataItem.DynValue.toLowerCase())}}return e.\u0275fac=function(t){return new(t||e)(l.Sb(r.a))},e.\u0275cmp=l.Mb({type:e,selectors:[["sda-todo-list-overdue-cell"]],decls:1,vars:1,consts:[["class","overdue-icon","svgIcon","overdue",3,"title",4,"ngIf"],["svgIcon","overdue",1,"overdue-icon",3,"title"]],template:function(e,t){1&e&&l.Sc(0,u,1,1,"mat-icon",0),2&e&&l.sc("ngIf",t.isVisible)},directives:[d.t,h.a],styles:["[_nghost-%COMP%]{display:flex;justify-content:center;cursor:pointer}.overdue-icon[_ngcontent-%COMP%]{fill:#d7142c}"]}),e})();var f=s("1uH5"),O=s("YlIq"),T=s("Cy33"),g=s("blvr"),b=s("JrsU"),I=s("U7l/"),p=s("FedY"),C=s("yzqN");class m{constructor(e,t,s,n,c,a,o,r,l,d,h,u,S,f,O){this.sdaTranslateService=e,this.modalService=t,this.dataService=s,this.helpService=n,this.lockService=c,this.router=a,this.exceptionService=o,this.elementRef=r,this.objectAccessService=l,this.actionMenuProvider=d,this.configService=h,this.loadingOverlayService=u,this.todoListService=S,this.filterService=f,this.todoListConfigService=O,this.actionButtons=[],this.availableConfigs=[],this.filteredConfigs=[],this.todoListConfig="",this.selectedTabIndex=0,this.requiredRowData=["DynWorkflowItemOBID","DynWorkflowItemConfig","DynWorkflowItemName","DynStepCheckListOBID","DynLoginUserOBID","DynSPFStepCompChkListInd"],this.infomapActionName="infomap",this.itemsSelected=[],this.orientation=T.a.Up,this.triggerGridResize$=new i.a,this.itemSelectionChange$=new i.a,this.hilightSelectedRows$=new i.a,this.triggerAutoScrollToSelectedRow$=new i.a,this.INFOMAP_LAUNCH=this.sdaTranslateService.get("INFOMAP_LAUNCH","Show Info Map"),this.pageTitle=this.sdaTranslateService.get("TO_DO_TITLE","To Do List"),this.TO_DO_TOO_MANY_CONFIGS=this.sdaTranslateService.get("TO_DO_TOO_MANY_CONFIGS","Unable to display To Do List because of too many selected configurations."),this.RESULTS_INFOMAP_ERROR=this.sdaTranslateService.get("RESULTS_INFOMAP_ERROR","Retrieving the relationships for this object failed"),this.TODO_WORKFLOW_STEP_DATA_ERROR=this.sdaTranslateService.get("TODO_WORKFLOW_STEP_DATA_ERROR","An error occured whilst finding the related data for this workflow step."),this.onDataChange=e=>{if(this.isItemSelected=!1,this.triggerGridResize$.next(void 0),e&&e.dataSource){let t;t=this.filterService.createOdataQueryFilter(e.dataSource,void 0),this.odataRequest.startingUrl&&(t.startingUrl=this.odataRequest.startingUrl),this.odataRequest.columnSet&&(t.columnSet=this.odataRequest.columnSet),this.updateUrl(t)}},this.helpService.setHandlers(C.C)}setupGrid(e){if(this.todoListConfig){if(this.isItemSelected=!1,this.queryFilters)this.odataRequest=Object.assign({},this.queryFilters);else{this.odataRequest=new g.a;const e=this.configService.currentConfigs.find(e=>e.ConfigUID===this.todoListConfig);this.odataRequest.columnSet=this.columnSet,this.odataRequest.config=new b.a(e.ConfigUID,e.DisplayName)}this.odataRequest.noSupportForAsyncCount=!0,this.odataRequest.startingUrl=e,this.updateUrl(this.odataRequest)}this.loadingOverlayService.hideLoadingOverlay()}onActionButtonClicked(e){e&&e.name===this.infomapActionName&&this.goToInfomapForRelatedObject(e)}onSelectAllChanged(){this.triggerGridResize$.next(void 0)}getClassDefColumnSet(e){return e&&1===e.length?this.todoListService.getClassDefTodoListColumnSet(e[0]):Object(n.a)(void 0)}setUpItemChangeSubscription(){this.actionMenuProvider.onActionMenuItemsUpdated$.subscribe(e=>{this.itemSelectionChange$.next(e)}),this.itemSelectionChange$.pipe(Object(a.a)(100)).subscribe(e=>{if(e&&e.length>0&&this.isItemSelected){const t=e.pop();this.itemsSelected=[t],this.hilightSelectedRows$.next([t.obid])}else this.hilightSelectedRows$.next([]);this.triggerGridResize$.next(void 0)}),this.actionMenuProvider.shortcutClickedForItemSubject.subscribe(e=>{e&&e.length>0&&this.triggerGridResize$.next(void 0)}),this.actionMenuProvider.closeActionMenuSubject.subscribe(()=>{this.triggerGridResize$.next(void 0),this.hilightSelectedRows$.next([])});const e=this.elementRef.element.nativeElement.offsetHeight;this.stepDetailsPanelWidth=Math.round(e/2),this.stepDetailsPanelMaxWidth=this.stepDetailsPanelWidth+Math.round(e/3),this.stepDetailsPanelMinWidth=this.stepDetailsPanelWidth-Math.round(e/3)}InitializeGridForConfig(){this.selectedTabIndex=0,this.availableConfigs.sort((e,t)=>p.a.sortByString(e.name,t.name));const e=this.availableConfigs.findIndex(e=>e.configUID===this.configService.selectedCreateConfig);if(-1!==e){const t=this.availableConfigs[e];this.availableConfigs.splice(e,1),this.availableConfigs.unshift(t)}this.todoListConfig=this.availableConfigs[this.selectedTabIndex].configUID,this.todoListConfigService.refreshTodoListOverView=!1}selectedTabIndexChange(e){this.selectedTabIndex!==e&&(this.todoListConfig=this.availableConfigs[e].configUID,this.selectedTabIndex=e,this.setUpUrl(),this.actionMenuProvider.clearItems())}ItemSelected(e){this.isItemSelected||this.triggerAutoScrollToSelectedRow$.next(),this.isItemSelected=!0,this.itemsSelected=[e],this.triggerGridResize$.next(void 0)}onCloseDetailsPane(){this.isItemSelected=!1,this.triggerGridResize$.next(void 0),this.hilightSelectedRows$.next([])}addActionsToGrid(){0===this.actionButtons.filter(e=>e.name===this.infomapActionName).length&&this.actionButtons.push(new f.a(this.infomapActionName,"content/images/Nodes.svg",this.INFOMAP_LAUNCH)),this.todoListOverdueCellComponent=new O.a(void 0,S,"",45)}goToInfomapForRelatedObject(e){this.getRelatedObjectForInfomap(e).subscribe(t=>{t.OBID&&t.Config?this.lockService.isItemLocked(e.rowData.Id)?this.modalService.alert(this.sdaTranslateService.get("TODO_ACTIONS_MENU_NO_ACCESS_LOCK","One of more of the selected objects are unavailable until a background transaction is complete."),this.sdaTranslateService.get("TODO_ACTIONS_ACCESS_DENIED","Access Denied")):this.objectAccessService.userCanAccessObject(t.OBID,t.Config).subscribe(e=>{e?this.goToInfomap(t.OBID,t.Config):this.modalService.alert(this.sdaTranslateService.get("TODO_ACTIONS_MENU_NO_ACCESS_SINGLE","You do not have access to the related object for this workflow step. Please contact your system administrator."),this.sdaTranslateService.get("TODO_ACTIONS_ACCESS_DENIED","Access Denied"))}):e.rowData.Id&&e.configKey?this.objectAccessService.userCanAccessObject(e.rowData.Id,e.configKey).subscribe(t=>{t?this.goToInfomap(e.rowData,e.configKey):this.modalService.alert(this.sdaTranslateService.get("TODO_ACTIONS_MENU_NO_ACCESS_SINGLE","You do not have access to the related object for this workflow step. Please contact your system administrator."),this.sdaTranslateService.get("TODO_ACTIONS_ACCESS_DENIED","Access Denied"))}):Object(c.a)(new o.a(this.TODO_WORKFLOW_STEP_DATA_ERROR))},e=>{this.exceptionService.handleException(e)})}getRelatedObjectForInfomap(e){let t,s;return this.checkForRequiredData(e).length>0?Object(c.a)(new o.a(this.TODO_WORKFLOW_STEP_DATA_ERROR)):(t=e.rowData.DynWorkflowItemOBID,s=e.configKey?e.configKey:e.rowData.DynWorkflowItemConfig,Object(n.a)({OBID:t,Config:s}))}goToInfomap(e,t){let s=e;const i=JSON.stringify([t]);(e.hasOwnProperty("Id")||e.hasOwnProperty("OBID"))&&(s=e.Id||e.OBID),this.actionMenuProvider.notifyShortcutClickedForItem([s]),this.router.navigate(["/infomap-viewer",{obid:s,config:i}]).catch(e=>{const t=new o.a(e,this.RESULTS_INFOMAP_ERROR,"ResultsComponent","goToInfomap");this.exceptionService.handleException(t)})}checkForRequiredData(e){const t=[];return e&&e.rowData?(e.rowData.Id||t.push(!0),e.rowData.hasOwnProperty("DynWorkflowItemConfig")||(e.rowData.DynWorkflowItemConfig=I.b),e.rowData.hasOwnProperty("DynWorkflowItemOBID")&&e.rowData.hasOwnProperty("DynWorkflowItemConfig")&&e.rowData.hasOwnProperty("DynWorkflowItemName")||t.push(!0)):t.push(!0),t}}},yzqN:function(e,t,s){"use strict";s.d(t,"a",(function(){return i})),s.d(t,"b",(function(){return n})),s.d(t,"c",(function(){return c})),s.d(t,"e",(function(){return a})),s.d(t,"f",(function(){return o})),s.d(t,"g",(function(){return r})),s.d(t,"h",(function(){return l})),s.d(t,"k",(function(){return d})),s.d(t,"i",(function(){return h})),s.d(t,"j",(function(){return u})),s.d(t,"m",(function(){return S})),s.d(t,"o",(function(){return f})),s.d(t,"p",(function(){return O})),s.d(t,"r",(function(){return T})),s.d(t,"s",(function(){return g})),s.d(t,"t",(function(){return b})),s.d(t,"u",(function(){return I})),s.d(t,"v",(function(){return p})),s.d(t,"w",(function(){return C})),s.d(t,"x",(function(){return m})),s.d(t,"y",(function(){return D})),s.d(t,"z",(function(){return L})),s.d(t,"A",(function(){return _})),s.d(t,"B",(function(){return v})),s.d(t,"C",(function(){return w})),s.d(t,"E",(function(){return A})),s.d(t,"F",(function(){return k})),s.d(t,"q",(function(){return B})),s.d(t,"D",(function(){return E})),s.d(t,"n",(function(){return y})),s.d(t,"d",(function(){return R})),s.d(t,"l",(function(){return x}));const i="787103",n="820826",c="825969",a="858646",o="858646",r="858646",l="858646",d="858646",h="858646",u="858646",S="791026",f="858646",O="817611",T="787103",g="794537",b="824313",I="791026",p="926854",C="939623",m="816118",D="791870",L="812357",_="794563",v="939623",w="791037",A="820826",k="817611",B="865948",E="987283",y="1016694",R="1028155",x="1125484"}}]);