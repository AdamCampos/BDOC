(window.webpackJsonp=window.webpackJsonp||[]).push([[30],{"+kay":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("KgOV"),a=i("MYcD");class n extends s.a{constructor(){super(),this.classificationTreeInitialized=!1,this.name="classification",this.type=a.a.Classification}get selectedClassOBID(){return this.selectedClass?this.selectedClass.object.OBID:""}}},"T6+9":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i("ofXK"),a=i("0IaG"),n=i("NFeN"),r=i("8yBR"),o=i("l3mi"),c=i("F+hv"),l=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=l.Qb({type:e}),e.\u0275inj=l.Pb({factory:function(t){return new(t||e)},imports:[[s.c,r.e,n.b,c.a,a.e,o.a]]}),e})()},Wvjz:function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var s=i("LRne"),a=i("IzEk"),n=i("eIep"),r=i("biIz"),o=i("YwUS"),c=i("Z9D8"),l=i("LUpO"),d=i("C4gn"),h=i("xc+7"),f=i("z+VC"),m=i("osZK"),p=i("c+03"),b=i("jNCI"),S=i("Qi+w"),C=i("wpY2"),u=i("HLw3"),O=i("F8JD"),g=i("J7mc"),I=i("z0XX"),T=i("Ejbi"),v=i("NEWU"),_=i("41Lq"),R=i("PqRi"),E=i("11V9"),D=i("UVhF"),A=i("+kay"),F=i("czI3"),y=i("fXoL"),N=i("tyNb");let w=(()=>{class e extends F.a{constructor(e,t,i,s,a,n,r,o,c,l,d,h,f,m,p,b,S,C,u,O,g,I,T){super(e,t,i,s,a,n,r,o,c,l,d,h,f,m,p,b,S,C,u,O,g,T),this.route=e,this.router=t,this.featureSetService=i,this.sdaTranslateService=s,this.formService=a,this.exceptionService=n,this.loadingOverlayService=r,this.applicationSettingsService=o,this.formValidationService=c,this.batchRequestFactory=l,this.dataService=d,this.notificationService=h,this.modalService=f,this.pinsMenuService=m,this.elementRef=p,this.saveChangesDialogService=b,this.featureSetNavigationService=S,this.todoListService=C,this.fileUploaderService=u,this.referenceFileHandlingService=O,this.ensItemService=g,this.methodService=I,this.relatedItemService=T,this.CREATE_CLASS_OBJ_CLASSIFICATION_TREE_ERROR=this.sdaTranslateService.get("CREATE_CLASS_OBJ_CLASSIFICATION_TREE_ERROR","An error occurred getting classification tree"),this.CLASSIFICATION_PARAM_NOT_FOUND_ERROR=this.sdaTranslateService.get("CLASSIFICATION_OBJECT_NOT_FOUND_ERROR","Classification parameter not found on the method"),this.classificationStep=new A.a,this.showPropertySetter=!1,this.propertySetterArray=[],this.showClassificationTreeParameter=!0}initializeComponent(){super.initializeComponent(),this.paramsSubscription=this.route.params.subscribe(e=>{let t,i=[];e[v.k]&&this.setShowClassificationTreeParameter(e[v.k]),i=this.setInterfacesToFilter(e),t=this.setClassificationUID(e),this.setPropertySetterArray(e),t?this.initializeClassification(t,i):this.exceptionService.handleException(new c.a(this.CLASSIFICATION_PARAM_NOT_FOUND_ERROR,void 0,"base-wizard-create-class.component","initializeComponent"))})}ngOnDestroy(){this.paramsSubscription&&(this.paramsSubscription.unsubscribe(),this.paramsSubscription=void 0)}stepChange(e){this.OnStepChange(e)}isStepValid(){let e=!0;return this.stepName===this.classificationStep.name?this.classificationStep.selectedClass||(e=!1):this.stepName===this.fileUploadAndAttachStep.name&&(e=this.fileUploadAndAttachStep.isValid),e}onClassificationSelected(){this.classificationUpdated=!0,this.updateStepValidity(),this.wizardComponent&&this.wizardComponent.resetMandatoryStepsViewed()}onAddCreateObjectFromFormToChangeset(e){return this.formService.addCreateObjectFromFormToChangeset(e,this.formStep.form,this.classificationStep.selectedClass.object.OBID,this.crudOptionalItemsToInclude)}onCreateObjectFromForm(){return this.formService.createObjectFromForm(this.formStep.form,this.classificationStep.selectedClass.object.OBID,this.crudOptionalItemsToInclude,this.formStep.additionalRelDisplayItems,this.ensPreviewStep.ensNames)}onBeforeSetPropertyAndCreateObject(){}onBeforeCreateAndApply(){}onBeforeCreateAndFinish(){}onBeforeNextStep(e){}OnStepChange(e,t=!0){this.beforeStepChange(e),t&&this.validateCurrentStep(e)&&(this.onBeforeNextStep(e),this.stepName=e,e===this.ensPreviewStep.name&&this.formStep.form&&(this.ensForm=this.formStep.form)),this.updateStepValidity()}setShowClassificationTreeParameter(e){this.showClassificationTreeParameter="true"===e.toLowerCase()}setInterfacesToFilter(e){const t=e[v.s];let i=[];return"CreateClassObj"===t||"CreateClassObjFromClass"===t||"CreateClassObjAndLoad"===t?e[v.m]&&(i=e[v.m].split("~")):"CreateClassObjAndRel"===t&&e[v.r]&&(i=e[v.r].split("~")),i}setClassificationUID(e){let t="";return"CreateObjectFromSelectedObjects"===e[v.s]?(t=e[v.c],this.showClassificationTreeParameter=!1,this.relatedObjectRelDef=e[v.k]):t=e[v.l],t}setPropertySetterArray(e){const t=e[v.s];"CreateWizardClassObj"!==t&&"CreateObjectFromSelectedObjects"!==t||!e[v.d]||(this.showPropertySetter=!0,this.propertySetterArray=e[v.d].split("~"),this.invokeMethodName=this.propertySetterArray[2],this.invokeMethodName&&this.methodService.getMethodByUID(this.invokeMethodName).pipe(Object(a.a)(1),Object(n.a)(e=>e&&e.SPFGUIDisplayAs?this.propertySetterArray[1]=e.SPFGUIDisplayAs:Object(s.a)(void 0))).subscribe())}initializeClassification(e,t){this.wizardInitialized=!1,this.selectedClassOBID="",this.formService.getClassificationTree(e,t).subscribe(e=>{this.classificationStep.classificationTree=e,this.showClassificationTreeParameter?this.classificationStep.selectedClass=this.getSelectedClassification(e):e.length>0&&(this.classificationStep.selectedClass=e[0]),this.classificationStep.selectedClass?(this.classificationUpdated=!0,this.stepName=this.formStep.name,this.OnStepChange(this.formStep.name,!1)):(this.stepName=this.classificationStep.name,this.classificationStep.showStep=!0,this.updateStepValidity()),this.wizardInitialized=!0},e=>{this.exceptionService.handleException(new c.a(e,this.CREATE_CLASS_OBJ_CLASSIFICATION_TREE_ERROR,"base-wizard-create-class.component","initializeClassificationWizard")),this.wizardInitialized=!0})}getSelectedClassification(e){let t;return e&&1===e.length&&e[0].children&&0===e[0].children.length&&(t=e[0]),t}validateCurrentStep(e){let t=!0;if(this.stepName===this.formStep.name&&e!==this.classificationStep.name){const e=this.validateForm();e.length&&(t=!1,this.modalService.multiMessageAlert(e))}return t}beforeStepChange(e){e===this.formStep.name&&this.classificationUpdated&&(this.selectedClassOBID=this.classificationStep.selectedClassOBID,this.ensForm=void 0,this.ensPreviewStep.ensNames=[],this.formStep.form&&this.formStep.form.ENSConfigured&&this.ensItemService.unlockENSNames())}}return e.\u0275fac=function(t){return new(t||e)(y.Sb(N.a),y.Sb(N.g),y.Sb(h.a),y.Sb(T.a),y.Sb(D.a),y.Sb(l.a),y.Sb(p.a),y.Sb(o.a),y.Sb(E.a),y.Sb(u.a),y.Sb(g.a),y.Sb(_.a),y.Sb(b.a),y.Sb(S.a),y.Sb(y.l),y.Sb(C.a),y.Sb(d.a),y.Sb(r.a),y.Sb(m.a),y.Sb(f.a),y.Sb(R.a),y.Sb(O.a),y.Sb(I.a))},e.\u0275dir=y.Nb({type:e,features:[y.Bb]}),e})()},YgEk:function(e,t,i){"use strict";i.d(t,"a",(function(){return C}));var s=i("mrSG"),a=i("fXoL"),n=i("Z9D8"),r=i("LUpO"),o=i("Ejbi"),c=i("NEWU"),l=i("S2YF"),d=i("UVhF"),h=(i("TGZG"),i("tyNb")),f=i("ofXK"),m=i("TLn4"),p=i("qx4N");function b(e,t){if(1&e&&a.Tb(0,"sda-loading-indicator",2),2&e){const e=a.lc();a.sc("centered",!0)("message",e.LOADING_FORM_PLEASE_WAIT)}}function S(e,t){if(1&e){const e=a.Zb();a.Yb(0,"sda-form-controls",3),a.hc("formValueChanged",(function(t){return a.Kc(e),a.lc().onFormValueChanged(t)})),a.Xb()}if(2&e){const e=a.lc();a.sc("form",e.formStep.form)}}let C=(()=>{class e{constructor(e,t,i,s,n){this.route=e,this.formService=t,this.exceptionService=i,this.sdaTranslateService=s,this.relationshipMaintenanceService=n,this.CREATE_CLASS_OBJ_FORM_ERROR=this.sdaTranslateService.get("CREATE_CLASS_OBJ_FORM_ERROR","An error occurred getting create form for selected classification"),this.LOADING_FORM_PLEASE_WAIT=this.sdaTranslateService.get("LOADING_FORM_PLEASE_WAIT","Loading form, please wait..."),this.CREATE_OBJ_CREATE_FORM_ERROR=this.sdaTranslateService.get("CREATE_OBJ_CREATE_FORM_ERROR","An error occurred getting create form"),this.formInitializedEvent=new a.o,this.onGridTabsChanged=new a.o,this.clearObjectsToRelate=new a.o,this.formValueChanged=new a.o,this.formInitialized=!1,this.contextObjectsToRelate=[],this.route.params.subscribe(e=>{this.relDefToNavigateToTheClassDef=e[c.a],this.methodOBID=e[c.y],this.clientAPI=e[c.s],this.clientAPI&&("CreateObjAndRel"===this.clientAPI&&(this.relatedObjOBID=JSON.parse(e[c.u])[0]),"CreateClassObjAndRel"===this.clientAPI&&(this.reldefToNavigateToTheRelatedObject=e[c.m],this.reldefToNavigateToTheRelatedObject&&(this.reldefToNavigateToTheRelatedObject=this.reldefToNavigateToTheRelatedObject.replace("-","").replace("+","")),this.relatedObjOBID=JSON.parse(e[c.u])[0]),"CreateObjectFromSelectedObjects"===this.clientAPI&&(this.contextObjectsToRelate=JSON.parse(e[c.u])))})}ngOnInit(){this.relMaintenanceDisplayItemsSubscription=this.relationshipMaintenanceService.onRelMaintenanceDisplayItemsUpdated.subscribe(e=>{this.formStep.additionalRelDisplayItems=e}),this.gridTabsSubscription=this.relationshipMaintenanceService.onGridTabsUpdated.subscribe(e=>{e&&this.onGridTabsChanged.emit(e)})}ngOnDestroy(){this.relMaintenanceDisplayItemsSubscription&&this.relMaintenanceDisplayItemsSubscription.unsubscribe(),this.gridTabsSubscription&&this.gridTabsSubscription.unsubscribe()}ngOnChanges(e){e.selectedClassOBID&&e.selectedClassOBID.currentValue?this.getFormFromClassification():e.classDefUID&&e.classDefUID.currentValue&&this.getFormFromClassDefUID()}onFormValueChanged(e){this.formValueChanged.emit(e)}getFormFromClassification(){this.loadedFormOBID!==this.selectedClassOBID&&(this.formInitialized=!1,this.formService.getCreateFormFromClassification(this.selectedClassOBID,this.relDefToNavigateToTheClassDef,this.methodOBID,this.relatedObjOBID,this.reldefToNavigateToTheRelatedObject).subscribe(e=>{const t=this.formService.filterDisplayItemsByDisplayType(e,"RelationshipMaintenance"),{filteredItems:i=[]}=t,a=Object(s.a)(t,["filteredItems"]);this.setContextObjectsForFilteredItems(i),this.formStep.form=a,this.relationshipMaintenanceService.generateGridTabs(i),this.formInitialized=!0,this.formInitializedEvent.emit(!0),this.loadedFormOBID=this.selectedClassOBID},e=>{this.exceptionService.handleException(new n.a(e,this.CREATE_CLASS_OBJ_FORM_ERROR,"form-step.component","ngOnChanges"))}))}getFormFromClassDefUID(){this.formInitialized=!1,this.formService.getCreateForm(this.classDefUID,this.methodOBID,this.relatedObjOBID).subscribe(e=>{const t=this.formService.filterDisplayItemsByDisplayType(e,"RelationshipMaintenance"),{filteredItems:i=[]}=t,a=Object(s.a)(t,["filteredItems"]);this.setContextObjectsForFilteredItems(i),this.relationshipMaintenanceService.generateGridTabs(i),this.formStep.form=a,this.formInitialized=!0,this.formInitializedEvent.emit(!0)},e=>{this.exceptionService.handleException(new n.a(e,this.CREATE_OBJ_CREATE_FORM_ERROR,"form-step.component","ngOnChanges"))})}setContextObjectsForFilteredItems(e){if(this.contextObjectsToRelate&&this.relatedObjectRelDef&&e&&e.length>0){const t=e.find(e=>e.NavigationPath.substring(1)===this.relatedObjectRelDef.substring(1));t&&(t.ContextOBIDs=this.contextObjectsToRelate,this.clearObjectsToRelate.emit(!0))}}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(h.a),a.Sb(d.a),a.Sb(r.a),a.Sb(o.a),a.Sb(l.a))},e.\u0275cmp=a.Mb({type:e,selectors:[["sda-form-step-view"]],inputs:{selectedClassOBID:"selectedClassOBID",classDefUID:"classDefUID",formStep:"formStep",relatedObjectRelDef:"relatedObjectRelDef"},outputs:{formInitializedEvent:"formInitializedEvent",onGridTabsChanged:"onGridTabsChanged",clearObjectsToRelate:"clearObjectsToRelate",formValueChanged:"formValueChanged"},features:[a.Db([l.a]),a.Cb],decls:2,vars:2,consts:[[3,"centered","message",4,"ngIf"],[3,"form","formValueChanged",4,"ngIf"],[3,"centered","message"],[3,"form","formValueChanged"]],template:function(e,t){1&e&&(a.Sc(0,b,1,2,"sda-loading-indicator",0),a.Sc(1,S,1,1,"sda-form-controls",1)),2&e&&(a.sc("ngIf",!t.formInitialized),a.Eb(1),a.sc("ngIf",t.formInitialized))},directives:[f.t,m.a,p.a],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%}"]}),e})()},fWeB:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i("FvrZ"),a=i("fXoL"),n=i("8yBR"),r=i("Ejbi"),o=(i("+kay"),i("NFeN"));function c(e,t){if(1&e){const e=a.Zb();a.Yb(0,"mat-tree-node",5),a.Yb(1,"li",6),a.Tb(2,"div",7),a.Yb(3,"p",8),a.hc("click",(function(){a.Kc(e);const i=t.$implicit;return a.lc().selectClassification(i)})),a.Uc(4),a.Xb(),a.Xb(),a.Xb()}if(2&e){const e=t.$implicit,i=a.lc();a.Eb(1),a.sc("title",e.displayName),a.Fb("aria-label",e.displayName),a.Eb(2),a.Ib("classification-tree-name--disabled",!e.selectable)("classification-tree-name--selected",i.classificationStep.selectedClass==e),a.Eb(1),a.Wc(" ",e.displayName," ")}}function l(e,t){if(1&e){const e=a.Zb();a.Yb(0,"mat-nested-tree-node"),a.Yb(1,"li",9),a.Tb(2,"div",10),a.Yb(3,"div",11),a.Yb(4,"mat-icon",12),a.hc("click",(function(){a.Kc(e);const i=t.$implicit;return a.lc().toggleItem(i)})),a.Xb(),a.Yb(5,"p",8),a.hc("click",(function(){a.Kc(e);const i=t.$implicit;return a.lc().selectClassification(i)})),a.Uc(6),a.Xb(),a.Xb(),a.Yb(7,"ul",13),a.Ub(8,14),a.Xb(),a.Xb(),a.Xb()}if(2&e){const e=t.$implicit,i=a.lc();a.Eb(1),a.sc("title",e.displayName),a.Fb("aria-label",e.displayName),a.Eb(3),a.sc("svgIcon",i.treeControl.isExpanded(e)?"chevron-down":"chevron-right"),a.Eb(1),a.Ib("classification-tree-name--disabled",!e.selectable)("classification-tree-name--selected",i.classificationStep.selectedClass==e),a.Eb(1),a.Wc(" ",e.displayName," "),a.Eb(1),a.Ib("nested-node__list--hidden",!i.treeControl.isExpanded(e))}}let d=(()=>{class e{constructor(e){this.sdaTranslateService=e,this.classificationSelected=new a.o,this.CLASSIFICATION_HEADER=this.sdaTranslateService.get("CLASSIFICATION_HEADER","Classification"),this.dataSource=new n.f,this.treeControl=new s.k(e=>e.children)}ngOnInit(){this.dataSource.data=this.classificationStep.classificationTree,this.dataSource.data&&this.dataSource.data.length>0&&this.treeControl.expand(this.dataSource.data[0])}hasChild(e,t){return!!t.children&&t.children.length>0}selectClassification(e){e.selectable&&(this.classificationStep.selectedClass=e,this.classificationSelected.emit(!0))}toggleItem(e){this.treeControl.toggle(e)}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(r.a))},e.\u0275cmp=a.Mb({type:e,selectors:[["sda-classification-step-view"]],inputs:{classificationStep:"classificationStep"},outputs:{classificationSelected:"classificationSelected"},decls:6,vars:4,consts:[[1,"classification-header"],["name","Classification","novalidate","",1,"classification-form"],[1,"classification-tree",3,"dataSource","treeControl"],["matTreeNodeToggle","","class","leaf-node",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["matTreeNodeToggle","",1,"leaf-node"],[1,"mat-tree-node",3,"title"],[1,"classification-tree__indentation"],[1,"classification-tree-name",3,"click"],[1,"nested-node",3,"title"],[1,"nested-node__block-tracker"],[1,"mat-tree-node"],[1,"nested-node__icon",3,"svgIcon","click"],[1,"nested-node__list"],["matTreeNodeOutlet",""]],template:function(e,t){1&e&&(a.Yb(0,"div",0),a.Uc(1),a.Xb(),a.Yb(2,"form",1),a.Yb(3,"mat-tree",2),a.Sc(4,c,5,7,"mat-tree-node",3),a.Sc(5,l,9,10,"mat-nested-tree-node",4),a.Xb(),a.Xb()),2&e&&(a.Eb(1),a.Vc(t.CLASSIFICATION_HEADER),a.Eb(2),a.sc("dataSource",t.dataSource)("treeControl",t.treeControl),a.Eb(2),a.sc("matTreeNodeDefWhen",t.hasChild))},directives:[n.b,n.h,n.g,n.k,n.a,o.a,n.i],styles:[".classification-tree[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}.classification-tree-name[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%;background-color:#fff}.mat-tree-node[_ngcontent-%COMP%]{min-height:29px;margin-bottom:8px;overflow:hidden}.mat-tree-node.leaf-node[_ngcontent-%COMP%]{flex-grow:0;margin-bottom:0}.classification-header[_ngcontent-%COMP%]{display:flex;align-items:center;height:40px;padding:0 20px;background-color:#ebedf0;border:1px solid #ebedf0}.classification-form[_ngcontent-%COMP%]{height:100%;border:1px solid #ebedf0;border-top:none;overflow:hidden}.classification-tree[_ngcontent-%COMP%]{height:100%;padding:20px 50px}.classification-tree__indentation[_ngcontent-%COMP%]{flex-shrink:0;width:25px}.classification-tree-name[_ngcontent-%COMP%]{font-size:18px;cursor:pointer}.classification-tree-name[_ngcontent-%COMP%]:not(.classification-tree-name--disabled):hover{color:#02adff}.classification-tree-name--disabled[_ngcontent-%COMP%]{color:#cad0d7;cursor:not-allowed}.classification-tree-name--selected[_ngcontent-%COMP%]{color:#02adff;font-weight:500}.nested-node[_ngcontent-%COMP%]{position:relative}.nested-node__block-tracker[_ngcontent-%COMP%]{position:absolute;top:40px;left:10px;width:1px;height:calc(100% - 45px);background-color:#cad0d7}.nested-node__icon[_ngcontent-%COMP%]{flex-shrink:0;width:20px;height:20px;margin-right:5px;color:#cad0d7;cursor:pointer}.nested-node__list[_ngcontent-%COMP%]{padding-left:50px}.nested-node__list--hidden[_ngcontent-%COMP%]{display:none}"]}),e})()},oiMZ:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("ofXK"),a=i("F+hv"),n=i("uD/B"),r=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=r.Qb({type:e}),e.\u0275inj=r.Pb({factory:function(t){return new(t||e)},imports:[[s.c,a.a,n.a]]}),e})()}}]);