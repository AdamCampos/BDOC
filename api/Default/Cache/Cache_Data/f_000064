(window.webpackJsonp=window.webpackJsonp||[]).push([[169],{"2wkq":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e=[],t){this.menuOptionAPIs=e,this.menuOptionURL=t}}},"47Ra":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var i=n("fXoL"),a=n("ofXK"),s=n("3Pt+"),o=n("dO6S"),c=n("8OmR");function r(e,t){if(1&e&&(i.Tb(0,"p",3),i.mc(1,"sdaConvertURLsToHREF")),2&e){const e=i.lc();i.sc("innerHTML",i.nc(1,1,e.text),i.Lc)}}function l(e,t){if(1&e){const e=i.Zb();i.Yb(0,"textarea",4),i.hc("ngModelChange",(function(t){return i.Kc(e),i.lc().text=t})),i.Uc(1,"    "),i.Xb()}if(2&e){const e=i.lc();i.sc("sdaFocus",e.isEditable)("ngModel",e.text)}}let d=(()=>{class e{constructor(){this.textChange=new i.o,this.textValue=""}get text(){return this.textValue}set text(e){this.textValue=e,this.textChange.emit(this.textValue)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Mb({type:e,selectors:[["sda-card-template-content-view"]],inputs:{isEditable:"isEditable",text:"text"},outputs:{textChange:"textChange"},decls:3,vars:2,consts:[[1,"card-content"],["class","card-content__text",3,"innerHTML",4,"ngIf"],["class","card-content__textarea",3,"sdaFocus","ngModel","ngModelChange",4,"ngIf"],[1,"card-content__text",3,"innerHTML"],[1,"card-content__textarea",3,"sdaFocus","ngModel","ngModelChange"]],template:function(e,t){1&e&&(i.Yb(0,"div",0),i.Sc(1,r,2,3,"p",1),i.Sc(2,l,2,2,"textarea",2),i.Xb()),2&e&&(i.Eb(1),i.sc("ngIf",!t.isEditable),i.Eb(1),i.sc("ngIf",t.isEditable))},directives:[a.t,s.c,o.a,s.p,s.s],pipes:[c.a],styles:[".card-content__text[_ngcontent-%COMP%]{overflow-wrap:break-word;word-wrap:break-word;word-break:break-word;overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]{flex:1}.card-content__text[_ngcontent-%COMP%]{max-height:200px;font-size:14px;line-height:1.4;white-space:pre-line}.card-content__textarea[_ngcontent-%COMP%]{width:100%;min-height:200px;line-height:1.4;font-size:14px;white-space:pre-wrap;-webkit-appearance:none;appearance:none}.card-content__textarea[_ngcontent-%COMP%]:hover{border-color:#a9b4be}.card-content__textarea[_ngcontent-%COMP%]:focus{border-color:#02adff}.card-content__textarea[disabled][_ngcontent-%COMP%]{background:#fff;border-color:#fff}"]}),e})()},IsVC:function(e,t,n){"use strict";n.d(t,"d",(function(){return i})),n.d(t,"h",(function(){return a})),n.d(t,"r",(function(){return s})),n.d(t,"p",(function(){return o})),n.d(t,"o",(function(){return c})),n.d(t,"b",(function(){return r})),n.d(t,"a",(function(){return l})),n.d(t,"c",(function(){return d})),n.d(t,"e",(function(){return h})),n.d(t,"i",(function(){return f})),n.d(t,"k",(function(){return p})),n.d(t,"f",(function(){return u})),n.d(t,"n",(function(){return b})),n.d(t,"m",(function(){return g})),n.d(t,"j",(function(){return m})),n.d(t,"l",(function(){return I})),n.d(t,"g",(function(){return C})),n.d(t,"q",(function(){return _})),n.d(t,"s",(function(){return O})),n.d(t,"t",(function(){return S}));const i="920602",a="927830",s="899595",o="909862",c="909867",r="928384",l="938799",d="909866",h="905384",f="955371",p="955364",u="995219",b="1075193",g="909957",m="1016009",I="1082261",C="955370",_="1193820",O="1193821",S="1194089"},UH3R:function(e,t,n){"use strict";n.r(t),n.d(t,"ImpactAnalysisApiModule",(function(){return Ge}));var i=n("ofXK"),a=n("0IaG"),s=n("7EHt"),o=n("wZkO"),c=n("BMkO"),r=n("9Abt"),l=n("l3mi"),d=n("vZO+"),h=n("K9v4"),f=n("F+hv"),p=n("GDd0"),u=n("vIto"),b=n("mRuZ"),g=n("uJvP"),m=n("VG3f"),I=n("49qs"),C=n("C4gn"),_=n("+bLt"),O=n("m8I0"),S=(n("5G0X"),n("QkNQ")),v=n("ti2P"),R=n("PEjJ"),E=n("Ejbi"),D=n("fXoL"),T=n("LUpO"),w=n("c+03"),x=n("iwlc"),y=n("IsVC"),P=function(e){return e.EVERYTHING="EVERYTHING",e.CONFLICTSONLY="CONFLICTSONLY",e.IMPACTSONLY="IMPACTSONLY",e}({}),M=n("tk/3"),N=n("Cfvw"),A=n("LRne"),L=n("cp0P"),U=n("eIep"),k=n("vkgz"),j=n("5+tZ"),B=n("lJxs"),F=n("wN6G"),Y=n("Z9D8"),X=n("jNCI"),V=n("kx0E"),W=n("J7mc"),H=n("A3La"),G=n("hqbt"),z=n("JrsU"),q=n("41Lq");let K=(()=>{class e{constructor(e,t,n,i,a,s,o,c){this.dataService=e,this.securityService=t,this.dataFormatService=n,this.sdaTranslateService=i,this.crudService=a,this.modalService=s,this.notificationService=o,this.odataService=c}createConflictsURL(e,t,n,i){if(!(e&&e.length>0))return;const a=e.split("~"),s=a[0];let o="Objects?$filter=(("+this.formatRel(s)+"/any(x0:x0/OBID eq '"+t+"') and "+this.formatRel(s)+"/any(x0:x0/OBID ne '"+t+"'))";a.length>1&&a.forEach((e,n)=>{n>0&&(o=o+" or ("+this.formatRel(s)+"/any(x0:x0/OBID eq '"+t+"') and "+this.formatRel(e)+"/any(x0:x0/OBID ne '"+t+"'))")});let c="and (";return i.data.forEach((e,t)=>{c+="OBID eq '",c+=e.OBID,c+="'",t<i.data.length-1&&(c+=" or ")}),c+=")",o+") and contains(Interfaces, '"+n+"')"+c+"&$select=OBID&$count=true"}formatRel(e){if(e.startsWith("EDG_"))return e;if(e.startsWith("+"))return e.substring(1)+"_12";if(e.startsWith("-"))return e.substring(1)+"_21";throw new Y.a(void 0,this.sdaTranslateService.getFormatted("IMPACT_ANALYSIS_NO_REL_DIRECTION_ERROR","No direction supplied for relationship '{0}'",[e]))}terminateRelationship(e,t,n,i,a){return Object(N.a)(this.modalService.confirm(this.sdaTranslateService.get("REVIEW_SUPPORTING_INFORMATION_TERMINATE_REL_MODAL_TITLE","Terminate Relationship"),e)).pipe(Object(U.a)(e=>e?this.crudService.unrelate(t,n,i,a,!0):Object(A.a)(!1)),Object(k.a)(e=>{e&&this.notificationService.success(this.sdaTranslateService.get("REVIEW_SUPPORTING_INFORMATION_TERMINATE_REL_SUCCESS","Relationship successfully terminated"))}))}resolveImpactedItemRelDisplayNames(e){const t=[],n=[];this.isLoading=!0;const i=[];if(e&&e.forEach(e=>{e&&e.length>0&&i.push(...e.split("~"))}),i.length>0&&i.forEach(e=>{e.startsWith("EDG_")?n.push(e):t.push(e.substring(1))}),n.length>0){const e=n.map(e=>"(UID eq '"+e+"')").join(" or "),a={},s={};return this.dataService.get("Objects?$filter=contains(Interfaces, 'ISchemaObj') and ("+e+")&$select=UID,PathDefn,DisplayName").pipe(Object(j.a)(e=>{e.forEach(e=>{const n=e.PathDefn.split(","),i=n[n.length-1];t.push(i.substring(1)),s[e.UID]=e.DisplayName,a[e.UID]=i});const n=t.map(e=>"(UID eq '"+e+"')").join(" or ");return this.dataService.get("Objects?$filter=contains(Interfaces, 'ISchemaObj') and ("+n+")&$select=UID,Role1DisplayName,Role2DisplayName,UID1,UID2,Role2,Role1")})).pipe(Object(B.a)(e=>this.transformToDictionaryOfRelsAndEdges(e,i,a,s)),Object(k.a)(()=>this.isLoading=!1))}{const e=t.map(e=>"(UID eq '"+e+"')").join(" or ");return this.dataService.get("Objects?$filter=contains(Interfaces, 'ISchemaObj') and ("+e+")&$select=UID,Role1DisplayName,Role2DisplayName,UID1,UID2").pipe(Object(B.a)(e=>this.transformToDictionaryOfRelsAndEdges(e,i)),Object(k.a)(()=>this.isLoading=!1))}}getAnalysisObject(e,t,n){this.isLoading=!0,n||(n="CS_SPFObject");const i=this.dataService.get("Objects?$filter=(OBID eq '"+e+"')",t,!0),a=this.dataService.get("Objects?$filter=(OBID eq '"+e+"')",t,!1,n,new M.d({Prefer:'odata.include-annotations="*"'})),s=this.dataService.get("ExpandToUser?StartingObjOBID='"+e+"'&PathDefToExpand=['SDAProjectCommunicationFromUser_12','SDAChangeRequestOriginatingUser_12']");return Object(L.a)(i,a,s).pipe(Object(B.a)(e=>this.transformToAnalysisObject(e[0][0],e[1][0],e[2][0])),Object(k.a)(()=>this.isLoading=!1))}getItemsInConflict(e,t,n,i){return this.performConflictCheck(t,n,i,e).pipe(Object(B.a)(t=>(t.count>0&&t.value.forEach(t=>e.data.find(e=>e.OBID===t.OBID||e.Id===t.OBID).cellBadge={icon:"blockage",color:"#f56a0a",tooltip:this.sdaTranslateService.get("IMPACT_ANALYSIS_ITEM_HAS_CONFLICTS","Item has conflicts")}),e)))}performConflictCheck(e,t,n,i){const a=this.createConflictsURL(e,n,t,i);return this.odataService.get(a,void 0,!1,"",void 0,!0)}transformToDictionaryOfRelsAndEdges(e,t,n,i){const a={};return t.forEach(t=>{if(t.startsWith("EDG_")){const s=n[t];let o=e.find(e=>e.UID===s.substring(1));s.startsWith("+")?(o=e.find(e=>e.UID===s.substring(1)),a[t]={Reldef:i[t],EndInterface:o.UID2}):s.startsWith("-")&&(o=e.find(e=>e.UID===s.substring(1)),a[t]={Reldef:i[t],EndInterface:o.UID1})}else if(t.startsWith("+")){const n=e.find(e=>e.UID===t.substring(1));a[t]={Reldef:n.Role2DisplayName?n.Role2DisplayName:n.Role2,EndInterface:n.UID2}}else if(t.startsWith("-")){const n=e.find(e=>e.UID===t.substring(1));a[t]={Reldef:n.Role1DisplayName?n.Role1DisplayName:n.Role1,EndInterface:n.UID1}}}),a}transformToAnalysisObject(e,t,n){return{OBID:e.OBID,Config:e.Config,Name:e.Name,Originator:this.parseOriginator(n),Details:this.parseDetails(e),Title:e.Description,Status:this.parseStatus(e),ColumnSet:this.parseColumnSet(t)}}parseColumnSet(e){let t,n="",i="";const a=[];for(t in e)e.hasOwnProperty(t)&&t.startsWith("CI_")&&t.indexOf("@")<=0&&e[t]&&(n=this.formatDisplayItem(e[t],e[t+"@Intergraph.SPF.Server.API.Model.ScopedById"]),i=this.formDisplayItemDisplayName(e,t),a.push(new z.a(i,n)));return a}formDisplayItemDisplayName(e,t){const n=e[t+"@Intergraph.SPF.Server.API.Model.DisplayName"];return n&&n.length>0?n:t.substring(3)}formatDisplayItem(e,t){let n="";switch(t){case"Edm.DateTimeOffset":n=this.dataFormatService.convertToLocalDateTimeFormat(e);break;case"Edm.Date":n=this.dataFormatService.convertToLocalDateFormat(e);break;default:n=e}return n}parseStatus(e){return e.SPFXmtlIssueState?e.SPFXmtlIssueState:e.SDAChngReqStatus?e.SDAChngReqStatus:""}parseDetails(e){return e.SDAProjComsDetails?e.SDAProjComsDetails:e.SDAChngReqDetails?e.SDAChngReqDetails:""}parseOriginator(e){return e?{OBID:e.Value.OBID||"",DisplayName:e.Value.SPFLoginName||"",IsCurrentUser:this.isCurrentUser(e.Value.SPFLoginName)||!1,Disciplines:e.Value.Disciplines||[]}:{OBID:"",DisplayName:"",IsCurrentUser:!1,Disciplines:[]}}isCurrentUser(e){return e.toLowerCase()===this.securityService.getUserId().toLowerCase()}}return e.\u0275fac=function(t){return new(t||e)(D.dc(W.a),D.dc(G.a),D.dc(V.a),D.dc(E.a),D.dc(F.a),D.dc(X.a),D.dc(q.a),D.dc(H.a))},e.\u0275prov=D.Ob({token:e,factory:e.\u0275fac}),e})();var $=n("yVuV"),Z=n("oe3R"),J=n("2wkq"),Q=n("zewe"),ee=n("xc+7"),te=n("ZLgS"),ne=n("wpY2"),ie=n("dEBh"),ae=n("b/tf"),se=n("+eYH"),oe=n("HXFx"),ce=n("f9sw"),re=n("gBNM"),le=n("zFBM"),de=n("+Pa6"),he=n("niUd"),fe=n("t1Kn"),pe=n("47Ra"),ue=n("BLbD"),be=n("TLn4"),ge=n("zCQ7"),me=n("GW71"),Ie=n("7OzN");const Ce=["relPicker"],_e=["resizePanel"],Oe=["iiGrid"];function Se(e,t){1&e&&D.Tb(0,"sda-loading-indicator",18),2&e&&D.sc("centered",!0)}function ve(e,t){if(1&e){const e=D.Zb();D.Yb(0,"sda-button",25),D.hc("onClick",(function(t){return D.Kc(e),D.lc(2).relate(t)})),D.Xb()}if(2&e){const e=D.lc(2);D.sc("displayName",e.APPLY)("isDisabled",!e.canRelate())}}function Re(e,t){if(1&e&&(D.Yb(0,"p",26),D.Uc(1),D.Xb()),2&e){const e=D.lc(2);D.Eb(1),D.Wc(" ",e.NO_RESULTS_FOUND," ")}}function Ee(e,t){if(1&e){const e=D.Zb();D.Yb(0,"sda-tabbed-grid-view",27),D.hc("onTabFilteringComplete",(function(t){return D.Kc(e),D.lc(2).onImpactsTabFilteringComplete(t)})),D.Xb()}if(2&e){const e=D.lc(2);D.sc("openInfoMapInNewTab",e.openInfoMapInNewTab)("tabs",e.ii)("showItemCount",!0)("hideEmptyTabs",!0)}}function De(e,t){if(1&e){const e=D.Zb();D.Yb(0,"mat-expansion-panel",19),D.hc("expandedChange",(function(t){return D.Kc(e),D.lc().expandImpacts=t})),D.Yb(1,"mat-expansion-panel-header",20),D.Yb(2,"mat-panel-title",21),D.Uc(3),D.Sc(4,ve,1,2,"sda-button",22),D.Xb(),D.Xb(),D.Sc(5,Re,2,1,"p",23),D.Sc(6,Ee,1,4,"sda-tabbed-grid-view",24),D.Xb()}if(2&e){const e=D.lc();D.sc("expanded",e.expandImpacts),D.Eb(3),D.Wc(" ",e.IMPACT_ANALYSIS_IMPACTS_TAB_HEADER_TITLE," "),D.Eb(1),D.sc("ngIf",!e.viewOnly&&e.expandImpacts),D.Eb(1),D.sc("ngIf",e.showNoItemsWarning),D.Eb(1),D.sc("ngIf",!e.showNoItemsWarning&&e.ii.length>0)}}function Te(e,t){if(1&e&&(D.Yb(0,"p",26),D.Uc(1),D.Xb()),2&e){const e=D.lc(2);D.Eb(1),D.Wc(" ",e.NO_RESULTS_FOUND," ")}}function we(e,t){if(1&e){const e=D.Zb();D.Yb(0,"sda-tabbed-grid-view",27),D.hc("onTabFilteringComplete",(function(t){return D.Kc(e),D.lc(2).onConflictTabFilteringComplete(t)})),D.Xb()}if(2&e){const e=D.lc(2);D.sc("openInfoMapInNewTab",e.openInfoMapInNewTab)("tabs",e.conflicts)("showItemCount",!0)("hideEmptyTabs",!0)}}function xe(e,t){if(1&e){const e=D.Zb();D.Yb(0,"mat-expansion-panel",19),D.hc("expandedChange",(function(t){return D.Kc(e),D.lc().expandConflicts=t})),D.Yb(1,"mat-expansion-panel-header",20),D.Yb(2,"mat-panel-title",21),D.Uc(3),D.Xb(),D.Xb(),D.Sc(4,Te,2,1,"p",23),D.Sc(5,we,1,4,"sda-tabbed-grid-view",24),D.Xb()}if(2&e){const e=D.lc();D.sc("expanded",e.expandConflicts),D.Eb(3),D.Vc(e.IMPACT_ANALYSIS_CONFLICTS_TAB_HEADER_TITLE),D.Eb(1),D.sc("ngIf",e.showNoConflictsWarning),D.Eb(1),D.sc("ngIf",!e.showNoConflictsWarning&&e.ii.length>0)}}function ye(e,t){if(1&e&&D.Tb(0,"sda-relationship-error",30),2&e){const e=D.lc(2);D.sc("relDictionary",e.relationshipValidation)}}function Pe(e,t){if(1&e){const e=D.Zb();D.Yb(0,"uxt-modal",28),D.hc("submit",(function(){return D.Kc(e),D.lc().onAfterHideValidation()})),D.Sc(1,ye,1,1,"sda-relationship-error",29),D.Xb()}if(2&e){const e=D.lc();D.sc("isOpen",e.showValidation)("titleText",e.REL_BUILDER_VALIDATION_ERRORS)("showCancelButton",!1),D.Eb(1),D.sc("ngIf",e.relationshipValidation&&e.showValidation)}}function Me(e,t){if(1&e){const e=D.Zb();D.Yb(0,"sda-relationship-picker",33,34),D.hc("onFinish",(function(t){return D.Kc(e),D.lc(2).onRelPickerSuccess(t)})),D.Xb()}if(2&e){const e=D.lc(2);D.sc("relDictionary",e.validatedRelationships)}}function Ne(e,t){if(1&e){const e=D.Zb();D.Yb(0,"uxt-modal",31),D.hc("cancel",(function(){return D.Kc(e),D.lc().onAfterHideConfirmation()}))("submit",(function(){return D.Kc(e),D.lc().onRelPickerConfirm()})),D.Sc(1,Me,2,1,"sda-relationship-picker",32),D.Xb()}if(2&e){const e=D.lc();D.sc("isOpen",e.showRelPicker)("titleText",e.relationshipPickerTitle),D.Eb(1),D.sc("ngIf",e.validatedRelationships&&e.showRelPicker)}}let Ae=(()=>{class e{constructor(e,t,n,i,a,s,o,c,r,l,d,h,f,p,u,b){this.dataService=e,this.sdaTranslateService=t,this.objectDetailsService=n,this.componentFactoryResolver=i,this.injector=a,this.relationshipBuilderService=s,this.loadingOverlayService=o,this.featureSetService=c,this.featureSetNavigationService=r,this.exceptionService=l,this.modalService=d,this.notificationService=h,this.saveChangesDialogService=f,this.windowService=p,this.preferencesService=u,this.changeDetectRef=b,this.isSIOObject=!1,this.viewOnly=!1,this.mocRelationshipLayout=ce.a.List,this.ii=[],this.conflicts=[],this.EXPANSION_TITLE=this.sdaTranslateService.get("IMPACT_ANALYSIS_EXPANSION_IMPACTS_TAB_HEADER_TITLE","Impacted Items"),this.IMPACT_ANALYSIS_CONFLICTS_TAB_HEADER_TITLE=this.sdaTranslateService.get("IMPACT_ANALYSIS_CONFLICTS_TAB_HEADER_TITLE","Potential Conflicts"),this.IMPACT_ANALYSIS_IMPACTS_TAB_HEADER_TITLE=this.sdaTranslateService.get("IMPACT_ANALYSIS_IMPACTS_TAB_HEADER_TITLE","Potential Impacts"),this.APPLY=this.sdaTranslateService.get("APPLY","Apply"),this.NO_RESULTS_FOUND=this.sdaTranslateService.get("NO_RESULTS_FOUND","No results found..."),this.REL_BUILDER_VALIDATION_ERRORS=this.sdaTranslateService.get("REL_BUILDER_VALIDATION_ERRORS","Validation Errors"),this.showNoItemsWarning=!0,this.showNoConflictsWarning=!0,this.selectedTabIndex=-1,this.expandImpacts=!1,this.expandConflicts=!1,this.showContentOverlay=!1,this.resPanelMinWidth=400,this.smallDeviceMode=!1,this.mode=P,this.COLLAPSED_CLIENT_BREAKPOINT=850,this.DEFAULT_TAG_INTERFACE="IFDWTag",this.DEFAULT_DOC_INTERFACE="IFDWDocumentVersion",this.DEFAULT_MOC_INTERFACE="ISDAChangeRequest",this.DEFAULT_SIO_INTERFACE="ISIOObject",this.NO_VALID_REL_DEFS=this.sdaTranslateService.get("REL_BUILDER_NO_VALID_REL_DEFS","It was not possible to create a relationship between the objects selected. Either no relationship definition exists, a relationship condition has not been met, or cardinality issues would prevent creation."),this.RELATION_SUCCESS=this.sdaTranslateService.get("REL_BUILDER_RELATION_SUCCESS","Relationship successfully created"),this.preferencesSubscription=this.preferencesService.preferencesChanged$.subscribe(e=>{e&&(this.openInfoMapInNewTab=!1!==e.SDXOpsOpenInfoMapInNewTab)})}onSideBarResized(e){this.resizeSidebar(e)}updaterResizePanelArgs(){this.resizePanel.resetMinValue(this.windowService.Window.innerWidth<this.COLLAPSED_CLIENT_BREAKPOINT?0:this.resPanelMinWidth),this.smallDeviceMode=this.windowService.Window.innerHeight<700,this.smallDeviceMode&&this.expandConflicts&&this.expandImpacts&&(this.expandImpacts=!1)}ngOnDestroy(){this.preferencesSubscription&&this.preferencesSubscription.unsubscribe(),this.dataServiceSubscription&&this.dataServiceSubscription.unsubscribe()}ngAfterViewChecked(){this.changeDetectRef.detectChanges()}ngOnChanges(){this.dataServiceSubscription=this.dataService.resolveImpactedItemRelDisplayNames([this.tagRelDef,this.documentRelDef,this.mocRelDef,this.tagRelationshipsToExpand,this.documentRelationshipsToExpand,this.mocRelationshipsToExpand,this.documentConflictRelationshipsToExpand,this.tagConflictRelationshipsToExpand,this.mocConflictRelationshipsToExpand]).subscribe(e=>{this.relationshipsToExpandWithName=e,this.refreshRelatedItems(),this.updaterResizePanelArgs()})}onViewObjectDetails(e,t){this.loadingOverlayService.showLoadingOverlay(),void 0!==this.impactConflictMode?this.objectDetailsService.showObjectDetailsFormInNewTab(e,t):this.objectDetailsService.showObjectDetailsModal(this.componentFactoryResolver,this.injector,new se.a(e,"",t)),this.loadingOverlayService.hideLoadingOverlay()}canRelate(){return this.ii.some(e=>e.selectedRows.length>0)}relate(e){const t=this.ii.map(e=>e.selectedRows).reduce((e,t)=>e.concat(t)),n=new Array;this.documentRelDef&&this.documentRelDef.length>0&&n.push(this.documentRelDef.substring(1)),this.tagRelDef&&this.tagRelDef.length>0&&n.push(this.tagRelDef.substring(1)),this.mocRelDef&&this.mocRelDef.length>0&&n.push(this.mocRelDef.substring(1)),this.relationshipBuilderService.getRelsForTarget(this.ao.OBID,t,n).subscribe(e=>{this.validateRelation(e)&&(e.relsExist?(this.relationshipPickerTitle=this.sdaTranslateService.getFormatted("REL_BUILDER_RELATE_ITEMS_TO-NAME","Relate items to: {0}",[this.ao.Name]),this.validatedRelationships=e,this.showRelPicker=!0):this.modalService.alert(this.NO_VALID_REL_DEFS))}),e.stopPropagation()}onRelPickerConfirm(){this.relPicker.ok()}onRelPickerSuccess(e){if(this.validatedRelationships.sourceObjects.filter(e=>e.Rels&&e.Rels.length>0).length===e){this.notificationService.success(1===e?this.RELATION_SUCCESS:this.sdaTranslateService.getFormatted("REL_BUILDER_RELATIONS_SUCCESS-NO_RELS","{0} relationships successfully created",[e.toString()]));const t=this.ii.find(e=>e.isSelected);this.refreshSelectedTab(t),this.dirtyRelatedTabs(),this.onAfterHideConfirmation()}}onAfterHideValidation(){this.relationshipValidation=void 0,this.showValidation=!1}onAfterHideConfirmation(){this.validatedRelationships=void 0,this.showRelPicker=!1}canChangeGrid(){let e=Promise.resolve(!0);return this.ii.every(e=>0===e.selectedRows.length)||(e=this.saveChangesDialogService.showDialog(this.sdaTranslateService.get("IMPACT_ANALYSIS_UNSAVED_CHANGES_WANRING","Are you sure you want to continue? Any unsaved changes will be lost.")).then(e=>(e&&this.ii.forEach(e=>e.selectedRows=[]),Promise.resolve(e)))),e}onTabChanging(e){e.stopPropagation(),this.canChangeGrid().then(e=>{e&&(this.selectedTabIndex=0===this.selectedTabIndex?1:0)})}onConflictTabFilteringComplete(e){this.showNoConflictsWarning=!e,this.onTabFilteringComplete(!this.showNoItemsWarning,e)}onImpactsTabFilteringComplete(e){this.showNoItemsWarning=!e,this.onTabFilteringComplete(e,!this.showNoConflictsWarning)}onTabFilteringComplete(e,t){this.impactConflictMode!==P.EVERYTHING?(this.expandConflicts=!0,this.expandImpacts=!0):(this.expandConflicts=t||!e,this.expandImpacts=!t&&!this.smallDeviceMode)}dirtyRelatedTabs(){this.iiGrid.objectChanged()}refreshSelectedTab(e){e&&(e.selectedRows=[],e.refresh())}resizeSidebar(e){this.showContentOverlay=this.windowService.Window.innerWidth<this.COLLAPSED_CLIENT_BREAKPOINT&&e>0}refreshRelatedItems(){let e=[];const t=this.isSIOObject?this.DEFAULT_SIO_INTERFACE:this.DEFAULT_TAG_INTERFACE;if(this.tagRelDef&&this.tagRelDef.length>0&&(e=[this.createRelatedItemTab(this.sdaTranslateService.get("TAGS","Tags"),this.tagRelDef,t,this.tagRelationshipsToExpand,this.tagConflictRelationshipsToExpand)]),this.documentRelDef&&this.documentRelDef.length>0){const t=this.createRelatedItemTab(this.sdaTranslateService.get("DOCUMENTS","Documents"),this.documentRelDef,this.DEFAULT_DOC_INTERFACE,this.documentRelationshipsToExpand,this.documentConflictRelationshipsToExpand);e.push(t)}if(this.mocRelDef&&this.mocRelDef.length>0){const t=this.createRelatedItemTab(this.sdaTranslateService.get("CHANGEREQUESTS","Change Requests"),this.mocRelDef,this.DEFAULT_MOC_INTERFACE,this.mocRelationshipsToExpand,this.mocConflictRelationshipsToExpand);e.push(t)}this.conflicts=[],this.ii=[],this.expandConflicts=!1,this.expandImpacts=!1,this.ao.Relationships=e}createRelatedItemTab(e,t,n,i,a){const s=new re.a(e,"Objects('"+this.ao.OBID+"')/"+this.dataService.formatRel(t)+"?$filter=contains(Interfaces,'"+n+"')&$count=true",this.config);return s.isRowSelectable=!0,s.showInteractiveColumnsFirst=!0,s.apiContextMenu=new J.a(this.fetchMenuOptions()),s.endInterfaceUID=this.relationshipsToExpandWithName[t].EndInterface,s.interactiveColumns=this.viewOnly?[]:[{icon:"fa-trash",action:e=>this.unRelateItem(e,t)}],s.onRowSelectedChanged=e=>{this.impactConflictMode!==P.EVERYTHING&&this.changeDetectRef.detectChanges(),this.createRelatedItemTabs(e,i),this.createConflictedItemsTabs(e,a)},s.onNoResultsFound=()=>{this.showNoConflictsWarning=!0,this.showNoItemsWarning=!0},s.onCellClicked=e=>this.onViewObjectDetails(e.object.OBID,e.object.Config),s.onBeforeTabLoseFocus=()=>this.canChangeGrid(),s.onPageLoadedCallback=e=>this.dataService.getItemsInConflict(e,a,n,this.ao.OBID),s}unRelateItem(e,t){this.dataService.terminateRelationship(this.sdaTranslateService.getFormatted("REVIEW_SUPPORTING_INFORMATION_TERMINATE_REL_MODAL_MSG-NAME","Are you sure you want to terminate the relationship to {0}?",[e?e.Name:this.ao.Name]),this.ao.OBID,e.OBID,t.substring(1),t.startsWith("+")).subscribe(e=>{if(e){const e=this.ao.Relationships.find(e=>e.isSelected);this.refreshSelectedTab(e)}})}createConflictedItemsTabs(e,t){const n=[];e.length>0&&t&&t.length>0?(this.showNoConflictsWarning=!1,t.split("~").forEach(t=>{const i=new re.a(this.relationshipsToExpandWithName[t].Reldef,"Objects('"+e[0]+"')/"+this.dataService.formatRel(t)+"?$filter=OBID ne '"+this.ao.OBID+"'&$count=true",this.config);i.endInterfaceUID=this.relationshipsToExpandWithName[t].EndInterface,i.apiContextMenu=new J.a(this.viewOnly?[]:[new Z.a("SDAImpactAnalysis")]),i.onCellClicked=void 0!==this.impactConflictMode?e=>this.onViewConflictObjectDetails(e.object.OBID,e.object.Config,!0):e=>this.onViewConflictObjectDetails(e.object.OBID,e.object.Config),i.isFilterable="menu",i.onFormatUrlRequest=e=>this.formatConfigUrl(e),n.push(i)})):(this.showNoConflictsWarning=!0,this.expandConflicts=!1),this.conflicts=n}onViewConflictObjectDetails(e,t,n=!1){this.loadingOverlayService.showLoadingOverlay();const i=new se.a(e,"",t);this.featureSetService.getFeatureSetsByObjectByClientApi([i],["SCLBCommunicationManagementDetails","SOPSCommunicationManagementDetails"]).subscribe(e=>{e.length>0&&e[0].object?(e[0].object.contextObjectOBIDs=[i.obid],e[0].object.objects=[i],this.featureSetNavigationService.navigateToFeature(e[0].object,n)):void 0!==this.impactConflictMode?this.objectDetailsService.showObjectDetailsFormInNewTab(i.obid,i.config):this.objectDetailsService.showObjectDetailsModal(this.componentFactoryResolver,this.injector,i),this.loadingOverlayService.hideLoadingOverlay()},e=>{this.exceptionService.handleException(e),this.loadingOverlayService.hideLoadingOverlay()})}createRelatedItemTabs(e,t){const n=[];if(e.length>0&&t&&t.length>0){let i,a,s,o;this.showNoItemsWarning=!1,this.tagRelDef&&this.documentRelDef&&this.mocRelDef?(i=this.dataService.formatRel(this.reverseRelDirection(this.tagRelDef)),a=this.dataService.formatRel(this.reverseRelDirection(this.documentRelDef)),s=this.dataService.formatRel(this.reverseRelDirection(this.mocRelDef)),o=this.tagDocMocRelDef(i,a,s)):this.tagRelDef&&this.documentRelDef?(i=this.dataService.formatRel(this.reverseRelDirection(this.tagRelDef)),a=this.dataService.formatRel(this.reverseRelDirection(this.documentRelDef)),o=this.tagDocMocRelDef(i,a)):this.tagRelDef?(i=this.dataService.formatRel(this.reverseRelDirection(this.tagRelDef)),o=this.singleReldef(i)):this.documentRelDef?(a=this.dataService.formatRel(this.reverseRelDirection(this.documentRelDef)),o=this.singleReldef(a)):this.mocRelDef&&(s=this.dataService.formatRel(this.reverseRelDirection(this.mocRelDef)),o=this.singleReldef(s)),t.split("~").forEach(t=>{const i=this.relationshipsToExpandWithName[t];let a="Objects('"+e[0]+"')/"+this.dataService.formatRel(t);a+=o+"&$count=true";const s=new re.a(i.Reldef,a,this.config);s.endInterfaceUID=i.EndInterface,s.showRowSelectionCheckbox=!this.viewOnly,s.isRowSelectable=!this.viewOnly,s.onCellClicked=e=>this.onViewObjectDetails(e.object.OBID,e.object.Config),s.isFilterable="menu",s.onFormatUrlRequest=e=>this.formatConfigUrl(e),n.push(s)})}else this.showNoItemsWarning=!0,this.expandImpacts=!1;this.ii=n}tagDocMocRelDef(e,t,n){let i;return i="?$filter= not "+e+"/any(x0:x0/OBID eq '"+this.ao.OBID+"') and not "+t+"/any(x0:x0/OBID eq '"+this.ao.OBID+"')",n&&(i+=" and not "+n+"/any(x0:x0/OBID eq '"+this.ao.OBID+"')"),i}singleReldef(e){let t;return t="?$filter= not "+e+"/any(x0:x0/OBID eq '"+this.ao.OBID+"')",t}formatConfigUrl(e){let t=e.odataUrl.slice(0);if(t.indexOf("?")>-1){const n=Object($.e)(e.state);e.state.filter&&e.state.filter.filters.length>0?(t+=""+n.replace("$filter="," and "),t=t.replace("&$count=true","")):t+="&"+n.replace("$filter="," and ")}else t+="?"+Object($.e)(e.state);return-1===t.indexOf("$count")&&(t+="&$count=true"),t}validateRelation(e){return!(!e||(e.existingRelation||e.conditionNotSatisfied||e.cardinalityError||e.interfaceAccess)&&(this.relationshipValidation=e,this.showValidation=!0,1))}fetchMenuOptions(){const e=new Array;return this.menuOptions&&this.menuOptions.split(",").forEach(t=>{-1===t.search("~")?e.push(new Z.a(t)):e.push(new Z.a(t.split("~")[0],[new z.a("apiParam3",t.split("~")[1])]))}),e}reverseRelDirection(e){if(void 0!==e&&e.length>0)switch(e.substring(0,1)){case"+":return"-"+e.substring(1);case"-":return"+"+e.substring(1)}return e}}return e.\u0275fac=function(t){return new(t||e)(D.Sb(K),D.Sb(E.a),D.Sb(Q.a),D.Sb(D.j),D.Sb(D.s),D.Sb(de.a),D.Sb(w.a),D.Sb(ee.a),D.Sb(C.a),D.Sb(T.a),D.Sb(X.a),D.Sb(q.a),D.Sb(ne.a),D.Sb(ie.a),D.Sb(ae.a),D.Sb(D.h))},e.\u0275cmp=D.Mb({type:e,selectors:[["sda-impact-analysis-impacts"]],viewQuery:function(e,t){var n;1&e&&(D.bd(Ce,!0),D.bd(_e,!0),D.bd(Oe,!0)),2&e&&(D.Gc(n=D.ic())&&(t.relPicker=n.first),D.Gc(n=D.ic())&&(t.resizePanel=n.first),D.Gc(n=D.ic())&&(t.iiGrid=n.first))},hostBindings:function(e,t){1&e&&D.hc("resize",(function(){return t.updaterResizePanelArgs()}),!1,D.Jc)},inputs:{ao:"ao",documentRelDef:"documentRelDef",documentRelationshipsToExpand:"documentRelationshipsToExpand",tagRelDef:"tagRelDef",tagRelationshipsToExpand:"tagRelationshipsToExpand",mocRelDef:"mocRelDef",mocRelationshipsToExpand:"mocRelationshipsToExpand",mocConflictRelationshipsToExpand:"mocConflictRelationshipsToExpand",documentConflictRelationshipsToExpand:"documentConflictRelationshipsToExpand",isSIOObject:"isSIOObject",tagConflictRelationshipsToExpand:"tagConflictRelationshipsToExpand",viewOnly:"viewOnly",menuOptions:"menuOptions",config:"config",impactConflictMode:"impactConflictMode"},features:[D.Cb],decls:20,vars:24,consts:[[3,"defaultValue","minValue","maxValue","onResized"],["resizePanel",""],[1,"impact-sidebar","sda-resize-panel-content"],[1,"impact-sidebar__content"],[1,"sda-card-header"],[3,"user","header","description","additionalInformation","badge","descriptionClicked"],[1,"sda-card-body"],[3,"text"],[1,"sda-card-footer"],[3,"toggle","position"],[3,"centered",4,"ngIf"],[3,"tabs","layout","hideEmptyTabs","openInfoMapInNewTab","showItemCount"],["iiGrid",""],[1,"impact-content"],[1,"impact-content__accordions",3,"multi"],["class","accordion--white",3,"expanded","expandedChange",4,"ngIf"],[3,"isOpen","titleText","showCancelButton","submit",4,"ngIf"],[3,"isOpen","titleText","cancel","submit",4,"ngIf"],[3,"centered"],[1,"accordion--white",3,"expanded","expandedChange"],["expandedHeight","48px"],[1,"impact-content__title"],["class","impact-content__btn",3,"displayName","isDisabled","onClick",4,"ngIf"],["class","impact-content__message",4,"ngIf"],[3,"openInfoMapInNewTab","tabs","showItemCount","hideEmptyTabs","onTabFilteringComplete",4,"ngIf"],[1,"impact-content__btn",3,"displayName","isDisabled","onClick"],[1,"impact-content__message"],[3,"openInfoMapInNewTab","tabs","showItemCount","hideEmptyTabs","onTabFilteringComplete"],[3,"isOpen","titleText","showCancelButton","submit"],[3,"relDictionary",4,"ngIf"],[3,"relDictionary"],[3,"isOpen","titleText","cancel","submit"],[3,"relDictionary","onFinish",4,"ngIf"],[3,"relDictionary","onFinish"],["relPicker",""]],template:function(e,t){1&e&&(D.Yb(0,"sda-resize-panel",0,1),D.hc("onResized",(function(e){return t.onSideBarResized(e)})),D.Yb(2,"section",2),D.Yb(3,"sda-card-view",3),D.Yb(4,"div",4),D.Yb(5,"sda-card-template-user-info-view",5),D.hc("descriptionClicked",(function(){return t.onViewObjectDetails(t.ao.OBID,t.ao.Config)})),D.Xb(),D.Xb(),D.Yb(6,"div",6),D.Tb(7,"sda-card-template-content-view",7),D.Xb(),D.Yb(8,"div",8),D.Tb(9,"sda-blanket",9),D.Sc(10,Se,1,1,"sda-loading-indicator",10),D.Tb(11,"sda-tabbed-grid-view",11,12),D.Xb(),D.Xb(),D.Xb(),D.Xb(),D.Yb(13,"div",13),D.Yb(14,"mat-accordion",14),D.Sc(15,De,7,5,"mat-expansion-panel",15),D.Sc(16,xe,6,4,"mat-expansion-panel",15),D.Xb(),D.Tb(17,"sda-blanket",9),D.Xb(),D.Sc(18,Pe,2,4,"uxt-modal",16),D.Sc(19,Ne,2,3,"uxt-modal",17)),2&e&&(D.sc("defaultValue",500)("minValue",t.resPanelMinWidth)("maxValue",500),D.Eb(5),D.sc("user",t.ao.Originator)("header",t.ao.Title)("description",t.ao.Name)("additionalInformation",t.ao.ColumnSet)("badge",t.ao.Status),D.Eb(2),D.sc("text",t.ao.Details),D.Eb(2),D.sc("toggle",t.dataService.isLoading)("position","absolute"),D.Eb(1),D.sc("ngIf",t.dataService.isLoading),D.Eb(1),D.sc("tabs",t.ao.Relationships)("layout",t.mocRelationshipLayout)("hideEmptyTabs",!0)("openInfoMapInNewTab",t.openInfoMapInNewTab)("showItemCount",!0),D.Eb(3),D.sc("multi",!t.smallDeviceMode),D.Eb(1),D.sc("ngIf",t.impactConflictMode!==t.mode.CONFLICTSONLY),D.Eb(1),D.sc("ngIf",t.impactConflictMode!==t.mode.IMPACTSONLY),D.Eb(1),D.sc("toggle",t.showContentOverlay)("position","absolute"),D.Eb(1),D.sc("ngIf",t.relationshipValidation),D.Eb(1),D.sc("ngIf",t.validatedRelationships))},directives:[te.a,he.a,fe.a,pe.a,ue.a,i.t,oe.a,s.a,be.a,s.c,s.g,s.h,ge.a,me.a,Ie.a,le.a],styles:["[_nghost-%COMP%]{position:relative;display:flex;height:100%;min-height:0}[_nghost-%COMP%]     .mat-tab-body-content{overflow:hidden}@media screen and (max-width:53.125em){[_nghost-%COMP%]   sda-resize-panel[_ngcontent-%COMP%]{position:absolute;z-index:200!important}}.impact-sidebar[_ngcontent-%COMP%]{display:flex;width:100%;min-width:0;margin:15px}.impact-sidebar[_ngcontent-%COMP%]     .card{height:100%;margin:0;padding:0}.impact-sidebar[_ngcontent-%COMP%]     .card .card-header__content{padding:15px 15px 0}.impact-sidebar[_ngcontent-%COMP%]     .card-badge{margin-left:auto}.impact-sidebar[_ngcontent-%COMP%]     .card-body{padding:0 15px}.impact-sidebar[_ngcontent-%COMP%]     .card-footer{position:relative;height:100%;overflow:hidden}.impact-sidebar[_ngcontent-%COMP%]     .sda-card-footer{height:100%}.impact-sidebar__content[_ngcontent-%COMP%]{width:100%}.impact-content[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;width:100%;min-width:0;padding:15px}.impact-content[_ngcontent-%COMP%]   sda-blanket[_ngcontent-%COMP%]{z-index:100!important}@media screen and (max-width:53.125em){.impact-content[_ngcontent-%COMP%]{margin-left:30px}}.impact-content__title[_ngcontent-%COMP%]{justify-content:space-between;align-items:center;font-size:18px;font-weight:500}.impact-content__btn[_ngcontent-%COMP%]{margin-left:15px}.impact-content__message[_ngcontent-%COMP%]{padding:20px;text-align:center}.impact-content__accordions[_ngcontent-%COMP%]    {display:flex;flex:1;flex-direction:column;height:100%}.impact-content__accordions[_ngcontent-%COMP%]     .mat-expansion-panel-body{height:100%;padding:0}.impact-content__accordions[_ngcontent-%COMP%]     .mat-expansion-panel-header{flex-shrink:0}.impact-content__accordions[_ngcontent-%COMP%]     .mat-expanded.mat-expansion-panel{display:flex;flex:1 1 50%;flex-direction:column;height:200px;overflow:hidden}.impact-content__accordions[_ngcontent-%COMP%]     .mat-expanded.mat-expansion-panel+.mat-expanded{margin-top:0}.impact-content__accordions[_ngcontent-%COMP%]     .mat-expanded .mat-expansion-panel-content{display:flex;flex-direction:column;height:100%;min-height:0}"]}),e})();function Le(e,t){if(1&e&&D.Tb(0,"sda-impact-analysis-impacts",1),2&e){const e=D.lc();D.sc("ao",e.ao)("documentRelDef",e.feature.apiParam2)("documentRelationshipsToExpand",e.feature.apiParam3)("tagRelDef",e.feature.apiParam4)("tagRelationshipsToExpand",e.feature.apiParam5)("mocRelDef",e.feature.apiParam10)("mocRelationshipsToExpand",e.feature.apiParam11)("documentConflictRelationshipsToExpand",e.feature.apiParam6)("tagConflictRelationshipsToExpand",e.feature.apiParam7)("menuOptions",e.feature.apiParam9)("config",e.feature.config[0])("viewOnly",e.viewOnly)("isSIOObject",e.isSIOObject)("impactConflictMode",e.modeImpactConflicts)}}let Ue=(()=>{class e{constructor(e,t,n,i){this.dataService=e,this.loadingIndicatorService=t,this.exceptionService=n,this.helpService=i,this.helpService.setHandlers(y.b)}ngOnChanges(){this.feature&&(this.loadingIndicatorService.showLoadingOverlay(),this.viewOnly=this.feature.apiParam1&&"true"===this.feature.apiParam1.toLowerCase(),this.isSIOObject=this.feature.apiParam12&&"true"===this.feature.apiParam12.toLowerCase(),this.modeImpactConflicts=this.feature.apiParam13?this.feature.apiParam13:P.EVERYTHING,this.dataService.getAnalysisObject(this.feature.contextObjectOBIDs[0],this.feature.config[0],this.feature.apiParam8).subscribe(e=>{this.loadingIndicatorService.hideLoadingOverlay(),this.ao=e},e=>{this.exceptionService.handleException(e),this.loadingIndicatorService.hideLoadingOverlay()}))}}return e.\u0275fac=function(t){return new(t||e)(D.Sb(K),D.Sb(w.a),D.Sb(T.a),D.Sb(x.a))},e.\u0275cmp=D.Mb({type:e,selectors:[["sda-impact-analysis-layout"]],inputs:{feature:"feature"},features:[D.Cb],decls:1,vars:1,consts:[[3,"ao","documentRelDef","documentRelationshipsToExpand","tagRelDef","tagRelationshipsToExpand","mocRelDef","mocRelationshipsToExpand","documentConflictRelationshipsToExpand","tagConflictRelationshipsToExpand","menuOptions","config","viewOnly","isSIOObject","impactConflictMode",4,"ngIf"],[3,"ao","documentRelDef","documentRelationshipsToExpand","tagRelDef","tagRelationshipsToExpand","mocRelDef","mocRelationshipsToExpand","documentConflictRelationshipsToExpand","tagConflictRelationshipsToExpand","menuOptions","config","viewOnly","isSIOObject","impactConflictMode"]],template:function(e,t){1&e&&D.Sc(0,Le,1,14,"sda-impact-analysis-impacts",0),2&e&&D.sc("ngIf",t.ao)},directives:[i.t,Ae],styles:["[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column;overflow:hidden}"]}),e})();var ke=n("lUp+");let je=(()=>{class e{constructor(e,t,n,i){this.dialogRef=e,this.sdaTranslateService=t,this.dataRefreshService=n,this.feature=i,this.footerRightPowerBarControls=void 0,this.backgroundStyle=S.a.Transparent,this.footerRightPowerBarControls=[new v.a(()=>{this.dataRefreshService.refreshData(),this.onClose()},this.sdaTranslateService.get("CLOSE","Close"),"",void 0,O.a.Primary)]}onFinish(){this.dialogRef.close()}onClose(){this.dialogRef.close()}onCancel(){this.dialogRef.close()}}return e.\u0275fac=function(t){return new(t||e)(D.Sb(a.f),D.Sb(E.a),D.Sb(R.a),D.Sb(a.a))},e.\u0275cmp=D.Mb({type:e,selectors:[["ng-component"]],decls:2,vars:3,consts:[[3,"feature"],[3,"rightControls","background"]],template:function(e,t){1&e&&(D.Tb(0,"sda-impact-analysis-layout",0),D.Tb(1,"sda-power-bar-view",1)),2&e&&(D.sc("feature",t.feature),D.Eb(1),D.sc("rightControls",t.footerRightPowerBarControls)("background",t.backgroundStyle))},directives:[Ue,ke.a],styles:["[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column;height:100%;overflow:hidden}"]}),e})();var Be=n("tyNb");let Fe=(()=>{class e extends _.a{constructor(e,t,n){super(t,n),this.dialog=e,this.router=t,this.featureSetNavigationService=n,this.clientApiName="ImpactAnalysisModalApi"}onExecute(e){e.contextObjectOBIDs&&e.contextObjectOBIDs.length>0&&this.dialog.open(je,{width:"90vw",height:"90vh",maxWidth:"90vw",data:e})}}return e.\u0275fac=function(t){return new(t||e)(D.dc(a.b),D.dc(Be.g),D.dc(C.a))},e.\u0275prov=D.Ob({token:e,factory:e.\u0275fac}),e})();var Ye=n("5iMO"),Xe=n("YwUS"),Ve=n("CymU");const We=[{path:"",component:(()=>{class e{constructor(e,t,n){this.route=e,this.routeService=t,this.applicationSettingsService=n,this.routerParamsSubscription=this.routeService.getFeatureFromParams(this.route).pipe(Object(k.a)(e=>this.applicationSettingsService.setPageTitle(e.displayName))).subscribe(e=>{this.feature=e})}ngOnDestroy(){this.routerParamsSubscription&&this.routerParamsSubscription.unsubscribe()}}return e.\u0275fac=function(t){return new(t||e)(D.Sb(Be.a),D.Sb(Ve.a),D.Sb(Xe.a))},e.\u0275cmp=D.Mb({type:e,selectors:[["ng-component"]],decls:1,vars:1,consts:[[3,"feature"]],template:function(e,t){1&e&&D.Tb(0,"sda-impact-analysis-layout",0),2&e&&D.sc("feature",t.feature)},directives:[Ue],styles:["[_nghost-%COMP%]{display:flex;flex:1;height:100%;overflow:hidden}"]}),e})(),resolve:{objects:Ye.a}}];let He=(()=>{class e{}return e.\u0275mod=D.Qb({type:e}),e.\u0275inj=D.Pb({factory:function(t){return new(t||e)},imports:[[Be.k.forChild(We)],Be.k]}),e})(),Ge=(()=>{class e{}return e.\u0275mod=D.Qb({type:e}),e.\u0275inj=D.Pb({factory:function(t){return new(t||e)},providers:[{provide:b.a,useClass:Fe},K],imports:[[i.c,p.a,He,a.e,o.e,d.a,g.a,l.a,h.a,f.a,r.a,m.a,I.a,u.a,s.b,c.a]]}),e})()},niUd:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("fXoL"),a=n("ofXK");const s=[[["",8,"sda-card-header"]],[["",8,"sda-card-body"]],[["",8,"sda-card-footer"]]],o=[".sda-card-header",".sda-card-body",".sda-card-footer"];let c=(()=>{class e{}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Mb({type:e,selectors:[["sda-card-view"]],inputs:{isReadOnly:"isReadOnly",styleClass:"styleClass"},ngContentSelectors:o,decls:7,vars:1,consts:[[1,"card",3,"ngClass"],[1,"card-header"],[1,"card-body"],[1,"card-footer"]],template:function(e,t){1&e&&(i.rc(s),i.Yb(0,"div",0),i.Yb(1,"div",1),i.qc(2),i.Xb(),i.Yb(3,"div",2),i.qc(4,1),i.Xb(),i.Yb(5,"div",3),i.qc(6,2),i.Xb(),i.Xb()),2&e&&i.sc("ngClass",t.styleClass)},directives:[a.q],styles:["[_nghost-%COMP%]    {display:flex;flex:1;flex-direction:column}[_nghost-%COMP%]     .card{display:flex;flex-direction:column;margin:20px 0;padding:8px;border:1px solid #cad0d7}[_nghost-%COMP%]     .card:only-of-type{margin-bottom:0}[_nghost-%COMP%]     .card-body:empty, [_nghost-%COMP%]     .card-footer:empty, [_nghost-%COMP%]     .card-header:empty{display:none}[_nghost-%COMP%]     .card-header{flex-shrink:0}[_nghost-%COMP%]     .card-body{flex-shrink:0;margin:10px 0}"]}),e})()},oe3R:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e,t,n,i=!1){this.apiName=e,this.argFilters=t,this.onExecuteDataParam=n,this.excludeAllMethods=i}}},t1Kn:function(e,t,n){"use strict";n.d(t,"a",(function(){return U}));var i=n("fXoL"),a=n("qIrS"),s=n("QkNQ"),o=n("Ejbi"),c=(n("4JBC"),n("ofXK")),r=n("NFeN"),l=n("+rOU"),d=n("4CIq"),h=n("rDax"),f=n("3Pt+"),p=n("lUp+"),u=n("dLJk"),b=n("F8dI");const g=["template"],m=["origin"];function I(e,t){if(1&e&&(i.Yb(0,"div",3),i.Yb(1,"span",4),i.Uc(2),i.Xb(),i.Yb(3,"span",5),i.Tb(4,"mat-icon",6),i.Uc(5),i.Xb(),i.Yb(6,"span",5),i.Tb(7,"mat-icon",7),i.Uc(8),i.mc(9,"sdaConvertToLocalDate"),i.Xb(),i.Yb(10,"div",8),i.Uc(11),i.Xb(),i.Xb()),2&e){const e=i.lc();i.Eb(2),i.Vc(e.REJECTED),i.Eb(3),i.Wc(" ",e.rejectUser," "),i.Eb(3),i.Wc(" ",i.nc(9,4,e.rejectDate)," "),i.Eb(3),i.Vc(e.rejectReason)}}function C(e,t){if(1&e&&(i.Yb(0,"div"),i.Uc(1),i.Xb()),2&e){const e=t.$implicit;i.Eb(1),i.Vc(e)}}function _(e,t){if(1&e&&(i.Yb(0,"div",8),i.Sc(1,C,2,1,"div",11),i.Xb()),2&e){const e=i.lc(2);i.Eb(1),i.sc("ngForOf",e.bannerContent)}}function O(e,t){if(1&e&&(i.Yb(0,"div",9),i.Yb(1,"span",4),i.Uc(2),i.Xb(),i.Sc(3,_,2,1,"div",10),i.Xb()),2&e){const e=i.lc();i.Ib("card-status--warn",2===e.bannerType)("card-status--info",0===e.bannerType),i.Eb(2),i.Vc(e.bannerTitle),i.Eb(1),i.sc("ngIf",(null==e.bannerContent?null:e.bannerContent.length)>0)}}function S(e,t){if(1&e&&(i.Yb(0,"span",27),i.Uc(1),i.Xb()),2&e){const e=i.lc(3);i.Eb(1),i.Wc(" ",e.YOU," ")}}function v(e,t){if(1&e&&(i.Yb(0,"div",22),i.Tb(1,"mat-icon",28),i.Yb(2,"p",24),i.Uc(3),i.mc(4,"sdaConvertToLocalDateTime"),i.Xb(),i.Xb()),2&e){const e=i.lc(3);i.Eb(3),i.Vc(i.nc(4,1,e.creationDate))}}function R(e,t){if(1&e&&(i.Yb(0,"div",22),i.Tb(1,"mat-icon",29),i.Yb(2,"p",30),i.Uc(3),i.Xb(),i.Xb()),2&e){const e=i.lc(3);i.Eb(2),i.sc("title",e.MARKUPS_IDENTIFIED_TOOLTIP),i.Eb(1),i.Wc(" ",e.MARKUPS_IDENTIFIED," ")}}function E(e,t){if(1&e&&(i.Yb(0,"section",21),i.Yb(1,"div",22),i.Tb(2,"mat-icon",23),i.Yb(3,"p",24),i.Uc(4),i.Sc(5,S,2,1,"span",25),i.Xb(),i.Xb(),i.Sc(6,v,5,3,"div",26),i.Sc(7,R,4,2,"div",26),i.Xb()),2&e){const e=i.lc(2);i.Eb(4),i.Wc(" ",e.user.DisplayName," "),i.Eb(1),i.sc("ngIf",e.user.IsCurrentUser),i.Eb(1),i.sc("ngIf",e.creationDate),i.Eb(1),i.sc("ngIf",e.markupsIdentified)}}function D(e,t){if(1&e){const e=i.Zb();i.Yb(0,"sda-button-plain",35,36),i.hc("click",(function(){return i.Kc(e),i.lc(3).showOverlay()})),i.Xb()}if(2&e){const e=i.lc(3);i.sc("isCompact",!0)("matSvgIcon",e.buttonIcon)}}function T(e,t){if(1&e&&(i.Yb(0,"div",37),i.Uc(1),i.Xb()),2&e){const e=i.lc(3);i.Eb(1),i.Wc(" ",e.badge," ")}}function w(e,t){if(1&e){const e=i.Zb();i.Yb(0,"h3",31),i.Yb(1,"a",32),i.hc("click",(function(){return i.Kc(e),i.lc(2).descriptionClicked.emit()})),i.Uc(2),i.Xb(),i.Sc(3,D,2,2,"sda-button-plain",33),i.Sc(4,T,2,1,"div",34),i.Xb()}if(2&e){const e=i.lc(2);i.Eb(2),i.Wc(" ",e.description," "),i.Eb(1),i.sc("ngIf",e.additionalInformation.length),i.Eb(1),i.sc("ngIf",e.badge)}}function x(e,t){if(1&e&&(i.Yb(0,"li",41),i.Yb(1,"h4",42),i.Uc(2),i.Xb(),i.Yb(3,"p",43),i.Uc(4),i.Xb(),i.Xb()),2&e){const e=t.$implicit;i.Eb(2),i.Vc(e.key),i.Eb(1),i.sc("title",e.value),i.Eb(1),i.Vc(e.value)}}function y(e,t){if(1&e&&(i.Yb(0,"ul",39),i.Sc(1,x,5,3,"li",40),i.Xb()),2&e){const e=i.lc(3);i.Eb(1),i.sc("ngForOf",e.additionalInformation)}}function P(e,t){if(1&e&&i.Sc(0,y,2,1,"ul",38),2&e){const e=i.lc(2);i.sc("ngIf",e.additionalInformation.length)}}function M(e,t){if(1&e&&(i.Yb(0,"h4",44),i.Uc(1),i.Xb()),2&e){const e=i.lc(2);i.Eb(1),i.Wc(" ",e.header," ")}}function N(e,t){if(1&e){const e=i.Zb();i.Yb(0,"input",45,46),i.hc("ngModelChange",(function(t){return i.Kc(e),i.lc(2).header=t})),i.Xb()}if(2&e){const e=i.lc(2);i.sc("ngModel",e.header)}}function A(e,t){if(1&e&&i.Tb(0,"sda-power-bar-view",47),2&e){const e=i.lc(2);i.sc("isCompact",!0)("background",e.powerBarBackgroundStyle)("disableOverflow",!0)("rightControls",e.powerBarRHSControls)("isOverflowHidden",e.powerBarOverflowIsHidden)("overflowControls",e.powerBarOverflowControls)("overflowCloseOnAllClicks",e.powerBarOverflowCloseOnAllClicks)}}function L(e,t){if(1&e&&(i.Yb(0,"header",12),i.Yb(1,"div",13),i.Sc(2,E,8,4,"section",14),i.Sc(3,w,5,3,"h3",15),i.Sc(4,P,1,1,"ng-template",16,17,i.Tc),i.Sc(6,M,2,1,"h4",18),i.Sc(7,N,2,1,"input",19),i.Xb(),i.Sc(8,A,1,7,"sda-power-bar-view",20),i.Xb()),2&e){const e=i.lc();i.Ib("card-header--edit",e.headerIsEditable),i.Eb(2),i.sc("ngIf",e.user&&!e.headerIsEditable),i.Eb(1),i.sc("ngIf",e.description&&!e.headerIsEditable),i.Eb(3),i.sc("ngIf",!e.headerIsEditable),i.Eb(1),i.sc("ngIf",e.headerIsEditable),i.Eb(1),i.sc("ngIf",(null==e.powerBarOverflowControls?null:e.powerBarOverflowControls.length)>0)}}let U=(()=>{class e{constructor(e,t){this.sdaTranslateService=e,this.overlayFactory=t,this.headerChange=new i.o,this.descriptionClicked=new i.o,this.powerBarOverflowControls=[],this.powerBarRHSControls=[],this.powerBarBackgroundStyle=s.a.Transparent,this.additionalInformation=[],this.buttonIconDefault="caret-down",this.buttonIActive="close",this.buttonIcon=this.buttonIconDefault,this.powerBarOverflowCloseOnAllClicks=!1,this.YOU=this.sdaTranslateService.get("YOU","You"),this.REJECTED=this.sdaTranslateService.get("REJECTED","Rejected"),this.UNDO=this.sdaTranslateService.get("UNDO","undo"),this.DISCIPLINES=this.sdaTranslateService.get("DISCIPLINES","Disciplines"),this.MARKUPS_IDENTIFIED=this.sdaTranslateService.get("REVIEW_ACTION_MARKUPS_IDENTIFIED","MARKUPS IDENTIFIED"),this.MARKUPS_IDENTIFIED_TOOLTIP=this.sdaTranslateService.get("REVIEW_ACTION_MARKUPS_IDENTIFIED_TOOLTIP","Markups to be transmitted have been selected."),this.headerValue=""}get header(){return this.headerValue}set header(e){this.headerValue=e,this.headerChange.emit(this.headerValue)}showOverlay(){this.overlayRef=this.overlayFactory.createConnectedToOverlay(this.origin,300,300),this.overlaySubscription=this.overlayRef.backdropClick().subscribe(()=>{this.closeOverlay(),this.buttonIcon=this.buttonIconDefault}),this.overlayRef.attach(this.template),this.buttonIcon=this.buttonIActive}ngOnDestroy(){this.closeOverlay()}closeOverlay(){this.overlaySubscription&&this.overlaySubscription.unsubscribe(),this.overlayRef&&(this.overlayRef.detach(),this.overlayRef.dispose())}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(o.a),i.Sb(a.a))},e.\u0275cmp=i.Mb({type:e,selectors:[["sda-card-template-user-info-view"]],viewQuery:function(e,t){var n;1&e&&(i.bd(g,!0),i.bd(m,!0)),2&e&&(i.Gc(n=i.ic())&&(t.template=n.first),i.Gc(n=i.ic())&&(t.origin=n.first))},inputs:{headerIsEditable:"headerIsEditable",powerBarOverflowIsHidden:"powerBarOverflowIsHidden",markupsIdentified:"markupsIdentified",rejectReason:"rejectReason",rejectUser:"rejectUser",rejectDate:"rejectDate",icon:"icon",powerBarOverflowControls:"powerBarOverflowControls",powerBarRHSControls:"powerBarRHSControls",powerBarBackgroundStyle:"powerBarBackgroundStyle",additionalInformation:"additionalInformation",user:"user",creationDate:"creationDate",bannerTitle:"bannerTitle",bannerContent:"bannerContent",bannerType:"bannerType",badge:"badge",description:"description",buttonIconDefault:"buttonIconDefault",buttonIActive:"buttonIActive",buttonIcon:"buttonIcon",powerBarOverflowCloseOnAllClicks:"powerBarOverflowCloseOnAllClicks",header:"header"},outputs:{headerChange:"headerChange",descriptionClicked:"descriptionClicked"},decls:3,vars:3,consts:[["class","card-status card-status--rejected",4,"ngIf"],["class","card-status",3,"card-status--warn","card-status--info",4,"ngIf"],["class","card-header",3,"card-header--edit",4,"ngIf"],[1,"card-status","card-status--rejected"],[1,"card-status__state"],[1,"card-status__info"],["svgIcon","user",1,"card-status__icon"],["svgIcon","time-outlined",1,"card-status__icon"],[1,"card-status__reason"],[1,"card-status"],["class","card-status__reason",4,"ngIf"],[4,"ngFor","ngForOf"],[1,"card-header"],[1,"card-header__content"],["class","card-user",4,"ngIf"],["class","card-header__desc",4,"ngIf"],["cdk-portal",""],["template","cdkPortal"],["class","card-header__title",4,"ngIf"],["type","text","class","card-header__edit",3,"ngModel","ngModelChange",4,"ngIf"],["class","card-header__actions",3,"isCompact","background","disableOverflow","rightControls","isOverflowHidden","overflowControls","overflowCloseOnAllClicks",4,"ngIf"],[1,"card-user"],[1,"card-info"],["svgIcon","user",1,"card-info__icon"],[1,"card-info__data"],["class","card-info__you",4,"ngIf"],["class","card-info",4,"ngIf"],[1,"card-info__you"],["svgIcon","time-outlined",1,"card-info__icon"],["svgIcon","thumbnail",1,"card-info__icon"],[1,"card-info__data","card-info__data--tooltip",3,"title"],[1,"card-header__desc"],[1,"card-header__link",3,"click"],["cdkOverlayOrigin","","class","card-header__button",3,"isCompact","matSvgIcon","click",4,"ngIf"],["class","card-badge",4,"ngIf"],["cdkOverlayOrigin","",1,"card-header__button",3,"isCompact","matSvgIcon","click"],["origin","cdkOverlayOrigin"],[1,"card-badge"],["class","card-extras",4,"ngIf"],[1,"card-extras"],["class","card-set",4,"ngFor","ngForOf"],[1,"card-set"],[1,"card-set__label"],[1,"card-set__data",3,"title"],[1,"card-header__title"],["type","text",1,"card-header__edit",3,"ngModel","ngModelChange"],["headerValue","ngModel"],[1,"card-header__actions",3,"isCompact","background","disableOverflow","rightControls","isOverflowHidden","overflowControls","overflowCloseOnAllClicks"]],template:function(e,t){1&e&&(i.Sc(0,I,12,6,"div",0),i.Sc(1,O,4,6,"div",1),i.Sc(2,L,9,7,"header",2)),2&e&&(i.sc("ngIf",t.rejectReason),i.Eb(1),i.sc("ngIf",t.bannerTitle),i.Eb(1),i.sc("ngIf",t.header||t.headerIsEditable||(null==t.powerBarOverflowControls?null:t.powerBarOverflowControls.length)>0||t.description))},directives:[c.t,r.a,c.s,l.i,d.a,h.b,f.c,f.p,f.s,p.a],pipes:[u.a,b.a],styles:['.card-header__title[_ngcontent-%COMP%], .card-set[_ngcontent-%COMP%], .card-status__reason[_ngcontent-%COMP%]{overflow-wrap:break-word;word-wrap:break-word;word-break:break-word}.card-header__link[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.card-status[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;align-items:flex-start;margin-bottom:8px;background-color:#ebedf0;border-top:1px solid #697a8b;color:#1f2429}.card-status--rejected[_ngcontent-%COMP%]{background-color:#fbd5da;border-color:#d7142c}.card-status--rejected[_ngcontent-%COMP%]   .card-status__state[_ngcontent-%COMP%]{background-color:#d7142c}.card-status--rejected[_ngcontent-%COMP%]   .card-status__reason[_ngcontent-%COMP%]{color:#6e0a17}.card-status--warn[_ngcontent-%COMP%]{border-top-color:#d1a00c}.card-status--warn[_ngcontent-%COMP%]   .card-status__state[_ngcontent-%COMP%]{background-color:#d1a00c}.card-status--info[_ngcontent-%COMP%]   .card-status__state[_ngcontent-%COMP%]{background-color:#347594}.card-status__state[_ngcontent-%COMP%]{display:inline-block;margin-right:8px;padding:6px 15px;background-color:#8997a5;border-bottom-right-radius:2px;font-size:15px;color:#fff}.card-status__info[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px;font-size:12px}.card-status__icon[_ngcontent-%COMP%]{width:16px;height:16px;margin-right:5px}.card-status__reason[_ngcontent-%COMP%]{flex-basis:100%;padding:10px;font-size:14px}.card-user[_ngcontent-%COMP%]{flex-shrink:0;align-items:center;color:#a9b4be}.card-header[_ngcontent-%COMP%], .card-user[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap}.card-header[_ngcontent-%COMP%]{padding-bottom:10px}.card-header[_ngcontent-%COMP%]:not(.card-header--edit){border-bottom:1px solid #cad0d7}.card-header__actions[_ngcontent-%COMP%]{margin-left:5px}.card-header__actions[_ngcontent-%COMP%]     .power-bar{align-items:flex-start}.card-header__content[_ngcontent-%COMP%]{flex:1;min-width:0}.card-header__edit[_ngcontent-%COMP%], .card-header__title[_ngcontent-%COMP%]{font-weight:500;font-size:14px}.card-header__edit[_ngcontent-%COMP%]{flex:1;width:100%;min-width:110px!important;height:30px;line-height:1;-webkit-appearance:none;appearance:none}.card-header__edit[_ngcontent-%COMP%]:hover{border-color:#a9b4be}.card-header__edit[_ngcontent-%COMP%]:focus{border-color:#02adff}.card-header__edit[disabled][_ngcontent-%COMP%]{background-color:#fff;border-color:#fff}.card-header__desc[_ngcontent-%COMP%]{display:flex;align-items:center;font-weight:500;font-size:14px;height:30px}.card-header__link[_ngcontent-%COMP%]{cursor:pointer}.card-header__button[_ngcontent-%COMP%]{margin-left:5px}.card-header__button[_ngcontent-%COMP%]     .button__mat-icon{width:18px;height:18px}.card-info[_ngcontent-%COMP%]{display:flex;align-items:center;margin-bottom:4px;font-size:11px;font-weight:500}.card-info[_ngcontent-%COMP%]:not(:last-of-type){margin-right:10px}.card-info__icon[_ngcontent-%COMP%]{width:14px;height:14px;margin-right:5px}.card-info__data[_ngcontent-%COMP%]{color:#a9b4be}.card-info__you[_ngcontent-%COMP%]{font-style:italic}.card-info__you[_ngcontent-%COMP%]:before{content:" - "}.card-extras[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;color:#1f2429}.card-set[_ngcontent-%COMP%]{flex:1 1 35%;max-width:50%;min-height:40px;padding:10px;background-color:#ebedf0;border-radius:4px}.card-set[_ngcontent-%COMP%]:not(:nth-of-type(-n+2)){margin-top:5px}.card-set[_ngcontent-%COMP%]:nth-of-type(2n){margin-left:5px}.card-set__label[_ngcontent-%COMP%]{font-size:14px;line-height:1;font-weight:500}.card-set__data[_ngcontent-%COMP%]{font-size:12px;line-height:1.2}.card-badge[_ngcontent-%COMP%]{margin-left:8px;padding:4px 6px;background-color:#559d39;border-radius:3px;font-size:9px;font-weight:500;line-height:1.4;color:#fff;text-transform:uppercase;-webkit-user-select:none;-ms-user-select:none;user-select:none}']}),e})()},"vZO+":function(e,t,n){"use strict";n.d(t,"a",(function(){return I}));var i=n("rDax"),a=n("+rOU"),s=n("ofXK"),o=n("3Pt+"),c=n("NFeN"),r=n("STbY"),l=n("7LiV"),d=n("BMkO"),h=n("l3mi"),f=n("xNYO"),p=n("Wbmx"),u=n("txXS"),b=n("GDd0"),g=n("uJvP"),m=n("fXoL");let I=(()=>{class e{}return e.\u0275mod=m.Qb({type:e}),e.\u0275inj=m.Pb({factory:function(t){return new(t||e)},imports:[[s.c,p.a,l.b,o.j,u.a,b.a,f.a,g.a,r.c,h.a,c.b,i.f,a.g,d.a]]}),e})()}}]);