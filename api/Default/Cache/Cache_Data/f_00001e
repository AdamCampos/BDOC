(window.webpackJsonp=window.webpackJsonp||[]).push([[87],{"f0c/":function(e,t,i){"use strict";i.r(t),i.d(t,"DetailsFormRoutingModule",(function(){return Y}));var s=i("ofXK"),n=i("3Pt+"),o=i("tyNb"),c=i("+07z"),a=i("txXS"),r=i("ZQvh"),l=i("vkgz"),d=i("pLZG"),h=i("eIep"),u=i("4B5/"),b=i("YwUS"),m=i("Z9D8"),p=i("LUpO"),f=i("PEjJ"),g=i("iwlc"),I=i("F8JD"),_=i("DG5G"),S=i("Ejbi"),v=i("+eYH"),O=i("yzqN"),M=i("fXoL"),T=i("XNiG"),C=i("Kj3r"),E=i("UETY"),j=i("6JPj"),y=i("d09n"),w=i("7zfz"),x=i("7Ihv");function D(e,t){if(1&e){const e=M.Zb();M.Yb(0,"div",2),M.Yb(1,"aside",3),M.hc("click",(function(){M.Kc(e);const i=t.$implicit;return M.lc().showActionsMenu(i)})),M.Tb(2,"i",4),M.Xb(),M.Yb(3,"dl",5),M.hc("click",(function(){M.Kc(e);const i=t.$implicit;return M.lc().selectedItemChanged(i)})),M.Yb(4,"dt",6),M.Uc(5),M.mc(6,"sdaTruncate"),M.Xb(),M.Yb(7,"dd",7),M.Uc(8),M.mc(9,"sdaTruncate"),M.Xb(),M.Xb(),M.Xb()}if(2&e){const e=t.$implicit;M.Eb(3),M.tc("title",e.label),M.Eb(2),M.Vc(M.oc(6,3,e.label,26)),M.Eb(3),M.Vc(M.oc(9,6,e.displayAs,28))}}let P=(()=>{class e{constructor(e,t,i,s){this.treeviewColumnsetService=e,this.contentMenuService=t,this.actionMenuProvider=i,this.actionsMenuService=s,this.itemSelected=new M.o,this.initialized=!1,this.showToDoActionsMenuSubject=new T.a,this.showToDoActionsMenuSubject.pipe(Object(C.a)(250),Object(h.a)(()=>this.actionsMenuService.userHasAccessToToDoActionsMenu())).subscribe(e=>{e&&this.contentMenuService.showToDoActionsMenu()})}ngOnInit(){this.onPopulateListView(),this.initialized=!0}ngOnDestroy(){this.actionMenuProvider.clearAndCloseActionsMenu()}showActionsMenu(e){this.updateSelectedItem(e),this.actionsMenuService.canShowToDoActionsMenu()?this.contentMenuService.isToDoActionsMenuOpen()?this.contentMenuService.showToDoActionsMenu():this.showToDoActionsMenuSubject.next():this.contentMenuService.showActionsMenu()}ngOnChanges(e){!0===this.initialized&&(e.datasource?(this.actionMenuProvider.clearAndCloseActionsMenu(),this.onPopulateListView()):e.selectedItemId&&(this.selectItemByID(e.selectedItemId.currentValue),this.selectedListItem=this.selectedItemId))}selectedItemChanged(e){this.updateSelectedItem(e)}updateSelectedItem(e){this.selectItemByID(e.value)&&this.itemSelected.emit(this.selectedItemObj)}addSelectedItemToActionsMenuProvider(){this.selectedItemObj&&(this.actionMenuProvider.clearItems(),this.actionMenuProvider.addItem(this.selectedItemObj))}setTreeViewColumnDisplay(){if(this.datasource&&this.datasource.length>0){const e=new Array;for(let t=0;t<this.datasource.length;t++)e.push(this.datasource[t].obid);this.listObjects=[],this.treeviewColumnsetService.GetDisplayNames(e,this.datasource[0].config,this.optionalColumnSet).subscribe(e=>{for(let t=0;t<this.datasource.length;t++){const i=e.filter(e=>e.Key===this.datasource[t].obid);i&&i.length>0&&(this.datasource[t].displayAs=i[0].DisplayAs.replace(this.datasource[t].name+",",""),this.listObjects.push({label:this.datasource[t].name,value:this.datasource[t].obid,displayAs:this.datasource[t].displayAs,entityType:this.datasource[t].entityType,config:this.datasource[t].config}))}})}}selectItemByID(e){let t=!1;const i=this.datasource.filter(t=>t.obid===e);return i&&i.length>0&&(this.selectedItemObj&&this.selectedItemObj.obid===i[0].id||(this.selectedItemObj=i[0],this.addSelectedItemToActionsMenuProvider(),t=!0)),t}onPopulateListView(){this.selectItemByID(this.selectedItemId),this.selectedListItem=this.selectedItemId,this.setTreeViewColumnDisplay()}}return e.\u0275fac=function(t){return new(t||e)(M.Sb(y.a),M.Sb(j.a),M.Sb(u.a),M.Sb(E.a))},e.\u0275cmp=M.Mb({type:e,selectors:[["sda-objects-list-view"]],inputs:{datasource:"datasource",selectedItemId:"selectedItemId",optionalColumnSet:"optionalColumnSet"},outputs:{itemSelected:"itemSelected"},features:[M.Cb],decls:2,vars:2,consts:[[1,"list-wrapper",3,"options","ngModel","ngModelChange"],["pTemplate","item"],[1,"list-item"],[1,"list-item__cta",3,"click"],["aria-hidden","true",1,"fa","fa-list"],[1,"item-details",3,"title","click"],[1,"item-details__name"],[1,"item-details__data"]],template:function(e,t){1&e&&(M.Yb(0,"p-listbox",0),M.hc("ngModelChange",(function(e){return t.selectedListItem=e})),M.Sc(1,D,10,9,"ng-template",1),M.Xb()),2&e&&M.sc("options",t.listObjects)("ngModel",t.selectedListItem)},directives:[c.a,n.p,n.s,w.d],pipes:[x.a],styles:["p-listbox[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}.item-details__data[_ngcontent-%COMP%], .item-details__name[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}p-listbox[_ngcontent-%COMP%]     .ui-listbox{width:100%;padding:0!important;border:0}p-listbox[_ngcontent-%COMP%]     .ui-listbox-item{padding:0;color:#546e7a;background-color:#ebedf0;border-radius:0!important;transition:background-color .2s ease}p-listbox[_ngcontent-%COMP%]     .ui-listbox-item:not(:first-of-type){border-top:1px solid #e0e0e0!important}p-listbox[_ngcontent-%COMP%]     .ui-listbox-item:not(.ui-state-highlight).ui-state-hover{background:#cad0d7!important}p-listbox[_ngcontent-%COMP%]     .ui-listbox-item.ui-state-highlight{background:#0087c8!important}.list-item[_ngcontent-%COMP%]{display:flex;margin:0;padding:0}.list-item__cta[_ngcontent-%COMP%]{display:flex;justify-content:center;align-items:center;width:50px}.list-item__cta[_ngcontent-%COMP%]     .fa-list{font-size:14px;line-height:1;color:#00608f}  .ui-state-highlight .list-item__cta   .fa-list{color:#fff}.item-details[_ngcontent-%COMP%]{flex:1;padding:10px 8px}.item-details__name[_ngcontent-%COMP%]{color:#0087c8;font-size:13px;font-weight:500;line-height:16px}.item-details__name[_ngcontent-%COMP%]::-webkit-details-marker{display:none}  .ui-state-highlight .item-details__name{color:#fff}.item-details__data[_ngcontent-%COMP%]{font-size:11px;line-height:15px;color:#666}  .ui-state-highlight .item-details__data{color:#fff}"]}),e})();function A(e,t){if(1&e&&(M.Yb(0,"figure",6),M.Yb(1,"p"),M.Uc(2),M.Xb(),M.Xb()),2&e){const e=M.lc();M.Eb(2),M.Vc(e.OBJECTS_VIEW_LOADING_TEXT)}}function N(e,t){if(1&e){const e=M.Zb();M.Yb(0,"header",7),M.Yb(1,"a",8),M.hc("click",(function(){M.Kc(e);const t=M.lc();return t.changeMode(t.objectDetailsMode.Details)})),M.kc(),M.Yb(2,"svg",9),M.Tb(3,"path",10),M.Xb(),M.Xb(),M.jc(),M.Yb(4,"a",8),M.hc("click",(function(){M.Kc(e);const t=M.lc();return t.changeMode(t.objectDetailsMode.InfoMap)})),M.kc(),M.Yb(5,"svg",9),M.Tb(6,"path",11),M.Xb(),M.Xb(),M.Xb()}if(2&e){const e=M.lc();M.Eb(1),M.Ib("tab__item--active",e.mode===e.objectDetailsMode.Details)("tab__item--inactive",e.mode!==e.objectDetailsMode.Details),M.sc("title",e.OBJECTS_VIEW_LAUNCH),M.Eb(3),M.Ib("tab__item--active",e.mode===e.objectDetailsMode.InfoMap)("tab__item--inactive",e.mode!==e.objectDetailsMode.InfoMap),M.sc("title",e.INFOMAP_LAUNCH)}}function R(e,t){if(1&e){const e=M.Zb();M.Yb(0,"sda-objects-list-view",12),M.hc("itemSelected",(function(t){return M.Kc(e),M.lc().itemSelected(t)})),M.Xb()}if(2&e){const e=M.lc();M.sc("datasource",e.objects)("selectedItemId",e.selectedItemId)("optionalColumnSet",e.columnSetName)}}var L=function(e){return e[e.Details=0]="Details",e[e.InfoMap=1]="InfoMap",e}({});let B=(()=>{class e{constructor(e,t,i,s,n,o,c,a,r,l){this.applicationSettingsService=e,this.router=t,this.route=i,this.filterQueryService=s,this.dataRefreshService=n,this.exceptionService=o,this.sdaTranslateService=c,this.helpService=a,this.actionsMenuProvider=r,this.methodService=l,this.initialized=!1,this.columnSetName="",this.mode=L.Details,this.objectDetailsMode=L,this.OBJECTS_VIEW_TITLE=this.sdaTranslateService.get("OBJECTS_VIEW_TITLE","Object Details"),this.OBJECTS_VIEW_LOADING_TEXT=this.sdaTranslateService.get("OBJECTS_VIEW_LOADING_TEXT","Loading Objects List, please wait..."),this.OBJECTS_VIEW_CONFIG_NOT_FOUND=this.sdaTranslateService.get("OBJECTS_VIEW_CONFIG_NOT_FOUND","configuration not found"),this.OBJECTS_VIEW_LOADING_ERROR=this.sdaTranslateService.get("OBJECTS_VIEW_LOADING_ERROR","An error occurred whilst loading objects"),this.OBJECTS_VIEW_LAUNCH=this.sdaTranslateService.get("OBJECTS_VIEW_LAUNCH","Show Object Details"),this.INFOMAP_LAUNCH=this.sdaTranslateService.get("INFOMAP_LAUNCH","Show Info Map"),this.itemRemoved=!1,this.applicationSettingsService.setPageTitle(this.OBJECTS_VIEW_TITLE),this.itemRemovedSubscription=this.dataRefreshService.itemsRemoved$.subscribe(e=>{e.indexOf(this.selectedItemId)>-1&&this.objects&&1===this.objects.length&&(this.itemRemoved=!0,this.router.navigate(["/home"]))}),this.helpService.setHandlers(O.u)}ngOnInit(){this.route.paramMap.pipe(Object(l.a)(e=>{this.configArray=JSON.parse(e.get("config")),this.searchFilter=JSON.parse(e.get("queryFilter"))}),Object(d.a)(e=>e.has("methodOBID")),Object(h.a)(e=>this.methodService.getMethodAndExpandToClientAPI("OBID",e.get("methodOBID"),void 0,!1))).subscribe(e=>{e&&e.length>0&&e[0].SPFArgument2&&(this.title=e[0].SPFArgument2,this.applicationSettingsService.setPageTitle(this.title))}),this.route.data.subscribe(e=>{this.handleObjects(e.object,!1)}),this.refreshDataSubscription=this.dataRefreshService.refreshData$.subscribe(()=>{this.itemRemoved||this.updateForm()})}ngOnDestroy(){this.refreshDataSubscription&&this.refreshDataSubscription.unsubscribe(),this.itemRemovedSubscription&&this.itemRemovedSubscription.unsubscribe()}changeMode(e){this.mode=e,this.updateSelectedObjectItem(),this.selectedItem&&this.itemSelected(this.selectedItem)}itemSelected(e){if(e&&(this.selectedItem=e,this.selectedItemId=e.obid,this.selectedItemId))if(this.mode===L.Details)this.router.navigate(["detail",e.obid],{relativeTo:this.route,queryParams:{timestamp:Date.now().toString()}}).catch(e=>{this.exceptionService.handleException(e)});else{const t=JSON.stringify([e.config]);this.router.navigate(["infomap-viewer",{obid:e.obid,config:t}],{queryParams:{mode:"embedded"},relativeTo:this.route}).catch(e=>{this.exceptionService.handleException(e)})}}onActivate(e){"infomap-viewer"===e.snapshot.parent.url[0].path?this.mode=L.InfoMap:"detail"===e.snapshot.parent.url[0].path&&(this.mode=L.Details),e.paramMap.subscribe(e=>{const t=e.get("obid");t&&(this.selectedItemId=t,this.updateSelectedObjectItem(),this.updateTitleForItem())})}updateSelectedObjectItem(){this.selectedItemId&&this.objects&&this.objects.length>0&&(this.selectedItem=this.objects.find(e=>e.obid===this.selectedItemId)),this.selectedItem&&this.actionsMenuProvider.addItem(this.selectedItem)}updateTitleForItem(){if(this.objects&&this.objects.length>0){const e=this.objects.filter(e=>e.obid===this.selectedItemId);e.length>0&&(this.titleItemId=this.selectedItemId,this.applicationSettingsService.setPageTitle(this.sdaTranslateService.getFormatted("OBJECTS_VIEW_TITLE-ITEM_NAME","{0} Details",null!=e[0].name?[e[0].name]:[this.sdaTranslateService.get("OBJECT_TITLE","Object")])))}}updateForm(){(!this.configArray||this.configArray&&0===this.configArray.length)&&this.exceptionService.handleException(new m.a(new Error(this.OBJECTS_VIEW_CONFIG_NOT_FOUND),this.OBJECTS_VIEW_LOADING_ERROR,"objects.component","updateForm")),this.searchFilter&&this.filterQueryService.getObjects(this.searchFilter,this.configArray[0]).subscribe(e=>{this.handleObjects(e,!0)},e=>{this.exceptionService.handleException(new m.a(e,this.OBJECTS_VIEW_LOADING_ERROR,"objects.component","updateForm"))})}handleObjects(e,t){if(this.searchFilter&&e.length>0){let i="OBID";this.searchFilter.entityType&&("Objects"===this.searchFilter.entityType?this.columnSetName="CS_SPFNameDescription":i="Id");const s=new Array;e.forEach(e=>{const t=new v.a(e[i],e.Name,this.configArray[0],e.displayAs,e.Class);t.data={supportsShareUrl:"true"},s.push(t)}),this.objects=s,!t&&this.selectedItemId||this.itemSelected(this.objects[0]),this.updateTitleForItem(),this.initialized=!0}}}return e.\u0275fac=function(t){return new(t||e)(M.Sb(b.a),M.Sb(o.g),M.Sb(o.a),M.Sb(_.a),M.Sb(f.a),M.Sb(p.a),M.Sb(S.a),M.Sb(g.a),M.Sb(u.a),M.Sb(I.a))},e.\u0275cmp=M.Mb({type:e,selectors:[["sda-objects-view"]],decls:6,vars:3,consts:[[1,"object-sidebar"],["class","object-sidebar__loading",4,"ngIf"],["class","tab",4,"ngIf"],[3,"datasource","selectedItemId","optionalColumnSet","itemSelected",4,"ngIf"],[1,"object-view"],[3,"activate"],[1,"object-sidebar__loading"],[1,"tab"],[1,"tab__item",3,"title","click"],["xmlns","http://www.w3.org/2000/svg","viewBox","0 0 24 24",1,"tab__item__icon"],["d","M14 2H6c-1.1 0-1.99.9-1.99 2L4 20c0 1.1.89 2 1.99 2H18c1.1 0 2-.9 2-2V8l-6-6zm2 16H8v-2h8v2zm0-4H8v-2h8v2zm-3-5V3.5L18.5 9H13z"],["d","M19.9,16.9c-0.9,0-1.7,0.4-2.3,1l-3.9-2.4c0.3-0.6,0.5-1.3,0.5-2c0-2.1-1.6-3.8-3.7-4v-4c0.9-0.3,1.6-1.1,1.6-2.1c0-1.2-1-2.2-2.2-2.2c-1.2,0-2.2,1-2.2,2.2c0,1.1,0.7,2,1.7,2.2v3.9c-2,0.3-3.5,2-3.5,4c0,0.9,0.3,1.7,0.8,2.4l-3,3.2C3.6,19,3.3,18.9,3,18.9c-1.1,0-2,0.9-2,2c0,1.1,0.9,2,2,2s2-0.9,2-2c0-0.4-0.1-0.8-0.3-1.1l3-3.2c0.7,0.6,1.6,0.9,2.6,0.9c1.2,0,2.2-0.5,2.9-1.3l3.9,2.4c-0.1,0.3-0.2,0.7-0.2,1.1c0,1.6,1.4,2.9,3.1,2.9c1.7,0,3.1-1.3,3.1-2.9C23,18.2,21.6,16.9,19.9,16.9z"],[3,"datasource","selectedItemId","optionalColumnSet","itemSelected"]],template:function(e,t){1&e&&(M.Yb(0,"div",0),M.Sc(1,A,3,1,"figure",1),M.Sc(2,N,7,10,"header",2),M.Sc(3,R,1,3,"sda-objects-list-view",3),M.Xb(),M.Yb(4,"div",4),M.Yb(5,"router-outlet",5),M.hc("activate",(function(e){return t.onActivate(e.route)})),M.Xb(),M.Xb()),2&e&&(M.Eb(1),M.sc("ngIf",!t.initialized),M.Eb(1),M.sc("ngIf",t.initialized),M.Eb(1),M.sc("ngIf",t.initialized))},directives:[s.t,o.l,P],styles:["[_nghost-%COMP%]{display:flex;flex:1 1 100%;min-width:0}[_nghost-%COMP%]     .uxt-property-grid .uxt-property-section-header{border-bottom:1px solid #cfd6dd;padding:0 8px;background-color:#f0f2f4;font-size:16px;-webkit-user-select:none;-ms-user-select:none;user-select:none}.object-sidebar[_ngcontent-%COMP%]{display:flex;flex:0 0 300px;flex-direction:column;background-color:#e8f7ff}.object-sidebar__loading[_ngcontent-%COMP%]{padding:20px}sda-objects-list-view[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;min-height:0;background-color:#ebedf0}.tab[_ngcontent-%COMP%]{display:flex;height:44px}.tab__item[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex:1 1 50%;cursor:pointer}.tab__item--active[_ngcontent-%COMP%]{background-color:#0087c8}.tab__item--active[_ngcontent-%COMP%]     path{fill:#fff}.tab__item--inactive[_ngcontent-%COMP%]{background-color:#fff}.tab__item--inactive[_ngcontent-%COMP%]     path{fill:#00608f}.tab__item__icon[_ngcontent-%COMP%]{width:22px;height:22px}.object-view[_ngcontent-%COMP%]{display:flex;flex-grow:1;min-width:0}"]}),e})();var F=i("EY2u"),J=i("JIr8"),k=i("lJxs");let V=(()=>{class e{constructor(e,t,i,s){this.filterQueryService=e,this.sdaTranslateService=t,this.exceptionService=i,this.router=s,this.ERROR_LOADING_ITEM=this.sdaTranslateService.get("ERROR_LOADING_ITEM","Specified item not found. <BR/><BR/>This could be because the item doesn't exist or because you don't have permission to view it. Please contact your administrator for more information.")}resolve(e){const t=e.params.config?JSON.parse(e.params.config):[""],i=e.params.queryFilter?JSON.parse(e.params.queryFilter):"";return i?(i.entityType&&"Objects"!==i.entityType||(i.ignoreQueryBySelectedConfig=!0),this.filterQueryService.getObjects(i,t[0]).pipe(Object(J.a)(()=>this.handleResolveError()),Object(k.a)(e=>e&&0!==e.length?e:this.handleResolveError()))):this.handleResolveError()}handleResolveError(){return this.exceptionService.handleException(new m.a(this.ERROR_LOADING_ITEM)),this.router.navigate([]),Object(F.b)()}}return e.\u0275fac=function(t){return new(t||e)(M.dc(_.a),M.dc(S.a),M.dc(p.a),M.dc(o.g))},e.\u0275prov=M.Ob({token:e,factory:e.\u0275fac}),e})();const X=[{path:"",component:B,resolve:{object:V},children:[{path:"detail/:obid",loadChildren:()=>Promise.all([i.e(0),i.e(1),i.e(2),i.e(3),i.e(4),i.e(5),i.e(6),i.e(7),i.e(8),i.e(9),i.e(11),i.e(10),i.e(13),i.e(12),i.e(14),i.e(15),i.e(16),i.e(17),i.e(18),i.e(19),i.e(20),i.e(22),i.e(23),i.e(24),i.e(86)]).then(i.bind(null,"t5lW")).then(e=>e.DetailsRoutingModule)},{path:"infomap-viewer",loadChildren:()=>Promise.all([i.e(0),i.e(1),i.e(2),i.e(3),i.e(4),i.e(5),i.e(6),i.e(7),i.e(8),i.e(9),i.e(11),i.e(10),i.e(13),i.e(12),i.e(14),i.e(15),i.e(16),i.e(17),i.e(18),i.e(19),i.e(20),i.e(22),i.e(23),i.e(24),i.e(36),i.e(120)]).then(i.bind(null,"HKSQ")).then(e=>e.InfoMapRoutingModule)}]}];let z=(()=>{class e{}return e.\u0275mod=M.Qb({type:e}),e.\u0275inj=M.Pb({factory:function(t){return new(t||e)},providers:[V],imports:[[o.k.forChild(X)],o.k]}),e})(),Y=(()=>{class e{}return e.\u0275mod=M.Qb({type:e}),e.\u0275inj=M.Pb({factory:function(t){return new(t||e)},imports:[[s.c,n.j,c.b,z,a.a,o.k,r.a]]}),e})()}}]);