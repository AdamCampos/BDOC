(window.webpackJsonp=window.webpackJsonp||[]).push([[19],{"/d3C":function(e,t,i){"use strict";i.d(t,"a",(function(){return v}));var s=i("fXoL"),n=i("LRne"),l=i("vkgz"),a=i("eIep"),o=i("5+tZ"),r=i("IzEk"),c=i("7c1w"),d=i("ONOH"),h=i("POgZ"),p=i("ayYE"),u=i("TvZe"),f=i("Sj5/"),g=i("ghPn"),b=i("N/AQ"),D=i("A3La"),O=i("Teex"),m=i("Ejbi"),y=i("UVhF"),S=i("ZW2Q"),I=i("pyKC"),w=i("XcX5"),E=i("raf2"),C=i("Dmzp");let v=(()=>{class e extends w.a{constructor(e,t,i,n,l,a,o){super(e,t,i),this.sdaTranslateService=e,this.relationshipItemsService=t,this.formService=i,this.odataService=n,this.configService=l,this.relDetailsService=a,this.columnSetRepository=o,this.objectsViewMode=E.a.Grid,this.allResults=[],this.preSelectedObjects=[],this.RELATIONSHIP_FILTER_ADD=this.sdaTranslateService.get("RELATIONSHIP_FILTER_ADD","ADD"),this.REQUIRES_PARENT_SELECTION=this.sdaTranslateService.get("REQUIRES_PARENT_SELECTION","Requires parent selection"),this.searchTerm="*",this.clearSelectedItems=!1,this.resetResultsTriggered=new s.o,this.NAME_LABEL=this.sdaTranslateService.get("FILE_UPLOAD_NAME","Name"),this.DESCRIPTION_LABEL=this.sdaTranslateService.get("DESCRIPTION_LABEL","Description"),this.addedOptions=[],this.peekResults=new u.a(void 0),this.peekFunction=e=>this.peekSearchQuery(e)}ngOnInit(){this.initializeComponent(),this.placeholder=this.sdaTranslateService.getFormatted("RELATIONSHIP_FILTER_SEARCH_PLACEHOLDER","Search {0}",[this.field.DisplayName]),this.searchTooltip=this.sdaTranslateService.getFormatted("RELATIONSHIP_FILTER_SEARCH_TOOLTIP","Filter {0}",[this.field.DisplayName]),this.navigationPath=this.field.EdgeDefUID?this.field.EdgeDefUID:this.field.NavigationPath,this.searchFilters=[new f.a("Name",this.NAME_LABEL,!0,!0),new f.a("Description",this.DESCRIPTION_LABEL,!1,!1)],this.getFilterColumnsetDetails().pipe(Object(l.a)(e=>{this.filterColumnSetUID=e}),Object(a.a)(()=>this.columnSetRepository.getColumnSetByRel(this.relDetailsService.getRelDefDirection(this.navigationPath)))).subscribe(e=>{e.ColumnItems.forEach(e=>{"CI_Name"!==e.UID&&"CI_Description"!==e.UID&&this.searchFilters.push(new f.a(e.UID,e.FriendlyName,!1,!1))})}),this.field.refreshOptionsEvent=new s.o,this.fieldOptionsRefreshSubscription=this.field.refreshOptionsEvent.subscribe(()=>this.onParentChanged()),this.setPreselectedOptions(),this.addPreselectedObjects()}ngOnDestroy(){this.fieldOptionsRefreshSubscription&&this.fieldOptionsRefreshSubscription.unsubscribe()}peekSearchQuery(e){const t=this.getStringArrayFromFilters(e.selectedFilters);return this.getDropDownOptions(e.searchTerm,t,!!e.selectedOptions&&!!e.selectedOptions.length,e.top,e.skip,e.loadMore).pipe(Object(o.a)(t=>this.onPeekCompleted(t,e.loadMore)))}onPeekCompleted(e,t){const i=new u.a(void 0);if(i.results=[],e&&e.value.length>0){const s=[],n=[];i.displayedCount=e.value.length,e.value.forEach(e=>{s.push(new S.a(e.OBID,e.Name,e.Name,!1,"",!1,"",e.ClassDef,e.SecondaryDisplayValue));const t=new g.b(e.Name,e.DisplayValue);t.secondaryDisplayName=e.SecondaryDisplayValue,i.results.push(t),n.push({OBID:e.OBID,Name:e.Name,UID:e.UID,ClassDef:e.ClassDef})}),t?(this.allResults=this.allResults.concat(n),this.clearSelectedItems=!1,this.field.dropDownOptions=this.field.dropDownOptions.concat(s),this.peekResults.results=this.peekResults.results.concat(i.results),this.peekResults.displayedCount=this.peekResults.displayedCount+i.displayedCount):(i.totalCount=e.count,this.allResults=n,this.clearSelectedItems=!0,this.field.dropDownOptions=s,this.peekResults=i)}else this.peekResults=i;return Object(n.a)(this.peekResults)}handleAddedObjects(e){this.addedOptions=[],e.forEach(e=>{const t=new S.a(e.OBID,e.Name,e.Name,!1,"",!1,"",e.ClassDef);this.addedOptions.push(t)}),this.handleSelectedItemsChange(this.addedOptions)}searchTermUpdated(e){this.searchTerm=e}onParentChanged(){this.resetResultsTriggered.emit()}getFilterColumnsetDetails(){return this.getDisplayItemFilterColumnsetDetails().pipe(Object(r.a)(1),Object(a.a)(e=>{if(e&&e.value){const t=e.value[0].SPFDisplayItemFilterColumnset_12;return t&&t.UID?Object(n.a)(t.UID):Object(n.a)("CS_SPFNameDescription")}return Object(n.a)("CS_SPFNameDescription")}))}getDisplayItemFilterColumnsetDetails(){return this.odataService.get("Objects?$filter=Class eq 'SPFDisplayItem' and UID eq '"+this.field.UID+"'&$expand=SPFDisplayItemFilterColumnset_12",this.configService.selectedCreateConfig)}addPreselectedObjects(){if(this.field.Value&&!this.field.ReadOnly||this.field.ContextOBIDs&&this.field.ContextOBIDs.length>0){this.field.showLoadingIndicator=!0;const e=this.field.ContextOBIDs&&this.field.ContextOBIDs.length>0?this.field.ContextOBIDs:this.dropDownOptionsOBIDs,t=e.map(e=>e).join("~");this.formService.getFormDropDownOptionsWithSearch(this.field.UID,t,this.field.NavigationPath,["OBID"],!0).pipe(Object(r.a)(1)).subscribe(t=>{this.preSelectDropDownOptionsFromValue(t.value,e)})}}preSelectDropDownOptionsFromValue(e,t){if(e&&e.length>0){const i=e.filter(e=>t.filter(t=>e.OBID===t).length>0);let s;s=i?i.map(e=>new S.a(e.OBID,e.DisplayValue,e.DisplayValue,!1,e.Description,!1,"",e.ClassDef,e.SecondaryDisplayValue)):this.selectedItems,this.setPreselectedObjects(s)}this.field.showLoadingIndicator=!1,this.field.awaitingParentSelection=!0}setPreselectedObjects(e){const t=[];e.forEach(e=>{t.push({OBID:e.obid,Name:e.name,UID:e.uid,ClassDef:e.classDef})}),this.preSelectedObjects=t}}return e.\u0275fac=function(t){return new(t||e)(s.Sb(m.a),s.Sb(I.a),s.Sb(y.a),s.Sb(D.a),s.Sb(d.a),s.Sb(O.a),s.Sb(p.a))},e.\u0275cmp=s.Mb({type:e,selectors:[["sda-relationship-filter-type"]],inputs:{objectsViewMode:"objectsViewMode"},features:[s.Db([c.a,h.a,b.a]),s.Bb],decls:1,vars:17,consts:[[3,"searchTerm","searchPlaceholder","filters","searchTooltip","isDisabled","actionButtonDisplayName","disabledPlaceholder","filterColumnSetUID","navigationPath","isLoading","preSelectedObjects","objectsViewMode","peekFunction","clearSelectedItems","allResults","field","resetResultsTriggered","onAddObjects","searchTermUpdated"]],template:function(e,t){1&e&&(s.Yb(0,"sda-relationship-filter-wrapper",0),s.hc("onAddObjects",(function(e){return t.handleAddedObjects(e)}))("searchTermUpdated",(function(e){return t.searchTermUpdated(e)})),s.Xb()),2&e&&s.sc("searchTerm",t.searchTerm)("searchPlaceholder",t.placeholder)("filters",t.searchFilters)("searchTooltip",t.searchTooltip)("isDisabled",!1===t.field.awaitingParentSelection)("actionButtonDisplayName",t.RELATIONSHIP_FILTER_ADD)("disabledPlaceholder",t.REQUIRES_PARENT_SELECTION)("filterColumnSetUID",t.filterColumnSetUID)("navigationPath",t.navigationPath)("isLoading",t.field.showLoadingIndicator)("preSelectedObjects",t.preSelectedObjects)("objectsViewMode",t.objectsViewMode)("peekFunction",t.peekFunction)("clearSelectedItems",t.clearSelectedItems)("allResults",t.allResults)("field",t.field)("resetResultsTriggered",t.resetResultsTriggered)},directives:[C.a],styles:["[_nghost-%COMP%]{display:flex;width:100%}"]}),e})()},"9his":function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("ofXK"),n=i("3Pt+"),l=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=l.Qb({type:e}),e.\u0275inj=l.Pb({factory:function(t){return new(t||e)},imports:[[s.c,n.j]]}),e})()},ARL0:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i("5mBa"),n=i("fXoL"),l=i("ofXK"),a=i("0aHC"),o=i("4dwF");function r(e,t){if(1&e&&(n.Yb(0,"span",2),n.Uc(1),n.mc(2,"sdaConvertToInteger"),n.Xb()),2&e){const e=n.lc();n.Eb(1),n.Wc(" ",n.nc(2,1,e.field.Value),"\n")}}function c(e,t){if(1&e){const e=n.Zb();n.Yb(0,"sda-int-type",3),n.hc("valueChanged",(function(t){return n.Kc(e),n.lc().onValueChanged(t)})),n.Xb()}if(2&e){const e=n.lc();n.sc("value",e.field.Value)("isEditable",!0)("fieldLengthForInput",e.field.FieldLengthForInput)("readOnly",e.field.ReadOnly)("fieldSize",e.field.FieldSize)}}let d=(()=>{class e extends s.a{ngOnInit(){this.initializeComponent()}onValueChanged(e){this.field.patternInvalid=e.isInvalid,this.field.Value=e.value,this.valueChanged.emit(this.field)}}return e.\u0275fac=function(t){return h(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["sda-form-int-type"]],features:[n.Bb],decls:2,vars:2,consts:[["class","form-int-non-editable",4,"ngIf"],[3,"value","isEditable","fieldLengthForInput","readOnly","fieldSize","valueChanged",4,"ngIf"],[1,"form-int-non-editable"],[3,"value","isEditable","fieldLengthForInput","readOnly","fieldSize","valueChanged"]],template:function(e,t){1&e&&(n.Sc(0,r,3,3,"span",0),n.Sc(1,c,1,5,"sda-int-type",1)),2&e&&(n.sc("ngIf",!t.isEditable),n.Eb(1),n.sc("ngIf",t.isEditable))},directives:[l.t,a.a],pipes:[o.a],styles:[".form-int-non-editable[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:34px;line-height:1.1}"]}),e})();const h=n.ac(d)},BpZz:function(e,t,i){"use strict";i.d(t,"a",(function(){return re}));var s=i("Ejbi"),n=i("FedY"),l=i("YsXg"),a=i("UVhF"),o=i("ZW2Q"),r=i("C8de"),c=i("KkJr"),d=i("pyKC"),h=i("xNQ3"),p=i("raf2"),u=i("fXoL"),f=i("tyNb"),g=i("ofXK"),b=i("tk/3"),D=i("LRne"),O=i("IzEk"),m=i("5+tZ"),y=i("TvZe"),S=i("Sj5/"),I=i("ghPn"),w=i("2ufx"),E=i("4vCl"),C=i("XcX5"),v=i("YVwg"),_=i("Yzie"),M=i("3Pt+"),P=i("TLn4");function R(e,t){if(1&e){const e=u.Zb();u.Yb(0,"input",2),u.hc("click",(function(){return u.Kc(e),u.lc().readOnlyInputClick()})),u.Xb()}if(2&e){const e=u.lc();u.sc("value",e.displayValue)}}function L(e,t){if(1&e){const e=u.Zb();u.Yb(0,"sda-peek-and-filters-search",8),u.hc("onSearch",(function(t){return u.Kc(e),u.lc(2).search(t)})),u.Xb()}if(2&e){const e=u.lc(2);u.sc("searchTerm",e.searchText)("filters",e.searchProperties)("displayUseIsEqualTo",!0)("placeholder",e.searchPlaceholder)("disabledPlaceholder",e.REQUIRES_PARENT_SELECTION)("enablePaging",!0)("peekFunction",e.peekFunction)("allowMultipleConfigs",!1)("isLoading",e.field.showLoadingIndicator)("isDisabled",!1===e.field.awaitingParentSelection)}}function T(e,t){if(1&e&&(u.Yb(0,"p",9),u.Uc(1),u.Xb()),2&e){const e=u.lc(2);u.Eb(1),u.Vc(e.NO_RESULTS_FOUND)}}function x(e,t){if(1&e){const e=u.Zb();u.Yb(0,"div",12),u.Yb(1,"sda-list-view",13),u.hc("selectedItemsChange",(function(t){return u.Kc(e),u.lc(3).handleSelectedItemsChange(t)})),u.Xb(),u.Xb()}if(2&e){const e=u.lc(3);u.Rc("width",e.displayFieldSize(),"px"),u.Ib("list-view--disabled",e.field.ReadOnly),u.Eb(1),u.sc("selectedItems",e.selectedItems)("isMultiselectActive",!0)("isMultiselectEnabled",!0)("isSelectAllEnabled",e.field.dropDownOptions.length>0)("items",e.field.dropDownOptions)("selectAllText",e.SELECT_ALL)}}function F(e,t){if(1&e&&(u.Yb(0,"option",18),u.Uc(1),u.Xb()),2&e){const e=t.$implicit;u.sc("disabled",e.isDisabled)("ngValue",e.obid),u.Eb(1),u.Wc(" ",e.secondaryDisplayValue&&e.secondaryDisplayValue.length>0?e.displayValue+", "+e.secondaryDisplayValue:e.displayValue," ")}}function V(e,t){1&e&&u.Tb(0,"sda-loading-indicator",19),2&e&&u.sc("size",20)("styleClass","loader--xsmall")}function k(e,t){if(1&e){const e=u.Zb();u.Yb(0,"div",14),u.Yb(1,"select",15),u.hc("ngModelChange",(function(t){return u.Kc(e),u.lc(3).selectedItem=t}))("change",(function(){return u.Kc(e),u.lc(3).showEditable=!1})),u.Sc(2,F,2,3,"option",16),u.Xb(),u.Sc(3,V,1,2,"sda-loading-indicator",17),u.Xb()}if(2&e){const e=u.lc(3);u.Eb(1),u.sc("ngModel",e.selectedItem)("disabled",e.field.ReadOnly||!1===e.field.awaitingParentSelection||!0===e.field.showLoadingIndicator||!e.field.dropDownOptions.length),u.Eb(1),u.sc("ngForOf",e.field.dropDownOptions),u.Eb(1),u.sc("ngIf",e.field.showLoadingIndicator)}}function N(e,t){if(1&e&&(u.Wb(0),u.Sc(1,x,2,10,"div",10),u.Sc(2,k,4,4,"div",11),u.Vb()),2&e){const e=u.lc(2);u.Eb(1),u.sc("ngIf",e.isMultiSelect),u.Eb(1),u.sc("ngIf",!e.isMultiSelect)}}function A(e,t){if(1&e&&(u.Yb(0,"div",3),u.Yb(1,"div",4),u.Sc(2,L,1,10,"sda-peek-and-filters-search",5),u.Sc(3,T,2,1,"p",6),u.Xb(),u.Sc(4,N,3,2,"ng-container",7),u.Xb()),2&e){const e=u.lc();u.Eb(1),u.Ib("rel-query--empty",e.listHasEmptyResults()),u.Eb(1),u.sc("ngIf",!e.field.ReadOnly),u.Eb(1),u.sc("ngIf",e.listHasEmptyResults()),u.Eb(1),u.sc("ngIf",null==e.field.dropDownOptions?null:e.field.dropDownOptions.length)}}let U=(()=>{class e extends C.a{constructor(e,t,i,s,n){super(t,i,e),this.formService=e,this.sdaTranslateService=t,this.relationshipItemsService=i,this.documentService=s,this.elementRef=n,this.isDropdownListDisabled=!1,this.searchText="*",this.searchFields=["Name"],this.useIsEqualTo=!1,this.REQUIRES_PARENT_SELECTION=this.sdaTranslateService.get("REQUIRES_PARENT_SELECTION","Requires parent selection"),this.NAME_LABEL=this.sdaTranslateService.get("FILE_UPLOAD_NAME","Name"),this.DESCRIPTION_LABEL=this.sdaTranslateService.get("DESCRIPTION_LABEL","Description"),this.querySearchTerm="*",this.peekResults=new y.a(void 0),this.peekFunction=e=>this.peekSearchQuery(e)}ngOnInit(){if(this.initializeComponent(),this.searchProperties=[new S.a("Name",this.NAME_LABEL,!0,!0),new S.a("Description",this.DESCRIPTION_LABEL,!1,!1)],this.field.refreshOptionsEvent=new u.o,this.field.refreshOptionsEvent.subscribe(()=>this.onParentChanged()),this.field.IsDependentItem&&(this.field.awaitingParentSelection=!1),this.setCardinality(),this.setPreselectedOptions(),this.isMultiSelect&&this.field.DefaultDropDownOptions&&this.field.DefaultDropDownOptions.length)this.preMultiSelectItems();else{let e;if(this.field.DisplayAs)e=new o.a(this.field.Value,this.field.DisplayAs,this.field.DisplayAs),this.preSingleSelectItem(e);else if(this.field.DefaultDropDownOptions&&this.field.DefaultDropDownOptions.length){const t=this.field.DefaultDropDownOptions[0];e=new o.a(t.OBID,t.DisplayValue,t.DisplayValue,!1,t.Description,!0,t.UID,t.ClassDef,t.SecondaryDisplayValue),this.preSingleSelectItem(e)}else this.field.Value&&!this.field.ReadOnly&&(this.field.showLoadingIndicator=!0,this.formService.getFormDropDownOptionsWithSearch(this.field.UID,this.field.Value,this.field.NavigationPath,["OBID"],!0).pipe(Object(O.a)(1)).subscribe(e=>{this.preSelectDropDownOptionsFromValue(e.value)}))}this.updateSearchDataType()}peekSearchQuery(e){const t=this.getStringArrayFromFilters(e.selectedFilters),i=!!e.selectedOptions&&!!e.selectedOptions.length;return this.searchText=e.searchTerm,this.getDropDownOptions(e.searchTerm,t,i,e.top,e.skip,e.loadMore).pipe(Object(m.a)(t=>this.onPeekCompleted(t,e.loadMore)))}search(e,t=!1){if(e||this.field.selectedParentItems){let i,s,n;e&&(this.querySearchTerm=e.searchTerm,e.isPeekSelectionSearch||(this.searchText=this.querySearchTerm),this.useIsEqualTo=!!e.selectedOptions&&!!e.selectedOptions.length,this.searchFields=this.getStringArrayFromFilters(e.selectedFilters),i=e.top,s=e.skip),this.field.showLoadingIndicator=!0,n=this.field.selectedParentItems?this.updateWithSelectedParentItem(t,i,s):this.getFormDropDownOptionsWithSearch(e.searchTerm,this.searchFields,this.useIsEqualTo,i,s),n.subscribe(e=>{this.onSearchCompleted(e.value,t)})}}readOnlyInputClick(){this.clickSingleReadOnlyInput(),this.collided=this.documentService.bottomCollideCheck(this.elementRef.nativeElement.querySelector(".rel-find-input"),300)}listHasEmptyResults(){return this.isMultiSelect&&this.field.dropDownOptions&&!this.field.dropDownOptions.length}updateSearchDataType(){this.searchPlaceholder=this.sdaTranslateService.getFormatted("SEARCH_BAR_SEARCH_BY_PLACEHOLDER","Search {0}...",[this.field.DisplayName])}updateWithSelectedParentItem(e,t,i){if(e){if(this.isMultiSelect)return this.getFormDependentOptionsForDependentItemsWithSearch("*",this.searchFields,!1,t,i);{const e=new E.a(new b.e);return e.value=[],e.count=0,Object(D.a)(e)}}return this.getFormDependentOptionsForDependentItemsWithSearch(this.searchText,this.searchFields,this.useIsEqualTo,t,i)}onParentChanged(){this.search(void 0,!0)}onPeekCompleted(e,t){const i=new y.a(void 0);return i.results=[],e&&e.value&&e.value.length>0?(i.displayedCount=e.value.length,e.value.forEach(e=>{const t=new I.b(e.Name,e.DisplayValue);t.secondaryDisplayName=e.SecondaryDisplayValue,i.results.push(t)}),t?(this.peekResults.results=this.peekResults.results.concat(i.results),this.peekResults.displayedCount=this.peekResults.displayedCount+i.displayedCount):(i.totalCount=e.count,this.peekResults=i)):this.peekResults=i,Object(D.a)(this.peekResults)}onSearchCompleted(e,t=!1){this.isMultiSelect?this.onSearchMaxMultiRels(e,t):this.onSearchMaxSingleRel(e,t),this.field.showLoadingIndicator=!1,this.field.awaitingParentSelection=!0}preSingleSelectItem(e){this.field.dropDownOptions=[],this.field.dropDownOptions.push(e),this.selectedItem=e.obid}preMultiSelectItems(){let e=[];this.field.DefaultDropDownOptions&&(e=this.field.DefaultDropDownOptions.map(e=>new o.a(e.OBID,e.DisplayValue,e.DisplayValue,!1,e.Description,!0,e.UID,e.ClassDef,e.SecondaryDisplayValue))),e=e.sort((e,t)=>n.a.sortByString(e.displayValue,t.displayValue)),this.field.dropDownOptions=e,this.handleSelectedItemsChange(e)}onSearchMaxSingleRel(e,t){t?(this.field.dropDownOptions=void 0,this.selectedItem=""):this.parseMaxSingleDropDownOptions(e,this.field.selectedItem);const i=e.filter(e=>e.Name&&e.Name.toLowerCase()===this.querySearchTerm.toLowerCase());1===i.length&&(this.selectedItem=i[0].OBID)}onSearchMaxMultiRels(e,t){let i=[];if(t){if(this.field.dropDownOptions&&this.field.dropDownOptions){const t=[],s=this.field.dropDownOptions.filter(e=>!this.selectedItems.filter(t=>t.obid===e.obid).length);e.forEach(e=>{this.selectedItems.filter(t=>e.OBID===t.obid).length>0&&t.push(e),s.filter(t=>t.obid===e.OBID).length>0&&i.push(e)}),t.length>0||i.length>0?this.parseMaxMultiRelDropDownOptions(i,t):(this.field.dropDownOptions=void 0,this.selectedItemsChanged([]))}}else i=e.filter(e=>!this.selectedItems.filter(t=>e.OBID===t.obid).length),this.parseMaxMultiRelDropDownOptions(i)}preSelectDropDownOptionsFromValue(e){if(e&&e.length>0){const t=e.filter(e=>this.dropDownOptionsOBIDs.filter(t=>e.OBID===t).length>0);this.isMultiSelect?this.parseMaxMultiRelDropDownOptions([],t):this.parseMaxSingleDropDownOptions(t,this.field.Value)}this.field.showLoadingIndicator=!1,this.field.awaitingParentSelection=!0}}return e.\u0275fac=function(t){return new(t||e)(u.Sb(a.a),u.Sb(s.a),u.Sb(d.a),u.Sb(w.a),u.Sb(u.l))},e.\u0275cmp=u.Mb({type:e,selectors:[["sda-relationship-find-type"]],features:[u.Bb],decls:2,vars:2,consts:[["type","text","class","rel-find-input",3,"value","click",4,"ngIf"],["class","rel-find",4,"ngIf"],["type","text",1,"rel-find-input",3,"value","click"],[1,"rel-find"],[1,"rel-query"],[3,"searchTerm","filters","displayUseIsEqualTo","placeholder","disabledPlaceholder","enablePaging","peekFunction","allowMultipleConfigs","isLoading","isDisabled","onSearch",4,"ngIf"],["class","rel-query__message",4,"ngIf"],[4,"ngIf"],[3,"searchTerm","filters","displayUseIsEqualTo","placeholder","disabledPlaceholder","enablePaging","peekFunction","allowMultipleConfigs","isLoading","isDisabled","onSearch"],[1,"rel-query__message"],["class","rel-multi",3,"list-view--disabled","width",4,"ngIf"],["class","rel-pick",4,"ngIf"],[1,"rel-multi"],["primaryTextProperty","displayValue","secondaryTextProperty","secondaryDisplayValue",1,"rel-find__list",3,"selectedItems","isMultiselectActive","isMultiselectEnabled","isSelectAllEnabled","items","selectAllText","selectedItemsChange"],[1,"rel-pick"],["name","selectedItem",1,"rel-pick__select",3,"ngModel","disabled","ngModelChange","change"],[3,"disabled","ngValue",4,"ngFor","ngForOf"],[3,"size","styleClass",4,"ngIf"],[3,"disabled","ngValue"],[3,"size","styleClass"]],template:function(e,t){1&e&&(u.Sc(0,R,1,1,"input",0),u.Sc(1,A,5,5,"div",1)),2&e&&(u.sc("ngIf",t.displaySingleReadOnlyInput()),u.Eb(1),u.sc("ngIf",t.displayEditableControls()))},directives:[g.t,v.a,_.a,M.B,M.p,M.s,g.s,M.u,M.E,P.a],styles:["[_nghost-%COMP%]   .rel-query__message[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]{display:flex}[_nghost-%COMP%]   .rel-query[_ngcontent-%COMP%]{display:inline-flex;flex-flow:column wrap}[_nghost-%COMP%]   .rel-query--empty[_ngcontent-%COMP%]{background:#8997a5;padding:8px}[_nghost-%COMP%]   .rel-query--empty[_ngcontent-%COMP%]     .search-query{border:0}[_nghost-%COMP%]   .rel-query__message[_ngcontent-%COMP%]{max-width:350px;height:35px;padding-top:10px;color:#fff;text-transform:uppercase;font-weight:500}[_nghost-%COMP%]   .rel-query[_ngcontent-%COMP%]     sda-searchbar{display:inline-flex;width:100%}[_nghost-%COMP%]   .rel-query[_ngcontent-%COMP%]     .search-options{flex-flow:column wrap}[_nghost-%COMP%]   .rel-query[_ngcontent-%COMP%]     .search-options__left{width:100%;margin-bottom:8px;padding:0;border-bottom:1px solid #ebedf0;border-right:0}[_nghost-%COMP%]   .rel-query[_ngcontent-%COMP%]     .search-options__right{width:100%}[_nghost-%COMP%]   .rel-query[_ngcontent-%COMP%]     .filters-search-list{min-height:0}[_nghost-%COMP%]   .rel-query[_ngcontent-%COMP%]     .filters-search-list .list-base__items{height:auto}[_nghost-%COMP%]   .rel-query[_ngcontent-%COMP%]     .search-settings-bar{padding:0}[_nghost-%COMP%]   .rel-query[_ngcontent-%COMP%]     .settings{height:46px;padding:6px 10px}[_nghost-%COMP%]   sda-loading-indicator[_ngcontent-%COMP%]     .loader__inner:after{border-width:3px!important}"]}),e})();var X=i("/d3C");function B(e,t){if(1&e){const e=u.Zb();u.Yb(0,"a",8),u.hc("click",(function(){u.Kc(e);const t=u.lc().$implicit,i=u.lc(2);return i.goToRelatedItem(i.field,t)})),u.Uc(1),u.Xb()}if(2&e){const e=u.lc().$implicit;u.Eb(1),u.Wc(" ",e.DisplayAs," ")}}function j(e,t){if(1&e&&(u.Yb(0,"span",9),u.Uc(1),u.Xb()),2&e){const e=u.lc().$implicit;u.Eb(1),u.Wc(" ",e.DisplayAs," ")}}function Y(e,t){if(1&e&&(u.Yb(0,"li",5),u.Sc(1,B,2,1,"a",6),u.Sc(2,j,2,1,"span",7),u.Xb()),2&e){const e=u.lc(2);u.sc("ngSwitch",e.field.ReadOnly||e.field.DisableRelHyperlink),u.Eb(1),u.sc("ngSwitchCase",!1),u.Eb(1),u.sc("ngSwitchCase",!0)}}function z(e,t){if(1&e&&(u.Yb(0,"ul",3),u.Sc(1,Y,3,3,"li",4),u.Xb()),2&e){const e=u.lc();u.Eb(1),u.sc("ngForOf",e.field.RelObjects)}}function K(e,t){if(1&e){const e=u.Zb();u.Yb(0,"input",10),u.hc("click",(function(){return u.Kc(e),u.lc().clickSingleReadOnlyInput()})),u.Xb()}if(2&e){const e=u.lc();u.sc("value",e.displayValue)}}function q(e,t){if(1&e){const e=u.Zb();u.Yb(0,"sda-relationship-find-type",15),u.hc("valueChanged",(function(t){return u.Kc(e),u.lc(2).onValueChanged(t)}))("isOpen",(function(t){return u.Kc(e),u.lc(2).showEditable=t})),u.Xb()}if(2&e){const e=u.lc(2);u.sc("field",e.field)("isEditable",e.isEditable)("showEditableValue",e.showEditableValue)("singleLine",e.singleLine)("resultsOverlay",e.resultsOverlay)}}function W(e,t){if(1&e){const e=u.Zb();u.Yb(0,"sda-relationship-find-type",15),u.hc("valueChanged",(function(t){return u.Kc(e),u.lc(2).onValueChanged(t)}))("isOpen",(function(t){return u.Kc(e),u.lc(2).showEditable=t})),u.Xb()}if(2&e){const e=u.lc(2);u.sc("field",e.field)("isEditable",e.isEditable)("showEditableValue",e.showEditableValue)("singleLine",e.singleLine)("resultsOverlay",e.resultsOverlay)}}function Q(e,t){if(1&e){const e=u.Zb();u.Yb(0,"sda-relationship-filter-type",16),u.hc("valueChanged",(function(t){return u.Kc(e),u.lc(2).onValueChanged(t)}))("isOpen",(function(t){return u.Kc(e),u.lc(2).showEditable=t})),u.Xb()}if(2&e){const e=u.lc(2);u.sc("field",e.field)("isEditable",e.isEditable)("showEditableValue",e.showEditableValue)("singleLine",e.singleLine)("resultsOverlay",e.resultsOverlay)("objectsViewMode",e.mode.Chips)}}function H(e,t){if(1&e&&(u.Yb(0,"option",27),u.Uc(1),u.Xb()),2&e){const e=t.$implicit;u.sc("disabled",e.isDisabled)("value",e.obid),u.Eb(1),u.Wc(" ",e.displayValue," ")}}function Z(e,t){if(1&e&&(u.Yb(0,"option",27),u.Uc(1),u.Xb()),2&e){const e=t.$implicit;u.sc("disabled",e.isDisabled)("value",e.obid),u.Eb(1),u.Wc(" ",e.description," ")}}function $(e,t){if(1&e){const e=u.Zb();u.Yb(0,"div",24),u.Yb(1,"select",25),u.hc("ngModelChange",(function(t){return u.Kc(e),u.lc(4).selectedItem=t}))("change",(function(){return u.Kc(e),u.lc(4).showEditable=!1})),u.Sc(2,H,2,3,"option",26),u.Xb(),u.Yb(3,"select",25),u.hc("ngModelChange",(function(t){return u.Kc(e),u.lc(4).selectedItem=t}))("change",(function(){return u.Kc(e),u.lc(4).showEditable=!1})),u.Sc(4,Z,2,3,"option",26),u.Xb(),u.Xb()}if(2&e){const e=u.lc(4);u.Eb(1),u.sc("ngModel",e.selectedItem)("disabled",e.disableDropdown()),u.Eb(1),u.sc("ngForOf",e.field.dropDownOptions),u.Eb(1),u.sc("ngModel",e.selectedItem)("disabled",e.disableDropdown()),u.Eb(1),u.sc("ngForOf",e.descriptionDropDown)}}function J(e,t){if(1&e&&(u.Yb(0,"option",31),u.Uc(1),u.Xb()),2&e){const e=t.$implicit;u.sc("disabled",e.isDisabled)("ngValue",e.obid),u.Eb(1),u.Wc(" ",e.secondaryDisplayValue&&e.secondaryDisplayValue.length>0?e.displayValue+", "+e.secondaryDisplayValue:e.displayValue," ")}}function G(e,t){1&e&&u.Tb(0,"sda-loading-indicator",32),2&e&&u.sc("size",20)("styleClass","loader--xsmall")}function ee(e,t){if(1&e){const e=u.Zb();u.Yb(0,"div",28),u.Yb(1,"select",25),u.hc("ngModelChange",(function(t){return u.Kc(e),u.lc(4).selectedItem=t}))("change",(function(){return u.Kc(e),u.lc(4).showEditable=!1})),u.Sc(2,J,2,3,"option",29),u.Xb(),u.Sc(3,G,1,2,"sda-loading-indicator",30),u.Xb()}if(2&e){const e=u.lc(4);u.Eb(1),u.sc("ngModel",e.selectedItem)("disabled",e.disableDropdown()),u.Eb(1),u.sc("ngForOf",e.field.dropDownOptions),u.Eb(1),u.sc("ngIf",e.field.showLoadingIndicator)}}function te(e,t){if(1&e&&(u.Yb(0,"p",37),u.Uc(1),u.Xb()),2&e){const e=u.lc(5);u.Eb(1),u.Wc(" ",e.getMultiSelectNoResultsMessage(e.field)," ")}}function ie(e,t){1&e&&u.Tb(0,"sda-loading-indicator",38),2&e&&u.sc("size",34)}function se(e,t){if(1&e&&(u.Yb(0,"div",33),u.Yb(1,"div",34),u.Sc(2,te,2,1,"p",35),u.Sc(3,ie,1,1,"sda-loading-indicator",36),u.Xb(),u.Xb()),2&e){const e=u.lc(4);u.Rc("width",e.field.FieldSize,"px"),u.Eb(2),u.sc("ngIf",!e.field.showLoadingIndicator),u.Eb(1),u.sc("ngIf",e.field.showLoadingIndicator)}}function ne(e,t){if(1&e){const e=u.Zb();u.Yb(0,"div",39),u.Yb(1,"sda-list-view",40),u.hc("selectedItemsChange",(function(t){return u.Kc(e),u.lc(4).handleSelectedItemsChange(t)})),u.Xb(),u.Xb()}if(2&e){const e=u.lc(4);u.Rc("width",e.displayFieldSize(),"px"),u.Ib("list-view--disabled",e.field.ReadOnly),u.Eb(1),u.sc("selectedItems",e.selectedItems)("isMultiselectActive",!0)("isMultiselectEnabled",!0)("isSelectAllEnabled",e.enableSelectAll())("items",e.field.dropDownOptions)("selectAllText",e.SELECT_ALL)}}function le(e,t){if(1&e&&(u.Yb(0,"div",19),u.Sc(1,$,5,6,"div",20),u.Sc(2,ee,4,4,"div",21),u.Sc(3,se,4,4,"div",22),u.Sc(4,ne,2,10,"div",23),u.Xb()),2&e){const e=u.lc(3);u.Eb(1),u.sc("ngIf",e.displayNameDescDropdowns()),u.Eb(1),u.sc("ngIf",e.displayOtherDropDowns()),u.Eb(1),u.sc("ngIf",e.displayMultiSelect()),u.Eb(1),u.sc("ngIf",e.displayMultiSelectList())}}function ae(e,t){if(1&e&&(u.Yb(0,"div",17),u.Sc(1,le,5,4,"div",18),u.Xb()),2&e){const e=u.lc(2);u.Eb(1),u.sc("ngIf",e.displayEditableControls())}}function oe(e,t){if(1&e&&(u.Yb(0,"div",11),u.Sc(1,q,1,5,"sda-relationship-find-type",12),u.Sc(2,W,1,5,"sda-relationship-find-type",12),u.Sc(3,Q,1,6,"sda-relationship-filter-type",13),u.Sc(4,ae,2,1,"div",14),u.Xb()),2&e){const e=u.lc();u.sc("ngSwitch",e.field.DisplayType),u.Eb(1),u.sc("ngSwitchCase","RelationshipFind"),u.Eb(1),u.sc("ngSwitchCase","RelationshipFindMultiselect"),u.Eb(1),u.sc("ngSwitchCase","RelationshipFilter")}}let re=(()=>{class e extends h.a{constructor(e,t,i,s,n){super(s,n),this.router=e,this.urlFilterFactory=t,this.formService=i,this.sdaTranslateService=s,this.relationshipItemsService=n,this.isDropdownListDisabled=!1,this.mode=p.a,this.REQUIRES_PARENT_SELECTION=this.sdaTranslateService.get("REQUIRES_PARENT_SELECTION","Requires parent selection"),this.parseDropDownOptions=e=>{if(e&&e.length>0)if(this.isMultiSelect){const t=e.filter(e=>this.dropDownOptionsOBIDs.filter(t=>e.OBID===t).length>0),i=e.filter(e=>!this.dropDownOptionsOBIDs.filter(t=>e.OBID===t).length);this.parseMaxMultiRelDropDownOptions(i,t)}else this.parseMaxSingleDropDownOptions(e,this.field.Value);this.displayNameDescDropdowns()&&this.sortDescriptionDropDownItems(),this.field.showLoadingIndicator=!1,this.field.awaitingParentSelection=!0}}ngOnInit(){this.initializeComponent(),this.isEditable&&!this.relFindDisplayType()&&(this.field.awaitingParentSelection=!1,this.setCardinality(),this.setPreselectedOptions(),this.field.IsDependentItem?this.isMultiSelect?this.field.dropDownOptions=[]:(this.field.dropDownOptions=[new o.a(c.c,c.c,this.REQUIRES_PARENT_SELECTION,!0,this.REQUIRES_PARENT_SELECTION,!1,c.c)],this.field.selectedItem=c.c):(this.field.showLoadingIndicator=!0,this.field.DefaultDropDownOptions&&this.field.DefaultDropDownOptions.length>0?this.parseDropDownOptions(this.field.DefaultDropDownOptions):this.field.ReadOnly?this.field.showLoadingIndicator=!1:this.formService.getFormDropDownOptions(this.field.UID).subscribe(e=>{this.parseDropDownOptions(e)})))}goToRelatedItem(e,t){const i=this.urlFilterFactory.createLinkFilterSettings(t.Key);this.router.navigate(["/objects",{queryFilter:JSON.stringify(i),config:JSON.stringify([t.Config])},"detail",t.Key])}onValueChanged(e){this.valueChanged.emit(e)}getMultiSelectNoResultsMessage(e){return!1===e.awaitingParentSelection?this.REQUIRES_PARENT_SELECTION:this.NO_RESULTS_FOUND}disableDropdown(){return!this.field.dropDownOptions||!this.field.dropDownOptions.length||this.field.ReadOnly||!1===this.field.awaitingParentSelection||this.field.showLoadingIndicator}displayNameDescDropdowns(){return!this.isMultiSelect&&"RelationshipNameDesc"===this.field.DisplayType}displayOtherDropDowns(){return!this.isMultiSelect&&"RelationshipNameDesc"!==this.field.DisplayType}displayMultiSelect(){return this.isMultiSelect&&(!this.field.dropDownOptions||!this.field.dropDownOptions.length)}displayMultiSelectList(){return this.isMultiSelect&&this.enableSelectAll()}enableSelectAll(){return!!this.field.dropDownOptions&&this.field.dropDownOptions.length>0}relFindDisplayType(){return this.field.DisplayType===r.a.RELATIONSHIP_FIND||this.field.DisplayType===r.a.RELATIONSHIP_FIND_MULTISELECT}sortDescriptionDropDownItems(){if(!this.isMultiSelect){const e=[];this.descriptionDropDown=this.field.dropDownOptions.filter(t=>{let i=!0;return t.obid!==c.b&&t.obid!==c.a||(e.push(t),i=!1),i}).sort((e,t)=>n.a.sortByString(e.description,t.description)),this.descriptionDropDown.unshift(...e)}}}return e.\u0275fac=function(t){return new(t||e)(u.Sb(f.g),u.Sb(l.a),u.Sb(a.a),u.Sb(s.a),u.Sb(d.a))},e.\u0275cmp=u.Mb({type:e,selectors:[["sda-relationship-type"]],inputs:{closeInput:"closeInput"},features:[u.Bb],decls:3,vars:3,consts:[["class","rel-type rel-type--non-editable",4,"ngIf"],["type","text",3,"value","click",4,"ngIf"],["class","rel-edit",3,"ngSwitch",4,"ngIf"],[1,"rel-type","rel-type--non-editable"],["class","rel-item",3,"ngSwitch",4,"ngFor","ngForOf"],[1,"rel-item",3,"ngSwitch"],["class","rel-item__data rel-item__data--link",3,"click",4,"ngSwitchCase"],["class","rel-item__data",4,"ngSwitchCase"],[1,"rel-item__data","rel-item__data--link",3,"click"],[1,"rel-item__data"],["type","text",3,"value","click"],[1,"rel-edit",3,"ngSwitch"],[3,"field","isEditable","showEditableValue","singleLine","resultsOverlay","valueChanged","isOpen",4,"ngSwitchCase"],[3,"field","isEditable","showEditableValue","singleLine","resultsOverlay","objectsViewMode","valueChanged","isOpen",4,"ngSwitchCase"],["class","rel-switch",4,"ngSwitchDefault"],[3,"field","isEditable","showEditableValue","singleLine","resultsOverlay","valueChanged","isOpen"],[3,"field","isEditable","showEditableValue","singleLine","resultsOverlay","objectsViewMode","valueChanged","isOpen"],[1,"rel-switch"],["class","rel-type rel-type--editable",4,"ngIf"],[1,"rel-type","rel-type--editable"],["class","rel-pick rel-pick--multiple",4,"ngIf"],["class","rel-pick",4,"ngIf"],["class","rel-empty",3,"width",4,"ngIf"],["class","rel-find__list",3,"list-view--disabled","width",4,"ngIf"],[1,"rel-pick","rel-pick--multiple"],[1,"rel-pick__select",3,"ngModel","disabled","ngModelChange","change"],[3,"disabled","value",4,"ngFor","ngForOf"],[3,"disabled","value"],[1,"rel-pick"],[3,"disabled","ngValue",4,"ngFor","ngForOf"],[3,"size","styleClass",4,"ngIf"],[3,"disabled","ngValue"],[3,"size","styleClass"],[1,"rel-empty"],[1,"rel-empty__note"],["class","rel-empty__text",4,"ngIf"],[3,"size",4,"ngIf"],[1,"rel-empty__text"],[3,"size"],[1,"rel-find__list"],["primaryTextProperty","displayValue","secondaryTextProperty","secondaryDisplayValue",3,"selectedItems","isMultiselectActive","isMultiselectEnabled","isSelectAllEnabled","items","selectAllText","selectedItemsChange"]],template:function(e,t){1&e&&(u.Sc(0,z,2,1,"ul",0),u.Sc(1,K,1,1,"input",1),u.Sc(2,oe,5,4,"div",2)),2&e&&(u.sc("ngIf",!t.isEditable),u.Eb(1),u.sc("ngIf",t.displaySingleReadOnlyInput()&&!t.relFindDisplayType()),u.Eb(1),u.sc("ngIf",t.isEditable))},directives:[g.t,g.s,g.x,g.y,g.z,U,X.a,M.B,M.p,M.s,M.u,M.E,P.a,_.a],styles:['[_nghost-%COMP%]     .rel-edit{display:flex;width:100%}[_nghost-%COMP%]     .list-view--disabled{position:relative}[_nghost-%COMP%]     .list-view--disabled *{-webkit-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%]     .list-view--disabled:after{content:"";position:absolute;top:0;left:0;right:0;bottom:0;display:block;background:rgba(235,237,240,.5);z-index:100!important;cursor:not-allowed}[_nghost-%COMP%]     .rel-pick{display:flex;flex-wrap:wrap}[_nghost-%COMP%]     .rel-pick--multiple{position:relative;flex-direction:column}[_nghost-%COMP%]     .rel-pick:not(.rel-pick--multiple){flex-direction:row;align-items:center}[_nghost-%COMP%]     .rel-pick:not(:only-child){margin-top:10px}[_nghost-%COMP%]     .rel-pick__select{height:34px;border-color:#cfd6dd;border-radius:2px}[_nghost-%COMP%]     .rel-pick__select:not(:only-child){margin-right:10px}[_nghost-%COMP%]     .rel-pick__select:not(:only-of-type):not(:first-of-type){margin-top:15px}[_nghost-%COMP%]     .rel-empty{position:relative;min-width:330px}[_nghost-%COMP%]     .rel-empty__note{position:relative;height:218px;background-color:#ebedf0}[_nghost-%COMP%]     .rel-empty__text{position:relative;top:50%;-webkit-transform:translateY(-50%);transform:translateY(-50%);text-align:center}[_nghost-%COMP%]     .rel-empty sda-loading-indicator{position:absolute;top:50%;left:50%;-webkit-transform:translate3d(-50%,-50%,0);transform:translate3d(-50%,-50%,0)}.rel-type[_ngcontent-%COMP%]{display:flex;flex:1 1 100%;flex-flow:column wrap}.rel-type--non-editable[_ngcontent-%COMP%]{flex-basis:auto;padding:10px 0}.rel-item[_ngcontent-%COMP%]:not(:only-child):not(:first-child){margin-top:8px}.rel-item__data[_ngcontent-%COMP%]{display:block;line-height:1.1}.rel-item__data--link[_ngcontent-%COMP%]{cursor:pointer}']}),e})()},FETs:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("5mBa"),n=i("fXoL"),l=i("ofXK"),a=i("3Pt+");function o(e,t){if(1&e&&(n.Yb(0,"a",2),n.Uc(1),n.Xb()),2&e){const e=n.lc();n.sc("href",e.field.Value,n.Mc),n.Eb(1),n.Wc(" ",e.field.Value,"\n")}}function r(e,t){if(1&e){const e=n.Zb();n.Yb(0,"input",3),n.hc("ngModelChange",(function(t){return n.Kc(e),n.lc().field.Value=t}))("change",(function(t){return n.Kc(e),n.lc().onValueChanged(t.target.value)})),n.Xb()}if(2&e){const e=n.lc();n.sc("ngModel",e.field.Value)("value",e.field.Value)("size",e.field.FieldSize&&e.field.FieldSize>0?e.field.FieldSize:35)("disabled",e.field.ReadOnly)}}let c=(()=>{class e extends s.a{ngOnInit(){this.initializeComponent(),this.field.Value&&-1===this.field.Value.indexOf(":")&&-1===this.field.Value.indexOf("\\")&&(this.field.Value="http://"+this.field.Value)}onValueChanged(e){this.field.Value=e,this.valueChanged.emit(this.field)}}return e.\u0275fac=function(t){return d(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["sda-url-type"]],features:[n.Bb],decls:2,vars:2,consts:[["class","url-non-editable","target","_blank",3,"href",4,"ngIf"],["type","text","class","url-input",3,"ngModel","value","size","disabled","ngModelChange","change",4,"ngIf"],["target","_blank",1,"url-non-editable",3,"href"],["type","text",1,"url-input",3,"ngModel","value","size","disabled","ngModelChange","change"]],template:function(e,t){1&e&&(n.Sc(0,o,2,2,"a",0),n.Sc(1,r,1,4,"input",1)),2&e&&(n.sc("ngIf",!t.isEditable),n.Eb(1),n.sc("ngIf",t.isEditable))},directives:[l.t,a.c,a.p,a.s],styles:[".url-non-editable[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:34px;line-height:1.1}.url-input[_ngcontent-%COMP%]{padding:0 5px;line-height:1.1;border-color:#cfd6dd}.url-input[_ngcontent-%COMP%]:disabled{background-color:#e6e6e6;color:grey;opacity:.7;cursor:not-allowed}"]}),e})();const d=n.ac(c)},Mswo:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var s=i("9LP0"),n=i("5mBa"),l=i("fXoL"),a=i("ofXK"),o=i("3Pt+");function r(e,t){if(1&e&&(l.Yb(0,"p",2),l.Uc(1),l.Xb()),2&e){const e=l.lc();l.Eb(1),l.Vc(e.field.Value)}}function c(e,t){if(1&e){const e=l.Zb();l.Yb(0,"input",5),l.hc("ngModelChange",(function(t){return l.Kc(e),l.lc(2).onModelChange(t)})),l.Xb()}if(2&e){const e=l.lc(2);l.sc("ngModel",e.field.Value)("placeholder",e.field.PlaceholderValue||"")("disabled",e.field.ReadOnly&&!e.field.Value)("type",e.type)}}function d(e,t){if(1&e){const e=l.Zb();l.Yb(0,"textarea",6),l.hc("ngModelChange",(function(t){return l.Kc(e),l.lc(2).onModelChange(t)})),l.Uc(1,"\t"),l.Xb()}if(2&e){const e=l.lc(2);l.sc("ngModel",e.field.Value)("rows",e.noOfRows)("cols",e.field.FieldSize)("disabled",e.field.ReadOnly&&!e.field.Value)}}function h(e,t){if(1&e&&(l.Wb(0),l.Sc(1,c,1,4,"input",3),l.Sc(2,d,2,4,"textarea",4),l.Vb()),2&e){const e=l.lc();l.Eb(1),l.sc("ngIf",1===e.noOfRows),l.Eb(1),l.sc("ngIf",e.noOfRows>1)}}let p=(()=>{class e extends n.a{constructor(e,t){super(),this.elementRef=e,this.pictureMaskService=t}ngOnInit(){if(this.initializeComponent(),this.maxRows=10,this.type="text",("SPFPassword"===this.field.PropertyUID||this.field.IsTypePassword)&&(this.type="password"),this.field.FieldSize>80){const e=this.field.FieldSize/80;this.noOfRows=e>this.maxRows?this.maxRows:Math.ceil(e)}else this.noOfRows=1}ngAfterViewInit(){this.setMaxLength()}onModelChange(e){this.field.Value=this.pictureMaskService.applyStringPictureMask(e,this.field.PictureProperty),this.valueChanged.emit(this.field)}setMaxLength(){let e=this.elementRef.nativeElement.querySelector(".string-input");e||(e=this.elementRef.nativeElement.querySelector(".string-textarea")),e&&this.field.FieldLengthForInput&&this.field.FieldLengthForInput>0&&(e.maxLength=this.field.FieldLengthForInput)}}return e.\u0275fac=function(t){return new(t||e)(l.Sb(l.l),l.Sb(s.a))},e.\u0275cmp=l.Mb({type:e,selectors:[["sda-string-type"]],features:[l.Bb],decls:2,vars:2,consts:[["class","string-non-editable",4,"ngIf"],[4,"ngIf"],[1,"string-non-editable"],["class","string-input",3,"ngModel","placeholder","disabled","type","ngModelChange",4,"ngIf"],["class","string-textarea",3,"ngModel","rows","cols","disabled","ngModelChange",4,"ngIf"],[1,"string-input",3,"ngModel","placeholder","disabled","type","ngModelChange"],[1,"string-textarea",3,"ngModel","rows","cols","disabled","ngModelChange"]],template:function(e,t){1&e&&(l.Sc(0,r,2,1,"p",0),l.Sc(1,h,3,2,"ng-container",1)),2&e&&(l.sc("ngIf",!t.isEditable||t.field.ReadOnly&&t.field.Value),l.Eb(1),l.sc("ngIf",t.isEditable&&(!t.field.ReadOnly||t.field.ReadOnly&&!t.field.Value)))},directives:[a.t,o.c,o.p,o.s],styles:[".string-non-editable[_ngcontent-%COMP%]{display:flex;align-items:center;min-height:34px;line-height:1.1;white-space:pre-line}.string-input[_ngcontent-%COMP%]{padding:0 5px;line-height:1.1;border-color:#cfd6dd}.string-input[_ngcontent-%COMP%]::-webkit-input-placeholder{color:#cad0d7}.string-input[_ngcontent-%COMP%]:-ms-input-placeholder{color:#cad0d7}.string-input[_ngcontent-%COMP%]::-ms-input-placeholder{color:#cad0d7}.string-input[_ngcontent-%COMP%]::placeholder{color:#cad0d7}.string-textarea[_ngcontent-%COMP%]{width:100%;min-width:50px;max-width:720px;min-height:100px;border-radius:2px;resize:vertical}.string-input[_ngcontent-%COMP%]:disabled, .string-textarea[_ngcontent-%COMP%]:disabled{background-color:#e6e6e6;color:grey;opacity:.7;cursor:not-allowed}"]}),e})()},XcX5:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var s=i("tk/3"),n=i("itXk"),l=i("lJxs"),a=i("4vCl"),o=i("Ejbi"),r=i("UVhF"),c=i("pyKC"),d=i("xNQ3"),h=i("fXoL");let p=(()=>{class e extends d.a{constructor(e,t,i){super(e,t),this.sdaTranslateService=e,this.relationshipItemsService=t,this.formService=i}getStringArrayFromFilters(e){const t=[];return e.forEach(e=>{t.push(e.name)}),t}getDropDownOptions(e,t,i,s,n,l=!0){return this.field.selectedParentItems?this.getFormDependentOptionsForDependentItemsWithSearch(e,t,i,s,n):this.getFormDropDownOptionsWithSearch(e,t,i,s,n,l)}getFormDependentOptionsForDependentItemsWithSearch(e,t,i,s,n){return this.formService.getFormDropDownOptionsForDependentItemWithSearch(this.field.UID,e,this.field.selectedParentItems,t,i,s,n)}getFormDropDownOptionsWithSearch(e,t,i,o,r,c=!0){if(c)return this.formService.getFormDropDownOptionsWithSearch(this.field.UID,e,this.field.NavigationPath,t,i,o,r,!1);{const c=this.formService.getFormDropDownOptionsWithSearch(this.field.UID,e,this.field.NavigationPath,t,i,o,r,!0),d=this.formService.getFormDropDownOptionsWithSearch(this.field.UID,e,this.field.NavigationPath,t,i,o,r,!1);return Object(n.a)(c,d).pipe(Object(l.a)(([e,t])=>{const i=new a.a(new s.e);return i.count=e.count,i.value=t.value,i}))}}}return e.\u0275fac=function(t){return new(t||e)(h.Sb(o.a),h.Sb(c.a),h.Sb(r.a))},e.\u0275dir=h.Nb({type:e,features:[h.Bb]}),e})()},g6on:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("ofXK"),n=i("3Pt+"),l=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=l.Qb({type:e}),e.\u0275inj=l.Pb({factory:function(t){return new(t||e)},imports:[[s.c,n.j]]}),e})()},m3Is:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("5mBa"),n=i("fXoL"),l=i("bSwM"),a=i("3Pt+");let o=(()=>{class e extends s.a{ngOnInit(){this.initializeComponent()}get isChecked(){if(!this.field.IsMandatory||this.field.Value)return this.field.Value&&"true"===this.field.Value.toLowerCase()}set isChecked(e){this.field.Value=e?"True":"False",this.valueChanged.emit(this.field)}}return e.\u0275fac=function(t){return r(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["sda-boolean-type"]],features:[n.Bb],decls:1,vars:3,consts:[[1,"boolean-type",3,"ngModel","indeterminate","disabled","ngModelChange"]],template:function(e,t){1&e&&(n.Yb(0,"mat-checkbox",0),n.hc("ngModelChange",(function(e){return t.isChecked=e})),n.Xb()),2&e&&n.sc("ngModel",t.isChecked)("indeterminate",void 0===t.isChecked)("disabled",t.field.ReadOnly||!t.isEditable)},directives:[l.a,a.p,a.s],styles:["[_nghost-%COMP%]     .mat-checkbox-frame{border-color:#cad0d7}.boolean-type[_ngcontent-%COMP%]{display:flex;min-height:34px}.mat-checkbox-disabled[_ngcontent-%COMP%]{cursor:no-drop}"]}),e})();const r=n.ac(o)},qE8o:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("ofXK"),n=i("8YAH"),l=i("txXS"),a=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=a.Qb({type:e}),e.\u0275inj=a.Pb({factory:function(t){return new(t||e)},imports:[[s.c,n.a,l.a]]}),e})()},v82b:function(e,t,i){"use strict";i.d(t,"a",(function(){return h}));var s=i("ofXK"),n=i("3Pt+"),l=i("iVUw"),a=i("F+hv"),o=i("ILbM"),r=i("LvQU"),c=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({factory:function(t){return new(t||e)},imports:[[s.c,n.j,a.a,l.a,r.a]]}),e})(),h=(()=>{class e{}return e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({factory:function(t){return new(t||e)},imports:[[s.c,n.j,a.a,l.a,d,o.a]]}),e})()},xNQ3:function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i("fXoL"),n=i("Ejbi"),l=i("FedY"),a=i("ZW2Q"),o=i("KkJr"),r=i("pyKC"),c=i("5mBa");let d=(()=>{class e extends c.a{constructor(e,t){super(),this.sdaTranslateService=e,this.relationshipItemsService=t,this.DROPDOWN_PLACE_HOLDER=this.sdaTranslateService.get("DROPDOWN_PLACE_HOLDER","Please select..."),this.SELECT_ALL=this.sdaTranslateService.get("SELECT_ALL","Select All"),this.NO_RESULTS_FOUND=this.sdaTranslateService.get("NO_RESULTS_FOUND","No results found..."),this.resultsOverlay=!1,this.isOpen=new s.o,this.collided=!1,this.isMultiSelect=!1,this.dropDownOptionsOBIDs=[]}get selectedItem(){return this.field.selectedItem}set selectedItem(e){this.field.selectedItem!==e&&(this.field.selectedItem=e,this.selectedItemsChanged([e]))}get showEditable(){return this.showEditableValue}set showEditable(e){this.showEditableValue=e,this.isOpen.emit(e)}get displayValue(){let e="";return this.field.RelObjects&&this.field.RelObjects.forEach(t=>{if(!t.Terminate){e&&(e+=", ");const i=this.field.dropDownOptions.find(e=>e.obid===t.Key);i&&i.displayValue&&(e+=i.displayValue)}}),e}get selectedItems(){let e=[];return this.field.RelObjects&&this.field.RelObjects.length>0&&this.field.dropDownOptions&&(e=this.field.dropDownOptions.filter(e=>{const t=this.field.RelObjects.filter(t=>e.obid===t.Key&&!t.Terminate);return t&&t.length>0})),e}handleSelectedItemsChange(e){let t=[];e&&e.length>0&&(t=e.map(e=>e.obid)),this.selectedItemsChanged(t)}displayEditableControls(){return this.isEditable&&!this.singleLine||this.singleLine&&this.showEditable}clickSingleReadOnlyInput(){this.showEditable=!this.showEditable}displaySingleReadOnlyInput(){return!this.showEditable&&this.singleLine}displayFieldSize(){return this.isEditable&&this.field.FieldSize>0?this.field.FieldSize:void 0}selectedItemsChanged(e){this.field.RelObjects=this.relationshipItemsService.selectedItemsChanged(e,this.dropDownOptionsOBIDs),this.valueChanged.emit(this.field)}setCardinality(){this.field.MaxRels&&(this.isMultiSelect=!("0"===this.field.MaxRels||"1"===this.field.MaxRels))}setPreselectedOptions(){this.field.Value&&(this.dropDownOptionsOBIDs=this.field.Value.split("~"))}parseMaxSingleDropDownOptions(e,t){let i=[];if(e&&(i=e.map(e=>new a.a(e.OBID,e.DisplayValue,e.DisplayValue,!1,e.Description,!0,e.UID,e.ClassDef,e.SecondaryDisplayValue))),this.field.dropDownOptions&&this.field.dropDownOptions.length>0&&this.field.selectedItem!==o.b&&this.field.selectedItem!==o.a){const e=this.field.dropDownOptions.find(e=>e.obid===this.field.selectedItem);e&&(i.some(t=>t.obid===e.obid)||i.push(e))}if(i=i.sort((e,t)=>l.a.sortByString(e.displayValue,t.displayValue)),this.field.IsMandatory||i.unshift(new a.a(o.a,"","")),i.unshift(new a.a(o.b,this.DROPDOWN_PLACE_HOLDER,this.DROPDOWN_PLACE_HOLDER,!0,this.DROPDOWN_PLACE_HOLDER)),t||this.setInitialSelectedItem(i),this.field.dropDownOptions=i,t){const e=i.filter(e=>e.obid===t)[0];e&&(this.selectedItem=e.obid)}}parseMaxMultiRelDropDownOptions(e,t){let i,s=[];e&&(s=e.map(e=>new a.a(e.OBID,e.DisplayValue,e.DisplayValue,!1,e.Description,!0,e.UID,e.ClassDef,e.SecondaryDisplayValue))),i=t?t.map(e=>new a.a(e.OBID,e.DisplayValue,e.DisplayValue,!1,e.Description,!0,e.UID,e.ClassDef,e.SecondaryDisplayValue)):this.selectedItems,s=s.sort((e,t)=>l.a.sortByString(e.displayValue,t.displayValue)),i=i.sort((e,t)=>l.a.sortByString(e.displayValue,t.displayValue)),this.field.dropDownOptions=s;for(let n=i.length-1;n>=0;n--)this.field.dropDownOptions.unshift(i[n]);this.handleSelectedItemsChange(i)}setInitialSelectedItem(e){this.selectedItem=2!==e.length&&this.field.IsMandatory?e[0].obid:e[1].obid}}return e.\u0275fac=function(t){return new(t||e)(s.Sb(n.a),s.Sb(r.a))},e.\u0275dir=s.Nb({type:e,inputs:{field:"field",singleLine:"singleLine",showEditableValue:"showEditableValue",resultsOverlay:"resultsOverlay"},outputs:{isOpen:"isOpen"},features:[s.Bb]}),e})()},z96Q:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var s=i("ofXK"),n=i("3Pt+"),l=i("bSwM"),a=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=a.Qb({type:e}),e.\u0275inj=a.Pb({factory:function(t){return new(t||e)},imports:[[s.c,n.j,l.b]]}),e})()}}]);