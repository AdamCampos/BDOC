(window.webpackJsonp=window.webpackJsonp||[]).push([[14],{g9iH:function(e,t,n){"use strict";n.d(t,"a",(function(){return de})),n.d(t,"b",(function(){return ae}));var i=n("fXoL"),o=n("vxfF"),r=n("ofXK"),l=n("7zfz"),s=n("t2ka"),d=n("YyRF");const a=function(e){return{"ui-treenode-droppoint-active ui-state-highlight":e}};function c(e,t){if(1&e){const e=i.Zb();i.Yb(0,"li",4),i.hc("drop",(function(t){return i.Kc(e),i.lc(2).onDropPoint(t,-1)}))("dragover",(function(t){return i.Kc(e),i.lc(2).onDropPointDragOver(t)}))("dragenter",(function(t){return i.Kc(e),i.lc(2).onDropPointDragEnter(t,-1)}))("dragleave",(function(t){return i.Kc(e),i.lc(2).onDropPointDragLeave(t)})),i.Xb()}if(2&e){const e=i.lc(2);i.sc("ngClass",i.xc(1,a,e.draghoverPrev))}}const h=function(e,t){return{"pi-caret-right":e,"pi-caret-down":t}};function g(e,t){if(1&e){const e=i.Zb();i.Yb(0,"span",12),i.hc("click",(function(t){return i.Kc(e),i.lc(3).toggle(t)})),i.Xb()}if(2&e){const e=i.lc(3);i.sc("ngClass",i.yc(1,h,!e.node.expanded,e.node.expanded))}}const u=function(e){return{"ui-state-disabled":e}},p=function(e,t){return{"pi-check":e,"pi-minus":t}};function f(e,t){if(1&e&&(i.Yb(0,"div",13),i.Yb(1,"div",14),i.Tb(2,"span",15),i.Xb(),i.Xb()),2&e){const e=i.lc(3);i.Fb("aria-checked",e.isSelected()),i.Eb(1),i.sc("ngClass",i.xc(3,u,!1===e.node.selectable)),i.Eb(1),i.sc("ngClass",i.yc(5,p,e.isSelected(),e.node.partialSelected))}}function b(e,t){if(1&e&&i.Tb(0,"span"),2&e){const e=i.lc(3);i.Gb(e.getIcon())}}function N(e,t){if(1&e&&(i.Yb(0,"span"),i.Uc(1),i.Xb()),2&e){const e=i.lc(3);i.Eb(1),i.Vc(e.node.label)}}function v(e,t){1&e&&i.Ub(0)}const S=function(e){return{$implicit:e}};function x(e,t){if(1&e&&(i.Yb(0,"span"),i.Sc(1,v,1,0,"ng-container",16),i.Xb()),2&e){const e=i.lc(3);i.Eb(1),i.sc("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",i.xc(2,S,e.node))}}function m(e,t){if(1&e&&i.Tb(0,"p-treeNode",19),2&e){const e=t.$implicit,n=t.first,o=t.last,r=t.index,l=i.lc(4);i.Rc("height",l.tree.virtualNodeHeight,"px"),i.sc("node",e)("parentNode",l.node)("firstChild",n)("lastChild",o)("index",r)("level",l.level+1)}}function y(e,t){if(1&e&&(i.Yb(0,"ul",17),i.Sc(1,m,1,8,"p-treeNode",18),i.Xb()),2&e){const e=i.lc(3);i.Rc("display",e.node.expanded?"block":"none"),i.Eb(1),i.sc("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const D=function(e,t){return["ui-treenode",e,t]},C=function(e,t,n){return{"ui-treenode-selectable":e,"ui-treenode-dragover":t,"ui-treenode-content-selected":n}},E=function(e){return{"ui-state-highlight":e}};function I(e,t){if(1&e){const e=i.Zb();i.Yb(0,"li",5),i.Yb(1,"div",6),i.hc("click",(function(t){return i.Kc(e),i.lc(2).onNodeClick(t)}))("contextmenu",(function(t){return i.Kc(e),i.lc(2).onNodeRightClick(t)}))("touchend",(function(){return i.Kc(e),i.lc(2).onNodeTouchEnd()}))("drop",(function(t){return i.Kc(e),i.lc(2).onDropNode(t)}))("dragover",(function(t){return i.Kc(e),i.lc(2).onDropNodeDragOver(t)}))("dragenter",(function(t){return i.Kc(e),i.lc(2).onDropNodeDragEnter(t)}))("dragleave",(function(t){return i.Kc(e),i.lc(2).onDropNodeDragLeave(t)}))("dragstart",(function(t){return i.Kc(e),i.lc(2).onDragStart(t)}))("dragend",(function(t){return i.Kc(e),i.lc(2).onDragStop(t)}))("keydown",(function(t){return i.Kc(e),i.lc(2).onKeyDown(t)})),i.Sc(2,g,1,4,"span",7),i.Sc(3,f,3,8,"div",8),i.Sc(4,b,1,2,"span",3),i.Yb(5,"span",9),i.Sc(6,N,2,1,"span",10),i.Sc(7,x,2,4,"span",10),i.Xb(),i.Xb(),i.Sc(8,y,2,4,"ul",11),i.Xb()}if(2&e){const e=i.lc(2);i.sc("ngClass",i.yc(17,D,e.node.styleClass||"",e.isLeaf()?"ui-treenode-leaf":"")),i.Eb(1),i.Rc("padding-left",1.5*e.level+"em"),i.sc("draggable",e.tree.draggableNodes)("ngClass",i.zc(20,C,e.tree.selectionMode&&!1!==e.node.selectable,e.draghoverNode,e.isSelected())),i.Fb("tabindex",0)("aria-posinset",e.index+1)("aria-expanded",e.node.expanded)("aria-selected",e.isSelected())("aria-label",e.node.label),i.Eb(1),i.sc("ngIf",!e.isLeaf()),i.Eb(1),i.sc("ngIf","checkbox"==e.tree.selectionMode),i.Eb(1),i.sc("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),i.Eb(1),i.sc("ngClass",i.xc(24,E,e.isSelected())),i.Eb(1),i.sc("ngIf",!e.tree.getTemplateForNode(e.node)),i.Eb(1),i.sc("ngIf",e.tree.getTemplateForNode(e.node)),i.Eb(1),i.sc("ngIf",!e.tree.virtualScroll&&e.node.children&&e.node.expanded)}}function k(e,t){if(1&e){const e=i.Zb();i.Yb(0,"li",4),i.hc("drop",(function(t){return i.Kc(e),i.lc(2).onDropPoint(t,1)}))("dragover",(function(t){return i.Kc(e),i.lc(2).onDropPointDragOver(t)}))("dragenter",(function(t){return i.Kc(e),i.lc(2).onDropPointDragEnter(t,1)}))("dragleave",(function(t){return i.Kc(e),i.lc(2).onDropPointDragLeave(t)})),i.Xb()}if(2&e){const e=i.lc(2);i.sc("ngClass",i.xc(1,a,e.draghoverNext))}}const w=function(e){return{"ui-treenode-connector-line":e}};function M(e,t){if(1&e&&(i.Yb(0,"td",26),i.Yb(1,"table",27),i.Yb(2,"tbody"),i.Yb(3,"tr"),i.Tb(4,"td",28),i.Xb(),i.Yb(5,"tr"),i.Tb(6,"td",28),i.Xb(),i.Xb(),i.Xb(),i.Xb()),2&e){const e=i.lc(3);i.Eb(4),i.sc("ngClass",i.xc(2,w,!e.firstChild)),i.Eb(2),i.sc("ngClass",i.xc(4,w,!e.lastChild))}}const T=function(e,t){return{"pi-plus":e,"pi-minus":t}};function F(e,t){if(1&e){const e=i.Zb();i.Yb(0,"span",29),i.hc("click",(function(t){return i.Kc(e),i.lc(3).toggle(t)})),i.Xb()}if(2&e){const e=i.lc(3);i.sc("ngClass",i.yc(1,T,!e.node.expanded,e.node.expanded))}}function K(e,t){if(1&e&&i.Tb(0,"span"),2&e){const e=i.lc(3);i.Gb(e.getIcon())}}function O(e,t){if(1&e&&(i.Yb(0,"span"),i.Uc(1),i.Xb()),2&e){const e=i.lc(3);i.Eb(1),i.Vc(e.node.label)}}function P(e,t){1&e&&i.Ub(0)}function X(e,t){if(1&e&&(i.Yb(0,"span"),i.Sc(1,P,1,0,"ng-container",16),i.Xb()),2&e){const e=i.lc(3);i.Eb(1),i.sc("ngTemplateOutlet",e.tree.getTemplateForNode(e.node))("ngTemplateOutletContext",i.xc(2,S,e.node))}}function Y(e,t){if(1&e&&i.Tb(0,"p-treeNode",33),2&e){const e=t.first,n=t.last;i.sc("node",t.$implicit)("firstChild",e)("lastChild",n)}}function L(e,t){if(1&e&&(i.Yb(0,"td",30),i.Yb(1,"div",31),i.Sc(2,Y,1,3,"p-treeNode",32),i.Xb(),i.Xb()),2&e){const e=i.lc(3);i.Rc("display",e.node.expanded?"table-cell":"none"),i.Eb(2),i.sc("ngForOf",e.node.children)("ngForTrackBy",e.tree.trackBy)}}const B=function(e){return{"ui-treenode-collapsed":e}},V=function(e,t){return{"ui-treenode-selectable":e,"ui-state-highlight":t}};function z(e,t){if(1&e){const e=i.Zb();i.Yb(0,"table"),i.Yb(1,"tbody"),i.Yb(2,"tr"),i.Sc(3,M,7,6,"td",20),i.Yb(4,"td",21),i.Yb(5,"div",22),i.hc("click",(function(t){return i.Kc(e),i.lc(2).onNodeClick(t)}))("contextmenu",(function(t){return i.Kc(e),i.lc(2).onNodeRightClick(t)}))("touchend",(function(){return i.Kc(e),i.lc(2).onNodeTouchEnd()}))("keydown",(function(t){return i.Kc(e),i.lc(2).onNodeKeydown(t)})),i.Sc(6,F,1,4,"span",23),i.Sc(7,K,1,2,"span",3),i.Yb(8,"span",24),i.Sc(9,O,2,1,"span",10),i.Sc(10,X,2,4,"span",10),i.Xb(),i.Xb(),i.Xb(),i.Sc(11,L,3,4,"td",25),i.Xb(),i.Xb(),i.Xb()}if(2&e){const e=i.lc(2);i.Gb(e.node.styleClass),i.Eb(3),i.sc("ngIf",!e.root),i.Eb(1),i.sc("ngClass",i.xc(10,B,!e.node.expanded)),i.Eb(1),i.sc("ngClass",i.yc(12,V,e.tree.selectionMode,e.isSelected())),i.Eb(1),i.sc("ngIf",!e.isLeaf()),i.Eb(1),i.sc("ngIf",e.node.icon||e.node.expandedIcon||e.node.collapsedIcon),i.Eb(2),i.sc("ngIf",!e.tree.getTemplateForNode(e.node)),i.Eb(1),i.sc("ngIf",e.tree.getTemplateForNode(e.node)),i.Eb(1),i.sc("ngIf",e.node.children&&e.node.expanded)}}function R(e,t){if(1&e&&(i.Sc(0,c,1,3,"li",1),i.Sc(1,I,9,26,"li",2),i.Sc(2,k,1,3,"li",1),i.Sc(3,z,12,15,"table",3)),2&e){const e=i.lc();i.sc("ngIf",e.tree.droppableNodes),i.Eb(1),i.sc("ngIf",!e.tree.horizontal),i.Eb(1),i.sc("ngIf",e.tree.droppableNodes&&e.lastChild),i.Eb(1),i.sc("ngIf",e.tree.horizontal)}}function U(e,t){1&e&&i.Tb(0,"div",9)}function H(e,t){if(1&e&&(i.Yb(0,"div",10),i.Tb(1,"i"),i.Xb()),2&e){const e=i.lc(2);i.Eb(1),i.Gb("ui-tree-loading-icon pi-spin "+e.loadingIcon)}}function A(e,t){if(1&e){const e=i.Zb();i.Yb(0,"div",11),i.Yb(1,"input",12,13),i.hc("keydown.enter",(function(t){return i.Kc(e),t.preventDefault()}))("input",(function(t){return i.Kc(e),i.lc(2)._filter(t)})),i.Xb(),i.Tb(3,"span",14),i.Xb()}if(2&e){const e=i.lc(2);i.Eb(1),i.Fb("placeholder",e.filterPlaceholder)}}function G(e,t){if(1&e&&i.Tb(0,"p-treeNode",19),2&e){const e=t.first,n=t.last,o=t.index;i.sc("node",t.$implicit)("firstChild",e)("lastChild",n)("index",o)("level",0)}}function Z(e,t){if(1&e&&(i.Yb(0,"ul",17),i.Sc(1,G,1,5,"p-treeNode",18),i.Xb()),2&e){const e=i.lc(3);i.Fb("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy),i.Eb(1),i.sc("ngForOf",e.getRootNode())("ngForTrackBy",e.trackBy)}}function W(e,t){if(1&e&&(i.Wb(0),i.Yb(1,"div",15),i.Sc(2,Z,2,4,"ul",16),i.Xb(),i.Vb()),2&e){const e=i.lc(2);i.Eb(1),i.Rc("max-height",e.scrollHeight),i.Eb(1),i.sc("ngIf",e.getRootNode())}}function $(e,t){if(1&e&&i.Tb(0,"p-treeNode",22),2&e){const e=t.$implicit,n=t.first,o=t.last,r=t.index,l=i.lc(4);i.Rc("height",l.virtualNodeHeight,"px"),i.sc("level",e.level)("rowNode",e)("node",e.node)("firstChild",n)("lastChild",o)("index",r)}}function j(e,t){if(1&e&&(i.Yb(0,"ul",17),i.Sc(1,$,1,8,"p-treeNode",21),i.Xb()),2&e){const e=i.lc(3);i.Fb("aria-label",e.ariaLabel)("aria-labelledby",e.ariaLabelledBy),i.Eb(1),i.sc("cdkVirtualForOf",e.serializedValue)("cdkVirtualForTrackBy",e.trackBy)}}function _(e,t){if(1&e&&(i.Yb(0,"cdk-virtual-scroll-viewport",20),i.Sc(1,j,2,4,"ul",16),i.Xb()),2&e){const e=i.lc(2);i.Rc("height",e.scrollHeight),i.sc("itemSize",e.virtualNodeHeight)("minBufferPx",e.minBufferPx)("maxBufferPx",e.maxBufferPx),i.Eb(1),i.sc("ngIf",e.getRootNode())}}function q(e,t){if(1&e&&(i.Yb(0,"div",23),i.Uc(1),i.Xb()),2&e){const e=i.lc(2);i.Eb(1),i.Vc(e.emptyMessage)}}const J=function(e,t,n,i){return{"ui-tree ui-widget ui-widget-content ui-corner-all":!0,"ui-tree-selectable":e,"ui-treenode-dragover":t,"ui-tree-loading":n,"ui-tree-flex-scrollable":i}};function Q(e,t){if(1&e){const e=i.Zb();i.Yb(0,"div",2),i.hc("drop",(function(t){return i.Kc(e),i.lc().onDrop(t)}))("dragover",(function(t){return i.Kc(e),i.lc().onDragOver(t)}))("dragenter",(function(t){return i.Kc(e),i.lc().onDragEnter(t)}))("dragleave",(function(t){return i.Kc(e),i.lc().onDragLeave(t)})),i.Sc(1,U,1,0,"div",3),i.Sc(2,H,2,2,"div",4),i.Sc(3,A,4,1,"div",5),i.Sc(4,W,3,3,"ng-container",6),i.Sc(5,_,2,6,"ng-template",null,7,i.Tc),i.Sc(7,q,2,1,"div",8),i.Xb()}if(2&e){const e=i.Hc(6),t=i.lc();i.Gb(t.styleClass),i.sc("ngClass",i.Ac(10,J,t.selectionMode,t.dragHover,t.loading,"flex"===t.scrollHeight))("ngStyle",t.style),i.Eb(1),i.sc("ngIf",t.loading),i.Eb(1),i.sc("ngIf",t.loading),i.Eb(1),i.sc("ngIf",t.filter),i.Eb(1),i.sc("ngIf",!t.virtualScroll)("ngIfElse",e),i.Eb(3),i.sc("ngIf",!t.loading&&(null==t.value||0===t.value.length))}}function ee(e,t){1&e&&i.Tb(0,"div",27)}function te(e,t){if(1&e&&(i.Yb(0,"div",10),i.Tb(1,"i"),i.Xb()),2&e){const e=i.lc(2);i.Eb(1),i.Gb("ui-tree-loading-icon pi-spin "+e.loadingIcon)}}function ne(e,t){if(1&e&&(i.Yb(0,"table"),i.Tb(1,"p-treeNode",28),i.Xb()),2&e){const e=i.lc(2);i.Eb(1),i.sc("node",e.value[0])("root",!0)}}function ie(e,t){if(1&e&&(i.Yb(0,"div",23),i.Uc(1),i.Xb()),2&e){const e=i.lc(2);i.Eb(1),i.Vc(e.emptyMessage)}}const oe=function(e){return{"ui-tree ui-tree-horizontal ui-widget ui-widget-content ui-corner-all":!0,"ui-tree-selectable":e}};function re(e,t){if(1&e&&(i.Yb(0,"div",24),i.Sc(1,ee,1,0,"div",25),i.Sc(2,te,2,2,"div",4),i.Sc(3,ne,2,2,"table",26),i.Sc(4,ie,2,1,"div",8),i.Xb()),2&e){const e=i.lc();i.Gb(e.styleClass),i.sc("ngClass",i.xc(8,oe,e.selectionMode))("ngStyle",e.style),i.Eb(1),i.sc("ngIf",e.loading),i.Eb(1),i.sc("ngIf",e.loading),i.Eb(1),i.sc("ngIf",e.value&&e.value[0]),i.Eb(1),i.sc("ngIf",!e.loading&&(null==e.value||0===e.value.length))}}var le;let se=(()=>{let e=le=class{constructor(e){this.tree=e}ngOnInit(){this.node.parent=this.parentNode,this.parentNode&&this.tree.syncNodeOption(this.node,this.tree.value,"parent",this.tree.getNodeWithKey(this.parentNode.key,this.tree.value))}getIcon(){let e;return e=this.node.icon?this.node.icon:this.node.expanded&&this.node.children&&this.node.children.length?this.node.expandedIcon:this.node.collapsedIcon,le.ICON_CLASS+" "+e}isLeaf(){return this.tree.isNodeLeaf(this.node)}toggle(e){this.node.expanded?this.collapse(e):this.expand(e)}expand(e){this.node.expanded=!0,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeExpand.emit({originalEvent:e,node:this.node})}collapse(e){this.node.expanded=!1,this.tree.virtualScroll&&this.tree.updateSerializedValue(),this.tree.onNodeCollapse.emit({originalEvent:e,node:this.node})}onNodeClick(e){this.tree.onNodeClick(e,this.node)}onNodeKeydown(e){13===e.which&&this.tree.onNodeClick(e,this.node)}onNodeTouchEnd(){this.tree.onNodeTouchEnd()}onNodeRightClick(e){this.tree.onNodeRightClick(e,this.node)}isSelected(){return this.tree.isSelected(this.node)}onDropPoint(e,t){e.preventDefault();let n=this.tree.dragNode,i=this.tree.dragNodeTree!==this.tree||1===t||this.tree.dragNodeIndex!==this.index-1;if(this.tree.allowDrop(n,this.node,this.tree.dragNodeScope)&&i){let i=Object.assign({},this.createDropPointEventMetadata(t));this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,dropIndex:this.index,accept:()=>{this.processPointDrop(i)}}):(this.processPointDrop(i),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:n,dropNode:this.node,dropIndex:this.index}))}this.draghoverPrev=!1,this.draghoverNext=!1}processPointDrop(e){let t=e.dropNode.parent?e.dropNode.parent.children:this.tree.value;e.dragNodeSubNodes.splice(e.dragNodeIndex,1);let n=this.index;e.position<0?(n=e.dragNodeSubNodes===t?e.dragNodeIndex>e.index?e.index:e.index-1:e.index,t.splice(n,0,e.dragNode)):(n=t.length,t.push(e.dragNode)),this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:e.dragNodeIndex})}createDropPointEventMetadata(e){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node,index:this.index,position:e}}onDropPointDragOver(e){e.dataTransfer.dropEffect="move",e.preventDefault()}onDropPointDragEnter(e,t){this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(t<0?this.draghoverPrev=!0:this.draghoverNext=!0)}onDropPointDragLeave(e){this.draghoverPrev=!1,this.draghoverNext=!1}onDragStart(e){this.tree.draggableNodes&&!1!==this.node.draggable?(e.dataTransfer.setData("text","data"),this.tree.dragDropService.startDrag({tree:this,node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index,scope:this.tree.draggableScope})):e.preventDefault()}onDragStop(e){this.tree.dragDropService.stopDrag({node:this.node,subNodes:this.node.parent?this.node.parent.children:this.tree.value,index:this.index})}onDropNodeDragOver(e){e.dataTransfer.dropEffect="move",this.tree.droppableNodes&&(e.preventDefault(),e.stopPropagation())}onDropNode(e){if(this.tree.droppableNodes&&!1!==this.node.droppable){e.preventDefault(),e.stopPropagation();let t=this.tree.dragNode;if(this.tree.allowDrop(t,this.node,this.tree.dragNodeScope)){let n=Object.assign({},this.createDropNodeEventMetadata());this.tree.validateDrop?this.tree.onNodeDrop.emit({originalEvent:e,dragNode:t,dropNode:this.node,index:this.index,accept:()=>{this.processNodeDrop(n)}}):(this.processNodeDrop(n),this.tree.onNodeDrop.emit({originalEvent:e,dragNode:t,dropNode:this.node,index:this.index}))}}this.draghoverNode=!1}createDropNodeEventMetadata(){return{dragNode:this.tree.dragNode,dragNodeIndex:this.tree.dragNodeIndex,dragNodeSubNodes:this.tree.dragNodeSubNodes,dropNode:this.node}}processNodeDrop(e){let t=e.dragNodeIndex;e.dragNodeSubNodes.splice(t,1),e.dropNode.children?e.dropNode.children.push(e.dragNode):e.dropNode.children=[e.dragNode],this.tree.dragDropService.stopDrag({node:e.dragNode,subNodes:e.dropNode.parent?e.dropNode.parent.children:this.tree.value,index:t})}onDropNodeDragEnter(e){this.tree.droppableNodes&&!1!==this.node.droppable&&this.tree.allowDrop(this.tree.dragNode,this.node,this.tree.dragNodeScope)&&(this.draghoverNode=!0)}onDropNodeDragLeave(e){if(this.tree.droppableNodes){let t=e.currentTarget.getBoundingClientRect();(e.x>t.left+t.width||e.x<t.left||e.y>=Math.floor(t.top+t.height)||e.y<t.top)&&(this.draghoverNode=!1)}}onKeyDown(e){const t=e.target.parentElement.parentElement;if("P-TREENODE"===t.nodeName)switch(e.which){case 40:const n=this.tree.droppableNodes?t.children[1].children[1]:t.children[0].children[1];if(n&&n.children.length>0)this.focusNode(n.children[0]);else{const e=t.nextElementSibling;if(e)this.focusNode(e);else{let e=this.findNextSiblingOfAncestor(t);e&&this.focusNode(e)}}e.preventDefault();break;case 38:if(t.previousElementSibling)this.focusNode(this.findLastVisibleDescendant(t.previousElementSibling));else{let e=this.getParentNodeElement(t);e&&this.focusNode(e)}e.preventDefault();break;case 39:this.node.expanded||this.tree.isNodeLeaf(this.node)||this.expand(e),e.preventDefault();break;case 37:if(this.node.expanded)this.collapse(e);else{let e=this.getParentNodeElement(t);e&&this.focusNode(e)}e.preventDefault();break;case 13:this.tree.onNodeClick(e,this.node),e.preventDefault()}}findNextSiblingOfAncestor(e){let t=this.getParentNodeElement(e);return t?t.nextElementSibling?t.nextElementSibling:this.findNextSiblingOfAncestor(t):null}findLastVisibleDescendant(e){const t=Array.from(e.children).find(e=>d.a.hasClass(e,"ui-treenode")).children[1];return t&&t.children.length>0?this.findLastVisibleDescendant(t.children[t.children.length-1]):e}getParentNodeElement(e){const t=e.parentElement.parentElement.parentElement;return"P-TREENODE"===t.tagName?t:null}focusNode(e){this.tree.droppableNodes?e.children[1].children[0].focus():e.children[0].children[0].focus()}};return e.\u0275fac=function(t){return new(t||e)(i.Sb(Object(i.W)(()=>de)))},e.\u0275cmp=i.Mb({type:e,selectors:[["p-treeNode"]],inputs:{rowNode:"rowNode",node:"node",parentNode:"parentNode",root:"root",index:"index",firstChild:"firstChild",lastChild:"lastChild",level:"level"},decls:1,vars:1,consts:[[3,"ngIf"],["class","ui-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave",4,"ngIf"],["role","treeitem",3,"ngClass",4,"ngIf"],[3,"class",4,"ngIf"],[1,"ui-treenode-droppoint",3,"ngClass","drop","dragover","dragenter","dragleave"],["role","treeitem",3,"ngClass"],[1,"ui-treenode-content",3,"draggable","ngClass","click","contextmenu","touchend","drop","dragover","dragenter","dragleave","dragstart","dragend","keydown"],["class","ui-tree-toggler pi ui-unselectable-text",3,"ngClass","click",4,"ngIf"],["class","ui-chkbox",4,"ngIf"],[1,"ui-treenode-label","ui-corner-all",3,"ngClass"],[4,"ngIf"],["class","ui-treenode-children","style","display: none;","role","group",3,"display",4,"ngIf"],[1,"ui-tree-toggler","pi","ui-unselectable-text",3,"ngClass","click"],[1,"ui-chkbox"],[1,"ui-chkbox-box","ui-widget","ui-corner-all","ui-state-default",3,"ngClass"],[1,"ui-chkbox-icon","ui-clickable","pi",3,"ngClass"],[4,"ngTemplateOutlet","ngTemplateOutletContext"],["role","group",1,"ui-treenode-children",2,"display","none"],[3,"node","parentNode","firstChild","lastChild","index","height","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","parentNode","firstChild","lastChild","index","level"],["class","ui-treenode-connector",4,"ngIf"],[1,"ui-treenode",3,"ngClass"],["tabindex","0",1,"ui-treenode-content","ui-state-default","ui-corner-all",3,"ngClass","click","contextmenu","touchend","keydown"],["class","ui-tree-toggler pi pi-fw ui-unselectable-text",3,"ngClass","click",4,"ngIf"],[1,"ui-treenode-label","ui-corner-all"],["class","ui-treenode-children-container",3,"display",4,"ngIf"],[1,"ui-treenode-connector"],[1,"ui-treenode-connector-table"],[3,"ngClass"],[1,"ui-tree-toggler","pi","pi-fw","ui-unselectable-text",3,"ngClass","click"],[1,"ui-treenode-children-container"],[1,"ui-treenode-children"],[3,"node","firstChild","lastChild",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild"]],template:function(e,t){1&e&&i.Sc(0,R,4,4,"ng-template",0),2&e&&i.sc("ngIf",t.node)},directives:[r.t,r.q,r.A,r.s,e],encapsulation:2}),e.ICON_CLASS="ui-treenode-icon ",e})(),de=(()=>{let e=class{constructor(e,t){this.el=e,this.dragDropService=t,this.selectionChange=new i.o,this.onNodeSelect=new i.o,this.onNodeUnselect=new i.o,this.onNodeExpand=new i.o,this.onNodeCollapse=new i.o,this.onNodeContextMenuSelect=new i.o,this.onNodeDrop=new i.o,this.layout="vertical",this.metaKeySelection=!0,this.propagateSelectionUp=!0,this.propagateSelectionDown=!0,this.loadingIcon="pi pi-spinner",this.emptyMessage="No records found",this.filterBy="label",this.filterMode="lenient",this.trackBy=(e,t)=>t,this.onFilter=new i.o}ngOnInit(){this.droppableNodes&&(this.dragStartSubscription=this.dragDropService.dragStart$.subscribe(e=>{this.dragNodeTree=e.tree,this.dragNode=e.node,this.dragNodeSubNodes=e.subNodes,this.dragNodeIndex=e.index,this.dragNodeScope=e.scope}),this.dragStopSubscription=this.dragDropService.dragStop$.subscribe(e=>{this.dragNodeTree=null,this.dragNode=null,this.dragNodeSubNodes=null,this.dragNodeIndex=null,this.dragNodeScope=null,this.dragHover=!1}))}ngOnChanges(e){e.value&&this.updateSerializedValue()}get horizontal(){return"horizontal"==this.layout}ngAfterContentInit(){this.templates.length&&(this.templateMap={}),this.templates.forEach(e=>{this.templateMap[e.name]=e.template})}updateSerializedValue(){this.serializedValue=[],this.serializeNodes(null,this.getRootNode(),0,!0)}serializeNodes(e,t,n,i){if(t&&t.length)for(let o of t){o.parent=e;const t={node:o,parent:e,level:n,visible:i&&(!e||e.expanded)};this.serializedValue.push(t),t.visible&&o.expanded&&this.serializeNodes(o,o.children,n+1,t.visible)}}onNodeClick(e,t){if(!d.a.hasClass(e.target,"ui-tree-toggler")){if(this.selectionMode){if(!1===t.selectable)return;if(this.hasFilteredNodes()&&!(t=this.getNodeWithKey(t.key,this.value)))return;let n=this.findIndexInSelection(t),i=n>=0;if(this.isCheckboxSelectionMode())i?(this.propagateSelectionDown?this.propagateDown(t,!1):this.selection=this.selection.filter((e,t)=>t!=n),this.propagateSelectionUp&&t.parent&&this.propagateUp(t.parent,!1),this.selectionChange.emit(this.selection),this.onNodeUnselect.emit({originalEvent:e,node:t})):(this.propagateSelectionDown?this.propagateDown(t,!0):this.selection=[...this.selection||[],t],this.propagateSelectionUp&&t.parent&&this.propagateUp(t.parent,!0),this.selectionChange.emit(this.selection),this.onNodeSelect.emit({originalEvent:e,node:t}));else if(!this.nodeTouched&&this.metaKeySelection){let o=e.metaKey||e.ctrlKey;i&&o?(this.isSingleSelectionMode()?this.selectionChange.emit(null):(this.selection=this.selection.filter((e,t)=>t!=n),this.selectionChange.emit(this.selection)),this.onNodeUnselect.emit({originalEvent:e,node:t})):(this.isSingleSelectionMode()?this.selectionChange.emit(t):this.isMultipleSelectionMode()&&(this.selection=o&&this.selection||[],this.selection=[...this.selection,t],this.selectionChange.emit(this.selection)),this.onNodeSelect.emit({originalEvent:e,node:t}))}else this.isSingleSelectionMode()?i?(this.selection=null,this.onNodeUnselect.emit({originalEvent:e,node:t})):(this.selection=t,this.onNodeSelect.emit({originalEvent:e,node:t})):i?(this.selection=this.selection.filter((e,t)=>t!=n),this.onNodeUnselect.emit({originalEvent:e,node:t})):(this.selection=[...this.selection||[],t],this.onNodeSelect.emit({originalEvent:e,node:t})),this.selectionChange.emit(this.selection)}this.nodeTouched=!1}}onNodeTouchEnd(){this.nodeTouched=!0}onNodeRightClick(e,t){if(this.contextMenu){let n=e.target;if(n.className&&0===n.className.indexOf("ui-tree-toggler"))return;this.findIndexInSelection(t)>=0||(this.isSingleSelectionMode()?this.selectionChange.emit(t):this.selectionChange.emit([t])),this.contextMenu.show(e),this.onNodeContextMenuSelect.emit({originalEvent:e,node:t})}}findIndexInSelection(e){let t=-1;if(this.selectionMode&&this.selection)if(this.isSingleSelectionMode())t=this.selection.key&&this.selection.key===e.key||this.selection==e?0:-1;else for(let n=0;n<this.selection.length;n++){let i=this.selection[n];if(i.key&&i.key===e.key||i==e){t=n;break}}return t}syncNodeOption(e,t,n,i){const o=this.hasFilteredNodes()?this.getNodeWithKey(e.key,t):null;o&&(o[n]=i||e[n])}hasFilteredNodes(){return this.filter&&this.filteredNodes&&this.filteredNodes.length}getNodeWithKey(e,t){for(let n of t){if(n.key===e)return n;if(n.children){let t=this.getNodeWithKey(e,n.children);if(t)return t}}}propagateUp(e,t){if(e.children&&e.children.length){let n=0,i=!1;for(let t of e.children)this.isSelected(t)?n++:t.partialSelected&&(i=!0);if(t&&n==e.children.length)this.selection=[...this.selection||[],e],e.partialSelected=!1;else{if(!t){let t=this.findIndexInSelection(e);t>=0&&(this.selection=this.selection.filter((e,n)=>n!=t))}e.partialSelected=!!(i||n>0&&n!=e.children.length)}this.syncNodeOption(e,this.filteredNodes,"partialSelected")}let n=e.parent;n&&this.propagateUp(n,t)}propagateDown(e,t){let n=this.findIndexInSelection(e);if(t&&-1==n?this.selection=[...this.selection||[],e]:!t&&n>-1&&(this.selection=this.selection.filter((e,t)=>t!=n)),e.partialSelected=!1,this.syncNodeOption(e,this.filteredNodes,"partialSelected"),e.children&&e.children.length)for(let i of e.children)this.propagateDown(i,t)}isSelected(e){return-1!=this.findIndexInSelection(e)}isSingleSelectionMode(){return this.selectionMode&&"single"==this.selectionMode}isMultipleSelectionMode(){return this.selectionMode&&"multiple"==this.selectionMode}isCheckboxSelectionMode(){return this.selectionMode&&"checkbox"==this.selectionMode}isNodeLeaf(e){return 0!=e.leaf&&!(e.children&&e.children.length)}getRootNode(){return this.filteredNodes?this.filteredNodes:this.value}getTemplateForNode(e){return this.templateMap?e.type?this.templateMap[e.type]:this.templateMap.default:null}onDragOver(e){!this.droppableNodes||this.value&&0!==this.value.length||(e.dataTransfer.dropEffect="move",e.preventDefault())}onDrop(e){if(this.droppableNodes&&(!this.value||0===this.value.length)){e.preventDefault();let t=this.dragNode;this.allowDrop(t,null,this.dragNodeScope)&&(this.dragNodeSubNodes.splice(this.dragNodeIndex,1),this.value=this.value||[],this.value.push(t),this.dragDropService.stopDrag({node:t}))}}onDragEnter(e){this.droppableNodes&&this.allowDrop(this.dragNode,null,this.dragNodeScope)&&(this.dragHover=!0)}onDragLeave(e){if(this.droppableNodes){let t=e.currentTarget.getBoundingClientRect();(e.x>t.left+t.width||e.x<t.left||e.y>t.top+t.height||e.y<t.top)&&(this.dragHover=!1)}}allowDrop(e,t,n){if(e){if(this.isValidDragScope(n)){let n=!0;if(t)if(e===t)n=!1;else{let i=t.parent;for(;null!=i;){if(i===e){n=!1;break}i=i.parent}}return n}return!1}return!1}isValidDragScope(e){let t=this.droppableScope;if(t){if("string"==typeof t){if("string"==typeof e)return t===e;if(e instanceof Array)return-1!=e.indexOf(t)}else if(t instanceof Array){if("string"==typeof e)return-1!=t.indexOf(e);if(e instanceof Array)for(let n of t)for(let t of e)if(n===t)return!0}return!1}return!0}_filter(e){let t=e.target.value;if(""===t)this.filteredNodes=null;else{this.filteredNodes=[];const e=this.filterBy.split(","),n=s.b.removeAccents(t).toLocaleLowerCase(this.filterLocale),i="strict"===this.filterMode;for(let t of this.value){let o=Object.assign({},t),r={searchFields:e,filterText:n,isStrictMode:i};(i&&(this.findFilteredNodes(o,r)||this.isFilterMatched(o,r))||!i&&(this.isFilterMatched(o,r)||this.findFilteredNodes(o,r)))&&this.filteredNodes.push(o)}}this.updateSerializedValue(),this.onFilter.emit({filter:t,filteredValue:this.filteredNodes})}findFilteredNodes(e,t){if(e){let n=!1;if(e.children){let i=[...e.children];e.children=[];for(let o of i){let i=Object.assign({},o);this.isFilterMatched(i,t)&&(n=!0,e.children.push(i))}}if(n)return e.expanded=!0,!0}}isFilterMatched(e,{searchFields:t,filterText:n,isStrictMode:i}){let o=!1;for(let r of t)s.b.removeAccents(String(s.b.resolveFieldData(e,r))).toLocaleLowerCase(this.filterLocale).indexOf(n)>-1&&(o=!0);return(!o||i&&!this.isNodeLeaf(e))&&(o=this.findFilteredNodes(e,{searchFields:t,filterText:n,isStrictMode:i})||o),o}getBlockableElement(){return this.el.nativeElement.children[0]}ngOnDestroy(){this.dragStartSubscription&&this.dragStartSubscription.unsubscribe(),this.dragStopSubscription&&this.dragStopSubscription.unsubscribe()}};return e.\u0275fac=function(t){return new(t||e)(i.Sb(i.l),i.Sb(l.f,8))},e.\u0275cmp=i.Mb({type:e,selectors:[["p-tree"]],contentQueries:function(e,t,n){var o;1&e&&i.Kb(n,l.d,!1),2&e&&i.Gc(o=i.ic())&&(t.templates=o)},inputs:{layout:"layout",metaKeySelection:"metaKeySelection",propagateSelectionUp:"propagateSelectionUp",propagateSelectionDown:"propagateSelectionDown",loadingIcon:"loadingIcon",emptyMessage:"emptyMessage",filterBy:"filterBy",filterMode:"filterMode",trackBy:"trackBy",selection:"selection",value:"value",selectionMode:"selectionMode",style:"style",styleClass:"styleClass",contextMenu:"contextMenu",draggableScope:"draggableScope",droppableScope:"droppableScope",draggableNodes:"draggableNodes",droppableNodes:"droppableNodes",loading:"loading",ariaLabel:"ariaLabel",ariaLabelledBy:"ariaLabelledBy",validateDrop:"validateDrop",filter:"filter",filterPlaceholder:"filterPlaceholder",filterLocale:"filterLocale",scrollHeight:"scrollHeight",virtualScroll:"virtualScroll",virtualNodeHeight:"virtualNodeHeight",minBufferPx:"minBufferPx",maxBufferPx:"maxBufferPx"},outputs:{selectionChange:"selectionChange",onNodeSelect:"onNodeSelect",onNodeUnselect:"onNodeUnselect",onNodeExpand:"onNodeExpand",onNodeCollapse:"onNodeCollapse",onNodeContextMenuSelect:"onNodeContextMenuSelect",onNodeDrop:"onNodeDrop",onFilter:"onFilter"},features:[i.Cb],decls:2,vars:2,consts:[[3,"ngClass","ngStyle","class","drop","dragover","dragenter","dragleave",4,"ngIf"],[3,"ngClass","ngStyle","class",4,"ngIf"],[3,"ngClass","ngStyle","drop","dragover","dragenter","dragleave"],["class","ui-tree-loading-mask ui-widget-overlay",4,"ngIf"],["class","ui-tree-loading-content",4,"ngIf"],["class","ui-tree-filter-container",4,"ngIf"],[4,"ngIf","ngIfElse"],["virtualScrollList",""],["class","ui-tree-empty-message",4,"ngIf"],[1,"ui-tree-loading-mask","ui-widget-overlay"],[1,"ui-tree-loading-content"],[1,"ui-tree-filter-container"],["type","text","autocomplete","off",1,"ui-tree-filter","ui-inputtext","ui-widget","ui-state-default","ui-corner-all",3,"keydown.enter","input"],["filter",""],[1,"ui-tree-filter-icon","pi","pi-search"],[1,"ui-tree-wrapper"],["class","ui-tree-container","role","tree",4,"ngIf"],["role","tree",1,"ui-tree-container"],[3,"node","firstChild","lastChild","index","level",4,"ngFor","ngForOf","ngForTrackBy"],[3,"node","firstChild","lastChild","index","level"],[1,"ui-tree-wrapper",3,"itemSize","minBufferPx","maxBufferPx"],[3,"level","rowNode","node","firstChild","lastChild","index","height",4,"cdkVirtualFor","cdkVirtualForOf","cdkVirtualForTrackBy"],[3,"level","rowNode","node","firstChild","lastChild","index"],[1,"ui-tree-empty-message"],[3,"ngClass","ngStyle"],["class","ui-tree-loading ui-widget-overlay",4,"ngIf"],[4,"ngIf"],[1,"ui-tree-loading","ui-widget-overlay"],[3,"node","root"]],template:function(e,t){1&e&&(i.Sc(0,Q,8,15,"div",0),i.Sc(1,re,5,10,"div",1)),2&e&&(i.sc("ngIf",!t.horizontal),i.Eb(1),i.sc("ngIf",t.horizontal))},directives:[r.t,r.q,r.w,r.s,se,o.e,o.a,o.d],encapsulation:2}),e})(),ae=(()=>{let e=class{};return e.\u0275mod=i.Qb({type:e}),e.\u0275inj=i.Pb({factory:function(t){return new(t||e)},imports:[[r.c,o.g],l.e,o.g]}),e})()}}]);