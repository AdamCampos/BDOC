(window.webpackJsonp=window.webpackJsonp||[]).push([[42],{"9X43":function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("WG3B"),s=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({factory:function(t){return new(t||e)},imports:[[n.o]]}),e})()},W6hL:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("k/hs"),s=i("fXoL");let o=(()=>{class e{clearTerminatedRels(e,t){if(e.ComplexClassDefDetails&&e.ComplexClassDefDetails.length>0){let i=t;e.ComplexClassDefDetails.forEach(e=>{i=this.getCurrentLevelComplexObjectItem(i,e),i&&(i.relationshipsToTerminate.length=0)})}else t.relationshipsToTerminate.length=0}checkAndAddRequiredRelsToCopyRels(e,t){const i=[];if(e.RelsToCopy&&e.RelsToCopy.length>0&&e.RelsToCopy.forEach(s=>{const o=s.split(","),a=o[0].replace("_12","").replace("_21",""),r=this.getMatchingFormRels(e,t,a);if(!r||0===r.length){const s=this.getMatchingFormRels(e,t,a,!1);if(!s||0===s.length){const e=i.filter(e=>e.relDefUID===a);if(e&&e.length>0)e[0].obidsOfOtherEndObject.push(o[1]);else{const e=new n.a(a,o[0].endsWith("_12"),[o[1]]);i.push(e)}}}}),e.ClassDefUID===t.classDefUID)t.relationships.push(...i);else{const n=this.getCurrentLevelComplexObjectItemFromClassDef(t,e);n&&n.relationships.push(...i)}}getMatchingFormRels(e,t,i,n=!0){let s=[];if(e.ComplexClassDefDetails&&e.ComplexClassDefDetails.length>0){let o=t;e.ComplexClassDefDetails.forEach(e=>{s&&0!==s.length||(o=this.getCurrentLevelComplexObjectItem(o,e),o&&(s=this.filterMatchingRels(o,i,n)))})}else s=this.filterMatchingRels(t,i,n);return s}filterMatchingRels(e,t,i=!0){let n=[];return e&&t&&(n=i?e.relationships.filter(e=>e.relDefUID===t):e.relationshipsToTerminate.filter(e=>e.relDefUID===t)),n}getCurrentLevelComplexObjectItem(e,t){let i;if(e.classDefUID===t.ClassDefUID)i=e;else if(t.RelDefFromPrevious){const n=this.filterMatchingRels(e,t.RelDefFromPrevious.substring(1));n&&n.length>0&&(i=n[0].otherEndObjects[0])}return i}getCurrentLevelComplexObjectItemFromClassDef(e,t){let i;if(e.classDefUID===t.ClassDefUID&&(i=e),t.ComplexClassDefDetails&&t.ComplexClassDefDetails.length>0){let n=e;t.ComplexClassDefDetails.forEach(e=>{n=this.getCurrentLevelComplexObjectItem(n,e),n.classDefUID===t.ClassDefUID&&(i=n)})}return i}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=s.Ob({token:e,factory:e.\u0275fac}),e})()},cwJ9:function(e,t,i){"use strict";i.d(t,"a",(function(){return N}));var n=i("itXk"),s=i("IzEk"),o=i("YwUS"),a=i("PqRi"),r=i("11V9"),c=i("UVhF"),l=i("S2CU"),f=i("LoMz"),m=i("TGZG"),d=i("Z9D8"),h=i("LUpO"),b=i("C4gn"),p=i("xc+7"),g=i("c+03"),u=i("jNCI"),S=i("Qi+w"),C=i("wpY2"),v=i("iwlc"),E=i("J7mc"),P=i("Ejbi"),O=i("NEWU"),I=i("41Lq"),F=i("yzqN"),D=i("W6hL"),x=i("fXoL"),R=i("tyNb");let N=(()=>{class e extends l.a{constructor(e,t,i,s,o,a,r,c,l,d,h,b,p,g,u,S,C){super(g,S,l,u),this.route=e,this.formService=t,this.applicationSettingsService=i,this.notificationService=s,this.exceptionService=o,this.loadingOverlayService=a,this.modalService=r,this.formValidationService=c,this.sdaTranslateService=l,this.dataService=d,this.pinsMenuService=h,this.helpService=b,this.copyService=p,this.featureSetService=g,this.saveChangesDialogService=u,this.featureSetNavigationService=S,this.ensService=C,this.ensPreviewStep=new f.a,this.formStep=new m.a,this.stepName="form",this.initialized=!1,this.updatedObject=void 0,this.COPY=this.sdaTranslateService.get("COPY","Copy"),this.isNextEnabled=!0,this.orginalSteps=[],this.LOADING_FORM_PLEASE_WAIT=this.sdaTranslateService.get("LOADING_FORM_PLEASE_WAIT","Loading form, please wait..."),this.FORM_OBJECT_COPIED_SUCCESS=this.sdaTranslateService.get("FORM_OBJECT_COPY_SUCCESS","Object successfully copied"),this.FORM_COPY_OBJECT_ERROR=this.sdaTranslateService.get("FORM_COPY_OBJECT_ERROR","An error occurred copying an object"),this.COPY_FORM_ERROR=this.sdaTranslateService.get("COPY_FORM_ERROR","An error occurred getting copy form"),Object(n.a)(this.route.paramMap,this.route.data).subscribe(([e,t])=>{this.selectedObjects=t[O.z],this.objectOBID=this.selectedObjects[0].obid,e.has(O.t)&&(this.config=JSON.parse(e.get(O.t))[0]),this.methodOBID=e.get(O.y),this.applicationSettingsService.setPageTitle(this.selectedObjects[0].name?this.sdaTranslateService.getFormatted("COPY-ITEM_NAME","Copy {0}",[this.selectedObjects[0].name]):this.COPY)}),this.helpService.setHandlers(F.e)}ngOnInit(){this.formService.getCopyForm(this.objectOBID,this.methodOBID,this.config).pipe(Object(s.a)(1)).subscribe(e=>{this.form=e,this.formStep.form=e,this.form.ENSConfigured||(this.ensPreviewStep.showStep=!1),this.initialized=!0,setTimeout(()=>this.ensService.parseENSNumberToCreate(1))},e=>{this.exceptionService.handleException(new d.a(e,this.COPY_FORM_ERROR,"BaseCopyWizardComponent","ngOnInit"))})}formValueChanged(e){}stepChange(e){this.validateCurrentStep()&&(this.beforeStepChange(e),this.stepName=e)}validateForm(){return this.formValidationService.isFormValid(this.form)}validateCurrentStep(){let e=!0;if("form"===this.stepName){const t=this.validateForm();t.length&&(e=!1,this.modalService.multiMessageAlert(t))}return e}beforeStepChange(e){"form"===e?(this.ensForm=void 0,this.ensPreviewStep.ensNames=[],this.form&&this.form.ENSConfigured&&this.ensService.unlockENSNames()):e===this.ensPreviewStep.name&&this.form&&(this.ensForm=this.form)}}return e.\u0275fac=function(t){return new(t||e)(x.Sb(R.a),x.Sb(c.a),x.Sb(o.a),x.Sb(I.a),x.Sb(h.a),x.Sb(g.a),x.Sb(u.a),x.Sb(r.a),x.Sb(P.a),x.Sb(E.a),x.Sb(S.a),x.Sb(v.a),x.Sb(D.a),x.Sb(p.a),x.Sb(C.a),x.Sb(b.a),x.Sb(a.a))},e.\u0275dir=x.Nb({type:e,features:[x.Bb]}),e})()},qx4N:function(e,t,i){"use strict";i.d(t,"a",(function(){return U}));var n=i("fXoL"),s=i("ofXK"),o=i("819/"),a=i("Ejbi"),r=i("PqRi"),c=i("wZkO"),l=i("7EHt"),f=i("NFeN"),m=i("Zldc"),d=i("V3wY"),h=i("4g2b");function b(e,t){1&e&&n.Tb(0,"mat-icon",7)}function p(e,t){if(1&e&&(n.Sc(0,b,1,0,"mat-icon",6),n.Uc(1)),2&e){const e=n.lc(2);n.sc("ngIf",null!=e.form.IsMainTabValid&&!e.form.IsMainTabValid),n.Eb(1),n.Wc(" ",e.mainHeaderName," ")}}function g(e,t){if(1&e){const e=n.Zb();n.Yb(0,"sda-form-section",12),n.hc("formValueChanged",(function(t){return n.Kc(e),n.lc(3).onFormValueChanged(t)})),n.Xb()}if(2&e){const e=n.lc().$implicit,t=n.lc(2);n.sc("formSection",e)("editable",t.editable)}}function u(e,t){if(1&e){const e=n.Zb();n.Yb(0,"sda-revision-scheme-form-section",13),n.hc("formValueChanged",(function(t){return n.Kc(e),n.lc(3).onFormValueChanged(t)})),n.Xb()}if(2&e){const e=n.lc().$implicit,t=n.lc(2);n.sc("formPurpose",t.formPurpose)("formSection",e)("editable",t.editable)}}function S(e,t){if(1&e){const e=n.Zb();n.Yb(0,"sda-ens-form-section",12),n.hc("formValueChanged",(function(t){return n.Kc(e),n.lc(3).onFormValueChanged(t)})),n.Xb()}if(2&e){const e=n.lc().$implicit,t=n.lc(2);n.sc("formSection",e)("editable",t.editable)}}function C(e,t){if(1&e&&(n.Yb(0,"mat-expansion-panel",8),n.Yb(1,"mat-expansion-panel-header",9),n.Yb(2,"mat-panel-title"),n.Uc(3),n.Xb(),n.Xb(),n.Sc(4,g,1,2,"sda-form-section",10),n.Sc(5,u,1,3,"sda-revision-scheme-form-section",11),n.Sc(6,S,1,2,"sda-ens-form-section",10),n.Xb()),2&e){const e=t.$implicit;n.sc("expanded",!e.CollapseSection)("hidden",e.IsHidden),n.Eb(3),n.Wc(" ",e.DisplayName," "),n.Eb(1),n.sc("ngIf",!e.RevisionSchemeSection&&!e.ENSSection),n.Eb(1),n.sc("ngIf",e.RevisionSchemeSection),n.Eb(1),n.sc("ngIf",e.ENSSection)}}function v(e,t){if(1&e){const e=n.Zb();n.Yb(0,"sda-form-section",12),n.hc("formValueChanged",(function(t){return n.Kc(e),n.lc(4).onFormValueChanged(t)})),n.Xb()}if(2&e){const e=n.lc().$implicit,t=n.lc(3);n.sc("formSection",e)("editable",t.editable)}}function E(e,t){if(1&e){const e=n.Zb();n.Yb(0,"sda-revision-scheme-form-section",13),n.hc("formValueChanged",(function(t){return n.Kc(e),n.lc(4).onFormValueChanged(t)})),n.Xb()}if(2&e){const e=n.lc().$implicit,t=n.lc(3);n.sc("formPurpose",t.formPurpose)("formSection",e)("editable",t.editable)}}function P(e,t){if(1&e){const e=n.Zb();n.Yb(0,"sda-ens-form-section",12),n.hc("formValueChanged",(function(t){return n.Kc(e),n.lc(4).onFormValueChanged(t)})),n.Xb()}if(2&e){const e=n.lc().$implicit,t=n.lc(3);n.sc("formSection",e)("editable",t.editable)}}function O(e,t){if(1&e&&(n.Yb(0,"mat-expansion-panel",8),n.Yb(1,"mat-expansion-panel-header",9),n.Yb(2,"mat-panel-title"),n.Uc(3),n.Xb(),n.Xb(),n.Sc(4,v,1,2,"sda-form-section",10),n.Sc(5,E,1,3,"sda-revision-scheme-form-section",11),n.Sc(6,P,1,2,"sda-ens-form-section",10),n.Xb()),2&e){const e=t.$implicit;n.sc("expanded",!e.CollapseSection)("hidden",e.IsHidden),n.Eb(3),n.Wc(" ",e.DisplayName," "),n.Eb(1),n.sc("ngIf",!e.RevisionSchemeSection&&!e.ENSSection),n.Eb(1),n.sc("ngIf",e.RevisionSchemeSection),n.Eb(1),n.sc("ngIf",e.ENSSection)}}function I(e,t){if(1&e&&(n.Wb(0),n.Sc(1,O,7,6,"mat-expansion-panel",5),n.Vb()),2&e){const e=t.$implicit;n.Eb(1),n.sc("ngForOf",e.FormSections)}}function F(e,t){if(1&e&&(n.Yb(0,"mat-tab"),n.Sc(1,p,2,2,"ng-template",3),n.Yb(2,"mat-accordion",4),n.Sc(3,C,7,6,"mat-expansion-panel",5),n.Sc(4,I,2,1,"ng-container",2),n.Xb(),n.Xb()),2&e){const e=n.lc();n.Eb(3),n.sc("ngForOf",e.form.FormSections),n.Eb(1),n.sc("ngForOf",e.filteredMainTabs)}}function D(e,t){1&e&&n.Tb(0,"mat-icon",7)}function x(e,t){if(1&e&&(n.Sc(0,D,1,0,"mat-icon",6),n.Uc(1)),2&e){const e=n.lc().$implicit;n.sc("ngIf",null!=e.IsValid&&!e.IsValid),n.Eb(1),n.Wc(" ",e.DisplayName," ")}}function R(e,t){if(1&e){const e=n.Zb();n.Yb(0,"sda-form-section",12),n.hc("formValueChanged",(function(t){return n.Kc(e),n.lc(3).onFormValueChanged(t)})),n.Xb()}if(2&e){const e=n.lc().$implicit,t=n.lc(2);n.sc("formSection",e)("editable",t.editable)}}function N(e,t){if(1&e){const e=n.Zb();n.Yb(0,"sda-revision-scheme-form-section",13),n.hc("formValueChanged",(function(t){return n.Kc(e),n.lc(3).onFormValueChanged(t)})),n.Xb()}if(2&e){const e=n.lc().$implicit,t=n.lc(2);n.sc("formPurpose",t.formPurpose)("formSection",e)("editable",t.editable)}}function _(e,t){if(1&e){const e=n.Zb();n.Yb(0,"sda-ens-form-section",12),n.hc("formValueChanged",(function(t){return n.Kc(e),n.lc(3).onFormValueChanged(t)})),n.Xb()}if(2&e){const e=n.lc().$implicit,t=n.lc(2);n.sc("formSection",e)("editable",t.editable)}}function M(e,t){if(1&e&&(n.Yb(0,"mat-expansion-panel",8),n.Yb(1,"mat-expansion-panel-header",9),n.Yb(2,"mat-panel-title"),n.Uc(3),n.Xb(),n.Xb(),n.Sc(4,R,1,2,"sda-form-section",10),n.Sc(5,N,1,3,"sda-revision-scheme-form-section",11),n.Sc(6,_,1,2,"sda-ens-form-section",10),n.Xb()),2&e){const e=t.$implicit;n.sc("expanded",!e.CollapseSection)("hidden",e.IsHidden),n.Eb(3),n.Wc(" ",e.DisplayName," "),n.Eb(1),n.sc("ngIf",!e.RevisionSchemeSection&&!e.ENSSection),n.Eb(1),n.sc("ngIf",e.RevisionSchemeSection),n.Eb(1),n.sc("ngIf",e.ENSSection)}}function T(e,t){if(1&e&&(n.Yb(0,"mat-tab"),n.Sc(1,x,2,2,"ng-template",3),n.Yb(2,"mat-accordion",4),n.Sc(3,M,7,6,"mat-expansion-panel",5),n.Xb(),n.Xb()),2&e){const e=t.$implicit;n.Eb(3),n.sc("ngForOf",e.FormSections)}}let y=(()=>{class e{constructor(e,t,i){this.changeDetection=e,this.ensService=t,this.sdaTranslateService=i,this.editable=!0,this.filteredMainTabs=[],this.filteredSecondaryTabs=[]}ngOnInit(){if(this.form.FormSections&&this.form.FormSections.length>0){const e=this.sdaTranslateService.get("ENS_SECTION_DISPLAY_NAME","ENS");let t=0;for(;!this.mainHeaderName&&this.form.FormSections.length>t;){if(!this.form.FormSections[t].IsHidden){const i=this.form.FormSections[t].DisplayName;i!==e&&(this.mainHeaderName=i)}t++}}this.form.SPFFormTabs&&this.form.SPFFormTabs.length>0&&(this.filteredMainTabs=this.form.SPFFormTabs.filter(e=>e.DisplayName===this.mainHeaderName),this.filteredSecondaryTabs=this.form.SPFFormTabs.filter(e=>e.DisplayName!==this.mainHeaderName)),this.formPurpose=this.form.FormPurpose,this.changeDetection.detectChanges()}onFormValueChanged(e){(e.ENSItems&&e.ENSItems.length>0||"ENSSequence"===e.UID)&&this.ensService.assignDisplayItemChangedValueToENSItem(e,this.form)}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(n.h),n.Sb(r.a),n.Sb(a.a))},e.\u0275cmp=n.Mb({type:e,selectors:[["sda-tabbed-form-control"]],inputs:{form:"form",editable:"editable"},decls:3,vars:3,consts:[["animationDuration","0ms",3,"selectedIndex"],[4,"ngIf"],[4,"ngFor","ngForOf"],["mat-tab-label",""],["displayMode","flat","multi","true"],[3,"expanded","hidden",4,"ngFor","ngForOf"],["svgIcon","error","class","tab-validation-icon",4,"ngIf"],["svgIcon","error",1,"tab-validation-icon"],[3,"expanded","hidden"],["collapsedHeight","38px","expandedHeight","38px"],[3,"formSection","editable","formValueChanged",4,"ngIf"],[3,"formPurpose","formSection","editable","formValueChanged",4,"ngIf"],[3,"formSection","editable","formValueChanged"],[3,"formPurpose","formSection","editable","formValueChanged"]],template:function(e,t){1&e&&(n.Yb(0,"mat-tab-group",0),n.Sc(1,F,5,2,"mat-tab",1),n.Sc(2,T,4,1,"mat-tab",2),n.Xb()),2&e&&(n.sc("selectedIndex",0),n.Eb(1),n.sc("ngIf",(null==t.form.FormSections?null:t.form.FormSections.length)>0&&t.mainHeaderName),n.Eb(1),n.sc("ngForOf",t.filteredSecondaryTabs))},directives:[c.c,s.t,s.s,c.a,c.d,l.a,f.a,l.c,l.g,l.h,m.a,d.a,h.a],styles:["[_nghost-%COMP%]     .mat-tab-body-content{overflow-x:hidden;overflow-y:auto}@-webkit-keyframes delay-overflow{0%{overflow:hidden}}@keyframes delay-overflow{0%{overflow:hidden}}[_nghost-%COMP%]{display:flex;width:100%;height:100%}[_nghost-%COMP%]     .mat-tab-header{margin-bottom:10px}[_nghost-%COMP%]     .mat-tab-label-active{color:#03a9f4}[_nghost-%COMP%]     .mat-expansion-panel-body{padding:5px 0!important}[_nghost-%COMP%]     .mat-tab-label-content{font-size:16px}[_nghost-%COMP%]   mat-expansion-panel[_ngcontent-%COMP%]{border-radius:0!important;box-shadow:none!important}[_nghost-%COMP%]   mat-expansion-panel.mat-expanded[_ngcontent-%COMP%]{overflow:visible;-webkit-animation:delay-overflow 1s;animation:delay-overflow 1s}[_nghost-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#ebedf0!important}[_nghost-%COMP%]   .tab-validation-icon[_ngcontent-%COMP%]{flex-shrink:0;width:20px;height:20px;margin-right:4px;color:#d7142c}"]}),e})();function w(e,t){if(1&e){const e=n.Zb();n.Yb(0,"sda-form-control",2),n.hc("formValueChanged",(function(t){return n.Kc(e),n.lc().formValueChanged.emit(t)}))("filesUploaded",(function(t){return n.Kc(e),n.lc().filesUploaded.emit(t)}))("filesPendingForUpload",(function(t){return n.Kc(e),n.lc().filesPendingForUpload.emit(t)})),n.Xb()}if(2&e){const e=n.lc();n.sc("form",e.form)("editable",e.isEditable)}}function V(e,t){if(1&e&&n.Tb(0,"sda-tabbed-form-control",3),2&e){const e=n.lc();n.sc("form",e.form)("editable",e.isEditable)}}let U=(()=>{class e{constructor(){this.isEditable=!0,this.filesPendingForUpload=new n.o,this.filesUploaded=new n.o,this.formValueChanged=new n.o}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["sda-form-controls"]],inputs:{form:"form",isEditable:"isEditable"},outputs:{filesPendingForUpload:"filesPendingForUpload",filesUploaded:"filesUploaded",formValueChanged:"formValueChanged"},decls:2,vars:2,consts:[[3,"form","editable","formValueChanged","filesUploaded","filesPendingForUpload",4,"ngIf"],[3,"form","editable",4,"ngIf"],[3,"form","editable","formValueChanged","filesUploaded","filesPendingForUpload"],[3,"form","editable"]],template:function(e,t){1&e&&(n.Sc(0,w,1,2,"sda-form-control",0),n.Sc(1,V,1,2,"sda-tabbed-form-control",1)),2&e&&(n.sc("ngIf",!t.form.ContainsTabs),n.Eb(1),n.sc("ngIf",t.form.ContainsTabs))},directives:[s.t,o.a,y],styles:["[_nghost-%COMP%]{display:flex;width:100%;height:100%}"]}),e})()},"uD/B":function(e,t,i){"use strict";i.d(t,"a",(function(){return b}));var n=i("ofXK"),s=i("57Ap"),o=i("3Pt+"),a=i("7EHt"),r=i("NFeN"),c=i("wZkO"),l=i("ryGf"),f=i("EYRx"),m=i("/1N2"),d=i("fXoL");let h=(()=>{class e{}return e.\u0275mod=d.Qb({type:e}),e.\u0275inj=d.Pb({factory:function(t){return new(t||e)},imports:[[n.c,o.j,c.e,r.b,a.b,f.a,m.a,l.a]]}),e})(),b=(()=>{class e{}return e.\u0275mod=d.Qb({type:e}),e.\u0275inj=d.Pb({factory:function(t){return new(t||e)},imports:[[n.c,s.a,h]]}),e})()},wEPm:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ey8P"),s=i("fXoL"),o=i("WG3B");let a=(()=>{class e{constructor(e){this.gridMessagesService=e}}return e.\u0275fac=function(t){return new(t||e)(s.Sb(n.a))},e.\u0275cmp=s.Mb({type:e,selectors:[["sda-grid-messages"]],decls:1,vars:7,consts:[[3,"pagerPage","pagerOf","pagerItems","pagerPreviousPage","pagerNextPage","pagerFirstPage","pagerLastPage"]],template:function(e,t){1&e&&s.Tb(0,"kendo-grid-messages",0),2&e&&s.sc("pagerPage",t.gridMessagesService.PAGER_PAGE)("pagerOf",t.gridMessagesService.PAGER_OF)("pagerItems",t.gridMessagesService.PAGER_ITEMS)("pagerPreviousPage",t.gridMessagesService.PAGER_PREVIOUS_PAGE)("pagerNextPage",t.gridMessagesService.PAGER_NEXT_PAGE)("pagerFirstPage",t.gridMessagesService.PAGER_FIRST_PAGE)("pagerLastPage",t.gridMessagesService.PAGER_LAST_PAGE)},directives:[o.h],encapsulation:2}),e})()}}]);