(window.webpackJsonp=window.webpackJsonp||[]).push([[167],{"+T9e":function(e,t,i){"use strict";i.d(t,"a",(function(){return w}));var s=i("mrSG"),a=i("IzEk"),n=i("ONOH"),o=i("Z9D8"),r=i("LUpO"),c=i("PoZZ"),l=i("d74k"),d=i("Ejbi"),h=i("W5cs"),u=i("gBNM"),p=i("UVhF"),g=i("zewe"),S=i("fXoL"),I=i("ofXK"),b=i("TLn4"),f=i("qx4N"),v=i("+qkj");function _(e,t){if(1&e&&S.Tb(0,"sda-loading-indicator",3),2&e){const e=S.lc();S.sc("message",e.OBJECT_DETAILS_LOADING)("centered",!0)}}function m(e,t){if(1&e&&(S.Yb(0,"div",4),S.Tb(1,"sda-form-controls",5),S.Xb()),2&e){const e=S.lc();S.Ib("object-details--fixed-height",e.relatedItemTabs.length>0),S.Eb(1),S.sc("form",e.form)("isEditable",!1)}}function E(e,t){if(1&e&&S.Tb(0,"sda-related-items-section",6),2&e){const e=S.lc();S.sc("tabs",e.relatedItemTabs)}}let w=(()=>{class e{constructor(e,t,i,s,a,n,o){this.formService=e,this.exceptionService=t,this.filterService=i,this.objectDetailsService=s,this.sdaTranslateService=a,this.changeDetection=n,this.configService=o,this.relatedItemTabs=[],this.initialized=!1,this.OBJECT_DETAILS_LOADING=this.sdaTranslateService.get("OBJECT_DETAILS_LOADING","Loading object details, please wait..."),this.OBJECT_DETAILS_ERROR=this.sdaTranslateService.get("INITIALISATION_ERROR","An error occurred whilst initializing"),this.showTodoListForm=!1}ngOnChanges(){this.getFormSubscription&&this.getFormSubscription.unsubscribe(),this.buildForm()}ngOnDestroy(){this.getFormSubscription&&this.getFormSubscription.unsubscribe()}buildForm(){try{this.id&&this.config&&(this.initialized=!1,this.getFormSubscription=this.formService.getForm(this.id,this.config,this.methodOBID,this.showTodoListForm).pipe(Object(a.a)(1)).subscribe(e=>{this.relatedItemTabs=[];const t=this.formService.filterDisplayItemsByDisplayType(e,"RelationshipMaintenance"),{filteredItems:i=[]}=t,a=Object(s.a)(t,["filteredItems"]);this.form=a,this.generateGridTabs(i),this.initialized=!0,this.changeDetection.detectChanges()}))}catch(e){const t=new o.a(e,this.OBJECT_DETAILS_ERROR,"ObjectDetailsComponent","buildForm");this.exceptionService.handleException(t)}}generateGridTabs(e){e.forEach(e=>{const t=e.navigation?new u.a(e.name,`Objects('${e.obid}')/${e.navigation}?$count=true`,this.config,void 0,e.obid,e.navigation):new u.a(e.name,void 0,this.config);t.isRowSelectable=!0,t.config=this.config,t.onCellClicked=e=>this.routeToDetailsView(e),this.relatedItemTabs.push(t)})}routeToDetailsView(e){this.objectDetailsService.showObjectDetailsForm(this.filterService.createLinkOdataQueryFilter(this.getDataSource(e),e.parentTab.parentOBID,e.parentTab.parentRelDef,void 0),e.object.OBID,this.configService.selectedQueryConfigs,e.parentTab.columnSetUID)}getDataSource(e){const t=new kendo.data.DataSource,i=new h.a,s=[new l.a(e.parentTab.state.sort[0].field,e.parentTab.state.sort[0].dir)];return t.filter(i),t.page=()=>e.parentTab.currentPageNumber,t.sort=()=>s,t}}return e.\u0275fac=function(t){return new(t||e)(S.Sb(p.a),S.Sb(r.a),S.Sb(c.a),S.Sb(g.a),S.Sb(d.a),S.Sb(S.h),S.Sb(n.a))},e.\u0275cmp=S.Mb({type:e,selectors:[["sda-object-details"]],inputs:{id:"id",config:"config",methodOBID:"methodOBID",showTodoListForm:"showTodoListForm"},features:[S.Cb],decls:3,vars:3,consts:[[3,"message","centered",4,"ngIf"],["class","object-details",3,"object-details--fixed-height",4,"ngIf"],[3,"tabs",4,"ngIf"],[3,"message","centered"],[1,"object-details"],[3,"form","isEditable"],[3,"tabs"]],template:function(e,t){1&e&&(S.Sc(0,_,1,2,"sda-loading-indicator",0),S.Sc(1,m,2,4,"div",1),S.Sc(2,E,1,1,"sda-related-items-section",2)),2&e&&(S.sc("ngIf",!t.initialized),S.Eb(1),S.sc("ngIf",t.initialized),S.Eb(1),S.sc("ngIf",t.initialized&&t.relatedItemTabs.length>0))},directives:[I.t,b.a,f.a,v.a],styles:[".object-details[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column;height:100%}.object-details[_ngcontent-%COMP%]{display:flex;flex:1 1 100%;flex-direction:column;border-bottom:1px solid #cad0d7}"]}),e})()},"+qkj":function(e,t,i){"use strict";i.d(t,"a",(function(){return r}));var s=i("Ejbi"),a=i("fXoL"),n=i("7EHt"),o=i("HXFx");let r=(()=>{class e{constructor(e){this.sdaTranslateService=e,this.FORM_RELATED_ITEMS=this.sdaTranslateService.get("FORM_RELATED_ITEMS","Related Items")}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(s.a))},e.\u0275cmp=a.Mb({type:e,selectors:[["sda-related-items-section"]],inputs:{tabs:"tabs"},decls:6,vars:5,consts:[["displayMode","flat"],[1,"related-items-panel",3,"expanded"],["collapsedHeight","38px","expandedHeight","38px"],[3,"tabs","openInfoMapInNewTab","showItemCount"]],template:function(e,t){1&e&&(a.Yb(0,"mat-accordion",0),a.Yb(1,"mat-expansion-panel",1),a.Yb(2,"mat-expansion-panel-header",2),a.Yb(3,"mat-panel-title"),a.Uc(4),a.Xb(),a.Xb(),a.Tb(5,"sda-tabbed-grid-view",3),a.Xb(),a.Xb()),2&e&&(a.Eb(1),a.sc("expanded",!0),a.Eb(3),a.Wc(" ",t.FORM_RELATED_ITEMS," "),a.Eb(1),a.sc("tabs",t.tabs)("openInfoMapInNewTab",!0)("showItemCount",!0))},directives:[n.a,n.c,n.g,n.h,o.a],styles:[".related-items-panel[_ngcontent-%COMP%]{border-radius:0!important;box-shadow:none!important}.related-items-panel.mat-expanded[_ngcontent-%COMP%]{overflow:visible;-webkit-animation:delay-overflow 1s;animation:delay-overflow 1s}.related-items-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#ebedf0!important}.related-items-panel[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0}.related-items-panel[_ngcontent-%COMP%]     sda-tabbed-grid-view{flex:none;height:auto}.related-items-panel[_ngcontent-%COMP%]     sda-tabbed-grid-view mat-tab-group{height:40vh;min-height:250px;border-top:1px solid #cad0d7}"]}),e})()},"/rbq":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var s=i("ofXK"),a=i("fXoL");let n=(()=>{class e{}return e.\u0275mod=a.Qb({type:e}),e.\u0275inj=a.Pb({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})()},"7Cbk":function(e,t,i){"use strict";i.r(t),i.d(t,"ManageReviewPlanRoutingModule",(function(){return At}));var s=i("ofXK"),a=i("3Pt+"),n=i("eO1q"),o=i("7CaW"),r=i("dPl2"),c=i("fXoL");let l=(()=>{let e=class{};return e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({factory:function(t){return new(t||e)},imports:[[s.c]]}),e})();var d=i("l3mi"),h=i("K9v4"),u=i("PMIr"),p=i("F+hv"),g=i("txXS"),S=i("GDd0"),I=i("83Gb"),b=i("/rbq"),f=i("CRLB"),v=i("J0As"),_=i("s+i/"),m=i("tyNb"),E=i("YwUS"),w=i("Z9D8"),D=i("LUpO"),C=i("iwlc"),P=i("J7mc"),T=i("Ejbi"),R=i("NEWU"),L=i("ONOH"),O=i("IsVC"),A=i("lJxs"),x=i("m8I0"),B=i("VXut"),y=i("KkJr"),N=i("WjcW"),M=i("qSfU"),F=i("zewe"),U=i("wN6G"),k=i("jNCI"),W=i("9iV3"),V=i("ti2P"),G=i("B5lr"),j=i("g++2"),X=i("mqkv"),z=i("/oMx"),H=i("hEEH"),q=i("7Ekh"),Y=i("ZnZs"),K=i("DG5G"),Q=i("XCGv"),J=i("A3La"),$=i("+eYH"),Z=i("FedY"),ee=i("41Lq"),te=i("7c1w"),ie=function(e){return e.Accepted="Accepted",e.Ignored="Ignored",e.Suggested="Suggested",e.NotInPlan="NotInPlan",e.InformationOnly="InformationOnly",e.SuggestedForInformation="SuggestedForInformation",e}({}),se=function(e){return e[e.PBS=0]="PBS",e[e.Classifications=1]="Classifications",e[e.Disciplines=2]="Disciplines",e[e.DocumentTypes=3]="DocumentTypes",e[e.WBS=4]="WBS",e[e.FEED=5]="FEED",e}({});class ae{constructor(e,t,i,s){this.obid=e,this.displayName=t,this.status=i,this.description=s}saveStatus(){return this.savedStatus=this.status,this}rollbackStatus(){return this.status=this.savedStatus,this}}var ne=i("2Vo4"),oe=i("XNiG");class re{constructor(e,t,i,s){this.issueState=e,this.origin=t,this.documentOBID=i,this.tagOBID=s}}let ce=(()=>{class e{constructor(){this.allIssueStates=new ne.a(new Array),this.allReviewPlanItemStatus=new ne.a(new Array),this.onValueChangeSubject=new oe.a,this.onBeginValueChangeSubject=new oe.a}valueChanged(e,t,i,s){this.onValueChangeSubject.next(new re(e,t,i,s))}beginValueChanged(e,t,i,s){this.onBeginValueChangeSubject.next(new re(e,t,i,s))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=c.Ob({token:e,factory:e.\u0275fac}),e})();var le=i("eIep"),de=i("POgZ");class he{constructor(e,t,i,s,a,n){this.name=e,this.description=t,this.parent=i,this.level=s,this.object=a,this.children=n,this.displayName="",n||(this.children=new Array),e&&t?this.displayName=`${e}, ${t}`:e?this.displayName=e:t&&(this.displayName=t)}}class ue{constructor(e,t,i,s){this.reviewPlanIssueState=e,this.enumUID=t,this.displayAs=i,this.description=s}}class pe{constructor(e,t,i,s,a,n){this.name=e,this.description=t,this.parent=i,this.level=s,this.object=a,this.children=n,this.displayName="",n||(this.children=new Array),e&&t?this.displayName=`${e}, ${t}`:e?this.displayName=e:t&&(this.displayName=t)}}let ge=(()=>{class e{constructor(e,t,i,s,a){this.dataService=e,this.configService=t,this.sdaTranslateService=i,this.reviewPlanProvider=s,this.listEditColumnService=a}getReviewPlanIssueStates(){return this.dataService.get("SelectLists('e1SCLBReviewPlanItemStatus')/Items",this.configService.selectedCreateConfig).pipe(Object(A.a)(e=>{const t=[];return e.forEach(e=>{let i;switch(e.Id){case"e1SCLBReviewPlanItemStatusACCEPTED":i=ie.Accepted;break;case"e1SCLBReviewPlanItemStatusCHANGED":i=ie.Suggested;break;case"e1SCLBReviewPlanItemStatusDECLINED":i=ie.Ignored;break;case"e1SCLBReviewPlanItemStatusINFORMATIONONLY":i=ie.InformationOnly;break;case"e1SCLBReviewPlanItemStatusSUGGESTEDFORINFORMATION":i=ie.SuggestedForInformation;break;default:i=void 0}t.push(new ue(i,e.Id,e.DisplayName,e.Description))}),t.push(new ue(ie.NotInPlan,void 0,this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_STATUS_NOT_IN_PLAN","NOT IN PLAN"),this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_STATUS_NOT_IN_PLAN_DESC","Review plan item is not in plan"))),this.reviewPlanProvider.allReviewPlanItemStatus.next(t),t}))}setDocumentReviewPlanIssueStateForTags(e,t,i){return this.dataService.post("SetReviewPlanItemStatusesForTags",JSON.stringify({TagOBIDs:e,IssuePurposeValues:t,ReviewPlanOBID:i}),this.configService.selectedCreateConfig)}setDocumentReviewPlanIssueStateForDocuments(e,t,i){return this.dataService.post("SetReviewPlanItemStatusesForDocuments",JSON.stringify({DocumentOBIDs:e,IssuePurposeValues:t,ReviewPlanOBID:i}),this.configService.selectedCreateConfig)}setDocumentReviewPlanIssueStateForTagsByQuery(e,t,i){return this.dataService.post("SetReviewPlanItemStatusesForTagsByQuery",JSON.stringify({Query:e,IssuePurposeValues:t,ReviewPlanOBID:i}),this.configService.selectedCreateConfig)}setDocumentReviewPlanIssueStateForDocumentsByQuery(e,t,i){return this.dataService.post("SetReviewPlanItemStatusesForDocumentsByQuery",JSON.stringify({Query:e,IssuePurposeValues:t,ReviewPlanOBID:i}),this.configService.selectedCreateConfig)}toggleReviewPlanSubscription(e,t){return this.dataService.post("ToggleReviewPlanSubscription",JSON.stringify({ReviewplanOBID:e,ReviewplanToggleState:t}),this.configService.selectedCreateConfig)}checkReviewPlanSubscriptionExists(e){return this.dataService.get("CheckReviewPlanSubscriptionExists(ReviewplanOBID='"+e+"')",this.configService.selectedCreateConfig)}getDocumentTypeTree(e){return this.dataService.get("GetDocumentCategoryTree(DocumentTopLevelUID='"+e+"')",this.configService.selectedCreateConfig).pipe(Object(A.a)(t=>{let i;if(e){const e=new he(t[0].Name,t[0].Description,void 0,t[0].Level,{obid:t[0].OBID,uid:t[0].UID});e.children=t[0].Children.map(t=>this.getDocumentTypeTreeListItem(t,e)),i=[e]}else{const e=new he(this.sdaTranslateService.get("ALL","All"),void 0,void 0,0,void 0,[]);e.children=t.map(t=>this.getDocumentTypeTreeListItem(t,e)),i=[e]}return i}))}getWorkPackageTopLevelUID(e){return this.dataService.get("GetWorkPackageTopLevelUID(WBSInterfaceUID='"+e+"')",this.configService.selectedCreateConfig).pipe(Object(A.a)(e=>e.value))}getWBSTree(e,t){return this.dataService.get("GetWBSTree(WBSTopLevelUID='"+e+"',WBSInterfaceUID='"+t+"')",this.configService.selectedCreateConfig).pipe(Object(A.a)(t=>{let i;if(t)if(e){const e=new pe(t[0].Name,t[0].Description,void 0,t[0].Level,{obid:t[0].OBID,uid:t[0].UID});e.children=t[0].Children.map(t=>this.getWBSTreeListItem(t,e)),i=[e]}else{const e=new pe(this.sdaTranslateService.get("ALL","All"),void 0,void 0,0,void 0,[]);e.children=t.map(t=>this.getWBSTreeListItem(t,e)),i=[e]}return i}))}getDocumentReviewPlanColumnSetDetailsByColumnSetUID(e){return this.listEditColumnService.getColumns(e).pipe(Object(A.a)(e=>({ColumnItems:e})))}getDocumentReviewPlanColumnSetDetails(e){return this.dataService.get(`Objects?$filter=contains(Interfaces,'ISPFObjClass') and OBID eq '${e}' &$expand=SPFColumnSetObjClass_21`,this.configService.selectedCreateConfig).pipe(Object(le.a)(e=>{const t=e[0].SPFColumnSetObjClass_21;let i="CS_SPFObject";return t.length>0&&(i=t[0].UID),this.listEditColumnService.getColumns(i).pipe(Object(A.a)(e=>({ColumnItems:e,TagColumnSetUID:i})))}))}getDocumentTypeTreeListItem(e,t){const i=new he(e.Name,e.Description,t,e.Level,{obid:e.OBID,uid:e.UID}),s=[];return e.Children.forEach(e=>{s.push(this.getDocumentTypeTreeListItem(e,i))}),i.children=s,i}getWBSTreeListItem(e,t){const i=new pe(e.Name,e.Description,t,e.Level,{obid:e.OBID,uid:e.UID}),s=[];return e.Children.forEach(e=>{s.push(this.getWBSTreeListItem(e,i))}),i.children=s,i}}return e.\u0275fac=function(t){return new(t||e)(c.dc(P.a),c.dc(L.a),c.dc(T.a),c.dc(ce),c.dc(de.a))},e.\u0275prov=c.Ob({token:e,factory:e.\u0275fac}),e})();var Se=i("YlIq"),Ie=i("90cJ"),be=i("blvr"),fe=i("hqbt"),ve=i("JrsU"),_e=i("Phab"),me=i("f8sK"),Ee=i("LRne"),we=i("Kj3r"),De=function(e){return e[e.Header=0]="Header",e[e.Cell=1]="Cell",e}({});class Ce{constructor(e,t){this.reviewPlanProvider=e,this.route=t,this.dataItem=void 0,this.nestedGridHierachy=[],this.route.params.subscribe(e=>{this.reviewPlanOBID=JSON.parse(e[R.u])[0]}),this.reviewPlanProvider.allReviewPlanItemStatus.subscribe(e=>{this.issueStateDetails=e}),e.onValueChangeSubject.subscribe(e=>{this.changeState(e)}),e.onBeginValueChangeSubject.subscribe(e=>{this.beginChangeState(e)})}}var Pe=i("TLn4");const Te=function(e,t,i,s,a,n){return{"issue-status__checkbox--accepted":e,"issue-status__checkbox--blank":t,"issue-status__checkbox--suggested":i,"issue-status__checkbox--not-set":s,"issue-status__checkbox--info-only":a,"issue-status__checkbox--suggested-info":n}};function Re(e,t){if(1&e&&c.Tb(0,"div",4),2&e){const e=c.lc();c.tc("title",e.tooltip),c.sc("ngClass",c.Cc(2,Te,"Accepted"===e.state.status,"Ignored"===e.state.status,"Suggested"===e.state.status,"NotInPlan"===e.state.status,"InformationOnly"===e.state.status,"SuggestedForInformation"===e.state.status))}}function Le(e,t){1&e&&c.Tb(0,"sda-loading-indicator",5),2&e&&c.sc("size",8)}let Oe=(()=>{class e{constructor(e,t,i,s,a,n,o){this.reviewPlanProvider=e,this.route=t,this.sdaTranslateService=i,this.uxtNotificationService=s,this.reviewDataService=a,this.location=n,this.modalService=o,this.onChange=new c.o,this.onBeginChange=new c.o,this.valueChangedStream=new oe.a,this.route.params.subscribe(e=>{e[R.u]&&(this.reviewPlanOBID=JSON.parse(e[R.u])[0])}),this.reviewPlanProvider.allReviewPlanItemStatus.subscribe(e=>{this.issueStateDetails=e}),this.valueChangedStream.pipe(Object(we.a)(500),Object(le.a)(e=>(this.persistChange(e),Object(Ee.a)({})))).subscribe()}get tooltip(){let e=this.state.description;return"ALL"===this.state.obid&&this.state.status===ie.NotInPlan||(e+=" ("+this.issueStateDetails.filter(e=>e.reviewPlanIssueState===this.state.status)[0].displayAs+")"),e}changeStatus(){if(this.state.saveStatus(),!this.state.isBusy){switch(this.state.status){case ie.Accepted:this.state.status=ie.Ignored;break;case ie.Ignored:this.state.status=this.issueStateDetails.find(e=>e.reviewPlanIssueState===ie.InformationOnly)?ie.InformationOnly:ie.Accepted;break;case ie.InformationOnly:this.state.status=this.includeNotInPlan?ie.NotInPlan:ie.Accepted;break;case ie.SuggestedForInformation:this.state.status=ie.InformationOnly;break;case ie.Suggested:case ie.NotInPlan:this.state.status=ie.Accepted}this.autoSave?(this.onBeginChange.emit(this.state),this.saveChanges()):this.onChange.emit(this.state)}}onChangeStatusFailed(){this.state.isBusy=!1,this.state=this.state.rollbackStatus(),this.onChange.emit(this.state)}saveChanges(){"ALL"!==this.state.obid?this.valueChangedStream.next(this.state):this.onChange.emit(this.state)}getSelectedIssuePurpose(e,t){return{IssuePurposeOBID:e,ReviewPlanStatusUID:t}}persistChange(e){e.isBusy=!0;const t=this.issueStateDetails.filter(t=>t.reviewPlanIssueState===e.status)[0].enumUID;this.reviewDataService.setDocumentReviewPlanIssueStateForDocuments([this.parentOBID],[this.getSelectedIssuePurpose(e.obid,t)],this.reviewPlanOBID).pipe(Object(A.a)(()=>e.saveStatus())).subscribe(e=>{e?(this.uxtNotificationService.success(this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_SAVE_SUCCESS","Successfully updated issue purpose status")),this.onChange.emit(e)):this.onChangeStatusFailed(),this.state.isBusy=!1},e=>{this.state.isBusy=!1,this.onChangeStatusFailed(),this.showExceptionModal(e)})}showExceptionModal(e){this.modalService.alert(e.message,this.sdaTranslateService.get("ALERT","Alert")).then(()=>{this.location.back()})}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(ce),c.Sb(m.a),c.Sb(T.a),c.Sb(ee.a),c.Sb(ge),c.Sb(s.n),c.Sb(k.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["sda-issue-status-indicator"]],inputs:{state:"state",autoSave:"autoSave",includeNotInPlan:"includeNotInPlan",parentOBID:"parentOBID"},outputs:{onChange:"onChange",onBeginChange:"onBeginChange"},decls:5,vars:4,consts:[[1,"issue-status",3,"click"],["class","issue-status__checkbox",3,"title","ngClass",4,"ngIf"],[3,"size",4,"ngIf"],[1,"issue-status__label",3,"title"],[1,"issue-status__checkbox",3,"title","ngClass"],[3,"size"]],template:function(e,t){1&e&&(c.Yb(0,"div",0),c.hc("click",(function(){return t.changeStatus()})),c.Sc(1,Re,1,9,"div",1),c.Sc(2,Le,1,1,"sda-loading-indicator",2),c.Yb(3,"label",3),c.Uc(4),c.Xb(),c.Xb()),2&e&&(c.Eb(1),c.sc("ngIf",!t.state.isBusy),c.Eb(1),c.sc("ngIf",t.state.isBusy),c.Eb(1),c.tc("title",t.tooltip),c.Eb(1),c.Wc(" ",t.state.displayName," "))},directives:[s.t,s.q,Pe.a],styles:["[_nghost-%COMP%]{flex-shrink:0}.issue-status[_ngcontent-%COMP%]{display:flex;flex-wrap:nowrap;align-content:center;padding:0 10px 0 4px;-webkit-user-select:none;-ms-user-select:none;user-select:none}.issue-status[_ngcontent-%COMP%]:hover{cursor:pointer}.issue-status__checkbox[_ngcontent-%COMP%]{position:relative;display:flex;flex-shrink:0;width:18px;height:18px;margin-right:4px;border:1px solid #a9b4be;border-radius:2px;transition:border-color .25s ease,background-color .15s linear;align-items:center;justify-content:center;background-color:initial;background-repeat:no-repeat;background-position:50%}.issue-status__checkbox--accepted[_ngcontent-%COMP%]{background-color:#559d39;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' x='0' y='0' width='10' height='8' viewBox='0 0 10 8' xml:space='preserve'%3E%3Cpath fill='%23FFFFFF' d='M10 1.7C10 1.8 9.9 2 9.8 2.1L5.1 6.8 4.3 7.7C4.2 7.8 4 7.8 3.8 7.8s-0.3 0-0.4-0.1L2.5 6.8 0.2 4.4C0.1 4.3 0 4.2 0 4c0-0.2 0.1-0.3 0.2-0.4l0.9-0.9c0.1-0.1 0.3-0.2 0.4-0.2s0.3 0.1 0.4 0.2l1.9 1.9L8 0.4c0.1-0.1 0.3-0.2 0.4-0.2 0.2 0 0.3 0.1 0.4 0.2l0.9 0.9C9.9 1.3 10 1.5 10 1.7z'/%3E%3C/svg%3E\")}.issue-status__checkbox--accepted[_ngcontent-%COMP%]:hover{background-color:#3e732a}.issue-status__checkbox--blank[_ngcontent-%COMP%]{background-color:#d7142c;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' x='0px' y='0px' width='10px' height='3px' viewBox='0 0 10 3' xml:space='preserve'%3E %3Cpath fill='%23FFFFFF' d='M10,0.8v1.5c0,0.2-0.1,0.4-0.2,0.5C9.7,2.9,9.5,3,9.3,3H0.7C0.5,3,0.3,2.9,0.2,2.8C0.1,2.7,0,2.5,0,2.3V0.8c0-0.2,0.1-0.4,0.2-0.5S0.5,0,0.7,0h8.6c0.2,0,0.4,0.1,0.5,0.2C9.9,0.4,10,0.5,10,0.8z'/%3E %3C/svg%3E\")}.issue-status__checkbox--blank[_ngcontent-%COMP%]:hover{background-color:#a30f21}.issue-status__checkbox--suggested[_ngcontent-%COMP%]{background-color:#f2bf25;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' x='0px' y='0px' width='8px' height='10px' viewBox='0 0 8 10' xml:space='preserve'%3E %3Cpath fill='%23FFFFFF' d='M5.1,7.8v1.9c0,0.1,0,0.2-0.1,0.2S4.9,10,4.8,10H3c-0.1,0-0.2,0-0.2-0.1S2.6,9.8,2.6,9.7V7.8c0-0.1,0-0.2,0.1-0.2S2.9,7.5,3,7.5h1.9c0.1,0,0.2,0,0.2,0.1S5.1,7.7,5.1,7.8z M7.6,3.1c0,0.3,0,0.5-0.1,0.8S7.3,4.4,7.2,4.5S7,4.8,6.8,5S6.5,5.2,6.3,5.3S6.1,5.5,5.9,5.6C5.6,5.7,5.5,5.9,5.3,6.1S5.1,6.5,5.1,6.6c0,0.1,0,0.2-0.1,0.3S4.9,7,4.8,7H2.9C2.8,7,2.8,7,2.7,6.9S2.6,6.7,2.6,6.6V6.2c0-0.4,0.2-0.8,0.5-1.2s0.7-0.7,1.1-0.8C4.6,4,4.8,3.9,4.9,3.7s0.2-0.3,0.2-0.6c0-0.2-0.1-0.4-0.4-0.6S4.2,2.3,3.9,2.3c-0.3,0-0.6,0.1-0.8,0.2C2.9,2.6,2.6,2.9,2.2,3.4C2.2,3.5,2.1,3.5,2,3.5c-0.1,0-0.1,0-0.2-0.1l-1.3-1C0.4,2.4,0.4,2.4,0.4,2.3s0-0.2,0-0.2C1.3,0.7,2.5,0,4.1,0c0.4,0,0.8,0.1,1.3,0.2s0.8,0.4,1.1,0.6s0.6,0.6,0.8,1S7.6,2.7,7.6,3.1z'/%3E %3C/svg%3E\")}.issue-status__checkbox--suggested[_ngcontent-%COMP%]:hover{background-color:#d1a00c}.issue-status__checkbox--info-only[_ngcontent-%COMP%]{background-color:#0087c8;background-image:url(\"data:image/svg+xml,%3Csvg id='Layer_1' data-name='Layer 1' xmlns='http://www.w3.org/2000/svg' width='16px' height='12px' viewBox='0 0 24 24'%3E%3Ctitle%3Einfo-checkbox%3C/title%3E%3Cpath fill='%23FFFFFF' d='M10.06,4.67V3.33A1.34,1.34,0,0,1,11.4,2h1.33a1.33,1.33,0,0,1,1.33,1.33V4.67A1.33,1.33,0,0,1,12.73,6H11.4A1.34,1.34,0,0,1,10.06,4.67ZM14,19V9a1,1,0,0,0-1-1H9A1,1,0,0,0,8,9v1a1,1,0,0,0,1,1h2v8H8a1,1,0,0,0-1,1v1a1,1,0,0,0,1,1h8a1,1,0,0,0,1-1V20a1,1,0,0,0-1-1Z'/%3E%3C/svg%3E\")}.issue-status__checkbox--info-only[_ngcontent-%COMP%]:hover{background-color:#00608f}.issue-status__checkbox--suggested-info[_ngcontent-%COMP%]{background-color:#fab585;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' xmlns:xlink='http://www.w3.org/1999/xlink' version='1.1' id='Layer_3' x='0px' y='0px' width='20px' height='20px' viewBox='0 0 100 100' enable-background='new 0 0 100 100' xml:space='preserve'%3E %3Cg%3E %3Cg%3E %3Cpath fill='%23FFFFFF' d='M50,26.729c1.934,0,3.859,1.224,5.33,3.666l20.398,33.998c2.931,4.883,0.666,8.879-5.027,8.879H29.299c-5.693,0-7.961-4-5.024-8.879l20.398-33.998C46.139,27.953,48.065,26.729,50,26.729 M50,19.829c-4.471,0-8.563,2.554-11.244,7.009L18.358,60.844c-2.712,4.516-3.009,9.334-0.812,13.215c2.198,3.883,6.484,6.113,11.753,6.113    h41.402c5.27,0,9.556-2.23,11.753-6.113c2.196-3.881,1.899-8.693-0.81-13.215L61.247,26.847C58.564,22.382,54.475,19.829,50,19.829z'%2F%3E %3C%2Fg%3E %3Cg%3E %3Ccircle fill='%23FFFFFF' cx='50' cy='62.92' r='4.484'%2F%3E %3C%2Fg%3E %3Cg%3E %3Cpath fill='%23FFFFFF' d='M55.175,42.218c0-2.864-2.312-5.175-5.174-5.175c-2.86,0-5.176,2.312-5.176,5.175    c0,0.688,0.142,1.341,0.383,1.941C47.12,48.903,50,56.02,50,56.02s2.883-7.114,4.797-11.858C55.033,43.56,55.175,42.906,55.175,42.218z'%2F%3E %3C%2Fg%3E %3C%2Fg%3E %3C%2Fsvg%3E\")}.issue-status__checkbox--suggested-info[_ngcontent-%COMP%]:hover{background-color:#f67923}.issue-status__checkbox--not-in-plan[_ngcontent-%COMP%]{background-color:#d3d3d3;background-image:url(\"data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' x='0' y='0' width='8' height='8' viewBox='0 0 8 8' xml:space='preserve'%3E%3Cpath fill='000c14' d='M4 7.5c-0.2 0-0.3-0.1-0.5-0.2S3.4 7 3.4 6.9c0 0 0-0.1-0.1-0.1 0 0-0.1 0-0.1 0.1 0 0.2 0.1 0.4 0.2 0.6C3.6 7.6 3.8 7.6 4 7.6 4 7.6 4.1 7.6 4 7.5 4.1 7.5 4 7.5 4 7.5zM6.4 3.8L2.9 6.9c0 0.3 0.1 0.6 0.3 0.8C3.4 7.9 3.7 8 4 8s0.6-0.1 0.8-0.3C5 7.4 5.1 7.2 5.1 6.9h2c0.2 0 0.3-0.1 0.4-0.2s0.2-0.2 0.2-0.4C7 5.7 6.6 4.9 6.4 3.8zM4 7.6c-0.2 0-0.4-0.1-0.6-0.2C3.3 7.3 3.2 7.1 3.2 6.9c0 0 0-0.1 0.1-0.1 0 0 0.1 0 0.1 0.1 0 0.2 0.1 0.3 0.2 0.5S3.8 7.5 4 7.5C4 7.5 4.1 7.5 4 7.6 4.1 7.6 4 7.6 4 7.6zM8 0c0 0-0.1 0-0.1 0L6 1.7C5.9 1.4 5.7 1.2 5.4 1s-0.6-0.3-1-0.4c0-0.1 0-0.1 0-0.2 0-0.1 0-0.2-0.1-0.3C4.2 0 4.1 0 4 0S3.8 0 3.7 0.1 3.6 0.3 3.6 0.4c0 0.1 0 0.1 0 0.2C3 0.7 2.6 0.9 2.2 1.3S1.7 2.1 1.7 2.6c0 0.4 0 0.8-0.1 1.2C1.6 4.1 1.5 4.4 1.4 4.7 1.3 4.9 1.2 5.1 1.1 5.4 0.9 5.6 0.8 5.8 0.7 5.9S0.4 6.2 0.3 6.3c0 0.1 0 0.2 0.1 0.3L0 6.9V8c0 0 0.1 0 0.1 0L8 1.1V0z'/%3E%3C/svg%3E\")}.issue-status__checkbox--ignored[_ngcontent-%COMP%]{background:none}.issue-status__checkbox__icon[_ngcontent-%COMP%]{width:10px;height:auto;max-height:10px}.issue-status__label[_ngcontent-%COMP%]{color:#1f2429;font-size:14px;cursor:pointer}.issue-status[_ngcontent-%COMP%]   sda-loading-indicator[_ngcontent-%COMP%]{box-sizing:border-box;display:flex;align-items:center;justify-content:center;width:20px;height:20px;margin-right:4px}"]}),e})();function Ae(e,t){if(1&e){const e=c.Zb();c.Yb(0,"sda-issue-status-indicator",2),c.hc("onChange",(function(t){return c.Kc(e),c.lc().onChange(t)}))("onBeginChange",(function(t){return c.Kc(e),c.lc().onBeginChange(t)})),c.Xb()}if(2&e){const e=t.$implicit,i=c.lc();c.sc("autoSave",!0)("parentOBID",i.objectOBID)("state",e)}}let xe=(()=>{class e extends Ce{constructor(e,t,i,s,a,n,o){super(e,t),this.sdaTranslateService=i,this.uxtNotificationService=s,this.reviewDataService=a,this.location=n,this.modalService=o,this.valueChangedStream=new oe.a,e.allIssueStates.subscribe(e=>{this.issueStates=e.map(e=>new ae(e.obid,e.displayName,e.status,e.description))}),this.valueChangedStream.pipe(Object(we.a)(500),Object(le.a)(e=>(this.persistChange(e),Object(Ee.a)({})))).subscribe()}ngOnInit(){this.dataItem&&this.dataItem.SCLBReviewPlanItemDocMaster_21&&(this.dataItem.SCLBReviewPlanItemDocMaster_21.forEach(e=>{const t=e["SCLBReviewPlanItemStatus@Intergraph.SPF.Server.API.Model.SelectListItemId"],i=e.SCLBReviewPlanItemIssuePurpose_12[0].OBID,s=this.issueStateDetails.filter(e=>e.enumUID===t);if(s&&s.length>0){const e=s[0].reviewPlanIssueState,t=this.issueStates.filter(e=>e.obid===i);t&&t.length>0&&(t[0].status=e,t[0].saveStatus())}}),this.setAllCheckBoxState())}get objectOBID(){let e;return this.dataItem&&(e=this.dataItem.Id,e||(e=this.dataItem.OBID)),e}onBeginChange(e){this.setAllRPISelection(!0,e),this.reviewPlanProvider.beginValueChanged(e,De.Cell,this.objectOBID,this.nestedGridHierachy[0])}onChange(e){"ALL"===e.obid?(this.issueStates.forEach(t=>{t.saveStatus(),t.status=e.status}),this.valueChangedStream.next(e)):(this.reviewPlanProvider.valueChanged(e,De.Cell,this.objectOBID,this.nestedGridHierachy[0]),this.setAllRPISelection(!1,e))}beginChangeState(e){this.objectOBID!==e.documentOBID&&(e.origin!==De.Header||e.tagOBID&&e.tagOBID!==this.nestedGridHierachy[0])||this.setAllRPISelection(!0,e.issueState)}changeState(e){this.objectOBID!==e.documentOBID&&(e.origin!==De.Header||e.tagOBID&&e.tagOBID!==this.nestedGridHierachy[0])||("ALL"===e.issueState.obid?this.issueStates.forEach(t=>{t.status=e.issueState.status}):(this.issueStates.filter(t=>t.obid===e.issueState.obid).forEach(t=>{t.status=e.issueState.status}),this.setAllCheckBoxState(),this.setAllRPISelection(!1,e.issueState)))}setAllRPISelection(e,t){e?this.issueStates.forEach(i=>{"ALL"!==i.obid&&t.obid!==i.obid&&"ALL"!==t.obid||(i.isBusy=e)}):(t&&this.issueStates.forEach(i=>{t.obid!==i.obid&&"ALL"!==t.obid||(i.isBusy=e)}),this.issueStates.filter(e=>"ALL"!==e.obid).every(e=>!e.isBusy)&&(this.issueStates.filter(e=>"ALL"===e.obid)[0].isBusy=!1))}onChangeStatusFailed(){this.issueStates.forEach(e=>e.isBusy=!1),this.issueStates.forEach(e=>{e.rollbackStatus(),this.reviewPlanProvider.valueChanged(e,De.Cell,this.objectOBID,this.nestedGridHierachy[0])})}setAllCheckBoxState(){const e=this.issueStates.filter(e=>"ALL"!==e.obid).every(e=>e.status===ie.Accepted),t=this.issueStates.filter(e=>"ALL"!==e.obid).every(e=>e.status===ie.Ignored),i=this.issueStates.filter(e=>"ALL"!==e.obid).every(e=>e.status===ie.Suggested),s=this.issueStates.filter(e=>"ALL"!==e.obid).every(e=>e.status===ie.InformationOnly),a=this.issueStates.filter(e=>"ALL"!==e.obid).every(e=>e.status===ie.SuggestedForInformation);this.issueStates.filter(e=>"ALL"===e.obid)[0].status=e?ie.Accepted:t?ie.Ignored:i?ie.Suggested:s?ie.InformationOnly:a?ie.SuggestedForInformation:ie.NotInPlan}persistChange(e){const t=[];this.issueStates.forEach(e=>{if(e.isBusy=!0,"ALL"!==e.obid){const i=this.issueStateDetails.filter(t=>t.reviewPlanIssueState===e.status)[0];t.push(this.getSelectedIssuePurpose(e.obid,i.enumUID))}}),this.reviewDataService.setDocumentReviewPlanIssueStateForDocuments([this.objectOBID],t,this.reviewPlanOBID).pipe(Object(A.a)(()=>e.saveStatus())).subscribe(e=>{e?(this.uxtNotificationService.success(this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_SAVE_SUCCESS","Successfully updated issue purpose status")),this.reviewPlanProvider.valueChanged(e,De.Cell,this.objectOBID,this.nestedGridHierachy[0])):this.onChangeStatusFailed(),this.setAllRPISelection(!1,e)},e=>{this.onChangeStatusFailed(),this.showExceptionModal(e)})}showExceptionModal(e){this.modalService.alert(e.message,this.sdaTranslateService.get("ALERT","Alert")).then(()=>{this.location.back()})}getSelectedIssuePurpose(e,t){return{IssuePurposeOBID:e,ReviewPlanStatusUID:t}}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(ce),c.Sb(m.a),c.Sb(T.a),c.Sb(ee.a),c.Sb(ge),c.Sb(s.n),c.Sb(k.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["ng-component"]],features:[c.Bb],decls:2,vars:1,consts:[[2,"display","flex"],[3,"autoSave","parentOBID","state","onChange","onBeginChange",4,"ngFor","ngForOf"],[3,"autoSave","parentOBID","state","onChange","onBeginChange"]],template:function(e,t){1&e&&(c.Yb(0,"div",0),c.Sc(1,Ae,1,3,"sda-issue-status-indicator",1),c.Xb()),2&e&&(c.Eb(1),c.sc("ngForOf",t.issueStates))},directives:[s.s,Oe],encapsulation:2}),e})(),Be=(()=>{class e extends Ce{constructor(e,t){super(e,t)}get tagOBID(){return this.nestedGridHierachy[0]}get documentOBID(){return this.nestedGridHierachy[1]}ngOnInit(){if(this.dataItem&&this.dataItem.IssuePurposeName&&this.dataItem.IssuePurposeOBID){const e=this.dataItem.Status;let t=ie.NotInPlan;e&&(t=this.issueStateDetails.filter(t=>t.enumUID===e)[0].reviewPlanIssueState),this.state=new ae(this.dataItem.IssuePurposeOBID,this.dataItem.IssuePurposeName,t,this.dataItem.IssuePurposeDescription)}}onChange(e){this.reviewPlanProvider.valueChanged(e,De.Cell,this.documentOBID,this.tagOBID)}onBeginChange(e){this.reviewPlanProvider.beginValueChanged(e,De.Cell,this.documentOBID,this.tagOBID)}beginChangeState(e){this.documentOBID!==e.documentOBID&&(e.origin!==De.Header||e.tagOBID&&e.tagOBID!==this.tagOBID)||("ALL"===e.issueState.obid||e.issueState.obid===this.state.obid)&&(this.state.isBusy=!0)}changeState(e){this.documentOBID!==e.documentOBID&&(e.origin!==De.Header||e.tagOBID&&e.tagOBID!==this.tagOBID)||("ALL"===e.issueState.obid||e.issueState.obid===this.state.obid)&&(this.state.status=e.issueState.status,this.state.isBusy=!1)}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(ce),c.Sb(m.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["ng-component"]],features:[c.Bb],decls:2,vars:3,consts:[[2,"display","flex"],[3,"autoSave","parentOBID","state","onChange","onBeginChange"]],template:function(e,t){1&e&&(c.Yb(0,"div",0),c.Yb(1,"sda-issue-status-indicator",1),c.hc("onChange",(function(e){return t.onChange(e)}))("onBeginChange",(function(e){return t.onBeginChange(e)})),c.Xb(),c.Xb()),2&e&&(c.Eb(1),c.sc("autoSave",!0)("parentOBID",t.documentOBID)("state",t.state))},directives:[Oe],encapsulation:2}),e})(),ye=(()=>{class e extends Be{constructor(e,t){super(e,t)}get tagOBID(){}get documentOBID(){return this.nestedGridHierachy[0]}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(ce),c.Sb(m.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["ng-component"]],features:[c.Bb],decls:2,vars:3,consts:[[2,"display","flex"],[3,"autoSave","parentOBID","state","onChange","onBeginChange"]],template:function(e,t){1&e&&(c.Yb(0,"div",0),c.Yb(1,"sda-issue-status-indicator",1),c.hc("onChange",(function(e){return t.onChange(e)}))("onBeginChange",(function(e){return t.onBeginChange(e)})),c.Xb(),c.Xb()),2&e&&(c.Eb(1),c.sc("autoSave",!0)("parentOBID",t.documentOBID)("state",t.state))},directives:[Oe],encapsulation:2}),e})(),Ne=(()=>{class e{constructor(e,t,i){this.sdaTranslateService=e,this.configService=t,this.securityService=i}createGridNestedModel(e,t,i,s,a,n,o,r,c,l,d,h,u,p,g,S,I,b){let f,v=!1;return e!==se.DocumentTypes&&e!==se.Disciplines&&e!==se.WBS&&e!==se.FEED||(v=!0),f=v?this.createTwoLevelGridRequest(i,s,g,p,o,S,e,l,d,h,r,c,t,I):this.createThreeLevelGridRequest(s,g,p,o,S,e,n,u,a,i,t,b),f}getTwoLevelRequestStartingUrl(){return"Objects?$expand=SCLBReviewPlanItemDocMaster_21($expand=SCLBReviewPlanItemIssuePurpose_12($select=OBID);$select=SCLBReviewPlanItemStatus;$filter=SCLBReviewPlanItemReviewPlan_12/any(x: x/SCLBReviewPlanUser_12/any(y: y/SPFLoginName eq '"+this.securityService.getUserId()+"')))"}createThreeLevelGridRequest(e,t,i,s,a,n,o,r,c,l,d,h){const u=new Ie.a;u.odataRequest=this.createTagsRequest(e,t,i,s,a,n,o,r,c),u.customColumnComponent=new Se.a(h,h,"",30);const p=new Ie.a;p.odataRequest=this.createDocumentsRequest(l),p.odataRequest.startingUrl=encodeURIComponent(this.getTwoLevelRequestStartingUrl()),this.addInitialDocumentFilters(p.odataRequest,e,s);const g=this.getReviewPlanItemStatusFilter(s,a,e,!0);return g&&g.length>0&&p.odataRequest.relatedItemFilters.push(...g),p.createDynamicRequest=(e,t)=>this.addTagToDocumentFilter(e,t),p.customColumnComponent=new Se.a(void 0,xe,this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_ISSUE_PURPOSE","Issue Purpose"),74),p.child=this.createReviewPlanItemsGridRequest(d,Be),u.child=p,u}createTwoLevelGridRequest(e,t,i,s,a,n,o,r,c,l,d,h,u,p){const g=new Ie.a;g.odataRequest=this.createDocumentsRequest(e),g.odataRequest.startingUrl=encodeURIComponent(this.getTwoLevelRequestStartingUrl()),this.addInitialDocumentFilters(g.odataRequest,t,a),s&&this.addDocumentsOnHoldFilter(g.odataRequest,o),this.addColumnItemFilters(g.odataRequest,i);const S=this.getReviewPlanItemStatusFilter(a,n,t,!0);if(S&&S.length>0&&g.odataRequest.relatedItemFilters.push(...S),o===se.DocumentTypes){const e=this.getDocumentTypesFilter(r);e&&g.odataRequest.relatedItemFilters.push(e)}else if(o===se.Disciplines){const e=this.getDisciplinesFilter(d,h);e&&g.odataRequest.relatedItemFilters.push(e)}else if(o===se.WBS){const e=this.getWBSFilter(c,"SDADocWBSWorkPackage_12");e&&g.odataRequest.relatedItemFilters.push(e)}else if(o===se.FEED){const e=this.getWBSFilter(l,"SDADocFEEDWorkPackage_12");e&&g.odataRequest.relatedItemFilters.push(e)}return g.customColumnComponent=new Se.a(p,xe,this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_ISSUE_PURPOSE","Issue Purpose"),74),g.child=this.createReviewPlanItemsGridRequest(u,ye),g}createReviewPlanItemRequest(e){const t=new be.a;return t.columnSet=e||"CS_SPFObject",t.config=new ve.a(this.configService.selectedCreateConfig,this.configService.selectedCreateConfig),t.pageSize=Settings.application.defaultPageSize,t.page=1,t}createDocumentsRequest(e){const t=new be.a;return t.endInterface="IFDWDocumentMaster",t.resolveDocumentsToVersion=!1,t.config=new ve.a(this.configService.selectedCreateConfig,this.configService.selectedCreateConfig),t.includeAnnotation="Intergraph.SPF.Server.API.Model.SelectListItemId",e&&(t.columnSet=e),t.pageSize=Settings.application.defaultPageSize,t.page=1,t}createTagsRequest(e,t,i,s,a,n,o,r,c){const l=new be.a;l.navigation="EDG_SCLBReviewPlanFDWTag",l.hasLink=!0,l.expandFromObjectId=e,l.config=new ve.a(this.configService.selectedCreateConfig,this.configService.selectedCreateConfig),l.pageSize=Settings.application.defaultPageSize,l.page=1,this.addColumnItemFilters(l,t);const d=this.getReviewPlanItemStatusFilter(s,a,e,!1);if(d&&d.length>0&&l.relatedItemFilters.push(...d),i&&this.addDocumentsOnHoldFilter(l,n),n===se.PBS){const e=this.getPBSFilter(o);e&&l.relatedItemFilters.push(e)}else if(n===se.Classifications){const e=this.getClassificationsFilter(r);e&&l.relatedItemFilters.push(e)}return l.columnSet=c.TagColumnSetUID?c.TagColumnSetUID:"CS_SPFObject",l}formatDocumentToPlantItemRequest(e,t){if(t){let i=t.Id;i||(i=t.OBID),e.startingUrl=encodeURIComponent("GetDocumentReviewPlanItems?DocumentMasterOBID='"+i+"'&ColumnSetUID='"+e.columnSet+"'")}}addTagToDocumentFilter(e,t){if(t){let i=t.Id;i||(i=t.OBID);const s=new Q.a;s.navigation="EDG_FDWDocMasterTag",s.navigationOperator="any";const a=new Q.a;a.field="OBID",a.operator=_e.a.EQUAL,a.value=i,a.filters=void 0,s.filters=[a];const n=e.relatedItemFilters.findIndex(e=>"EDG_FDWDocMasterTag"===e.navigation);n>-1&&e.relatedItemFilters.splice(n,1),e.relatedItemFilters.push(s),e.expandFromObjectId=i}}getPBSFilter(e){let t;return e.object&&(t=new Q.a,t.filters=void 0,t.navigationOperator="any",t.operator=_e.a.EQUAL,t.value=e.object.OBID,t.field="OBID",t.navigation=e.isArea?"FDWTagArea_12":"FDWTagUnit_12"),t}getReviewPlanItemStatusFilter(e,t,i,s){const a=[];if(e&&e.length>0&&e.length!==t.length){const n=e.filter(e=>!!e.enumUID);let o;if(n.length>0&&(o=this.getSelectedReviewPlanIssueStateFilter(s,n,i)),this.containsNotInPlanReviewPlanIssueState(e)){const e=this.getNotSelectedIssueStateDetails(n,t),r=this.getSelectedReviewPlanIssueStateFilter(s,e,i);if(r.negation=!0,s||(a.push(this.getNotInPlanFilter(s,i)),r.navigationOperator="all"),o){const e=new Q.a;e.logicalOperator=me.a.OR,e.filters=[o,r],a.push(e)}else a.push(r)}else a.push(o)}return a}getSelectedReviewPlanIssueStateFilter(e,t,i){let s;return s=e?this.getActualSelectedReviewPlanIssueStateFilterForDocMaster(t,i):this.getActualSelectedReviewPlanIssueStateFilterForTag(t,i),s}getActualSelectedReviewPlanIssueStateFilterForTag(e,t){const i=new Q.a;return i.navigation="EDG_FDWTagDocMaster",i.navigationOperator="any",i.filters.push(this.getActualSelectedReviewPlanIssueStateFilterForDocMaster(e,t)),i}getActualSelectedReviewPlanIssueStateFilterForDocMaster(e,t){const i=new Q.a;i.logicalOperator=me.a.OR,e.forEach(e=>{const t=new Q.a;t.operator=_e.a.EQUAL,t.value=e.enumUID,t.field="SCLBReviewPlanItemStatus",i.filters.push(t)});const s=new Q.a;s.navigation="SCLBReviewPlanItemDocMaster_21",s.navigationOperator="any",s.logicalOperator=me.a.AND;const a=new Q.a;return a.navigation="SCLBReviewPlanItemReviewPlan_12",a.navigationOperator="any",a.operator=_e.a.EQUAL,a.value=t,a.field="OBID",s.filters=[i,a],s}getNotInPlanFilter(e,t){let i=new Q.a;return e?i=this.getDocumentReviewPlanFilter(t):(i.navigation="EDG_FDWTagDocMaster",i.navigationOperator="all",i.logicalOperator=me.a.AND,i.filters=[this.getDocumentReviewPlanFilter(t)]),i}getDocumentReviewPlanFilter(e){const t=new Q.a;t.navigation="EDG_SCLBDocumentReviewPlans",t.navigationOperator="any";const i=new Q.a;return i.field="OBID",i.operator=_e.a.EQUAL,i.value=e,i.filters=void 0,t.filters=[i],t}getWBSFilter(e,t){let i;if(e&&e.length>0){i=new Q.a,i.navigation=t,i.navigationOperator="any",i.logicalOperator=me.a.OR;for(let t=0;t<e.length;t++){const s=new Q.a;s.operator=_e.a.EQUAL,s.value=e[t].object.obid,s.field="OBID",i.filters.push(s)}}else{i=new Q.a,i.filters=[],i.logicalOperator=me.a.AND;const e=new Q.a;e.operator=_e.a.EQUAL,e.field="Name",e.value=void 0,e.filters=void 0,i.filters.push(e)}return i}getDisciplinesFilter(e,t){let i;return e&&e.length!==t.length&&(i=new Q.a,i.navigation="SDADocMasterDiscipline_12",i.navigationOperator="any",i.logicalOperator=me.a.OR,e.length>0?e.forEach(e=>{this.addDisciplineFilter(e,i)}):(i.negation=!0,t.forEach(e=>{this.addDisciplineFilter(e,i)}))),i}addDisciplineFilter(e,t){const i=new Q.a;i.operator=_e.a.EQUAL,i.value=e.obid,i.field="OBID",t.filters.push(i)}getDocumentTypesFilter(e){let t;if(e&&e.length>0){if(e[0].object){t=new Q.a,t.filters=[],t.logicalOperator=me.a.OR;for(let i=0;i<e.length;i++){let s;switch(e[i].level){case 0:s="SDADocCategory";break;case 1:s="SDADocType";break;default:s="SDADocSubType"}const a=new Q.a;a.value=e[i].object.uid,a.operator=_e.a.EQUAL,a.field=s,a.filters=void 0,t.filters.push(a)}}}else{t=new Q.a,t.filters=[],t.logicalOperator=me.a.AND;const e=new Q.a;e.operator=_e.a.EQUAL,e.field="Name",e.value=void 0,e.filters=void 0,t.filters.push(e)}return t}getClassificationsFilter(e){const t=new Q.a;return t.filters=void 0,t.navigation="SPFClassifiedLevel"+e.level+"_12",t.navigationOperator="any",t.operator=_e.a.EQUAL,t.value=e.object.OBID,t.field="OBID",t}createReviewPlanItemsGridRequest(e,t){const i=new Ie.a;return i.createDynamicRequest=(e,t)=>this.formatDocumentToPlantItemRequest(e,t),i.enablePaging=!1,i.odataRequest=this.createReviewPlanItemRequest(e),i.enableDetailsSelection=!1,i.enableSorting=!0,i.enableFiltering=!1,i.enableColumnMenu=!0,i.showIcon=!1,i.customColumnComponent=new Se.a(void 0,t,this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_ISSUE_PURPOSE","Issue Purpose"),120),i}addColumnItemFilters(e,t){JSON.parse(JSON.stringify(t)).filter(e=>e.value&&""!==e.value||e.filters&&e.filters.length>0).forEach(t=>{t.filters&&t.filters.length>0?(t.logicalOperator=me.a.OR,e.relatedItemFilters.push(t)):(t.filters=void 0,e.relatedItemFilters.push(t))})}addInitialDocumentFilters(e,t,i){const s=new Q.a;s.field="Class",s.operator=_e.a.EQUAL,s.value="FDWDocumentMaster",s.filters=void 0,e.relatedItemFilters.push(s),this.containsNotInPlanReviewPlanIssueState(i)&&e.relatedItemFilters.push(this.getNotInPlanFilter(!0,t))}addDocumentsOnHoldFilter(e,t){const i=new Q.a;i.navigation=t===se.DocumentTypes||t===se.Disciplines||t===se.WBS||t===se.FEED?"SPFDocumentRevisions_12":"FDWDocRevTag_21",i.navigationOperator="any",i.value="e1SDAReturnCode_HLD",i.operator=_e.a.EQUAL,i.field="SDAReturnCode",i.filters=void 0,e.relatedItemFilters.push(i)}containsNotInPlanReviewPlanIssueState(e){let t=!1;return e&&e.length>0&&(t=e.some(e=>!e.enumUID)),t}getNotSelectedIssueStateDetails(e,t){return t.filter(t=>e.indexOf(t)<0&&t.enumUID)}}return e.\u0275fac=function(t){return new(t||e)(c.dc(T.a),c.dc(L.a),c.dc(fe.a))},e.\u0275prov=c.Ob({token:e,factory:e.\u0275fac}),e})();var Me=i("+ooB"),Fe=i("8ihU"),Ue=i("IUya"),ke=i("VW6k");function We(e,t){if(1&e){const e=c.Zb();c.Yb(0,"sda-issue-status-indicator",4),c.hc("onChange",(function(t){return c.Kc(e),c.lc().onChange(t)})),c.Xb()}if(2&e){const e=t.$implicit;c.sc("includeNotInPlan",!0)("state",e)}}function Ve(e,t){if(1&e&&(c.Yb(0,"span",9),c.Uc(1),c.Xb()),2&e){const e=c.lc(2);c.Eb(1),c.Wc(" ",e.maxItemWarningMessage," ")}}function Ge(e,t){if(1&e){const e=c.Zb();c.Yb(0,"div",5),c.Yb(1,"uxt-switch",6),c.hc("isActiveChange",(function(t){return c.Kc(e),c.lc().allPages=t}))("isActiveChange",(function(t){return c.Kc(e),c.lc().allPagesChanged(t)})),c.Xb(),c.Yb(2,"span",7),c.Uc(3),c.Xb(),c.Sc(4,Ve,2,1,"span",8),c.Xb()}if(2&e){const e=c.lc();c.Eb(1),c.sc("isActive",e.allPages),c.Eb(2),c.Wc(" ",e.MANAGE_REVIEW_PLAN_BULK_EDIT_ALL_ITEMS_WARNING," "),c.Eb(1),c.sc("ngIf",e.isOverBatchSizeLimit)}}let je=(()=>{class e extends Fe.a{constructor(e,t,i,s,a,n,o){super(n),this.reviewPlanProvider=e,this.sdaTranslateService=t,this.reviewDataService=i,this.uxtNotificationService=s,this.reviewPlanGridRequestCreationService=a,this.location=o,this.TITLE="",this.allPages=!0,this.singleTagName="",this.MANAGE_REVIEW_PLAN_BULK_EDIT_ALL_ITEMS_WARNING=this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_BULK_EDIT_ALL_ITEMS_WARNING","Apply to all pages: This will update all items in the review plan."),this.reviewPlanProvider.allIssueStates.subscribe(e=>{this.issueStates=e.map(e=>new ae(e.obid,e.displayName,ie.NotInPlan,e.description))}),this.reviewPlanProvider.allReviewPlanItemStatus.subscribe(e=>{this.issueStateDetails=e})}get isOverBatchSizeLimit(){return this.allPages&&this.queryCount>Settings.collaboration.sclbManageQualityAssuranceReviewPlan.maxBatchSize}get maxItemWarningMessage(){return this.isTags?this.sdaTranslateService.getFormatted("MANAGE_REVIEW_PLAN_BULK_EDIT_TAGS_OVER_MAX_ITEMS_WARNING","This will apply to {0} tags. This may take a long time to complete.",[this.queryCount.toString()]):this.sdaTranslateService.getFormatted("MANAGE_REVIEW_PLAN_BULK_EDIT_DOCS_OVER_MAX_ITEMS_WARNING","This will apply to {0} documents. This may take a long time to complete.",[this.queryCount.toString()])}ngOnInit(){const e=this.getData(),t=e.data;t.hasOwnProperty("length")?this.objectsToUpdate=t.map(e=>e.OBID):(this.objectsToUpdate=[t.OBID],this.singleTagName=t.Name,this.allPages=!1),this.isTags=e.isTags,this.queryCount=e.dataTotal,this.queryUrl=this.formatUrl(e.dataUrl),this.reviewPlanOBID=e.reviewPlanOBID,this.setTitle()}allPagesChanged(e){this.setTitle()}ok(){this.bulkEdit()}onChange(e){"ALL"===e.obid?this.issueStates.forEach(t=>{t.status=e.status}):this.issueStates.filter(e=>"ALL"===e.obid).forEach(e=>{e.status=ie.NotInPlan}),this.onValueChanged()}setTitle(){""===this.singleTagName?this.TITLE=this.allPages?this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_BULK_EDIT_ALL_ISSUE_PURPOSE_ALL_PAGES_WARNING","Warning: This will apply to all items in every page."):this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_BULK_EDIT_ALL_ISSUE_PURPOSE_WARNING","Warning: This will apply to all items in the current page."):1===this.objectsToUpdate.length&&(this.TITLE=this.sdaTranslateService.getFormatted("MANAGE_REVIEW_PLAN_BULK_EDIT_TAG_ISSUE_PURPOSE_WARNING_NAME","Apply changes to all items related to tag ({0}).",[this.singleTagName]))}formatUrl(e){const t=this.reviewPlanGridRequestCreationService.getTwoLevelRequestStartingUrl();return e.replace(t,"Objects?").substring(e.toLocaleLowerCase().lastIndexOf("v2/")+2).replace("Objects?&","Objects?")}bulkEdit(){this.showLoadingIndicator(),this.setDocumentReviewPlanIssueState().subscribe(()=>{this.uxtNotificationService.success(this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_SAVE_SUCCESS","Successfully updated the issue purpose status")),this.hideLoadingIndicator(),this.closeModal.next(new Ue.a(!0));const e=1===this.objectsToUpdate.length?this.objectsToUpdate[0]:void 0;this.issueStates.filter(e=>e.status!==ie.NotInPlan&&"ALL"!==e.obid).forEach(t=>{this.isTags?this.reviewPlanProvider.valueChanged(t,De.Header,void 0,e):this.reviewPlanProvider.valueChanged(t,De.Header,e,void 0)})},e=>{this.hideLoadingIndicator(),this.closeModal.next(new Ue.a(!1)),this.showExceptionModal(e)})}setDocumentReviewPlanIssueState(){const e=this.getSelectedIssuePurposes();return this.allPages?this.isTags?this.reviewDataService.setDocumentReviewPlanIssueStateForTagsByQuery(this.queryUrl,e,this.reviewPlanOBID):this.reviewDataService.setDocumentReviewPlanIssueStateForDocumentsByQuery(this.queryUrl,e,this.reviewPlanOBID):this.isTags?this.reviewDataService.setDocumentReviewPlanIssueStateForTags(this.objectsToUpdate,e,this.reviewPlanOBID):this.reviewDataService.setDocumentReviewPlanIssueStateForDocuments(this.objectsToUpdate,e,this.reviewPlanOBID)}onValueChanged(){this.issueStates.every(e=>e.status===ie.NotInPlan)?this.disableOkayButton():this.enableOkayButton()}getSelectedIssuePurposes(){return this.issueStates.filter(e=>e.status!==ie.NotInPlan&&"ALL"!==e.obid).map(e=>this.getSelectedIssuePurpose(e.obid,this.getUIDForIssueStateEnum(e.status)))}getSelectedIssuePurpose(e,t){return{IssuePurposeOBID:e,ReviewPlanStatusUID:t}}getUIDForIssueStateEnum(e){return this.issueStateDetails.filter(t=>t.reviewPlanIssueState===e)[0].enumUID}showExceptionModal(e){this.modalService.alert(e.message,this.sdaTranslateService.get("ALERT","Alert")).then(()=>{this.location.back()})}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(ce),c.Sb(T.a),c.Sb(ge),c.Sb(ee.a),c.Sb(Ne),c.Sb(k.a),c.Sb(s.n))},e.\u0275cmp=c.Mb({type:e,selectors:[["ng-component"]],features:[c.Bb],decls:5,vars:3,consts:[[1,"bulk-edit__message"],[1,"bulk-edit__list"],[3,"includeNotInPlan","state","onChange",4,"ngFor","ngForOf"],["class","apply-all",4,"ngIf"],[3,"includeNotInPlan","state","onChange"],[1,"apply-all"],[3,"isActive","isActiveChange"],[1,"apply-all__text"],["class","apply-all__limit animated fadeIn",4,"ngIf"],[1,"apply-all__limit","animated","fadeIn"]],template:function(e,t){1&e&&(c.Yb(0,"p",0),c.Uc(1),c.Xb(),c.Yb(2,"div",1),c.Sc(3,We,1,2,"sda-issue-status-indicator",2),c.Xb(),c.Sc(4,Ge,5,3,"div",3)),2&e&&(c.Eb(1),c.Vc(t.TITLE),c.Eb(2),c.sc("ngForOf",t.issueStates),c.Eb(1),c.sc("ngIf",""===t.singleTagName))},directives:[s.s,s.t,Oe,ke.a],styles:[".apply-all__text[_ngcontent-%COMP%]{overflow-wrap:break-word;word-wrap:break-word;word-break:break-word}.bulk-edit__list[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]{display:flex;flex-direction:column;max-width:500px;margin-bottom:20px;padding:0 10px}.bulk-edit__message[_ngcontent-%COMP%]{word-break:normal}.bulk-edit__list[_ngcontent-%COMP%]{display:flex;flex-wrap:wrap;margin-top:12px}.bulk-edit__list[_ngcontent-%COMP%]   sda-issue-status-indicator[_ngcontent-%COMP%]{flex-basis:50%;margin-bottom:8px}.bulk-edit__list[_ngcontent-%COMP%]   sda-issue-status-indicator[_ngcontent-%COMP%]:first-of-type{flex-basis:100%}.apply-all[_ngcontent-%COMP%]{display:flex;flex-shrink:0;flex-wrap:wrap;align-items:center;margin-top:20px;background-color:#f0f2f4;border-radius:5px;border:1px solid #a9b4be;overflow:hidden}.apply-all[_ngcontent-%COMP%]     .uxt-switch{margin-left:10px}.apply-all__text[_ngcontent-%COMP%]{flex:1;padding:10px;line-height:1;color:#1f2429}.apply-all__limit[_ngcontent-%COMP%]{flex-basis:100%;padding:5px 10px;background-color:#c81329;color:#fff;font-size:14px}"]}),e})();class Xe{constructor(e,t,i,s,a){this.data=e,this.reviewPlanOBID=t,this.isTags=i,this.dataUrl=s,this.dataTotal=a}}const ze=function(e){return{"bulk-edit--doc-types":e}};let He=(()=>{class e{constructor(e,t,i,s,a,n){this.modalService=e,this.route=t,this.sdaTranslateService=i,this.componentFactoryResolver=s,this.injector=a,this.exceptionService=n,this.dataItem=void 0,this.data=void 0,this.dataUrl="",this.dataTotal=-1,this.isTags=!0,this.MANAGE_REVIEW_PLAN_BULK_ITEMS_TOOLTIP=this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_BULK_ITEMS_TOOLTIP","Bulk edit"),this.route.params.subscribe(e=>{this.reviewPlanOBID=JSON.parse(e[R.u])[0]})}bulkEdit(){if(0===this.dataTotal)this.modalService.alert(this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_BULK_EDIT_NO_ITEMS_WARNING","No items found to update."),this.sdaTranslateService.get("WARNING","WARNING"));else{const e=new Me.a(this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_BULK_ITEMS_TITLE","Bulk edit items"),je,this.componentFactoryResolver,this.injector);e.data=new Xe(this.dataItem?this.dataItem:this.data,this.reviewPlanOBID,this.isTags,this.dataUrl,this.dataTotal),e.disableOk=!0,e.size="small tall",this.modalService.showModal(e).catch(e=>{this.exceptionService.handleException(new w.a(e))})}}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(k.a),c.Sb(m.a),c.Sb(T.a),c.Sb(c.j),c.Sb(c.s),c.Sb(D.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["ng-component"]],decls:2,vars:4,consts:[[1,"bulk-edit",3,"title","ngClass","click"],["aria-hidden","true",1,"fa","fa-edit"]],template:function(e,t){1&e&&(c.Yb(0,"div",0),c.hc("click",(function(){return t.bulkEdit()})),c.Tb(1,"i",1),c.Xb()),2&e&&(c.tc("title",t.MANAGE_REVIEW_PLAN_BULK_ITEMS_TOOLTIP),c.sc("ngClass",c.xc(2,ze,!1===t.isTags)))},directives:[s.q],styles:[".bulk-edit[_ngcontent-%COMP%]{font-size:16px;cursor:pointer;text-align:center}.bulk-edit--doc-types[_ngcontent-%COMP%]{display:inline-block;margin-right:4px}"]}),e})();const qe=function(e){return{"bulk-edit--doc-types":e}};let Ye=(()=>{class e extends He{constructor(e,t,i,s,a,n){super(e,t,i,s,a,n),this.isTags=!1}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(k.a),c.Sb(m.a),c.Sb(T.a),c.Sb(c.j),c.Sb(c.s),c.Sb(D.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["ng-component"]],features:[c.Bb],decls:2,vars:4,consts:[[1,"bulk-edit",3,"title","ngClass","click"],["aria-hidden","true",1,"fa","fa-edit"]],template:function(e,t){1&e&&(c.Yb(0,"div",0),c.hc("click",(function(){return t.bulkEdit()})),c.Tb(1,"i",1),c.Xb()),2&e&&(c.tc("title",t.MANAGE_REVIEW_PLAN_BULK_ITEMS_TOOLTIP),c.sc("ngClass",c.xc(2,qe,!1===t.isTags)))},directives:[s.q],styles:[".bulk-edit[_ngcontent-%COMP%]{font-size:16px;cursor:pointer;text-align:center}.bulk-edit--doc-types[_ngcontent-%COMP%]{display:inline-block;margin-right:4px}"]}),e})();class Ke{constructor(e,t,i,s){this.obid=e,this.uid=t,this.displayName=i,this.object=s,this.selected=!1}}var Qe=i("6sHd");function Je(e,t){if(1&e){const e=c.Zb();c.Yb(0,"uxt-checkbox",3),c.hc("isActiveChange",(function(i){return c.Kc(e),t.$implicit.selected=i}))("isActiveChange",(function(){return c.Kc(e),c.lc(2).disciplineCheckboxChanged()})),c.Xb()}if(2&e){const e=t.$implicit;c.sc("isActive",e.selected)("text",e.displayName)}}function $e(e,t){if(1&e){const e=c.Zb();c.Yb(0,"div",2),c.Yb(1,"uxt-checkbox",3),c.hc("isActiveChange",(function(t){return c.Kc(e),c.lc().selectAllIsActive=t}))("isActiveChange",(function(t){return c.Kc(e),c.lc().selectAllCheckboxes(t)})),c.Xb(),c.Sc(2,Je,1,2,"uxt-checkbox",4),c.Xb()}if(2&e){const e=c.lc();c.Eb(1),c.sc("isActive",e.selectAllIsActive)("text",e.SELECT_ALL),c.Eb(1),c.sc("ngForOf",e.disciplines)}}function Ze(e,t){1&e&&c.Tb(0,"sda-loading-indicator",5),2&e&&c.sc("size",50)}let et=(()=>{class e{constructor(e,t,i,s){this.dataService=e,this.configService=t,this.sdaTranslateService=i,this.exceptionService=s,this.onSelectDisciplines=new c.o,this.onAllDisciplinesRetrieved=new c.o,this.disciplinesInitialized=!1,this.selectAllIsActive=!1,this.SELECT_ALL=this.sdaTranslateService.get("SELECT_ALL","Select All"),this.REVIEW_PLAN_DISCIPLINES_ERROR=this.sdaTranslateService.get("REVIEW_PLAN_DISCIPLINES_ERROR","An error occurred getting the disciplines")}ngOnInit(){this.dataService.get("Objects?$filter=Class eq '"+this.disciplineClassDefUID+"'&$orderby=Name&$top=1000",this.configService.selectedCreateConfig,!0).subscribe(e=>{this.disciplines=this.setupDisciplines(e),this.disciplinesInitialized=!0},e=>{this.exceptionService.handleException(new w.a(e,this.REVIEW_PLAN_DISCIPLINES_ERROR,"drill-down-disciplines.component","ngOnInit"))})}selectAllCheckboxes(e){this.selectAllIsActive=e,this.disciplines.forEach(t=>{t.selected=e}),this.onSelectDisciplines.emit(this.disciplines.filter(e=>e.selected))}disciplineCheckboxChanged(){this.onSelectDisciplines.emit(this.disciplines.filter(e=>e.selected))}setupDisciplines(e){const t=[];return e.forEach(e=>{let i=e.Name;e.Description&&e.Description.length>0&&(i+=", "+e.Description);const s=new Ke(e.OBID,e.UID,i,e);t.push(s)}),this.onAllDisciplinesRetrieved.emit(t),t}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(P.a),c.Sb(L.a),c.Sb(T.a),c.Sb(D.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["sda-drill-down-disciplines"]],inputs:{disciplineClassDefUID:"disciplineClassDefUID"},outputs:{onSelectDisciplines:"onSelectDisciplines",onAllDisciplinesRetrieved:"onAllDisciplinesRetrieved"},decls:2,vars:2,consts:[["class","drill-down-disciplines",4,"ngIf"],[3,"size",4,"ngIf"],[1,"drill-down-disciplines"],[3,"isActive","text","isActiveChange"],[3,"isActive","text","isActiveChange",4,"ngFor","ngForOf"],[3,"size"]],template:function(e,t){1&e&&(c.Sc(0,$e,3,3,"div",0),c.Sc(1,Ze,1,1,"sda-loading-indicator",1)),2&e&&(c.sc("ngIf",t.disciplinesInitialized),c.Eb(1),c.sc("ngIf",!t.disciplinesInitialized))},directives:[s.t,Qe.a,s.s,Pe.a],styles:[".drill-down-disciplines[_ngcontent-%COMP%]     .uxt-checkbox{padding:0 16px}"]}),e})();class tt{constructor(e,t){this.item=e,this.isInitialising=t}}var it=i("PSAI");function st(e,t){if(1&e){const e=c.Zb();c.Yb(0,"uxt-tree-list",2),c.hc("selectedItemsChange",(function(t){return c.Kc(e),c.lc().selectDocumentTypes(t)}))("checkedItemsChange",(function(t){return c.Kc(e),c.lc().selectDocumentTypes(t)})),c.Xb()}if(2&e){const e=c.lc();c.sc("defaultCollapsed",!0)("expandOnSelect",!0)("items",e.documentTypeTree)("selectedItems",e.selectedDocumentTypes)("isSelectDeep",!0)}}function at(e,t){1&e&&c.Tb(0,"sda-loading-indicator",3),2&e&&c.sc("size",50)}let nt=(()=>{class e{constructor(e,t,i){this.reviewDataService=e,this.exceptionService=t,this.sdaTranslateService=i,this.onSelectDocumentType=new c.o,this.selectedDocumentTypes=[],this.documentTypeTreeInitialized=!1,this.REVIEW_PLAN_DOCUMENT_TYPE_TREE_ERROR=this.sdaTranslateService.get("REVIEW_PLAN_DOCUMENT_TYPE_TREE_ERROR","An error occurred getting document type tree")}ngOnInit(){this.reviewDataService.getDocumentTypeTree(this.documentTopLevelUID).subscribe(e=>{this.documentTypeTree=e,this.documentTypeTreeInitialized=!0,e&&1===e.length&&0===e[0].children.length&&this.selectDocumentTypes(e,!0)},e=>{this.exceptionService.handleException(new w.a(e,this.REVIEW_PLAN_DOCUMENT_TYPE_TREE_ERROR,"drill-down-document-types.component","ngOnInit"))})}selectDocumentTypes(e,t=!1){this.selectedDocumentTypes=e,this.onSelectDocumentType.emit(new tt(e,t))}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(ge),c.Sb(D.a),c.Sb(T.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["sda-drill-down-document-types"]],inputs:{documentTopLevelUID:"documentTopLevelUID"},outputs:{onSelectDocumentType:"onSelectDocumentType"},decls:2,vars:2,consts:[["textProperty","displayName","selectionMode","multiple","class","drill-down-document-type__tree-list",3,"defaultCollapsed","expandOnSelect","items","selectedItems","isSelectDeep","selectedItemsChange","checkedItemsChange",4,"ngIf"],[3,"size",4,"ngIf"],["textProperty","displayName","selectionMode","multiple",1,"drill-down-document-type__tree-list",3,"defaultCollapsed","expandOnSelect","items","selectedItems","isSelectDeep","selectedItemsChange","checkedItemsChange"],[3,"size"]],template:function(e,t){1&e&&(c.Sc(0,st,1,5,"uxt-tree-list",0),c.Sc(1,at,1,1,"sda-loading-indicator",1)),2&e&&(c.sc("ngIf",t.documentTypeTreeInitialized),c.Eb(1),c.sc("ngIf",!t.documentTypeTreeInitialized))},directives:[s.t,it.a,Pe.a],encapsulation:2}),e})();class ot{constructor(e,t,i,s,a){this.displayName=e,this.isArea=t,this.object=i,this.children=s,this.selectable=a,this.selectable=void 0===a||a,s||(this.children=new Array)}}function rt(e,t){if(1&e){const e=c.Zb();c.Yb(0,"uxt-tree-list",2),c.hc("selectedItemChange",(function(t){return c.Kc(e),c.lc().selectPBS(t)})),c.Xb()}if(2&e){const e=c.lc();c.sc("defaultCollapsed",!0)("expandOnSelect",!0)("items",e.pbsTree)("selectedItem",e.selectedPBS)}}function ct(e,t){1&e&&c.Tb(0,"sda-loading-indicator",3),2&e&&c.sc("size",50)}let lt=(()=>{class e{constructor(e,t,i,s){this.dataService=e,this.configService=t,this.sdaTranslateService=i,this.exceptionService=s,this.onSelectPBS=new c.o,this.pbsTreeInitialized=!1,this.REVIEW_PLAN_PBS_TREE_ERROR=this.sdaTranslateService.get("REVIEW_PLAN_PBS_TREE_ERROR","An error occurred getting PBS tree"),this.ALL=this.sdaTranslateService.get("ALL","All")}ngOnInit(){this.areaToUnitRelDefUID=this.getRelDefDirection(this.areaToUnitRelDefUID),this.dataService.get("Objects?$filter=Class eq '"+this.areaClassDefUID+"'&$expand="+this.areaToUnitRelDefUID+"($orderby=Name)&$orderby=Name",this.configService.selectedCreateConfig,!0).subscribe(e=>{this.pbsTree=this.convertToHierachicalStructure(e),this.pbsTreeInitialized=!0,this.onSelectPBS.emit(new tt(this.pbsTree[0],!0))},e=>{this.exceptionService.handleException(new w.a(e,this.REVIEW_PLAN_PBS_TREE_ERROR,"drill-down-pbs.component","ngOnInit"))})}selectPBS(e,t=!1){e.selectable&&(this.selectedPBS=e,this.onSelectPBS.emit(new tt(e,t)))}getRelDefDirection(e){let t;return e.startsWith("+")?(t=e.substring(1),t+="_12"):e.startsWith("-")?(t=e.substring(1),t+="_21"):t=e,t}convertToHierachicalStructure(e){const t=new ot(this.ALL,!1);return this.addAreas(e,t),[t]}addAreas(e,t){e.forEach(e=>{let i=e.Name;e.Description&&e.Description.length>0&&(i+=", "+e.Description);const s=new ot(i,!0,e);this.addUnits(e,s),t.children.push(s)})}addUnits(e,t){e[this.areaToUnitRelDefUID].forEach(e=>{let i=e.Name;e.Description&&e.Description.length>0&&(i+=", "+e.Description);const s=new ot(i,!1,e);t.children.push(s)})}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(P.a),c.Sb(L.a),c.Sb(T.a),c.Sb(D.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["sda-drill-down-pbs"]],inputs:{areaClassDefUID:"areaClassDefUID",areaToUnitRelDefUID:"areaToUnitRelDefUID"},outputs:{onSelectPBS:"onSelectPBS"},decls:2,vars:2,consts:[["textProperty","displayName","class","drill-down-pbs__tree-list",3,"defaultCollapsed","expandOnSelect","items","selectedItem","selectedItemChange",4,"ngIf"],[3,"size",4,"ngIf"],["textProperty","displayName",1,"drill-down-pbs__tree-list",3,"defaultCollapsed","expandOnSelect","items","selectedItem","selectedItemChange"],[3,"size"]],template:function(e,t){1&e&&(c.Sc(0,rt,1,4,"uxt-tree-list",0),c.Sc(1,ct,1,1,"sda-loading-indicator",1)),2&e&&(c.sc("ngIf",t.pbsTreeInitialized),c.Eb(1),c.sc("ngIf",!t.pbsTreeInitialized))},directives:[s.t,it.a,Pe.a],encapsulation:2}),e})();var dt=i("UVhF");function ht(e,t){if(1&e){const e=c.Zb();c.Yb(0,"uxt-tree-list",2),c.hc("selectedItemChange",(function(t){return c.Kc(e),c.lc().selectClassification(t)})),c.Xb()}if(2&e){const e=c.lc();c.sc("defaultCollapsed",!0)("expandOnSelect",!0)("items",e.classificationTree)("selectedItem",e.selectedClassification)}}function ut(e,t){1&e&&c.Tb(0,"sda-loading-indicator",3),2&e&&c.sc("size",50)}let pt=(()=>{class e{constructor(e,t,i){this.formService=e,this.exceptionService=t,this.sdaTranslateService=i,this.onSelectClassification=new c.o,this.onRootClassificationRetrieved=new c.o,this.classificationTreeInitialized=!1,this.REVIEW_PLAN_CLASSIFICATION_TREE_ERROR=this.sdaTranslateService.get("REVIEW_PLAN_CLASSIFICATION_TREE_ERROR","An error occurred getting classification tree")}ngOnInit(){this.formService.getClassificationTree(this.classificationUID).subscribe(e=>{this.classificationTree=e,this.classificationTreeInitialized=!0,e&&(e.length>0&&this.onRootClassificationRetrieved.emit(e[0]),1===e.length&&0===e[0].children.length?this.selectClassification(e[0],!0):e.length>=1&&this.onSelectClassification.emit(new tt(e[0],!0)))},e=>{this.exceptionService.handleException(new w.a(e,this.REVIEW_PLAN_CLASSIFICATION_TREE_ERROR,"drill-down-classifications.component","ngOnInit"))})}selectClassification(e,t=!1){e.selectable&&(this.selectedClassification=e,this.onSelectClassification.emit(new tt(e,t)))}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(dt.a),c.Sb(D.a),c.Sb(T.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["sda-drill-down-classifications"]],inputs:{classificationUID:"classificationUID"},outputs:{onSelectClassification:"onSelectClassification",onRootClassificationRetrieved:"onRootClassificationRetrieved"},decls:2,vars:2,consts:[["textProperty","displayName","class","drill-down-classifications__tree-list",3,"defaultCollapsed","expandOnSelect","items","selectedItem","selectedItemChange",4,"ngIf"],[3,"size",4,"ngIf"],["textProperty","displayName",1,"drill-down-classifications__tree-list",3,"defaultCollapsed","expandOnSelect","items","selectedItem","selectedItemChange"],[3,"size"]],template:function(e,t){1&e&&(c.Sc(0,ht,1,4,"uxt-tree-list",0),c.Sc(1,ut,1,1,"sda-loading-indicator",1)),2&e&&(c.sc("ngIf",t.classificationTreeInitialized),c.Eb(1),c.sc("ngIf",!t.classificationTreeInitialized))},directives:[s.t,it.a,Pe.a],encapsulation:2}),e})();var gt=i("lUp+");function St(e,t){if(1&e){const e=c.Zb();c.Yb(0,"uxt-tree-list",2),c.hc("selectedItemsChange",(function(t){return c.Kc(e),c.lc().selectWBSTypes(t)}))("checkedItemsChange",(function(t){return c.Kc(e),c.lc().selectWBSTypes(t)})),c.Xb()}if(2&e){const e=c.lc();c.sc("defaultCollapsed",!0)("expandOnSelect",!0)("items",e.wbsTree)("selectedItems",e.selectedWBSTypes)("isSelectDeep",!0)}}function It(e,t){1&e&&c.Tb(0,"sda-loading-indicator",3),2&e&&c.sc("size",50)}let bt=(()=>{class e{constructor(e,t,i){this.reviewDataService=e,this.sdaTranslateService=t,this.exceptionService=i,this.onSelectWBS=new c.o,this.selectedWBSTypes=[],this.wbsTreeInitialized=!1,this.REVIEW_PLAN_WBS_TREE_ERROR=this.sdaTranslateService.get("REVIEW_PLAN_WBS_TREE_ERROR","An error occurred getting WBS tree")}ngOnInit(){this.reviewDataService.getWBSTree(this.wbsTopLevelUID,this.wbsInterfaceUID).subscribe(e=>{this.wbsTree=e,this.wbsTreeInitialized=!0,e&&1===e.length&&0===e[0].children.length&&this.selectWBSTypes(e,!0)},e=>{this.exceptionService.handleException(new w.a(e,this.REVIEW_PLAN_WBS_TREE_ERROR,"sda-drill-down-wbs","ngOnInit"))})}selectWBSTypes(e,t=!1){this.selectedWBSTypes=e,this.onSelectWBS.emit(new tt(e,t))}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(ge),c.Sb(T.a),c.Sb(D.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["sda-drill-down-wbs"]],inputs:{wbsTopLevelUID:"wbsTopLevelUID",wbsInterfaceUID:"wbsInterfaceUID"},outputs:{onSelectWBS:"onSelectWBS"},decls:2,vars:2,consts:[["selectionMode","multiple","textProperty","displayName","class","drill-down-wbs__tree-list",3,"defaultCollapsed","expandOnSelect","items","selectedItems","isSelectDeep","selectedItemsChange","checkedItemsChange",4,"ngIf"],[3,"size",4,"ngIf"],["selectionMode","multiple","textProperty","displayName",1,"drill-down-wbs__tree-list",3,"defaultCollapsed","expandOnSelect","items","selectedItems","isSelectDeep","selectedItemsChange","checkedItemsChange"],[3,"size"]],template:function(e,t){1&e&&(c.Sc(0,St,1,5,"uxt-tree-list",0),c.Sc(1,It,1,1,"sda-loading-indicator",1)),2&e&&(c.sc("ngIf",t.wbsTreeInitialized),c.Eb(1),c.sc("ngIf",!t.wbsTreeInitialized))},directives:[s.t,it.a,Pe.a],encapsulation:2}),e})();var ft=i("FcA5"),vt=i("ogqj");function _t(e,t){if(1&e&&(c.Yb(0,"div",4),c.Tb(1,"sda-column-filters",5),c.Xb()),2&e){const e=c.lc();c.Eb(1),c.sc("filterColumns",e.filterColumns)("filters",e.filters)}}let mt=(()=>{class e{constructor(e){this.sdaTranslateService=e,this.onSearch=new c.o,this.REVIEW_PLAN_SEARCH_CRITERIA_TITLE=this.sdaTranslateService.get("REVIEW_PLAN_SEARCH_CRITERIA_TITLE","Search Criteria"),this.REVIEW_PLAN_SEARCH_CRITERIA_SEARCH_LABEL=this.sdaTranslateService.get("REVIEW_PLAN_SEARCH_CRITERIA_SEARCH_LABEL","Search tags by name and description"),this.REVIEW_PLAN_SEARCH_CRITERIA_SEARCH_BUTTON=this.sdaTranslateService.get("REVIEW_PLAN_SEARCH_CRITERIA_SEARCH_BUTTON","SEARCH")}search(){this.onSearch.emit()}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(T.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["sda-search-criteria"]],inputs:{filters:"filters",filterColumns:"filterColumns"},outputs:{onSearch:"onSearch"},decls:4,vars:3,consts:[[1,"search-criteria"],[1,"search-criteria__actions"],[1,"search-criteria__actions__button",3,"displayName","title","onClick"],["class","search-criteria__input-groups",4,"ngIf"],[1,"search-criteria__input-groups"],[3,"filterColumns","filters"]],template:function(e,t){1&e&&(c.Yb(0,"div",0),c.Yb(1,"div",1),c.Yb(2,"sda-button-primary",2),c.hc("onClick",(function(){return t.search()})),c.Xb(),c.Xb(),c.Sc(3,_t,2,2,"div",3),c.Xb()),2&e&&(c.Eb(2),c.sc("displayName",t.REVIEW_PLAN_SEARCH_CRITERIA_SEARCH_BUTTON)("title",t.REVIEW_PLAN_SEARCH_CRITERIA_SEARCH_BUTTON),c.Eb(1),c.sc("ngIf",t.filters&&t.filterColumns))},directives:[ft.a,s.t,vt.a],styles:["[_nghost-%COMP%]   .search-criteria__input-groups[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]{flex-grow:1;max-width:100%}[_nghost-%COMP%]   sda-column-filters[_ngcontent-%COMP%]     .filters-form{min-width:265px}[_nghost-%COMP%]   .search-criteria[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;max-width:300px;height:100%}[_nghost-%COMP%]   .search-criteria__actions[_ngcontent-%COMP%]{margin:4px 0 0;padding:8px 10px}[_nghost-%COMP%]   .search-criteria__actions__button[_ngcontent-%COMP%]     .button{width:100%}[_nghost-%COMP%]   .search-criteria__input-groups[_ngcontent-%COMP%]{height:100%;padding:10px}"]}),e})();var Et=i("yISo");function wt(e,t){if(1&e&&c.Tb(0,"sda-power-bar-view",18),2&e){const e=c.lc();c.sc("leftControls",e.leftPowerBarControls)("centreControls",e.centrePowerBarControls)("rightControls",e.rightPowerBarControls)("overflowControls",e.overflowPowerBarControls)("overflowLabel",e.REVIEW_PLAN_OVERFLOW_LABEL)("disableOverflow",!0)("overflowIcon","fa-filter")}}function Dt(e,t){if(1&e){const e=c.Zb();c.Yb(0,"p-tabPanel",4),c.Yb(1,"sda-drill-down-wbs",19),c.hc("onSelectWBS",(function(t){return c.Kc(e),c.lc().onSelectWBS(t)})),c.Xb(),c.Xb()}if(2&e){const e=c.lc();c.tc("header",e.REVIEW_PLAN_WBS_TAB_TITLE),c.Eb(1),c.sc("wbsTopLevelUID",e.wbsTopLevelUID)("wbsInterfaceUID",e.wbsInterfaceUID)}}function Ct(e,t){if(1&e){const e=c.Zb();c.Yb(0,"p-tabPanel",4),c.Yb(1,"sda-drill-down-wbs",19),c.hc("onSelectWBS",(function(t){return c.Kc(e),c.lc().onSelectFEED(t)})),c.Xb(),c.Xb()}if(2&e){const e=c.lc();c.tc("header",e.REVIEW_PLAN_FEED_TAB_TITLE),c.Eb(1),c.sc("wbsTopLevelUID",e.feedTopLevelUID)("wbsInterfaceUID",e.feedInterfaceUID)}}function Pt(e,t){if(1&e){const e=c.Zb();c.Yb(0,"div",20),c.Yb(1,"sda-search-criteria",21),c.hc("onSearch",(function(){return c.Kc(e),c.lc().search()})),c.Xb(),c.Xb()}if(2&e){const e=c.lc();c.sc("hidden",!e.showFilters),c.Eb(1),c.sc("filters",e.filters)("filterColumns",e.filterColumns)}}function Tt(e,t){if(1&e){const e=c.Zb();c.Yb(0,"sda-kendo-grid",22),c.hc("onItemSelected",(function(t){return c.Kc(e),c.lc().selectDetails(t)})),c.Xb()}if(2&e){const e=c.lc();c.sc("odataRequest",e.nestedModel.odataRequest)("showActions",!1)("enableDetailsSelection",e.nestedModel.enableDetailsSelection)("objectModalView",e.nestedModel.objectModalView)("enableSelection",!1)("nestedGridModel",e.nestedModel)("freezeFirstColumn",!1)("customColumnComponent",e.nestedModel.customColumnComponent)("autoResize",!1)("clickableURLs",!0)}}let Rt=(()=>{class e{constructor(e,t,i,s,a,n,o,r,c,l,d,h,u,p,g,S){this.sdaTranslateService=e,this.reviewDataService=t,this.configService=i,this.dataService=s,this.modalService=a,this.reviewPlanProvider=n,this.exceptionService=o,this.odataService=r,this.crudService=c,this.notificationService=l,this.reviewPlanGridRequestCreationService=d,this.componentFactoryResolver=h,this.injector=u,this.objectDetailsService=p,this.queryService=g,this.listEditFilterQueryService=S,this.REVIEW_PLAN_OVERFLOW_LABEL=this.sdaTranslateService.get("REVIEW_PLAN_OVERFLOW_LABEL","FILTERS"),this.REVIEW_PLAN_DOCUMENTS_TAB_TITLE=this.sdaTranslateService.get("REVIEW_PLAN_DOCUMENTS_TAB_TITLE","Documents"),this.REVIEW_PLAN_TAGS_TAB_TITLE=this.sdaTranslateService.get("REVIEW_PLAN_TAGS_TAB_TITLE","Tags"),this.REVIEW_PLAN_PBS_TAB_TITLE=this.sdaTranslateService.get("REVIEW_PLAN_PBS_TAB_TITLE","PBS"),this.REVIEW_PLAN_CLASSIFICATIONS_TAB_TITLE=this.sdaTranslateService.get("REVIEW_PLAN_CLASSIFICATIONS_TAB_TITLE","Classifications"),this.REVIEW_PLAN_DISCIPLINES_TAB_TITLE=this.sdaTranslateService.get("REVIEW_PLAN_DISCIPLINES_TAB_TITLE","Disciplines"),this.MULTIPLE=this.sdaTranslateService.get("MULTIPLE","Multiple"),this.SELECTED=this.sdaTranslateService.get("SELECTED","selected"),this.REVIEW_PLAN_DOCUMENT_TYPES_TAB_TITLE=this.sdaTranslateService.get("REVIEW_PLAN_DOCUMENT_TYPES_TAB_TITLE","Document Types"),this.REVIEW_PLAN_WBS_TAB_TITLE=this.sdaTranslateService.get("REVIEW_PLAN_WBS_TAB_TITLE","WBS"),this.REVIEW_PLAN_FEED_TAB_TITLE=this.sdaTranslateService.get("REVIEW_PLAN_FEED_TAB_TITLE","FEED"),this.REVIEW_PLAN_SUBSCRIBED=this.sdaTranslateService.get("REVIEW_PLAN_SUBSCRIBED","Notifications to review plan turned on"),this.REVIEW_PLAN_UNSUBSCRIBED=this.sdaTranslateService.get("REVIEW_PLAN_UNSUBSCRIBED","Notification to review plan turned off"),this.REVIEW_PLAN_TOO_MANY_CRITERIA=this.sdaTranslateService.get("REVIEW_PLAN_TOO_MANY_CRITERIA","Unable to perform search because of too many selected filters."),this.wbsTopLevelUID="",this.feedTopLevelUID="",this.wbsInterfaceUID="ISDAWBSWorkPackage",this.feedInterfaceUID="ISDAFEEDWorkPackage",this.isWBSVisible=!1,this.isFEEDVisible=!1,this.REVIEW_PLAN_GRID_TITLE="",this.REVIEW_PLAN_GRID_TITLE_TOOLTIP="",this.leftPowerBarControls=new Array,this.centrePowerBarControls=new Array,this.rightPowerBarControls=new Array,this.overflowPowerBarControls=new Array,this.actionButtons=[],this.searched=!1,this.showFilters=!0,this.showGrid=!0,this.filterColumns=[],this.documentsTabindex=0,this.checkedFilterDocumentsOnHold=!1,this.selectedReviewPlanIssueStateDetails=[],this.allReviewPlanIssueStateDetails=[],this.reviewPlanSearchType=se.Disciplines,this.documentsSelected=!0,this.pbsSelected=!0,this.ALL=this.sdaTranslateService.get("ALL","All"),this.selectedDisciplines=[],this.selectedDocumentTypes=[],this.selectedWBSTypes=[],this.selectedFEEDTypes=[],this.onReviewPlanStatusChanged=e=>{if(e){if(e.Value!==this.reviewPlanStatus&&e.Value!==y.a){const t=new N.a(void 0);t.properties.push(new M.a("SCLBReviewPlanStatus",e.Value)),this.crudService.update(this.reviewPlanOBID,t).subscribe(()=>{this.notificationService.success(this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_STATUS_CHANGED_SUCCESS","Review plan status set successfully")),this.reviewPlanStatus=e.Value},e=>{this.exceptionService.handleException(e)})}this.reviewStatusGroup.controls.filter(e=>"notice"===e.uid)[0].hidden="e1SCLBReviewPlanStatusACTIVE"===e.Value,this.reviewStatusGroup.controls.filter(e=>"reviewStatus"===e.uid)[0].style="e1SCLBReviewPlanStatusACTIVE"===e.Value?"":"sda-enum-type--inactive"}},this.hideShowFilters=e=>{this.showFilters=e.checked,this.leftPowerBarControls.filter(e=>"toggleGrid"===e.uid)[0].isDisabled=!this.showFilters;const t=this.overflowPowerBarControls.filter(e=>"issueStateSection"===e.uid)[0];if(this.showFilters)this.addPowerBarSearchButton(),t.controls.push(this.powerBarSearchBtn);else{const e=t.controls.indexOf(this.powerBarSearchBtn);e>-1&&t.controls.splice(e,1)}},this.hideShowGrid=e=>{this.showGrid=e.checked,this.leftPowerBarControls.filter(e=>"toggleFilters"===e.uid)[0].isDisabled=!this.showGrid},this.filterDocumentsOnHold=e=>{this.checkedFilterDocumentsOnHold=!!e.checked},this.changeFilter=(e,t)=>{if(e.checked)-1===this.selectedReviewPlanIssueStateDetails.indexOf(t)&&this.selectedReviewPlanIssueStateDetails.push(t);else{const e=this.selectedReviewPlanIssueStateDetails.indexOf(t);e>-1&&this.selectedReviewPlanIssueStateDetails.splice(e,1)}}}ngOnInit(){this.odataService.get("Objects('"+this.reviewPlanOBID+"')",this.configService.selectedCreateConfig,!0).subscribe(e=>{this.reviewPlanStatus="e1SCLBReviewPlanStatus"+e.value.SCLBReviewPlanStatus;const t={EnumListTypeUID:"e1SCLBReviewPlanStatus",IsMandatory:!0,Value:e.value.SCLBReviewPlanStatus,Config:e.value.Config},i=new Y.a(e=>this.hideShowFilters(e),!0,"","","fa fa-columns","fa fa-columns");i.uid="toggleFilters",i.tooltip=this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_TOGGLE_CRITERIA_VISIBILITY","Toggle search criteria visibility"),this.leftPowerBarControls.push(i);const s=new Y.a(e=>this.hideShowGrid(e),!0,"","","fa fa-table","fa fa-table");s.uid="toggleGrid",s.tooltip=this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_TOGGLE_GRID_VISIBILITY","Toggle grid visibility");const a=new H.a(this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_NOTICE_LABEL","Plan inactive"),"fa-exclamation-circle");a.uid="notice",a.hidden=!0,a.tooltip=this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_NOTICE_TOOLTIP","Reviews are only generated from plans in an active status"),this.reviewStatusGroup=new X.a(W.a.Horizontal);const n=new j.a(t,this.onReviewPlanStatusChanged,"","",B.a.DisplayName);n.uid="reviewStatus",this.leftPowerBarControls.push(s),this.leftPowerBarControls.push(new q.a);const o=new Y.a(e=>this.toggleReviewplanSubscription(e),!0,"","","fa fa-bell-slash","fa fa-bell");o.uid="toggleSubscriptionButton",o.tooltip=this.sdaTranslateService.get("REVIEW_PLAN_NOTIFICATIONS","Receive notifications of automated additions to the review plan"),this.leftPowerBarControls.push(o),this.leftPowerBarControls.push(new q.a),this.addReviewPlanSubscriptionStatus(),this.reviewStatusGroup.controls.push(new z.a(this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_STATUS_LABEL","Status"))),this.reviewStatusGroup.controls.push(n),this.reviewStatusGroup.controls.push(a),this.leftPowerBarControls.push(this.reviewStatusGroup),this.addReviewPlanIssueStateCheckBoxes(),this.leftPowerBarControls.push(new q.a),this.addDocumentsOnHoldCheckBox(),this.getTopLevelWorkPacks()},e=>{this.exceptionService.handleException(new w.a(e))}),this.configs=[this.configService.selectedCreateConfig],this.initialiseIssueStates(),this.updateColumnSetDetailsForDocuments()}handleReviewPlanSearchTypeChange(){this.documentsSelected=!this.documentsSelected,this.documentsSelected?this.handleReviewPlanDocumentsSearchTypeChange(this.documentsTabindex):this.handleReviewPlanTagsSearchTypeChange(!1)}handleReviewPlanDocumentsSearchTypeChange(e){switch(e){case 0:this.reviewPlanSearchType=se.Disciplines;break;case 1:this.reviewPlanSearchType=se.DocumentTypes;break;case 2:this.reviewPlanSearchType=this.isWBSVisible?se.WBS:se.FEED;break;case 3:this.reviewPlanSearchType=se.FEED;break;default:this.reviewPlanSearchType=se.Disciplines}this.documentsTabindex=e,this.updateColumnSetDetailsForDocuments()}handleReviewPlanTagsSearchTypeChange(e=!0){e&&(this.pbsSelected=!this.pbsSelected),this.pbsSelected?(this.reviewPlanSearchType=se.PBS,this.REVIEW_PLAN_GRID_TITLE=this.selectedPBS?this.selectedPBS.displayName:this.ALL,this.updateColumnSetDetails(this.rootClassification)):(this.reviewPlanSearchType=se.Classifications,this.REVIEW_PLAN_GRID_TITLE=this.selectedClassification?this.selectedClassification.name:this.rootClassification.name,this.updateColumnSetDetails(this.selectedClassification))}search(){if(this.showGrid||(this.showGrid=!0,this.leftPowerBarControls.filter(e=>"toggleGrid"===e.uid)[0].checked=!0,this.leftPowerBarControls.filter(e=>"toggleFilters"===e.uid)[0].isDisabled=!1),this.selectedReviewPlanIssueStateDetails.length>0){const e=this.reviewPlanGridRequestCreationService.createGridNestedModel(this.reviewPlanSearchType,this.reviewPlanItemColumnSetUID,this.documentColumnSetUID,this.reviewPlanOBID,this.documentReviewPlanColumnSetDetails,this.selectedPBS,this.selectedReviewPlanIssueStateDetails,this.selectedDisciplines,this.allDisciplines,this.selectedDocumentTypes,this.selectedWBSTypes,this.selectedFEEDTypes,this.selectedClassification,this.checkedFilterDocumentsOnHold,this.filters,this.allReviewPlanIssueStateDetails,Ye,He);this.queryService.getFullURLWithEndPoint(e.odataRequest).length>1e3?this.exceptionService.handleException(new w.a(this.REVIEW_PLAN_TOO_MANY_CRITERIA)):(this.nestedModel=e,this.searched=!0)}else this.modalService.alert(this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_NO_IP_STATUS_SELECTED","No issue purpose statuses selected"))}selectDetails(e){const t=new $.a(e.obid,e.name,e.config);this.objectDetailsService.showObjectDetailsModal(this.componentFactoryResolver,this.injector,t)}onSelectPBS(e){e&&(this.selectedPBS=e.item,e.isInitialising||(this.reviewPlanSearchType=se.PBS,this.REVIEW_PLAN_GRID_TITLE=this.selectedPBS.displayName,this.updateColumnSetDetails(this.rootClassification)))}onSelectDisciplines(e){e&&(this.selectedDisciplines=e,this.updateColumnSetDetailsForDocuments())}onAllDisciplinesRetrieved(e){e&&(this.allDisciplines=e)}onSelectDocumentType(e){e&&(this.selectedDocumentTypes=e.item,e.isInitialising||this.updateColumnSetDetailsForDocuments())}onSelectWBS(e){e&&(this.selectedWBSTypes=e.item,e.isInitialising||this.updateColumnSetDetailsForDocuments())}onSelectFEED(e){e&&(this.selectedFEEDTypes=e.item,e.isInitialising||this.updateColumnSetDetailsForDocuments())}onSelectClassification(e){e&&(this.selectedClassification=e.item,e.isInitialising||(this.reviewPlanSearchType=se.Classifications,this.updateColumnSetDetails(e.item)))}onRootClassificationRetrieved(e){e&&(this.rootClassification=e)}getTopLevelWorkPacks(){this.reviewDataService.getWorkPackageTopLevelUID(this.wbsInterfaceUID).subscribe(e=>{e?(this.isWBSVisible=!0,this.wbsTopLevelUID=e):this.isWBSVisible=!1},e=>{this.exceptionService.handleException(e)}),this.reviewDataService.getWorkPackageTopLevelUID(this.feedInterfaceUID).subscribe(e=>{e?(this.isFEEDVisible=!0,this.feedTopLevelUID=e):this.isFEEDVisible=!1},e=>{this.exceptionService.handleException(e)})}initialiseIssueStates(){this.dataService.get("GetIssuePurposesBySequence()",this.configService.selectedCreateConfig,!0).pipe(Object(A.a)(e=>e.map(e=>new ae(e.OBID,e.Name,ie.NotInPlan,e.Description)))).subscribe(e=>{e.unshift(new ae("ALL",this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_ISSUE_PURPOSE_ALL","ALL"),ie.NotInPlan,this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_ISSUE_PURPOSE_ALL","All available issue purposes"))),this.reviewPlanProvider.allIssueStates.next(e)},e=>{this.exceptionService.handleException(new w.a(e,this.sdaTranslateService.get("MANAGE_REVIEW_PLAN_ISSUE_STATES_NOT FOUND","Failed to retrieve issue states"),"review-plan.component","initialiseIssueStates"))})}updateColumnSetDetailsForDocuments(){this.reviewPlanSearchType===se.DocumentTypes?this.handleReivewPlanGridTitleForDocumentTypes():this.reviewPlanSearchType===se.Disciplines?this.handleReivewPlanGridTitleForDisciplines():this.reviewPlanSearchType===se.WBS?this.handleReivewPlanGridTitleForWBS():this.reviewPlanSearchType===se.FEED&&this.handleReivewPlanGridTitleForFEED(),this.reviewDataService.getDocumentReviewPlanColumnSetDetailsByColumnSetUID(this.documentColumnSetUID).subscribe(e=>{this.documentReviewPlanColumnSetDetails=e,this.filterColumns=e.ColumnItems?e.ColumnItems.filter(e=>!0===e.columnItemDetails.IncludeOnMinForm):[],this.filters=[],this.updateParentColumns(),this.filterColumns.forEach(e=>{this.createColumnItemFilter(e)})},e=>{this.documentReviewPlanColumnSetDetails=void 0,this.exceptionService.handleException(e)})}updateParentColumns(){this.filterColumns.filter(e=>e.columnItemDetails.DependencyDetails&&e.columnItemDetails.DependencyDetails.IsDependentItem).forEach(e=>{this.filterColumns.forEach(t=>{t.columnItemDetails.DependencyDetails&&t.columnItemDetails.DependencyDetails.DependentItemUIDs&&t.columnItemDetails.DependencyDetails.DependentItemUIDs.includes(e.field)&&(e.columnItemDetails.DependencyDetails.ParentColumnName=t.field)})})}createColumnItemFilter(e){const t=new Q.a;t.field=e.columnItemDetails.PropertyDefUID,e.columnItemDetails.SPFEdgeDefValue&&(t.navigationOperator="any",t.navigation=this.listEditFilterQueryService.getRelDefWithDirection(e.columnItemDetails)),this.filters.push(t)}handleReivewPlanGridTitleForDocumentTypes(){const e=this.getDocumentType();e&&1===e.length?this.REVIEW_PLAN_GRID_TITLE=e[0].displayName:e.length>1?this.REVIEW_PLAN_GRID_TITLE=this.MULTIPLE+" "+this.REVIEW_PLAN_DOCUMENT_TYPES_TAB_TITLE+"("+this.selectedDocumentTypes.length+") "+this.SELECTED:0===e.length&&(this.REVIEW_PLAN_GRID_TITLE=this.REVIEW_PLAN_DOCUMENT_TYPES_TAB_TITLE)}handleReivewPlanGridTitleForDisciplines(){1===this.selectedDisciplines.length?this.REVIEW_PLAN_GRID_TITLE=this.selectedDisciplines[0].displayName:this.selectedDisciplines.length>1?this.REVIEW_PLAN_GRID_TITLE=this.MULTIPLE+" "+this.REVIEW_PLAN_DISCIPLINES_TAB_TITLE+"("+this.selectedDisciplines.length+") "+this.SELECTED:0===this.selectedDisciplines.length&&(this.REVIEW_PLAN_GRID_TITLE=this.REVIEW_PLAN_DISCIPLINES_TAB_TITLE)}handleReivewPlanGridTitleForWBS(){this.selectedWBSTypes&&1===this.selectedWBSTypes.length?this.REVIEW_PLAN_GRID_TITLE=this.selectedWBSTypes[0].displayName:this.selectedWBSTypes.length>1?this.REVIEW_PLAN_GRID_TITLE=this.MULTIPLE+" "+this.REVIEW_PLAN_WBS_TAB_TITLE+"("+this.selectedWBSTypes.length+") "+this.SELECTED:0===this.selectedWBSTypes.length&&(this.REVIEW_PLAN_GRID_TITLE=this.REVIEW_PLAN_WBS_TAB_TITLE)}handleReivewPlanGridTitleForFEED(){this.selectedFEEDTypes&&1===this.selectedFEEDTypes.length?this.REVIEW_PLAN_GRID_TITLE=this.selectedFEEDTypes[0].displayName:this.selectedFEEDTypes.length>1?this.REVIEW_PLAN_GRID_TITLE=this.MULTIPLE+" "+this.REVIEW_PLAN_FEED_TAB_TITLE+"("+this.selectedFEEDTypes.length+") "+this.SELECTED:0===this.selectedFEEDTypes.length&&(this.REVIEW_PLAN_GRID_TITLE=this.REVIEW_PLAN_FEED_TAB_TITLE)}getDocumentType(){return this.selectedDocumentTypes}updateColumnSetDetails(e){this.reviewPlanSearchType===se.Classifications&&(this.REVIEW_PLAN_GRID_TITLE=e.name),e&&this.reviewDataService.getDocumentReviewPlanColumnSetDetails(e.object.OBID).subscribe(e=>{this.documentReviewPlanColumnSetDetails=e,this.filterColumns=e.ColumnItems.filter(e=>!0===e.columnItemDetails.IncludeOnMinForm),this.updateParentColumns(),this.filters=[],this.filterColumns.forEach(e=>{this.createColumnItemFilter(e)})},e=>{this.documentReviewPlanColumnSetDetails=void 0,this.exceptionService.handleException(e)})}addDocumentsOnHoldCheckBox(){const e=new X.a(W.a.Vertical);this.leftPowerBarControls.push(e);const t=new G.a(e=>this.filterDocumentsOnHold(e),this.sdaTranslateService.get("HOLD_DOCUMENTS_CHECK_BOX","DOCUMENTS ON HOLD"),!1,void 0,"checkbox--docs-on-hold");t.tooltip=this.sdaTranslateService.get("HOLD_DOCUMENTS_CHECK_BOX_TOOLTIP","Documents On Hold"),t.uid="DocumentsOnHold",e.controls.push(t)}addReviewPlanIssueStateCheckBoxes(){const e=new X.a(W.a.Vertical);e.uid="issueStateSection",this.overflowPowerBarControls.push(e),this.reviewDataService.getReviewPlanIssueStates().subscribe(t=>{t.sort((e,t)=>Z.a.sortByString(e.displayAs,t.displayAs)).forEach(t=>{let i="",s="";t.reviewPlanIssueState===ie.Accepted?(i="checkbox--accepted",s="check"):t.reviewPlanIssueState===ie.Ignored?(i="checkbox--declined",s="remove"):t.reviewPlanIssueState===ie.Suggested?(i="checkbox--changed",s="help"):t.reviewPlanIssueState===ie.InformationOnly?(i="checkbox--info",s="info-checkbox"):t.reviewPlanIssueState===ie.SuggestedForInformation?(i="checkbox--suggested-info",s="blockage"):i="checkbox--not-in-plan";const a=new G.a(e=>this.changeFilter(e,t),t.displayAs,!0,void 0,i,!1,s);a.tooltip=t.description,a.uid=t.enumUID,e.controls.push(a),this.selectedReviewPlanIssueStateDetails.push(t),this.allReviewPlanIssueStateDetails.push(t)}),e.controls.push(new q.a(W.a.Horizontal));const i=new V.a(()=>this.search(),this.sdaTranslateService.get("REVIEW_PLAN_UPDATE_BUTTON","UPDATE"),"",void 0,x.a.Default,!1,"button-update");e.controls.push(i),this.addPowerBarSearchButton(),e.controls.push(this.powerBarSearchBtn)})}addPowerBarSearchButton(){this.powerBarSearchBtn=new V.a(()=>this.search(),this.sdaTranslateService.get("REVIEW_PLAN_SEARCH_CRITERIA_SEARCH_BUTTON","SEARCH"),"",void 0,x.a.Primary),this.powerBarSearchBtn.hidden=!0}toggleReviewplanSubscription(e){const t=e.checked;e.isDisabled=!0,this.reviewDataService.toggleReviewPlanSubscription(this.reviewPlanOBID,t).subscribe(()=>{this.notificationService.info(!0===t?this.REVIEW_PLAN_SUBSCRIBED:this.REVIEW_PLAN_UNSUBSCRIBED),e.isDisabled=!1},t=>{e.isDisabled=!1,this.exceptionService.handleException(t)})}addReviewPlanSubscriptionStatus(){this.reviewDataService.checkReviewPlanSubscriptionExists(this.reviewPlanOBID).subscribe(e=>{this.leftPowerBarControls.filter(e=>"toggleSubscriptionButton"===e.uid)[0].checked=e.value})}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(T.a),c.Sb(ge),c.Sb(L.a),c.Sb(P.a),c.Sb(k.a),c.Sb(ce),c.Sb(D.a),c.Sb(J.a),c.Sb(U.a),c.Sb(ee.a),c.Sb(Ne),c.Sb(c.j),c.Sb(c.s),c.Sb(F.a),c.Sb(K.a),c.Sb(te.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["sda-review-plan-view"]],inputs:{classificationUID:"classificationUID",disciplineClassDefUID:"disciplineClassDefUID",areaClassDefUID:"areaClassDefUID",areaToUnitRelDefUID:"areaToUnitRelDefUID",documentColumnSetUID:"documentColumnSetUID",reviewPlanItemColumnSetUID:"reviewPlanItemColumnSetUID",documentTopLevelUID:"documentTopLevelUID",reviewPlanOBID:"reviewPlanOBID"},decls:26,vars:22,consts:[[3,"leftControls","centreControls","rightControls","overflowControls","overflowLabel","disableOverflow","overflowIcon",4,"ngIf"],[1,"review-plan"],[1,"review-plan__sidebar","animated","fadeIn",3,"hidden"],[1,"review-plan__sidebar__tab-view",3,"onChange"],[3,"header"],[1,"review-plan__sidebar__tab-view","review-plan__sidebar__tab-view--child",3,"onChange"],[3,"disciplineClassDefUID","onSelectDisciplines","onAllDisciplinesRetrieved"],[3,"documentTopLevelUID","onSelectDocumentType"],[3,"header",4,"ngIf"],[3,"areaClassDefUID","areaToUnitRelDefUID","onSelectPBS"],[3,"classificationUID","onSelectClassification","onRootClassificationRetrieved"],[1,"review-plan__content","animated","fadeIn"],[1,"review-plan__header"],[1,"review-plan__title",3,"title"],[1,"review-results"],["class","review-results__sidebar animated fadeIn",3,"hidden",4,"ngIf"],[1,"review-results__content",3,"hidden"],[3,"odataRequest","showActions","enableDetailsSelection","objectModalView","enableSelection","nestedGridModel","freezeFirstColumn","customColumnComponent","autoResize","clickableURLs","onItemSelected",4,"ngIf"],[3,"leftControls","centreControls","rightControls","overflowControls","overflowLabel","disableOverflow","overflowIcon"],[3,"wbsTopLevelUID","wbsInterfaceUID","onSelectWBS"],[1,"review-results__sidebar","animated","fadeIn",3,"hidden"],[3,"filters","filterColumns","onSearch"],[3,"odataRequest","showActions","enableDetailsSelection","objectModalView","enableSelection","nestedGridModel","freezeFirstColumn","customColumnComponent","autoResize","clickableURLs","onItemSelected"]],template:function(e,t){1&e&&(c.Sc(0,wt,1,7,"sda-power-bar-view",0),c.Yb(1,"div",1),c.Yb(2,"div",2),c.Yb(3,"p-tabView",3),c.hc("onChange",(function(){return t.handleReviewPlanSearchTypeChange()})),c.Yb(4,"p-tabPanel",4),c.Yb(5,"p-tabView",5),c.hc("onChange",(function(e){return t.handleReviewPlanDocumentsSearchTypeChange(e.index)})),c.Yb(6,"p-tabPanel",4),c.Yb(7,"sda-drill-down-disciplines",6),c.hc("onSelectDisciplines",(function(e){return t.onSelectDisciplines(e)}))("onAllDisciplinesRetrieved",(function(e){return t.onAllDisciplinesRetrieved(e)})),c.Xb(),c.Xb(),c.Yb(8,"p-tabPanel",4),c.Yb(9,"sda-drill-down-document-types",7),c.hc("onSelectDocumentType",(function(e){return t.onSelectDocumentType(e)})),c.Xb(),c.Xb(),c.Sc(10,Dt,2,3,"p-tabPanel",8),c.Sc(11,Ct,2,3,"p-tabPanel",8),c.Xb(),c.Xb(),c.Yb(12,"p-tabPanel",4),c.Yb(13,"p-tabView",5),c.hc("onChange",(function(e){return t.handleReviewPlanTagsSearchTypeChange(e)})),c.Yb(14,"p-tabPanel",4),c.Yb(15,"sda-drill-down-pbs",9),c.hc("onSelectPBS",(function(e){return t.onSelectPBS(e)})),c.Xb(),c.Xb(),c.Yb(16,"p-tabPanel",4),c.Yb(17,"sda-drill-down-classifications",10),c.hc("onSelectClassification",(function(e){return t.onSelectClassification(e)}))("onRootClassificationRetrieved",(function(e){return t.onRootClassificationRetrieved(e)})),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Xb(),c.Yb(18,"div",11),c.Yb(19,"div",12),c.Yb(20,"h1",13),c.Uc(21),c.Xb(),c.Xb(),c.Yb(22,"div",14),c.Sc(23,Pt,2,3,"div",15),c.Yb(24,"div",16),c.Sc(25,Tt,1,10,"sda-kendo-grid",17),c.Xb(),c.Xb(),c.Xb(),c.Xb()),2&e&&(c.sc("ngIf",(null==t.overflowPowerBarControls?null:t.overflowPowerBarControls.length)>0),c.Eb(2),c.Ib("review-plan__sidebar--full",t.showFilters&&!t.showGrid),c.sc("hidden",!t.showFilters),c.Eb(2),c.tc("header",t.REVIEW_PLAN_DOCUMENTS_TAB_TITLE),c.Eb(2),c.tc("header",t.REVIEW_PLAN_DISCIPLINES_TAB_TITLE),c.Eb(1),c.sc("disciplineClassDefUID",t.disciplineClassDefUID),c.Eb(1),c.tc("header",t.REVIEW_PLAN_DOCUMENT_TYPES_TAB_TITLE),c.Eb(1),c.sc("documentTopLevelUID",t.documentTopLevelUID),c.Eb(1),c.sc("ngIf",t.isWBSVisible),c.Eb(1),c.sc("ngIf",t.isFEEDVisible),c.Eb(1),c.tc("header",t.REVIEW_PLAN_TAGS_TAB_TITLE),c.Eb(2),c.tc("header",t.REVIEW_PLAN_PBS_TAB_TITLE),c.Eb(1),c.sc("areaClassDefUID",t.areaClassDefUID)("areaToUnitRelDefUID",t.areaToUnitRelDefUID),c.Eb(1),c.tc("header",t.REVIEW_PLAN_CLASSIFICATIONS_TAB_TITLE),c.Eb(1),c.sc("classificationUID",t.classificationUID),c.Eb(3),c.tc("title",t.REVIEW_PLAN_GRID_TITLE_TOOLTIP),c.Eb(1),c.Wc(" ",t.REVIEW_PLAN_GRID_TITLE," "),c.Eb(2),c.sc("ngIf",t.filters),c.Eb(1),c.sc("hidden",!t.showGrid),c.Eb(1),c.sc("ngIf",t.nestedModel&&t.nestedModel.odataRequest))},directives:[s.t,r.b,r.a,et,nt,lt,pt,gt.a,bt,mt,Et.a],styles:["[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column;height:100%;background:#ebedf0}[_nghost-%COMP%]     .power-bar-toggle .ui-button{font-size:18px!important}[_nghost-%COMP%]     .uxt-tree-item__content{height:35px}[_nghost-%COMP%]     .uxt-tree-item__dropdown{margin-left:0!important}[_nghost-%COMP%]     .uxt-tree-item__child-list .uxt-tree-item__dropdown{margin-left:10px!important}[_nghost-%COMP%]     .uxt-tree-item__child-list .uxt-tree-item__child-list .uxt-tree-item__dropdown{margin-left:20px!important}[_nghost-%COMP%]     .uxt-tree-item__child-list .uxt-tree-item__child-list .uxt-tree-item__child-list .uxt-tree-item__dropdown{margin-left:30px!important}[_nghost-%COMP%]     .ui-chkbox{margin:0}[_nghost-%COMP%]     .ui-chkbox .ui-chkbox-box{display:flex;align-items:center;justify-content:center;width:18px!important;height:18px!important;margin-right:15px;border-color:#cad0d7}[_nghost-%COMP%]     .ui-chkbox .ui-chkbox-icon{top:-1px;margin:0;color:#697a8b}.review-plan[_ngcontent-%COMP%]{display:flex;flex:1;flex-wrap:nowrap;min-height:0}.review-plan__sidebar[_ngcontent-%COMP%]{flex:0 0 360px;background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);border-radius:2px;margin:6px 0 6px 6px;overflow-x:hidden;overflow-y:auto}.review-plan__sidebar--full[_ngcontent-%COMP%]{flex:1 1 100%}.review-plan__sidebar__tab-view[_ngcontent-%COMP%]{display:flex;flex-grow:1;flex-direction:column}.review-plan__sidebar__tab-view--child[_ngcontent-%COMP%]     .ui-tabview{margin:0;border:none}.review-plan__sidebar__tab-view--child[_ngcontent-%COMP%]     .ui-tabview-nav{border-bottom:1px solid #cad0d7!important;margin-bottom:1px}.review-plan__sidebar__tab-view--child[_ngcontent-%COMP%]     .ui-tabview-nav li{height:32px!important;border-width:2px!important}.review-plan__sidebar__tab-view--child[_ngcontent-%COMP%]     .ui-tabview-nav a{font-size:12px}.review-plan__sidebar__tab-view--child[_ngcontent-%COMP%]     .ui-tabview-panel{border:none}.review-plan__sidebar__tab-view[_ngcontent-%COMP%]     .ui-tabview{flex-grow:1;height:100%;border:none}.review-plan__sidebar__tab-view[_ngcontent-%COMP%]     .ui-tabview-nav{flex-shrink:0}.review-plan__sidebar__tab-view[_ngcontent-%COMP%]     .ui-tabview-nav .ui-state-default{height:38px}.review-plan__sidebar__tab-view[_ngcontent-%COMP%]     .ui-tabview-panels{flex-grow:1;border:none}.review-plan__sidebar[_ngcontent-%COMP%]     sda-loading-indicator{display:flex;justify-content:center;padding:5% 0}.review-plan__content[_ngcontent-%COMP%]{display:flex;flex-grow:1;flex-direction:column;margin:6px;background:#fff;box-shadow:0 1px 3px rgba(0,0,0,.12),0 1px 2px rgba(0,0,0,.24);border-radius:2px}.review-plan__header[_ngcontent-%COMP%]{display:flex;flex-shrink:0;height:43px;padding:5px 10px;border-bottom:1px solid #cad0d7;align-items:center}.review-plan__title[_ngcontent-%COMP%]{font-size:18px;line-height:1;font-weight:500;cursor:help;border-bottom:1px dotted #73caff}.review-results[_ngcontent-%COMP%]{display:flex;flex-grow:1;height:100%;min-height:0}.review-results__sidebar[_ngcontent-%COMP%]{display:flex;flex-shrink:0;width:300px;border-right:1px solid #cad0d7}.review-results__content[_ngcontent-%COMP%]{display:flex;flex-grow:1;width:100px}"]}),e})();const Lt=[{path:"",component:(()=>{class e{constructor(e,t,i,s,a,n,o){this.applicationSettingsService=e,this.sdaTranslateService=t,this.route=i,this.dataService=s,this.configService=a,this.exceptionService=n,this.helpService=o,this.REVIEW_PLAN_DOCUMENT_COLUMN_SET_MISSING=this.sdaTranslateService.get("REVIEW_PLAN_DOCUMENT_COLUMN_SET_MISSING","Document Column Set UID parameter (parameter 4) not supplied"),this.helpService.setHandlers(O.d),this.route.params.subscribe(e=>{this.reviewPlanOBID=JSON.parse(e[R.u])[0];let t=e[R.a];t||(t=this.sdaTranslateService.get("MANAGE_REVIEW_CLIENT_API_TITLE","Manage Review Plan")),this.dataService.get("Objects('"+this.reviewPlanOBID+"')/SCLBReviewPlanMDR_12?$select=Name",this.configService.selectedCreateConfig).subscribe(e=>{this.applicationSettingsService.setPageTitle(t+" - "+e.Name)},()=>{this.applicationSettingsService.setPageTitle(t)}),this.classificationUID=e[R.k],this.documentColumnSetUID=e[R.m],this.reviewPlanItemColumnSetUID=e[R.n],this.documentTopLevelUID=e[R.o]?e[R.o]:"",this.disciplineClassDefUID="SDADiscipline",this.areaClassDefUID="SDAArea",this.areaToUnitRelDefUID="+SDAFacilityBreakDownStructure",this.documentColumnSetUID||this.exceptionService.handleException(new w.a(this.REVIEW_PLAN_DOCUMENT_COLUMN_SET_MISSING,void 0,"manage-review-plan.api.component","constructor"))})}}return e.\u0275fac=function(t){return new(t||e)(c.Sb(E.a),c.Sb(T.a),c.Sb(m.a),c.Sb(P.a),c.Sb(L.a),c.Sb(D.a),c.Sb(C.a))},e.\u0275cmp=c.Mb({type:e,selectors:[["sda-manage-review-plan-api-view"]],decls:1,vars:8,consts:[[3,"classificationUID","reviewPlanOBID","disciplineClassDefUID","areaClassDefUID","areaToUnitRelDefUID","documentColumnSetUID","reviewPlanItemColumnSetUID","documentTopLevelUID"]],template:function(e,t){1&e&&c.Tb(0,"sda-review-plan-view",0),2&e&&c.sc("classificationUID",t.classificationUID)("reviewPlanOBID",t.reviewPlanOBID)("disciplineClassDefUID",t.disciplineClassDefUID)("areaClassDefUID",t.areaClassDefUID)("areaToUnitRelDefUID",t.areaToUnitRelDefUID)("documentColumnSetUID",t.documentColumnSetUID)("reviewPlanItemColumnSetUID",t.reviewPlanItemColumnSetUID)("documentTopLevelUID",t.documentTopLevelUID)},directives:[Rt],styles:["[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column;overflow:hidden}[_nghost-%COMP%]     .power-bar-checkbox{padding:0 6px;border-left:6px solid #697a8b}[_nghost-%COMP%]     .power-bar-status--accepted{background:#7fc663}[_nghost-%COMP%]     .power-bar-status--changed{background:#f7d673}[_nghost-%COMP%]     .power-bar-status--declined{background:#ef4f63}[_nghost-%COMP%]     .power-bar-status--not-in-plan{background:#97a4b0}[_nghost-%COMP%]     .power-bar-status--docs-on-hold{background:#f9fafb}[_nghost-%COMP%]     .checkbox--accepted{border-color:#559d39;background:#a1d68d}[_nghost-%COMP%]     .checkbox--accepted.power-bar-status{background:#92cf7a}[_nghost-%COMP%]     .checkbox--accepted.power-bar-checkbox__icon{color:#559d39}[_nghost-%COMP%]     .checkbox--changed{border-color:#f2bf25;background:#fae6a9}[_nghost-%COMP%]     .checkbox--changed.power-bar-status{background:#f8df91}[_nghost-%COMP%]     .checkbox--changed.power-bar-checkbox__icon{color:#f2bf25}[_nghost-%COMP%]     .checkbox--declined{border-color:#d7142c;background:#f48491}[_nghost-%COMP%]     .checkbox--declined.power-bar-status{background:#f16c7d}[_nghost-%COMP%]     .checkbox--declined.power-bar-checkbox__icon{color:#d7142c}[_nghost-%COMP%]     .checkbox--not-in-plan{border-color:#697a8b;background:#b8c1c9}[_nghost-%COMP%]     .checkbox--not-in-plan.power-bar-status{background:#a9b4be}[_nghost-%COMP%]     .checkbox--info{border-color:#02adff;background:#8fdaff}[_nghost-%COMP%]     .checkbox--info.power-bar-status{background:#75d2ff}[_nghost-%COMP%]     .checkbox--info.power-bar-checkbox__icon{color:#02adff}[_nghost-%COMP%]     .checkbox--suggested-info{border-color:#f67923;background:#fab585}[_nghost-%COMP%]     .checkbox--suggested-info.power-bar-status{background:#f7883b}[_nghost-%COMP%]     .checkbox--suggested-info.power-bar-checkbox__icon{color:#f67923}[_nghost-%COMP%]     .checkbox--docs-on-hold{border-color:#ebedf0;background:#f9fafb}[_nghost-%COMP%]     .checkbox--docs-on-hold.power-bar-status{background:#ebedf0}[_nghost-%COMP%]     .power-bar__overlay .power-bar-notice__text{display:none}[_nghost-%COMP%]     .power-bar__overlay .power-bar-section--vertical{flex:1 0 auto}[_nghost-%COMP%]     .power-bar__overlay .power-bar-section--vertical .power-bar-button .button{justify-content:center;padding:8px}[_nghost-%COMP%]     .power-bar__overlay .power-bar-section--vertical .power-bar-checkbox__icon{flex-shrink:0;width:20px;height:20px}"]}),e})()}];let Ot=(()=>{class e{}return e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({factory:function(t){return new(t||e)},imports:[[m.k.forChild(Lt)],m.k]}),e})(),At=(()=>{class e{}return e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({factory:function(t){return new(t||e)},providers:[Ne,ce,ge],imports:[[s.c,S.a,d.a,n.b,o.a,f.a,I.a,b.a,Ot,r.c,p.a,u.a,a.j,l,g.a,h.a,v.a,_.a]]}),e})()},IsVC:function(e,t,i){"use strict";i.d(t,"d",(function(){return s})),i.d(t,"h",(function(){return a})),i.d(t,"r",(function(){return n})),i.d(t,"p",(function(){return o})),i.d(t,"o",(function(){return r})),i.d(t,"b",(function(){return c})),i.d(t,"a",(function(){return l})),i.d(t,"c",(function(){return d})),i.d(t,"e",(function(){return h})),i.d(t,"i",(function(){return u})),i.d(t,"k",(function(){return p})),i.d(t,"f",(function(){return g})),i.d(t,"n",(function(){return S})),i.d(t,"m",(function(){return I})),i.d(t,"j",(function(){return b})),i.d(t,"l",(function(){return f})),i.d(t,"g",(function(){return v})),i.d(t,"q",(function(){return _})),i.d(t,"s",(function(){return m})),i.d(t,"t",(function(){return E}));const s="920602",a="927830",n="899595",o="909862",r="909867",c="928384",l="938799",d="909866",h="905384",u="955371",p="955364",g="995219",S="1075193",I="909957",b="1016009",f="1082261",v="955370",_="1193820",m="1193821",E="1194089"},K9v4:function(e,t,i){"use strict";i.d(t,"a",(function(){return R}));var s=i("ofXK"),a=i("3Pt+"),n=i("tyNb"),o=i("F+hv"),r=i("txXS"),c=i("Tfoa"),l=i("uD/B"),d=i("BLqR"),h=i("+T9e"),u=i("fXoL"),p=i("TLn4"),g=i("ue3H"),S=i("qx4N"),I=i("+qkj"),b=i("RY2J"),f=i("HDO1"),v=i("4dwF"),_=i("dLJk"),m=i("F8dI"),E=i("rrPm"),w=i("8OmR"),D=i("ltBE"),C=i("XwBL");let P=(()=>{class e{transform(e){return C.a.replaceUnderscore(e)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=u.Rb({name:"sdaFormatEntityType",type:e,pure:!0}),e})();var T=i("7Ihv");let R=(()=>{class e{}return e.\u0275mod=u.Qb({type:e}),e.\u0275inj=u.Pb({factory:function(t){return new(t||e)},imports:[[s.c,a.j,r.a,n.k,o.a,l.a,c.a]]}),e})();u.Nc(d.a,[s.q,s.r,s.s,s.t,s.A,s.w,s.x,s.y,s.z,s.u,s.v,a.F,a.u,a.E,a.c,a.v,a.y,a.a,a.B,a.C,a.x,a.p,a.q,a.A,a.l,a.k,a.w,a.b,a.d,a.s,a.t,a.r,n.l,n.h,n.j,n.i,n.n,p.a,g.a,S.a,I.a,h.a,d.a],[s.b,s.G,s.p,s.k,s.E,s.g,s.C,s.F,s.d,s.f,s.i,s.j,s.l,b.a,f.a,v.a,_.a,m.a,E.a,w.a,D.a,P,T.a])},"T6+9":function(e,t,i){"use strict";i.d(t,"a",(function(){return d}));var s=i("ofXK"),a=i("0IaG"),n=i("NFeN"),o=i("8yBR"),r=i("l3mi"),c=i("F+hv"),l=i("fXoL");let d=(()=>{class e{}return e.\u0275mod=l.Qb({type:e}),e.\u0275inj=l.Pb({factory:function(t){return new(t||e)},imports:[[s.c,o.e,n.b,c.a,a.e,r.a]]}),e})()},c7JH:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("POgZ"),a=i("9LP0"),n=i("ysi+");class o{constructor(e,t){this.errorType=e,this.cellUID=t}}var r=i("fXoL");let c=(()=>{class e{constructor(e,t){this.listEditColumnService=e,this.pictureMaskService=t}validateData(e){const t=[],i=this.listEditColumnService.columns.filter(e=>e.isMandatory),s=this.listEditColumnService.columns.filter(e=>e.pictureMask);return(i.length||s.length)&&(t.push(...this.validate(e.updatedObjects,i,s)),t.push(...this.validate(e.createdObjects,i,s))),t}validate(e,t,i){const s=[];return e.forEach(e=>{t.forEach(t=>{e[t.field]&&""!==e[t.field]||s.push(new o(n.a.MANDATORY,e.rowGUID+"_"+t.field))}),i.forEach(t=>{this.pictureMaskService.verifyAgainstMask(e[t.field],t.pictureMask,t.title)||s.push(new o(n.a.PICTUREMASK,e.rowGUID+"_"+t.field))})}),s}}return e.\u0275fac=function(t){return new(t||e)(r.dc(s.a),r.dc(a.a))},e.\u0275prov=r.Ob({token:e,factory:e.\u0275fac}),e})()},cNHO:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("ofXK"),a=i("3Pt+"),n=i("NFeN"),o=i("0GHy"),r=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=r.Qb({type:e}),e.\u0275inj=r.Pb({factory:function(t){return new(t||e)},imports:[[s.c,a.j,o.a,n.b]]}),e})()},d74k:function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));class s{constructor(e,t){this.field=e,this.dir=t}}},ltBE:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var s=i("fXoL");let a=(()=>{class e{transform(e,t,i){return e?i?e.filter(e=>e[t].toLowerCase().includes(i.toLowerCase())):e:[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=s.Rb({name:"sdaFilter",type:e,pure:!0}),e})()},mZMc:function(e,t,i){"use strict";i.d(t,"a",(function(){return c}));var s=i("ofXK"),a=i("3Pt+"),n=i("NFeN"),o=i("0GHy"),r=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=r.Qb({type:e}),e.\u0275inj=r.Pb({factory:function(t){return new(t||e)},imports:[[s.c,a.j,a.z,o.a,n.b]]}),e})()},"s+i/":function(e,t,i){"use strict";i.d(t,"a",(function(){return E}));var s=i("ofXK"),a=i("3Pt+"),n=i("0IaG"),o=i("NFeN"),r=i("WG3B"),c=i("T6+9"),l=i("cNHO"),d=i("mZMc"),h=i("POgZ"),u=i("MKMw"),p=i("F+hv"),g=i("GDd0"),S=i("N/AQ"),I=i("9X43"),b=i("J0As"),f=i("AxFE"),v=i("7c1w"),_=i("c7JH"),m=i("fXoL");let E=(()=>{class e{}return e.\u0275mod=m.Qb({type:e}),e.\u0275inj=m.Pb({factory:function(t){return new(t||e)},providers:[f.a,h.a,_.a,v.a,u.a,S.a],imports:[[s.c,p.a,a.j,a.z,r.o,g.a,I.a,d.a,l.a,b.a,c.a,o.b,n.e]]}),e})()},"ysi+":function(e,t,i){"use strict";i.d(t,"a",(function(){return s}));var s=function(e){return e.MANDATORY="Mandatory",e.PICTUREMASK="Picture Mask",e}({})}}]);