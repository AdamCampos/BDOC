(window.webpackJsonp=window.webpackJsonp||[]).push([[80],{"+qkj":function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var a=i("Ejbi"),s=i("fXoL"),n=i("7EHt"),o=i("HXFx");let l=(()=>{class e{constructor(e){this.sdaTranslateService=e,this.FORM_RELATED_ITEMS=this.sdaTranslateService.get("FORM_RELATED_ITEMS","Related Items")}}return e.\u0275fac=function(t){return new(t||e)(s.Sb(a.a))},e.\u0275cmp=s.Mb({type:e,selectors:[["sda-related-items-section"]],inputs:{tabs:"tabs"},decls:6,vars:5,consts:[["displayMode","flat"],[1,"related-items-panel",3,"expanded"],["collapsedHeight","38px","expandedHeight","38px"],[3,"tabs","openInfoMapInNewTab","showItemCount"]],template:function(e,t){1&e&&(s.Yb(0,"mat-accordion",0),s.Yb(1,"mat-expansion-panel",1),s.Yb(2,"mat-expansion-panel-header",2),s.Yb(3,"mat-panel-title"),s.Uc(4),s.Xb(),s.Xb(),s.Tb(5,"sda-tabbed-grid-view",3),s.Xb(),s.Xb()),2&e&&(s.Eb(1),s.sc("expanded",!0),s.Eb(3),s.Wc(" ",t.FORM_RELATED_ITEMS," "),s.Eb(1),s.sc("tabs",t.tabs)("openInfoMapInNewTab",!0)("showItemCount",!0))},directives:[n.a,n.c,n.g,n.h,o.a],styles:[".related-items-panel[_ngcontent-%COMP%]{border-radius:0!important;box-shadow:none!important}.related-items-panel.mat-expanded[_ngcontent-%COMP%]{overflow:visible;-webkit-animation:delay-overflow 1s;animation:delay-overflow 1s}.related-items-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#ebedf0!important}.related-items-panel[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0}.related-items-panel[_ngcontent-%COMP%]     sda-tabbed-grid-view{flex:none;height:auto}.related-items-panel[_ngcontent-%COMP%]     sda-tabbed-grid-view mat-tab-group{height:40vh;min-height:250px;border-top:1px solid #cad0d7}"]}),e})()},DGtQ:function(e,t,i){"use strict";i.r(t),i.d(t,"CreateClassObjAndLoadRoutingModule",(function(){return Ce}));var a=i("ofXK"),s=i("7EHt"),n=i("gHQW"),o=i("Tfoa"),l=i("T6+9"),c=i("oiMZ"),r=i("inpI"),d=i("F+hv"),p=i("0Ndu"),h=i("tyNb"),f=i("quZr"),S=i("8yBR"),b=i("cp0P"),u=i("lJxs"),g=i("IzEk"),m=i("YwUS"),T=i("YlGB"),C=i("KsTO"),E=i("PqRi"),I=i("qSfU"),_=i("11V9"),v=i("UVhF"),A=i("Wvjz"),O=i("zHoD"),U=i("O1LN"),w=i("MYcD");class F extends U.a{constructor(e){super(),this.name="fileUpload",this.type=w.a.FileUpload,this.singleUpload=!1,this.mode=O.a.InLineMoveToShare,this.parentWizard=e}get shareFolderGUID(){let e="";return this.files&&this.files.length>0&&(e=this.files[0].moveToShareFolderName),e}}var x=i("TGZG"),M=i("Z9D8"),D=i("LUpO"),y=i("C4gn"),L=i("xc+7"),P=i("z+VC");let N=(()=>{class e{}return e.CSV=".csv",e.PDF="application/pdf",e.TEXT_FILE="text/plain",e.IMAGE_FILE="image/*",e})();var R=i("osZK"),V=i("y+N1"),z=i("c+03"),X=i("jNCI"),j=i("Qi+w"),Y=i("wpY2"),H=i("HLw3"),G=i("iwlc"),k=i("F8JD"),K=i("J7mc"),B=i("z0XX"),W=i("Ejbi"),q=i("NEWU"),J=i("41Lq"),Z=i("aHBF"),Q=i("yzqN"),$=i("biIz"),ee=i("fXoL"),te=i("TLn4"),ie=i("pEK1"),ae=i("ouxa"),se=i("YgEk"),ne=i("/Pv7"),oe=i("fWeB"),le=i("6s0W"),ce=i("ME6W"),re=i("+qkj");function de(e,t){1&e&&ee.Tb(0,"sda-loading-indicator",2),2&e&&ee.sc("centered",!0)}function pe(e,t){if(1&e){const e=ee.Zb();ee.Yb(0,"uxt-wizard-step",7),ee.Yb(1,"sda-classification-step-view",12),ee.hc("classificationSelected",(function(){return ee.Kc(e),ee.lc(2).onClassificationSelected()})),ee.Xb(),ee.Xb()}if(2&e){const e=ee.lc(2);ee.sc("stepId",e.classificationStep.name)("isMandatory",!0),ee.Eb(1),ee.sc("classificationStep",e.classificationStep)}}function he(e,t){if(1&e){const e=ee.Zb();ee.Yb(0,"uxt-wizard-step",7),ee.Yb(1,"mat-accordion",13),ee.Yb(2,"mat-expansion-panel",14),ee.Yb(3,"mat-expansion-panel-header",15),ee.Yb(4,"mat-panel-title"),ee.Uc(5),ee.Xb(),ee.Xb(),ee.Yb(6,"sda-config-tree",16),ee.hc("configFiterValuesChange",(function(t){return ee.Kc(e),ee.lc(2).onChangeConfigFilterValues(t)})),ee.Xb(),ee.Xb(),ee.Xb(),ee.Xb()}if(2&e){const e=ee.lc(2);ee.sc("stepId",e.configSelectionStep.name)("isMandatory",!0),ee.Eb(2),ee.sc("expanded",!0),ee.Eb(3),ee.Vc(e.SELECT_CONFIGURATION),ee.Eb(1),ee.sc("isEditable",!0)("field",e.fieldConfiguration)("allowMultipleConfigSelection",!1)("showConfigStatusFilters",!0)("nestedDataSourceInput",e.nestedDataSource)("configurationStatusInput",e.configurationStatus)}}function fe(e,t){if(1&e){const e=ee.Zb();ee.Yb(0,"uxt-wizard-step",7),ee.Yb(1,"sda-file-upload",17),ee.hc("filesUploaded",(function(t){return ee.Kc(e),ee.lc(2).fileUploadAndAttachStep.filesUploaded(t)}))("filesPendingForUpload",(function(t){return ee.Kc(e),ee.lc(2).fileUploadAndAttachStep.filesPendingForUpload(t)})),ee.Xb(),ee.Xb()}if(2&e){const e=ee.lc(2);ee.sc("stepId",e.fileUploadAndAttachStep.name)("isMandatory",!0),ee.Eb(1),ee.sc("title",e.SELECT_A_CSV_FILE_TO_ATTACH)("uploadMode",e.fileUploadAndAttachStep.mode)("fileAcceptTypes",e.fileUploadAndAttachStep.fileAcceptTypes)("singleUpload",e.fileUploadAndAttachStep.singleUpload)("maxNumberOfFiles",e.fileUploadAndAttachStep.maxNumberOfFiles)("inlineCSVFileValidationAvailable",!0)("csvFileLoaderClassification",e.classificationUID)}}function Se(e,t){if(1&e){const e=ee.Zb();ee.Yb(0,"uxt-wizard-step",7),ee.Yb(1,"sda-file-upload",18),ee.hc("filesUploaded",(function(t){return ee.Kc(e),ee.lc(2).fileUploadStep.filesUploaded(t)}))("filesPendingForUpload",(function(t){return ee.Kc(e),ee.lc(2).fileUploadStep.filesPendingForUpload(t)})),ee.Xb(),ee.Xb()}if(2&e){const e=ee.lc(2);ee.sc("stepId",e.fileUploadStep.name)("isMandatory",!0),ee.Eb(1),ee.sc("title",e.SELECT_SUPPORTING_FILES_TO_ATTACH)("uploadMode",e.fileUploadStep.mode)("singleUpload",e.fileUploadStep.singleUpload)}}function be(e,t){if(1&e&&ee.Tb(0,"sda-related-items-section",19),2&e){const e=ee.lc(2);ee.sc("tabs",e.relatedItemTabs)}}function ue(e,t){if(1&e){const e=ee.Zb();ee.Yb(0,"div",3),ee.Yb(1,"uxt-wizard",4,5),ee.hc("finish",(function(){return ee.Kc(e),ee.lc().createObjectAndFinish()}))("apply",(function(){return ee.Kc(e),ee.lc().createObjectAndApply()}))("cancel",(function(){return ee.Kc(e),ee.lc().cancelWizard()}))("stepChange",(function(t){return ee.Kc(e),ee.lc().stepChange(t)})),ee.Sc(3,pe,2,3,"uxt-wizard-step",6),ee.Yb(4,"uxt-wizard-step",7),ee.Yb(5,"sda-form-step-view",8),ee.hc("onGridTabsChanged",(function(t){return ee.Kc(e),ee.lc().onGridTabsChanged(t)}))("clearObjectsToRelate",(function(t){return ee.Kc(e),ee.lc().clearObjectsToRelate(t)}))("formInitializedEvent",(function(t){return ee.Kc(e),ee.lc().loaderFormInitialized(t)})),ee.Xb(),ee.Xb(),ee.Yb(6,"uxt-wizard-step",9),ee.Tb(7,"sda-ens-preview",10),ee.Xb(),ee.Sc(8,he,7,10,"uxt-wizard-step",6),ee.Sc(9,fe,2,9,"uxt-wizard-step",6),ee.Sc(10,Se,2,5,"uxt-wizard-step",6),ee.Sc(11,be,1,1,"sda-related-items-section",11),ee.Xb(),ee.Xb()}if(2&e){const e=ee.lc();ee.Eb(1),ee.sc("finishText",e.FINISH_TEXT)("applyText",e.APPLY_TEXT)("cancelText",e.CANCEL_TEXT)("stepTranslation",e.STEP_TEXT)("ofTranslation",e.OF_TEXT)("isApplyVisible",e.applyAllowed)("isApplyEnabled",e.isNextEnabled)("isNextEnabled",e.isNextEnabled)("isFinishEnabled",e.isFinishEnabled)("step",e.stepName),ee.Eb(2),ee.sc("ngIf",e.classificationStep.showStep),ee.Eb(1),ee.sc("stepId",e.formStep.name)("isMandatory",!0),ee.Eb(1),ee.sc("selectedClassOBID",e.selectedClassOBID)("formStep",e.formStep)("relatedObjectRelDef",e.relatedObjectRelDef),ee.Eb(1),ee.sc("stepId",e.ensPreviewStep.name),ee.Eb(1),ee.sc("ensPreviewStep",e.ensPreviewStep)("ensForm",e.ensForm)("classifciationOBID",e.selectedClassOBID),ee.Eb(1),ee.sc("ngIf",e.configSelectionStep.showStep),ee.Eb(1),ee.sc("ngIf",e.fileUploadAndAttachStep.showStep),ee.Eb(1),ee.sc("ngIf",e.fileUploadStep.showStep),ee.Eb(1),ee.sc("ngIf",e.stepName===e.formStep.name&&e.relatedItemTabs.length>0)}}const ge=[{path:"",component:(()=>{class e extends A.a{constructor(e,t,i,a,s,n,o,l,c,r,d,p,h,f,S,b,u,g,m,T,C,E,I,_,v,A,O){super(a,o,S,u,s,c,r,n,p,h,f,l,d,b,g,m,T,C,I,_,v,O,A),this.helpService=e,this.sdvJobManagementService=t,this.configTreeService=i,this.route=a,this.formService=s,this.applicationSettingsService=n,this.router=o,this.notificationService=l,this.exceptionService=c,this.loadingOverlayService=r,this.modalService=d,this.formValidationService=p,this.batchRequestFactory=h,this.dataService=f,this.featureSetService=S,this.pinsMenuService=b,this.sdaTranslateService=u,this.elementRef=g,this.saveChangesDialogService=m,this.featureSetNavigationService=T,this.todoListService=C,this.moveToShareForSubmissionStage=E,this.fileUploaderService=I,this.referenceFileHandlingService=_,this.ensService=v,this.relatedItemService=A,this.methodService=O,this.SELECT_CONFIGURATION=this.sdaTranslateService.get("SELECT_TARGET_CONFIGURATION","Select Target System Configuration"),this.DEFAULT_CONFIGURATION_STATUS_FILTER=this.sdaTranslateService.get("DEFAULT_CONFIGURATION_STATUS_FILTER","Active"),this.INVALID_PARAM_MAX_NO_OF_FILES_ERROR=this.sdaTranslateService.get("INVALID_PARAM_MAX_NO_OF_FILES_ERROR","Parameter 'maximum number of control files' is not valid on the method, value must be 1 or above"),this.INVALID_PARAM_ATTACH_FILE_ERROR=this.sdaTranslateService.get("INVALID_PARAM_ATTACH_FILE_ERROR","Parameter 'file attachment configuration' is required for this method"),this.SELECT_A_CSV_FILE_TO_ATTACH=this.sdaTranslateService.get("SELECT_A_CSV_FILE_TO_ATTACH","Select a csv file to attach"),this.SELECT_SUPPORTING_FILES_TO_ATTACH=this.sdaTranslateService.get("SELECT_SUPPORTING_FILES_TO_ATTACH","Select supporting files to be uploaded to share"),this.fileUploadStep=new F(this),this.configSelectionStep=new x.a,this.fieldConfiguration={DisplayName:"",DisplayType:"",UID:""},this.isFinishEnabled=!1,this.configurationStatus=[],this.selectedConfig="",this.classificationUID="",this.classificationClass="",this.configsTree=[],this.onHandleSaveChangesDialogResult=()=>this.fileUploadStep.files.length>0?this.fileUploaderService.cleanUpSubmissionDirectoryFromServer(this.fileUploadStep.files).toPromise():Promise.resolve(!0),this.helpService.setHandlers(Q.f)}ngOnInit(){this.showApply=!1,this.initializeComponent(),this.route.params.subscribe(e=>{this.classificationUID=e[q.l],this.classificationClass=e[q.m];const t=e[q.d],i=t?+t:void 0;i&&i>0?this.fileUploadAndAttachStep.maxNumberOfFiles=i:this.exceptionService.handleException(new M.a(this.INVALID_PARAM_MAX_NO_OF_FILES_ERROR,void 0,"create-class-obj-and-load-feature.component","ngOnInit"));const a=e[q.e];this.fileUploadStep.showStep=!!a&&"true"===a.toLowerCase();const s=e[q.f];this.configSelectionStep.showStep=!!s&&"true"===s.toLowerCase(),this.configSelectionStep.name="TargetSystemConfig"}),this.configTreeValuesChangedSubscription=this.configTreeService.configTreeValuesChanged$.subscribe(e=>{this.selectedConfig=e,this.updateStepValidity()}),this.fileUploadAndAttachStep.showStep||this.exceptionService.handleException(new M.a(this.INVALID_PARAM_ATTACH_FILE_ERROR,void 0,"create-class-obj-and-load-feature.component","ngOnInit")),this.fileUploadAndAttachStep.fileAcceptTypes.push(N.CSV),this.fileUploadAndAttachStep.fileUploadRequired=!0,this.fileUploadStep.fileUploadRequired=!0,this.configSelectionStep.type=w.a.Form,this.configSelectionStep.parentWizard=this,this.configSelectionStep.isValid=!1}ngOnDestroy(){this.configTreeValuesChangedSubscription&&this.configTreeValuesChangedSubscription.unsubscribe()}onCreateObject(){if(this.fileUploadStep.showStep&&this.fileUploadStep.shareFolderGUID){const e=new I.a("SDASubFolderGUID",this.fileUploadStep.shareFolderGUID);this.crudOptionalItemsToInclude.properties.push(e)}if(this.configSelectionStep.showStep){const e=new I.a("SDVTargetConfiguration",this.selectedConfig);this.crudOptionalItemsToInclude.properties.push(e)}}updateStepValidity(){switch(this.isFinishEnabled=!1,this.stepName){case this.fileUploadStep.name:{let e=!1;this.fileUploadStep.files.forEach(t=>{t.errorChunkCount()>0&&(e=!0)}),this.isNextEnabled=this.fileUploadStep.isValid&&!e,this.isFinishEnabled=this.isNextEnabled;break}case this.configSelectionStep.name:void 0===this.nestedDataSource&&this.getTargetConfigurations(void 0),this.isNextEnabled=Boolean(this.selectedConfig.trim());break;case this.fileUploadAndAttachStep.name:this.isNextEnabled=this.isStepValid(),this.fileUploadStep.showStep||(this.isFinishEnabled=this.isNextEnabled);break;default:this.isNextEnabled=this.isStepValid()}}clearUploadedFiles(){}onChangeConfigValues(e){this.selectedConfig=e,this.updateStepValidity()}onChangeConfigFilterValues(e){this.nestedDataSource.data=Object(C.b)(this.configsTree,e)}onValidateForm(){return this.formValidationService.isFormValid(this.formStep.form,this.formStep.additionalRelDisplayItems)}loaderFormInitialized(e){e&&(this.assignWizardStepsWithOrgSteps(this.fileUploadAndAttachStep.name),this.removeWizardStep(this.ensPreviewStep.name,!1),"ISDALoaderClass"!==this.classificationClass&&"ISCLBSubmittalClass"!==this.classificationClass||this.sdvJobManagementService.GetSDVStageSystemJobDetails(this.classificationUID,this.classificationClass).subscribe(e=>{this.setupLoaderSuppressENSOption(this.formStep.form,e)}))}getTargetConfigurations(e){this.loadingOverlayService.showLoadingOverlay();let t=[];Object(b.a)(this.sdvJobManagementService.getSDVJobTargetSystemConfigurations(this.classificationUID,e).pipe(Object(u.a)(e=>Object(C.a)(e,[""]))),this.sdvJobManagementService.getSDVTargetSystemConfigurationStatuses(this.classificationUID)).pipe(Object(g.a)(1)).subscribe(([e,i])=>{t=[],e.forEach(e=>{t.push(e)}),this.nestedDataSource=new S.f,this.nestedDataSource.data=t,this.configsTree=t,i.forEach(e=>{this.configurationStatus.push(e)}),this.onChangeConfigFilterValues([this.DEFAULT_CONFIGURATION_STATUS_FILTER]),this.loadingOverlayService.hideLoadingOverlay()},e=>{this.exceptionService.handleException(e)})}setupLoaderSuppressENSOption(e,t){if(t){let i=!1;for(const a of e.FormSections){for(const e of a.FormDisplayLines){for(const a of e.FormDisplayItems)if("DI_SDALoaderSuppressENS"===a.UID&&"SDVLoaderSuppressENS"===a.PropertyUID||"DI_SCLBSubmittalSuppressENS"===a.UID&&"SCLBSubmittalSuppressENS"===a.PropertyUID){a.ReadOnly=!t.AllowUserToChangeENSBehavior,a.Value=t.SuppressENS.toString(),i=!0;break}if(i)break}if(i)break}}}}return e.\u0275fac=function(t){return new(t||e)(ee.Sb(G.a),ee.Sb(Z.a),ee.Sb(T.a),ee.Sb(h.a),ee.Sb(v.a),ee.Sb(m.a),ee.Sb(h.g),ee.Sb(J.a),ee.Sb(D.a),ee.Sb(z.a),ee.Sb(X.a),ee.Sb(_.a),ee.Sb(H.a),ee.Sb(K.a),ee.Sb(L.a),ee.Sb(j.a),ee.Sb(W.a),ee.Sb(ee.l),ee.Sb(Y.a),ee.Sb(y.a),ee.Sb($.a),ee.Sb(V.a),ee.Sb(R.a),ee.Sb(P.a),ee.Sb(E.a),ee.Sb(B.a),ee.Sb(k.a))},e.\u0275cmp=ee.Mb({type:e,selectors:[["sda-create-class-obj-and-load-view"]],features:[ee.Db([Z.a]),ee.Bb],decls:2,vars:2,consts:[["class","wc-background",3,"centered",4,"ngIf"],["class","form-wrapper",4,"ngIf"],[1,"wc-background",3,"centered"],[1,"form-wrapper"],[1,"sd-wizard-basics-wizard",3,"finishText","applyText","cancelText","stepTranslation","ofTranslation","isApplyVisible","isApplyEnabled","isNextEnabled","isFinishEnabled","step","finish","apply","cancel","stepChange"],["uxtWizard",""],[3,"stepId","isMandatory",4,"ngIf"],[3,"stepId","isMandatory"],[3,"selectedClassOBID","formStep","relatedObjectRelDef","onGridTabsChanged","clearObjectsToRelate","formInitializedEvent"],[3,"stepId"],[3,"ensPreviewStep","ensForm","classifciationOBID"],["class","uxt-wizard-bottom-content",3,"tabs",4,"ngIf"],[3,"classificationStep","classificationSelected"],["displayMode","flat",1,"config-selection"],[1,"config-selection__panel",3,"expanded"],["collapsedHeight","38px","expandedHeight","38px",1,"config-selection__header"],[3,"isEditable","field","allowMultipleConfigSelection","showConfigStatusFilters","nestedDataSourceInput","configurationStatusInput","configFiterValuesChange"],[3,"title","uploadMode","fileAcceptTypes","singleUpload","maxNumberOfFiles","inlineCSVFileValidationAvailable","csvFileLoaderClassification","filesUploaded","filesPendingForUpload"],[3,"title","uploadMode","singleUpload","filesUploaded","filesPendingForUpload"],[1,"uxt-wizard-bottom-content",3,"tabs"]],template:function(e,t){1&e&&(ee.Sc(0,de,1,1,"sda-loading-indicator",0),ee.Sc(1,ue,12,24,"div",1)),2&e&&(ee.sc("ngIf",!t.wizardInitialized),ee.Eb(1),ee.sc("ngIf",!t.createdObject&&t.wizardInitialized))},directives:[a.t,te.a,ie.a,ae.a,se.a,ne.a,oe.a,s.a,s.c,s.g,s.h,le.a,ce.a,re.a],styles:["[_nghost-%COMP%]{overflow:hidden}[_nghost-%COMP%], [_nghost-%COMP%]   .form-wrapper[_ngcontent-%COMP%]{display:flex;width:100%;height:100%}[_nghost-%COMP%]   .form-wrapper[_ngcontent-%COMP%]{flex-direction:column;align-items:center;background-color:#cad0d7}[_nghost-%COMP%]   sda-loading-indicator[_ngcontent-%COMP%]{flex:1}[_nghost-%COMP%]     sda-tabbed-grid{position:relative;padding:7px}","[_nghost-%COMP%]   .config-selection[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto;width:100%;height:100%}[_nghost-%COMP%]   .config-selection__panel[_ngcontent-%COMP%]{border-radius:0!important;box-shadow:none}[_nghost-%COMP%]   .config-selection__header[_ngcontent-%COMP%]{background-color:#ebedf0!important}[_nghost-%COMP%]   .config-selection[_ngcontent-%COMP%]   sda-config-tree[_ngcontent-%COMP%]{width:100%}[_nghost-%COMP%]   .config-selection[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:5px 0!important}"]}),e})(),canDeactivate:[f.a]}];let me=(()=>{class e{}return e.\u0275mod=ee.Qb({type:e}),e.\u0275inj=ee.Pb({factory:function(t){return new(t||e)},imports:[[h.k.forChild(ge)],h.k]}),e})();var Te=i("ZxfA");let Ce=(()=>{class e{}return e.\u0275mod=ee.Qb({type:e}),e.\u0275inj=ee.Pb({factory:function(t){return new(t||e)},imports:[[me,a.c,d.a,p.a,l.a,c.a,s.b,n.a,r.a,o.a,Te.a]]}),e})()}}]);