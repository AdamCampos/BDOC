(window.webpackJsonp=window.webpackJsonp||[]).push([[8],{"/Hch":function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("tk/3"),i=n("lJxs"),r=n("ZW2Q"),s=n("DG5G"),o=n("4vCl"),l=n("A3La"),c=n("ONOH"),u=n("fXoL");let d=(()=>{class e{constructor(e,t,n){this.odataService=e,this.configService=t,this.filterQueryService=n}getDependentItems(e,t,n,s=!0,l){const c=this.filterQueryService.getOBIDURL(e.relObjectObids,e.pathDefinition,n,t,l);return this.odataService.get(c,this.configService.selectedCreateConfig).pipe(Object(i.a)(t=>{const n=[],i=new o.a(new a.e);if(t&&t.value&&t.value.length>0&&""!==e.pathDefinition){const a=t.value[0][e.pathDefinition];i.count=t.value[0][e.pathDefinition+"@odata.count"],a&&a.length>0&&a.forEach(e=>{n.push(new r.a(e.OBID,e.Name,e.Name,!1,"",!1))})}return i.value=n,i}))}getDependentObjects(e,t,n=[],a="*"){const i=this.filterQueryService.getOBIDURL(e,t,n,a);return this.odataService.get(i,this.configService.selectedCreateConfig)}}return e.\u0275fac=function(t){return new(t||e)(u.dc(l.a),u.dc(c.a),u.dc(s.a))},e.\u0275prov=u.Ob({token:e,factory:e.\u0275fac}),e})()},"0GHy":function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var a=n("3Ucw"),i=n("ofXK"),r=n("3Pt+"),s=n("fXoL");let o=(()=>{class e{}return e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({factory:function(t){return new(t||e)},imports:[[i.c,r.j]]}),e})();var l=n("M+Z9"),c=n("fdCq"),u=n("6Qg8"),d=n("1SkA"),h=n("MX5F"),f=n("YsCO"),m=n("YvlZ");let p=(()=>{class e{}return e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({factory:function(t){return new(t||e)},imports:[[i.c,r.j,f.a,h.a,m.a]]}),e})(),g=(()=>{class e{}return e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({factory:function(t){return new(t||e)},imports:[[i.c,f.a,h.a,m.a]]}),e})(),b=(()=>{class e{}return e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({factory:function(t){return new(t||e)},imports:[[i.c,r.j,m.a,h.a]]}),e})(),v=(()=>{class e{}return e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({factory:function(t){return new(t||e)},imports:[[i.c,r.j]]}),e})(),S=(()=>{class e{}return e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({factory:function(t){return new(t||e)},imports:[[i.c,r.j]]}),e})();var y=n("SHTa"),I=n("uinc"),D=n("LUJG");let C=(()=>{class e{}return e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({factory:function(t){return new(t||e)},providers:[a.a],imports:[d.a,c.a,l.a,D.a,u.a,I.a,y.a,g,p,v,b,S,o]}),e})()},"0aHC":function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n("fXoL"),i=n("kx0E"),r=n("Ejbi"),s=n("41Lq"),o=n("ofXK"),l=n("3Pt+"),c=n("4dwF");function u(e,t){if(1&e&&(a.Yb(0,"p",2),a.Uc(1),a.mc(2,"sdaConvertToInteger"),a.Xb()),2&e){const e=a.lc();a.Eb(1),a.Wc(" ",a.nc(2,1,e.value),"\n")}}function d(e,t){if(1&e){const e=a.Zb();a.Yb(0,"input",3),a.hc("ngModelChange",(function(t){return a.Kc(e),a.lc().onValueChanged(t)}))("keypress",(function(t){return a.Kc(e),a.lc().keyPress(t)}))("paste",(function(t){return a.Kc(e),a.lc().onPaste(t)})),a.mc(1,"sdaConvertToInteger"),a.Xb()}if(2&e){const e=a.lc();a.sc("ngModel",a.nc(1,4,e.value))("size",e.fieldSize&&e.fieldSize>0?e.fieldSize:35)("pattern",e.validationPattern)("disabled",e.readOnly)}}let h=(()=>{class e{constructor(e,t,n,i){this.dataFormatService=e,this.elementRef=t,this.notificationService=n,this.sdaTranslateService=i,this.valueChanged=new a.o,this.FORM_INVALID_PASTED_TEXT=this.sdaTranslateService.get("FORM_INVALID_PASTED_TEXT","The pasted text contained invalid characters"),this.FORM_INVALID_PASTED_TEXT_LENGTH=this.sdaTranslateService.get("FORM_INVALID_PASTED_TEXT_LENGTH","The pasted text exceeded the character limit");const r=kendo.culture().numberFormat[","];this.validationPattern=`^-?([0-9]|[0-9][${r}]+|[${r}]+[0-9]|[${r}]+[0-9][${r}]+)+$`}ngAfterViewInit(){this.setMaxLength()}onValueChanged(e){const t=this.verifyValueExceedsSafeSize(e)||this.intOnlyPatternValidation(e);this.value=e,this.valueChanged.emit({value:t?e:this.dataFormatService.convertToServerInteger(e),isInvalid:t})}keyPress(e){const t=new RegExp(`[0-9-\\${kendo.culture().numberFormat[","]}]`),n=String.fromCharCode(e.charCode);t.test(n)&&!this.verifyValueExceedsSafeSize(this.value+n)||e.preventDefault()}onPaste(e){const t=e.clipboardData.getData("text");this.intOnlyPatternValidation(t)?(this.notificationService.warning(this.FORM_INVALID_PASTED_TEXT),e.preventDefault()):this.verifyValueExceedsSafeSize(t)&&(this.notificationService.warning(this.FORM_INVALID_PASTED_TEXT_LENGTH),e.preventDefault())}intOnlyPatternValidation(e){let t=!1;return e&&e.length&&(t=!new RegExp(this.validationPattern,"g").test(e)),t}setMaxLength(){const e=this.elementRef.nativeElement.querySelector(".int-input");e&&this.fieldLengthForInput&&this.fieldLengthForInput>0&&(e.maxLength=this.fieldLengthForInput)}verifyValueExceedsSafeSize(e){return!!e&&e.replace(/[,\.-]/g,"").length>10}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(i.a),a.Sb(a.l),a.Sb(s.a),a.Sb(r.a))},e.\u0275cmp=a.Mb({type:e,selectors:[["sda-int-type"]],inputs:{value:"value",isEditable:"isEditable",fieldLengthForInput:"fieldLengthForInput",fieldSize:"fieldSize",readOnly:"readOnly"},outputs:{valueChanged:"valueChanged"},decls:2,vars:2,consts:[["class","int-non-editable",4,"ngIf"],["type","text","class","int-input",3,"ngModel","size","pattern","disabled","ngModelChange","keypress","paste",4,"ngIf"],[1,"int-non-editable"],["type","text",1,"int-input",3,"ngModel","size","pattern","disabled","ngModelChange","keypress","paste"]],template:function(e,t){1&e&&(a.Sc(0,u,3,3,"p",0),a.Sc(1,d,2,6,"input",1)),2&e&&(a.sc("ngIf",!t.isEditable),a.Eb(1),a.sc("ngIf",t.isEditable))},directives:[o.t,l.c,l.p,l.s,l.w],pipes:[c.a],styles:[".int-non-editable[_ngcontent-%COMP%]{align-items:center}.int-input[_ngcontent-%COMP%]{height:34px;padding:0 5px;line-height:1.1;border-color:#cfd6dd}.int-input[_ngcontent-%COMP%]:disabled{background-color:#e6e6e6;color:grey;opacity:.7;cursor:not-allowed}"]}),e})()},"1D41":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));class a{writeValue(e){}registerOnChange(e){this.onChange=e}registerOnTouched(e){}setDisabledState(e){}newSelected(e){}}},"1SkA":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("8YAH"),i=n("fXoL");let r=(()=>{class e{}return e.\u0275mod=i.Qb({type:e}),e.\u0275inj=i.Pb({factory:function(t){return new(t||e)},imports:[[a.a]]}),e})()},"3Ucw":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("JrsU"),i=n("fXoL");let r=(()=>{class e{constructor(){this.cachedDataList=[]}getCachedData(e){let t;const n=this.cachedDataList.filter(t=>t.key===e);return n&&n.length>0&&(t=n[0].value),t}cacheData(e,t){const n=this.cachedDataList.filter(t=>t.key===e)[0];n?n.value=t:this.cachedDataList.push(new a.a(e,t))}clear(){this.cachedDataList=[]}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Ob({token:e,factory:e.\u0275fac}),e})()},"3y5A":function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));class a{constructor(){this.title=""}}},"4dwF":function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("kx0E"),i=n("fXoL");let r=(()=>{class e{constructor(e){this.dataFormatService=e}transform(e){return this.dataFormatService.convertToLocalInteger(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(a.a))},e.\u0275pipe=i.Rb({name:"sdaConvertToInteger",type:e,pure:!0}),e})()},"6Qg8":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("ofXK"),i=n("3Pt+"),r=n("F+hv"),s=n("fXoL");let o=(()=>{class e{}return e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({factory:function(t){return new(t||e)},imports:[[a.c,i.j,r.a]]}),e})()},"7c1w":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("LRne"),i=n("DgwV"),r=n("DG5G"),s=n("Ejbi"),o=n("41Lq"),l=n("fXoL");let c=(()=>{class e{constructor(e,t,n,a){this.filterQueryService=e,this.metadataService=t,this.notificationService=n,this.sdaTranslateService=a}getObjectsAndExpandRelsUsingColumnSet(e,t,n,i){const r=i.map(e=>e.columnItemDetails),s=this.filterQueryService.createGridModel({ColumnItems:r,ColumnSetUID:""}),o=this.getExpandRelPart(i);let l="";if(this.isObjectsEndpointRequest(e))l=this.filterQueryService.getFullURLWithEndPoint(e,s);else{const t=this.metadataService.getEntitySetByName(e.entityType);if(!t)return Object(a.a)([]);{let n="";n=t.isInterface?`$filter=contains(Interfaces, '${t.typeUID}')`:`$filter=Class eq '${t.typeUID}'`,l=this.filterQueryService.getFullURL("",e,s),l.includes("$filter=")?l="Objects"+l.replace("$filter=",n+" and "):(l=l.replace("?","&"),l="Objects?"+n+l)}}return l+=(l.indexOf("?")<0?"?":"")+o,this.filterQueryService.callService(l,t,e,n)}mapColumnsToCurrentColumnSet(e,t){if(!this.isObjectsEndpointRequest(e)){const n=this.metadataService.getEntitySetByName(e.entityType);n?this.mapQueryFiltersWithColumns(e,n.properties,t):this.notificationService.error(this.sdaTranslateService.getFormatted("ENTITY_NOT_FOUND_IN_METADATA","'{0}' entity not found in metadata",[e.entityType]))}}getExpandRelPart(e){let t="";return e.forEach(e=>{if(e.columnItemDetails.NavigationPath){const n=this.getRelDefWithDirection(e.columnItemDetails);t?t+=","+n:t="&$expand="+n}}),t}getRelDefWithDirection(e){let t;return t=e.NavigationPath.startsWith("EDG_")?e.NavigationPath:e.NavigationPath.substring(1)+(e.NavigationPath.startsWith("+")?"_12":"_21"),t}mapQueryFiltersWithColumns(e,t,n){e.filters.forEach(e=>{this.replaceFilterFields(e,t,n)}),e.orderBy&&e.orderBy.field&&(e.orderBy.field=this.getFieldNameForCurrentColumnSet(e.orderBy.field,t,n))}replaceFilterFields(e,t,n){e.filters&&e.filters.length&&e.filters.forEach(e=>{this.replaceFilterFields(e,t,n)}),e.field=this.getFieldNameForCurrentColumnSet(e.field,t,n)}getFieldNameForCurrentColumnSet(e,t,n){let a=e;const i=t[e];if(e&&i){const t=i.propertyDefUID,r=i.navigationPath,s=n.filter(e=>{let n=e.columnItemDetails.PropertyDefUID===t;return n=r?n&&e.columnItemDetails.NavigationPath===r:n&&(!e.columnItemDetails.NavigationPath||""===e.columnItemDetails.NavigationPath),n});s.length?a=s[0].field:this.notificationService.warning(this.sdaTranslateService.getFormatted("FILTERED_COLUMN_NOT_FOUND","Filtered column '{0}' not found in the list edit columnset",[e]))}return a}isObjectsEndpointRequest(e){return!e.entityType||"Objects"===e.entityType}}return e.\u0275fac=function(t){return new(t||e)(l.dc(r.a),l.dc(i.a),l.dc(o.a),l.dc(s.a))},e.\u0275prov=l.Ob({token:e,factory:e.\u0275fac}),e})()},"8OmR":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("fXoL");let i=(()=>{class e{transform(e){let t=e;if(e){const n=/(^|[^\/])(www\.[\S]+(\b|$))/gim,a=/(([a-zA-Z0-9\-\_\.])+@[a-zA-Z\_]+?(\.[a-zA-Z]{2,6})+)/gim;t=e.replace(/(\b(https?|ftp):\/\/[-A-Z0-9+&@#\/%?=~_|!:,.;]*[-A-Z0-9+&@#\/%=~_|])/gim,'<a href="$1" target="_blank">$1</a>'),t=t.replace(n,'$1<a href="http://$2" target="_blank">$2</a>'),t=t.replace(a,'<a href="mailto:$1">$1</a>')}return t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=a.Rb({name:"sdaConvertURLsToHREF",type:e,pure:!0}),e})()},"8YAH":function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("ofXK"),i=n("3Pt+"),r=n("txXS"),s=n("fXoL");let o=(()=>{class e{}return e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({factory:function(t){return new(t||e)},imports:[[a.c,i.j,r.a]]}),e})()},F8dI:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("kx0E"),i=n("fXoL");let r=(()=>{class e{constructor(e){this.dataFormatService=e}transform(e){return this.dataFormatService.convertToLocalDateTimeFormat(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(a.a))},e.\u0275pipe=i.Rb({name:"sdaConvertToLocalDateTime",type:e,pure:!0}),e})()},F9x1:function(e,t,n){"use strict";n.d(t,"a",(function(){return b}));var a=n("fXoL"),i=n("3Pt+"),r=n("lcS2"),s=n("DJR3"),o=n("Ejbi"),l=n("Q14e"),c=n("ofXK"),u=n("fKPV"),d=n("N8M/"),h=n("eO1q"),f=n("dLJk"),m=n("RY2J");function p(e,t){if(1&e&&(a.Yb(0,"div",2),a.Uc(1),a.mc(2,"sdaConvertToLocalDate"),a.Xb()),2&e){const e=a.lc();a.Eb(1),a.Wc(" ",a.nc(2,1,e.dataItem[e.columnSet.field]),"\n")}}function g(e,t){if(1&e){const e=a.Zb();a.Yb(0,"div",3),a.Yb(1,"sda-edit-grid-cell-button",4),a.hc("click",(function(){return a.Kc(e),a.Hc(4).toggle()})),a.mc(2,"sdaConvertToLocalDate"),a.Xb(),a.Yb(3,"sda-overlay",null,5),a.Yb(5,"div",6),a.Yb(6,"p-calendar",7),a.hc("ngModelChange",(function(t){return a.Kc(e),a.lc().valueChanged(t)})),a.mc(7,"sdaConvertToDate"),a.Xb(),a.Xb(),a.Xb(),a.Xb()}if(2&e){const e=a.lc();a.Eb(1),a.sc("buttonName",a.nc(2,12,e.dataItem[e.columnSet.field])),a.Eb(5),a.Ib("prime-calendar--not-empty",e.dataItem[e.columnSet.field]),a.sc("ngModel",a.nc(7,14,e.dataItem[e.columnSet.field]))("locale",e.locale)("dateFormat",e.dateFormat)("monthNavigator",!0)("yearNavigator",!0)("inline",!0)("readonlyInput",!0)("showIcon",!0)("showButtonBar",!0)}}let b=(()=>{class e extends l.a{constructor(e,t,n){super(),this.dateFormatService=e,this.calendarTranslationService=t,this.sdaTranslateService=n,this.CLEAR_ENTRY=this.sdaTranslateService.get("CLEAR_ENTRY","Clear entry"),this.show=!1,this.isLoaded=!1}ngOnInit(){this.locale=this.calendarTranslationService.calendarTranslations,this.dateFormat=this.calendarTranslationService.dateFormat;const e=this.dataItem[this.columnSet.field];e?setTimeout(()=>{e.includes("/")||(this.dataItem[this.columnSet.field]=this.dateFormatService.convertToSPFDateFormat(e,!0)),this.isLoaded=!0}):this.isLoaded=!0}valueChanged(e){super.onValueChanged(this.dateFormatService.convertToSPFDateFormat(e?e.toISOString():""))}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(s.a),a.Sb(r.a),a.Sb(o.a))},e.\u0275cmp=a.Mb({type:e,selectors:[["sda-edit-grid-cell-ymd"]],features:[a.Db([{provide:i.n,useExisting:Object(a.W)(()=>e),multi:!0}]),a.Bb],decls:2,vars:2,consts:[["class","list-ymd list-ymd--non-editable",4,"ngIf"],["class","list-ymd list-ymd--editable",4,"ngIf"],[1,"list-ymd","list-ymd--non-editable"],[1,"list-ymd","list-ymd--editable"],[3,"buttonName","click"],["overlay",""],[1,"sda-overlay-content-hook"],["yearRange","1900:2100","appendTo","body",3,"ngModel","locale","dateFormat","monthNavigator","yearNavigator","inline","readonlyInput","showIcon","showButtonBar","ngModelChange"]],template:function(e,t){1&e&&(a.Sc(0,p,3,3,"div",0),a.Sc(1,g,8,16,"div",1)),2&e&&(a.sc("ngIf",t.isLoaded&&!t.isEditable),a.Eb(1),a.sc("ngIf",t.isLoaded&&t.isEditable))},directives:[c.t,u.a,d.a,h.a,i.p,i.s],pipes:[f.a,m.a],encapsulation:2}),e})()},Fym9:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("fXoL"),i=n("3Pt+"),r=n("Q14e"),s=n("suEs");let o=(()=>{class e extends r.a{constructor(){super()}valueChanged(e){super.onValueChanged(e.value)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Mb({type:e,selectors:[["sda-edit-grid-cell-double"]],features:[a.Db([{provide:i.n,useExisting:Object(a.W)(()=>e),multi:!0}]),a.Bb],decls:1,vars:4,consts:[[3,"value","isEditable","readOnly","fieldSize","valueChanged"]],template:function(e,t){1&e&&(a.Yb(0,"sda-double-type",0),a.hc("valueChanged",(function(e){return t.valueChanged(e)})),a.Xb()),2&e&&a.sc("value",t.dataItem[t.columnSet.field])("isEditable",t.isEditable)("readOnly",t.columnSet.readOnly)("fieldSize",t.columnSet.width)},directives:[s.a],styles:["[_nghost-%COMP%]{display:flex}[_nghost-%COMP%], sda-double-type[_ngcontent-%COMP%]{width:100%}sda-double-type[_ngcontent-%COMP%]     .double-input{width:100%;min-width:0!important;padding:6px 0;border:none}"]}),e})()},J0As:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n("ofXK"),i=n("3Pt+"),r=n("bSwM"),s=n("NFeN"),o=n("eO1q"),l=n("l3mi"),c=n("iVUw"),u=n("F+hv"),d=n("txXS"),h=n("LvQU"),f=n("/Hch"),m=n("fXoL");let p=(()=>{class e{}return e.\u0275mod=m.Qb({type:e}),e.\u0275inj=m.Pb({factory:function(t){return new(t||e)},providers:[f.a],imports:[[a.c,i.j,s.b,r.b,u.a,d.a,o.b,h.a,c.a,l.a]]}),e})()},LUJG:function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("ofXK"),i=n("3Pt+"),r=n("eO1q"),s=n("MX5F"),o=n("txXS"),l=n("YvlZ"),c=n("fXoL");let u=(()=>{class e{}return e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({factory:function(t){return new(t||e)},imports:[[a.c,i.j,r.b,s.a,o.a,l.a]]}),e})()},LvQU:function(e,t,n){"use strict";n.d(t,"a",(function(){return f}));var a=n("ofXK"),i=n("3Pt+"),r=n("l3mi"),s=n("sh/L"),o=n("LI1j"),l=n("giKh"),c=n("fXoL");let u=(()=>{class e{}return e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({factory:function(t){return new(t||e)},imports:[[a.c,i.j,o.a,l.a,s.a,r.a]]}),e})();var d=n("Vpc6");let h=(()=>{class e{}return e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({factory:function(t){return new(t||e)},imports:[[a.c,r.a]]}),e})(),f=(()=>{class e{}return e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({factory:function(t){return new(t||e)},imports:[[a.c,i.j,l.a,d.a,s.a,u,h]]}),e})()},"M+Z9":function(e,t,n){"use strict";n.d(t,"a",(function(){return u}));var a=n("ofXK"),i=n("3Pt+"),r=n("eO1q"),s=n("MX5F"),o=n("txXS"),l=n("YvlZ"),c=n("fXoL");let u=(()=>{class e{}return e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({factory:function(t){return new(t||e)},imports:[[a.c,i.j,r.b,s.a,o.a,l.a]]}),e})()},"N/AQ":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("lJxs"),i=n("C8de"),r=n("tce7"),s=n("U7l/"),o=n("b/tf"),l=n("fXoL");let c=(()=>{class e{constructor(e,t){this.columnSetDataService=e,this.preferencesService=t,this.minWidth=110}resolveRelItemsToUserPreferenceDisplayValue(e,t,n){return t?Array.isArray(t)||(t=[t]):t=[],t.length>0&&(t.map(e=>{e.Config=e.Config?e.Config:s.b,e.queryContextConfig=n||e.Config}),e.forEach(e=>{if(e.columnItemDetails.NavigationPath){const n=this.getRelDefWithDirection(e.columnItemDetails);t.map(t=>{let a=t[n];if(a){let n;Array.isArray(a)||(a=[a]),Array.isArray(a)&&a.length>0&&(n=a.map(e=>this.preferencesService.getDisplayValueFromObject(e)).join("~")),t[e.field]=n}})}})),t}getRelDefWithDirection(e){let t;return t=e.NavigationPath.startsWith("EDG_")?e.NavigationPath:e.NavigationPath.substring(1)+(e.NavigationPath.startsWith("+")?"_12":"_21"),t}getColumns(e){return this.columnSetDataService.GetColumnSetByUID(e).pipe(Object(a.a)(e=>this.createColumnsFromColumnSet(e.value)))}getColumnsByInterface(e){return this.columnSetDataService.GetColumnSetByInterfaceDefUID(e).pipe(Object(a.a)(e=>this.createColumnsFromColumnSet(e.value)))}createColumn(e,t=!1){return{field:e.PropertyName,title:e.FriendlyName,controlType:this.getControlType(e,t),width:this.getValidColumnWidth(e.Size),minWidth:this.minWidth,sortable:!0,readOnly:this.isColumnReadOnly(e),disableForEdit:e.DisableForEdit,isMandatory:e.IsMandatory,isMultiSelect:t,columnItemDetails:e,pictureMask:e.PictureMask,defaultCreateValue:e.DefaultCreateValue}}createColumnsFromColumnSet(e){const t=[];return e.ColumnItems.forEach(e=>{t.push(this.createColumn(e))}),t}getControlType(e,t=!1){let n=i.a.STRING_TYPE;if(e.ScopedByInfo.IsEnum)n=i.a.ENUM_LIST_TYPE;else if(e.ScopedByInfo.IsUom)n=i.a.UOM_LIST_TYPE;else if(e.ScopedByInfo.IsURL)n=i.a.URL_TYPE;else{if(e.NavigationPath)return this.getRelsControlType(e,t);"Edm.Boolean"===e.ScopedByInfo.EDMType||"BooleanType"===e.ScopedByInfo.ScopedById?n=i.a.BOOLEAN_TYPE:"Edm.Double"===e.ScopedByInfo.EDMType||"DoubleType"===e.ScopedByInfo.ScopedById?n=i.a.DOUBLE_TYPE:"Edm.Date"===e.ScopedByInfo.EDMType||"YMDType"===e.ScopedByInfo.ScopedById?n=i.a.YMD_TYPE:"Edm.DateTimeOffset"===e.ScopedByInfo.EDMType||"DateTimeType"===e.ScopedByInfo.ScopedById?n=i.a.DATE_TIME_TYPE:"Edm.Int32"===e.ScopedByInfo.EDMType||"IntType"===e.ScopedByInfo.ScopedById?n=i.a.INT_TYPE:"Edm.String"!==e.ScopedByInfo.EDMType&&"StringType"!==e.ScopedByInfo.ScopedById||(n=i.a.STRING_TYPE)}return n}getValidColumnWidth(e){let t=1;return isNaN(e)||e<1||(t=8*e,t<this.minWidth&&(t=this.minWidth),t>999&&(t=999)),t}isColumnReadOnly(e){let t=e.IsReadOnly;return!t&&e.NavigationPath?t="name"!==e.PropertyDefUID.toLowerCase():e.PropertyDefUID&&"objdefuid"===e.PropertyDefUID.toLowerCase()&&(t=!0),t}getRelsControlType(e,t){let n="";return n=e.DisplayOverrideType&&e.DisplayOverrideType.toLocaleLowerCase().includes("find")?t?i.a.RELATIONSHIP_FIND_MULTISELECT:i.a.RELATIONSHIP_FIND:t?i.a.RELATIONSHIP_MULTI_QUERY:e.DisplayOverrideType&&e.DisplayOverrideType.toLocaleLowerCase().includes("namedesc")?i.a.RELATIONSHIP_NAME_DESC:i.a.REL_DEF,n}}return e.\u0275fac=function(t){return new(t||e)(l.dc(r.a),l.dc(o.a))},e.\u0275prov=l.Ob({token:e,factory:e.\u0275fac}),e})()},POgZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return m}));var a=n("3Pt+"),i=n("z6cu"),r=n("itXk"),s=n("LRne"),o=n("5+tZ"),l=n("lJxs"),c=n("tce7"),u=n("N/AQ"),d=n("J7mc"),h=n("Ejbi"),f=n("fXoL");let m=(()=>{class e{constructor(e,t,n,a){this.dataService=e,this.columnSetDataService=t,this.gridColumnService=n,this.sdaTranslateService=a,this.ILLEGAL_CHARACTER_IN_NAME="Column Set Name {0} contains one or more characters that is a security risk.",this.NO_COLUMN_SET=this.sdaTranslateService.get("NO_COLUMN_SET","No Column Set Provided")}getColumns(e){return e?this.checkIllegalChars(e)?Object(i.a)(new Error(this.sdaTranslateService.getFormattedByString(this.ILLEGAL_CHARACTER_IN_NAME,[e]))):(e=this.sanitiseColumnSetName(e),this.columnSetDataService.GetColumnSetByName(e).pipe(Object(o.a)(e=>(this.columnSetUID=e.value.ColumnSetUID,this.createColumnsFromColumnSet(e.value))))):Object(i.a)(new Error(this.NO_COLUMN_SET))}createColumnsFromColumnSet(e,t=!1){return Object(r.a)(this.getcolumnDetailsForRels(e),this.getcolumnDetailsForEnums(e,t)).pipe(Object(l.a)(([n,a])=>{const i=[];return e.ColumnItems.forEach(e=>{this.checkForValidNavigationPath(e,n);const a=!!t||this.isMultiSelectColumn(e,n);i.push(this.gridColumnService.createColumn(e,a))}),this.updateParentColumns(i),this.checkForDependentEnums(a,i),this.columns=i,i}))}createFormGroupDynamically(e,t){const n=e.isNew?void 0:e.dataItem,i={};return t.forEach(e=>{i[e.field]=new a.e(n?n[e.field]:"")}),new a.h(i)}isMultiSelectColumn(e,t){let n=!1;if(e.NavigationPath&&t&&t.length>0){const a=t.filter(t=>e.NavigationPath&&e.NavigationPath.includes(t.navigationPath))[0];a&&(n=this.otherEndCardinalityIsMultiSelect(a.relDefForEdges?a.relDefForEdges:e.NavigationPath,a))}return n}updateParentColumns(e){e.filter(e=>e.columnItemDetails.DependencyDetails&&e.columnItemDetails.DependencyDetails.IsDependentItem).forEach(t=>{e.forEach(e=>{e.columnItemDetails.DependencyDetails&&e.columnItemDetails.DependencyDetails.DependentItemUIDs&&e.columnItemDetails.DependencyDetails.DependentItemUIDs.includes(t.field)&&(t.columnItemDetails.DependencyDetails.ParentColumnName=e.field)})})}checkIllegalChars(e){return["*","&","<",">","%","?"].some(t=>e.includes(t))}sanitiseColumnSetName(e){let t=encodeURIComponent(e);return t.includes("'")&&(t=t.replace("'","''")),t}getEnumColumns(e){return e.ColumnItems.filter(e=>e.ScopedByInfo.IsEnum)}getcolumnDetailsForEnums(e,t=!1){let n;const a=this.getEnumColumns(e);if(a.length>0){const e=[];a.forEach(t=>{e.push({ColumnName:t.PropertyName,PropertyDefUID:t.PropertyDefUID,ExposingInterfaceDefUID:t.ExposingInterfaceDefUID})}),n=this.dataService.post("GetDependentEnumDetails",JSON.stringify({enumsInfos:e,isMatrix:t}))}else n=Object(s.a)([]);return n}getcolumnDetailsForRels(e){let t;const n=e.ColumnItems.filter(e=>e.NavigationPath);if(n.length>0){const e=[],a=[];n.forEach(t=>{t.NavigationPath.startsWith("+")||t.NavigationPath.startsWith("-")?t.NavigationPath.substr(1).startsWith("EDG_")?a.push(t.NavigationPath.substr(1)):e.push(t.NavigationPath.substr(1)):a.push(t.NavigationPath)}),t=a.length>0?this.getRelDefDetailsWithEdgeDefs(e,a):this.getCardinalityForRelItems(e)}else t=Object(s.a)([]);return t}checkForDependentEnums(e,t){e.forEach(n=>{const a=t.filter(e=>e.field===n.ColumnName)[0];let i;if(n.IsDependentItem||n.DependentItemUIDs.length){if(n.IsDependentItem){const t=e.filter(e=>e.DependentItemUIDs.includes(n.EnumListTypeUID))[0];t&&(i=t.ColumnName)}const t=[];n.DependentItemUIDs.length&&n.DependentItemUIDs.forEach(n=>{const a=e.filter(e=>e.EnumListTypeUID===n)[0];a&&t.push(a.ColumnName)}),a&&(a.columnItemDetails.DependencyDetails={IsDependentItem:n.IsDependentItem,ParentColumnName:i,DependentItemUIDs:n.DependentItemUIDs,DependentColumnNames:t})}})}getRelDefDetailsWithEdgeDefs(e,t){const n=t.map(e=>`UID eq '${e}'`).join(" or ");return this.dataService.get(`Objects?$filter=Class eq 'EdgeDef' and ( ${n} )&$select=UID,PathDefn`,void 0,!0).pipe(Object(o.a)(n=>n&&n.length>0?(n.forEach(t=>{if(t.PathDefn.includes(",")){const n=t.PathDefn.lastIndexOf(",");let a=t.PathDefn.substring(n+1,t.PathDefn.length);(a.startsWith("+")||a.startsWith("-"))&&(a=a.substring(1)),e.push(a)}else e.push(t.PathDefn.substr(1))}),this.getCardinalityForRelItems(e,n)):Object(i.a)(new Error("EdgeDefs not found, "+t.join(",")))))}getCardinalityForRelItems(e,t=[]){const n=e.map(e=>`UID eq '${e}'`).join(" or ");return this.dataService.get(`Objects?$filter=Class eq 'RelDef' and ( ${n} )&$select=Max1, Max2, UID`,void 0,!0).pipe(Object(l.a)(e=>this.getListEditRelDefDetails(e,t)))}getListEditRelDefDetails(e,t){const n=[];return e.forEach(e=>{let a=[];t&&t.length>0&&(a=t.filter(t=>t.PathDefn.includes(e.UID))),a.length>0?a.forEach(t=>{n.push({navigationPath:t.UID,relDefForEdges:t.PathDefn,max1:e.Max1,max2:e.Max2})}):n.push({navigationPath:e.UID,relDefForEdges:"",max1:e.Max1,max2:e.Max2})}),n}otherEndCardinalityIsMultiSelect(e,t){e.includes(",")&&(e=e.slice(e.indexOf(",")+1));const n=e.startsWith("+")?t.max2:t.max1;return"0"!==n&&"1"!==n}checkForValidNavigationPath(e,t){if(e.NavigationPath){const n=t.find(t=>e.NavigationPath.includes(t.navigationPath));e.NavigationPath.startsWith("+")||e.NavigationPath.startsWith("-")||e.NavigationPath.startsWith("EDG_")&&(e.SPFEdgeNavigationPath=n.relDefForEdges)}}}return e.\u0275fac=function(t){return new(t||e)(f.dc(d.a),f.dc(c.a),f.dc(u.a),f.dc(h.a))},e.\u0275prov=f.Ob({token:e,factory:e.\u0275fac}),e})()},Q14e:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("fXoL"),i=n("1D41");n("3y5A");let r=(()=>{class e extends i.a{constructor(){super(...arguments),this.isEditable=!0,this.dataChange=new a.o}onValueChanged(e){this.formControl&&(this.formControl.setValue(e),this.dataItem[this.columnSet.field]=e),this.onChange(e),this.dataChange.emit({dataItem:this.dataItem,columnSetField:this.columnSet.field})}}return e.\u0275fac=function(t){return s(t||e)},e.\u0275dir=a.Nb({type:e,inputs:{columnSet:"columnSet",dataItem:"dataItem",isEditable:"isEditable",formControl:"formControl"},outputs:{dataChange:"dataChange"},features:[a.Bb]}),e})();const s=a.ac(r)},RY2J:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var a=n("fXoL");let i=(()=>{class e{transform(e){let t;return e&&(t=new Date(e)),t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275pipe=a.Rb({name:"sdaConvertToDate",type:e,pure:!0}),e})()},SHTa:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("ofXK"),i=n("3Pt+"),r=n("jw+j"),s=n("MX5F"),o=n("YvlZ"),l=n("fXoL");let c=(()=>{class e{}return e.\u0275mod=l.Qb({type:e}),e.\u0275inj=l.Pb({factory:function(t){return new(t||e)},imports:[[a.c,i.j,s.a,o.a,r.a]]}),e})()},YvlZ:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("NFeN"),i=n("fXoL");let r=(()=>{class e{}return e.\u0275mod=i.Qb({type:e}),e.\u0275inj=i.Pb({factory:function(t){return new(t||e)},imports:[[a.b]]}),e})()},dLJk:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("kx0E"),i=n("fXoL");let r=(()=>{class e{constructor(e){this.dataFormatService=e}transform(e){return this.dataFormatService.convertToLocalDateFormat(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(a.a))},e.\u0275pipe=i.Rb({name:"sdaConvertToLocalDate",type:e,pure:!0}),e})()},fKPV:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("Ejbi"),i=n("fXoL"),r=n("NFeN");let s=(()=>{class e{constructor(e){this.sdaTranslateService=e,this.EDIT=this.sdaTranslateService.get("EDIT_UPPERCASE","EDIT")}ngOnInit(){this.checkName()}ngOnChanges(e){e.buttonName&&this.checkName()}checkName(){this.buttonName&&this.buttonName.length||(this.buttonName=this.EDIT)}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(a.a))},e.\u0275cmp=i.Mb({type:e,selectors:[["sda-edit-grid-cell-button"]],inputs:{buttonName:"buttonName"},features:[i.Cb],decls:4,vars:1,consts:[["type","text",1,"edit-button","sda-button","sda-button--icon"],["svgIcon","edit",1,"edit-button__icon"],[1,"edit-button__value"]],template:function(e,t){1&e&&(i.Yb(0,"button",0),i.Tb(1,"mat-icon",1),i.Yb(2,"span",2),i.Uc(3),i.Xb(),i.Xb()),2&e&&(i.Eb(3),i.Vc(t.buttonName))},directives:[r.a],styles:[".edit-button__value[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]{width:100%}.edit-button[_ngcontent-%COMP%]{display:flex;align-items:center;max-width:100%;height:37px;color:#333}.edit-button__icon[_ngcontent-%COMP%]{flex-shrink:0;width:18px;height:18px;margin-right:5px}"]}),e})()},fdCq:function(e,t,n){"use strict";n.d(t,"a",(function(){return r}));var a=n("jw+j"),i=n("fXoL");let r=(()=>{class e{}return e.\u0275mod=i.Qb({type:e}),e.\u0275inj=i.Pb({factory:function(t){return new(t||e)},imports:[[a.a]]}),e})()},gx5H:function(e,t,n){"use strict";n.d(t,"a",(function(){return h}));var a=n("fXoL"),i=n("3Pt+"),r=n("Q14e"),s=n("ofXK"),o=n("8OmR");function l(e,t){if(1&e){const e=a.Zb();a.Yb(0,"input",2),a.hc("ngModelChange",(function(t){return a.Kc(e),a.lc().currentValue=t}))("ngModelChange",(function(){return a.Kc(e),a.lc().valueChanged()}))("focusout",(function(t){return a.Kc(e),a.lc().onFocusOut(t.currentTarget.value)}))("keypress",(function(t){return a.Kc(e),a.lc().checkInputValid(t)})),a.Xb()}if(2&e){const e=a.lc();a.sc("ngModel",e.currentValue)}}function c(e,t){if(1&e&&(a.Tb(0,"p",6),a.mc(1,"sdaConvertURLsToHREF")),2&e){const e=a.lc(2);a.sc("innerHTML",a.nc(1,1,e.dataItem[e.columnSet.field]),a.Lc)}}function u(e,t){if(1&e&&(a.Yb(0,"p",7),a.Uc(1),a.Xb()),2&e){const e=a.lc(2);a.Eb(1),a.Wc(" ",e.dataItem[e.columnSet.field]," ")}}function d(e,t){if(1&e&&(a.Yb(0,"div",3),a.Sc(1,c,2,3,"p",4),a.Sc(2,u,2,1,"p",5),a.Xb()),2&e){const e=a.lc();a.Eb(1),a.sc("ngIf",e.columnSet.readOnly),a.Eb(1),a.sc("ngIf",!e.columnSet.readOnly)}}let h=(()=>{class e extends r.a{ngOnInit(){this.currentValue=this.dataItem[this.columnSet.field],this.currentValue&&this.setUrlPrefix(this.currentValue)}valueChanged(){super.onValueChanged(this.currentValue)}onFocusOut(e){e?this.setUrlPrefix(e):this.currentValue="",this.valueChanged()}checkInputValid(e){/\s/.test(e.key)&&e.preventDefault()}setUrlPrefix(e){this.currentValue=-1===e.indexOf(":")&&-1===e.indexOf("\\")?"http://"+e:e}}return e.\u0275fac=function(t){return f(t||e)},e.\u0275cmp=a.Mb({type:e,selectors:[["sda-edit-grid-cell-url"]],features:[a.Db([{provide:i.n,useExisting:Object(a.W)(()=>e),multi:!0}]),a.Bb],decls:2,vars:2,consts:[["class","url url--editable","type","text","pattern","^((?:https?:\\/\\/)?(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9](\\.(?!\\.))[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9](\\.(?!\\.))[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9](\\.(?!\\.))[^\\s]{2,}|www\\.[a-zA-Z0-9](\\.(?!\\.))[^\\.\\s]{2,})$",3,"ngModel","ngModelChange","focusout","keypress",4,"ngIf"],["class","url url--non-editable",4,"ngIf"],["type","text","pattern","^((?:https?:\\/\\/)?(?:www\\.|(?!www))[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9](\\.(?!\\.))[^\\s]{2,}|www\\.[a-zA-Z0-9][a-zA-Z0-9-]+[a-zA-Z0-9](\\.(?!\\.))[^\\s]{2,}|https?:\\/\\/(?:www\\.|(?!www))[a-zA-Z0-9](\\.(?!\\.))[^\\s]{2,}|www\\.[a-zA-Z0-9](\\.(?!\\.))[^\\.\\s]{2,})$",1,"url","url--editable",3,"ngModel","ngModelChange","focusout","keypress"],[1,"url","url--non-editable"],[3,"innerHTML",4,"ngIf"],["class","url__value",4,"ngIf"],[3,"innerHTML"],[1,"url__value"]],template:function(e,t){1&e&&(a.Sc(0,l,1,1,"input",0),a.Sc(1,d,3,2,"div",1)),2&e&&(a.sc("ngIf",t.isEditable),a.Eb(1),a.sc("ngIf",!t.isEditable&&t.dataItem[t.columnSet.field]))},directives:[s.t,i.c,i.w,i.p,i.s],pipes:[o.a],styles:[".url__value[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]{width:100%}.url--editable[_ngcontent-%COMP%]{width:100%;min-width:0!important;height:80px!important;padding:0 2px;border:none}"]}),e})();const f=a.ac(h)},"jw+j":function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("ofXK"),i=n("3Pt+"),r=n("fXoL");let s=(()=>{class e{}return e.\u0275mod=r.Qb({type:e}),e.\u0275inj=r.Pb({factory:function(t){return new(t||e)},imports:[[a.c,i.j]]}),e})()},k7ET:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("fXoL"),i=n("3Pt+"),r=n("Q14e"),s=n("0aHC");let o=(()=>{class e extends r.a{constructor(){super()}valueChanged(e){super.onValueChanged(e.value)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=a.Mb({type:e,selectors:[["sda-edit-grid-cell-int"]],features:[a.Db([{provide:i.n,useExisting:Object(a.W)(()=>e),multi:!0}]),a.Bb],decls:1,vars:4,consts:[[3,"value","isEditable","readOnly","fieldSize","valueChanged"]],template:function(e,t){1&e&&(a.Yb(0,"sda-int-type",0),a.hc("valueChanged",(function(e){return t.valueChanged(e)})),a.Xb()),2&e&&a.sc("value",t.dataItem[t.columnSet.field])("isEditable",t.isEditable)("readOnly",t.columnSet.readOnly)("fieldSize",t.columnSet.width)},directives:[s.a],styles:["[_nghost-%COMP%], sda-int-type[_ngcontent-%COMP%]{width:100%}sda-int-type[_ngcontent-%COMP%]     .int-non-editable{color:inherit}sda-int-type[_ngcontent-%COMP%]     .int-input{width:100%;min-width:0!important;padding:6px 0;border:none}"]}),e})()},kOkM:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var a=n("fXoL"),i=n("3Pt+"),r=n("lcS2"),s=n("Q14e"),o=n("ofXK"),l=n("fKPV"),c=n("N8M/"),u=n("eO1q"),d=n("F8dI"),h=n("rrPm");function f(e,t){if(1&e&&(a.Yb(0,"div",2),a.Uc(1),a.mc(2,"sdaConvertToLocalDateTime"),a.Xb()),2&e){const e=a.lc();a.Eb(1),a.Wc(" ",a.nc(2,1,e.dataItem[e.columnSet.field]),"\n")}}function m(e,t){if(1&e){const e=a.Zb();a.Yb(0,"div",3),a.Yb(1,"sda-edit-grid-cell-button",4),a.hc("click",(function(){return a.Kc(e),a.Hc(4).toggle()})),a.mc(2,"sdaConvertToLocalDateTime"),a.Xb(),a.Yb(3,"sda-overlay",null,5),a.Yb(5,"div",6),a.Yb(6,"p-calendar",7),a.hc("ngModelChange",(function(t){return a.Kc(e),a.lc().valueChanged(t)})),a.mc(7,"sdaConvertSpfDateTimeToDate"),a.Xb(),a.Xb(),a.Xb(),a.Xb()}if(2&e){const e=a.lc();a.Eb(1),a.sc("buttonName",a.nc(2,11,e.dataItem[e.columnSet.field])),a.Eb(5),a.Ib("prime-calendar--not-empty",e.dataItem[e.columnSet.field]),a.sc("ngModel",a.nc(7,13,e.dataItem[e.columnSet.field]))("locale",e.locale)("dateFormat",e.dateFormat)("inline",!0)("readonlyInput",!0)("monthNavigator",!0)("yearNavigator",!0)("showButtonBar",!0)}}let p=(()=>{class e extends s.a{constructor(e){super(),this.calendarTranslationService=e,this.show=!1}ngOnInit(){this.locale=this.calendarTranslationService.calendarTranslations,this.dateFormat=this.calendarTranslationService.dateFormat}valueChanged(e){e&&(e.setSeconds(0),e.setMilliseconds(0)),super.onValueChanged(e?e.toISOString():"")}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(r.a))},e.\u0275cmp=a.Mb({type:e,selectors:[["sda-edit-grid-cell-datetime"]],features:[a.Db([{provide:i.n,useExisting:Object(a.W)(()=>e),multi:!0}]),a.Bb],decls:2,vars:2,consts:[["class","list-date list-date--non-editable",4,"ngIf"],["class","list-date list-date--editable",4,"ngIf"],[1,"list-date","list-date--non-editable"],[1,"list-date","list-date--editable"],[3,"buttonName","click"],["overlay",""],[1,"sda-overlay-content-hook"],["yearRange","1900:2100","showTime","true","hourFormat","24","appendTo","body",1,"prime-calendar",3,"ngModel","locale","dateFormat","inline","readonlyInput","monthNavigator","yearNavigator","showButtonBar","ngModelChange"]],template:function(e,t){1&e&&(a.Sc(0,f,3,3,"div",0),a.Sc(1,m,8,15,"div",1)),2&e&&(a.sc("ngIf",!t.isEditable),a.Eb(1),a.sc("ngIf",t.isEditable))},directives:[o.t,l.a,c.a,u.a,i.p,i.s],pipes:[d.a,h.a],styles:[".list-date--non-editable[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]{width:100%}"]}),e})()},ooL7:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var a=n("1D41"),i=n("ONOH"),r=n("kx0E"),s=n("J7mc"),o=n("FedY"),l=n("fXoL");let c=(()=>{class e extends a.a{constructor(e,t,n){super(),this.dataService=e,this.configService=t,this.dataFormatService=n,this.units=[],this.allowUoMValueAsText=!1}get unitValue(){return this.unitValueObj}set unitValue(e){this.unitValueObj=e,this.setValue()}get numberValue(){return this.numberValueObj}set numberValue(e){this.numberValueObj=e,this.setValue()}ngOnInit(){this.allowUoMValueAsText=!(!this.field||!this.field.AllowUoMValueAsText)}getUOMList(e){return this.dataService.get(`UnitCategories('${e}')?$expand=Units,DefaultUnit`,this.configService.selectedCreateConfig)}parseUOMList(e,t=!1){let n=[];return e.Units&&e.Units.forEach(e=>{n.push(e)}),n=n.sort((e,t)=>o.a.sortByString(e.Symbol,t.Symbol)),t||n.unshift({Symbol:""}),n}getLocalValueAndSetSymbols(e,t,n){let a=e;if(e){const t=e.split("~");if(a=this.dataFormatService.convertToLocalUom(e.replace("~"," "),void 0,void 0,this.allowUoMValueAsText),2===t.length)this.unitValueObj=t[1],this.numberValueObj=a.replace(t[1],"").trim();else if(1===t.length&&a.indexOf(" ")>-1){const e=a.split(" ");this.unitValueObj=e.splice(1).join(" "),this.numberValueObj=a.replace(" "+this.unitValueObj,"")}else this.numberValueObj=a}else this.unitValueObj=n||t.DefaultUnit.Symbol;return a}setValue(){let e="";if(this.allowUoMValueAsText)e=(this.numberValue||"")+" "+this.unitValueObj;else{const t=this.ParseInt(this.numberValue);void 0!==t&&(e=t+" "+this.unitValueObj)}this.onSetValue(e)}ParseInt(e){let t;if(void 0!==e){const n=parseFloat(e);!isNaN(n)&&isFinite(e)&&(t=n)}return t}}return e.\u0275fac=function(t){return new(t||e)(l.Sb(s.a),l.Sb(i.a),l.Sb(r.a))},e.\u0275dir=l.Nb({type:e,inputs:{field:"field"},features:[l.Bb]}),e})()},qsXQ:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));class a{}},rrPm:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var a=n("RY2J"),i=n("DJR3"),r=n("fXoL");let s=(()=>{class e{constructor(e){this.dateFormatService=e}transform(e){return(new a.a).transform(this.dateFormatService.convertSpfDateTimeToDateString(e))}}return e.\u0275fac=function(t){return new(t||e)(r.Sb(i.a))},e.\u0275pipe=r.Rb({name:"sdaConvertSpfDateTimeToDate",type:e,pure:!0}),e})()},sWLa:function(e,t,n){"use strict";n.d(t,"a",(function(){return C}));var a=n("fXoL"),i=n("3Pt+"),r=(n("3y5A"),n("ONOH")),s=n("ooL7"),o=n("Z9D8"),l=n("LUpO"),c=n("kx0E"),u=n("J7mc"),d=n("OdF/"),h=n("3Ucw"),f=n("ofXK"),m=n("fKPV"),p=n("N8M/"),g=n("suEs");function b(e,t){if(1&e&&(a.Yb(0,"div",2),a.Uc(1),a.Xb()),2&e){const e=a.lc();a.Eb(1),a.Wc(" ",e.dataFormatService.convertToLocalUom(e.dataItem[e.columnSet.field],e.dataTypes.DOUBLE),"\n")}}function v(e,t){if(1&e){const e=a.Zb();a.Yb(0,"input",11),a.hc("ngModelChange",(function(t){return a.Kc(e),a.lc(2).numberValue=t}))("keyup.enter",(function(){return a.Kc(e),a.lc(),a.Hc(3).toggle()})),a.Xb()}if(2&e){const e=a.lc(2);a.sc("ngModel",e.numberValue)}}function S(e,t){if(1&e){const e=a.Zb();a.Yb(0,"sda-double-type",12),a.hc("valueChanged",(function(t){return a.Kc(e),a.lc(2).onDoubValChange(t)}))("keyup.enter",(function(){return a.Kc(e),a.lc(),a.Hc(3).toggle()})),a.Xb()}if(2&e){const e=a.lc(2);a.sc("value",e.numberValue)("isEditable",!0)}}function y(e,t){if(1&e&&(a.Yb(0,"option",15),a.Uc(1),a.Xb()),2&e){const e=t.$implicit;a.sc("value",e.Symbol),a.Eb(1),a.Wc(" ",e.Symbol," ")}}function I(e,t){if(1&e){const e=a.Zb();a.Yb(0,"select",13),a.hc("ngModelChange",(function(t){return a.Kc(e),a.lc(2).unitValue=t})),a.Sc(1,y,2,2,"option",14),a.Xb()}if(2&e){const e=a.lc(2);a.sc("ngModel",e.unitValue),a.Eb(1),a.sc("ngForOf",e.units)}}function D(e,t){if(1&e){const e=a.Zb();a.Yb(0,"div",3),a.Yb(1,"sda-edit-grid-cell-button",4),a.hc("click",(function(){return a.Kc(e),a.Hc(3).toggle()})),a.Xb(),a.Yb(2,"sda-overlay",null,5),a.Yb(4,"div",6),a.Yb(5,"div",7),a.Sc(6,v,1,1,"input",8),a.Sc(7,S,1,2,"sda-double-type",9),a.Sc(8,I,2,2,"select",10),a.Xb(),a.Xb(),a.Xb(),a.Xb()}if(2&e){const e=a.lc();a.Eb(1),a.sc("buttonName",e.dataItem[e.columnSet.field]),a.Eb(5),a.sc("ngIf",e.allowUoMValueAsText),a.Eb(1),a.sc("ngIf",!e.allowUoMValueAsText),a.Eb(1),a.sc("ngIf",e.units)}}let C=(()=>{class e extends s.a{constructor(e,t,n,i,r){super(e,t,n),this.dataFormatService=n,this.listEditCacheService=i,this.exceptionService=r,this.isEditable=!0,this.dataChange=new a.o,this.show=!1,this.dataTypes=d.a}ngOnInit(){if(super.ngOnInit(),this.currentSelectedDisplayValue=this.dataItem[this.columnSet.field],this.allowUoMValueAsText=!!this.columnSet.columnItemDetails&&!!this.columnSet.columnItemDetails.AllowUoMValueAsText,this.isEditable){const e=this.columnSet.columnItemDetails.ScopedByInfo.UomListTypeName,t=this.listEditCacheService.getCachedData(e);t?this.parseData(t):this.getUOMList(e).subscribe(t=>{this.listEditCacheService.cacheData(e,t),this.parseData(t)},e=>{this.exceptionService.handleException(new o.a(e))})}else this.currentSelectedDisplayValue=this.dataFormatService.convertToLocalUom(this.currentSelectedDisplayValue,d.a.DOUBLE,void 0,this.allowUoMValueAsText)}onDoubValChange(e){this.numberValue=e.value}onValueChanged(e){this.formControl&&(this.formControl.setValue(e.value),this.dataItem[this.columnSet.field]=e.value),this.onChange(e.value),this.dataChange.emit({dataItem:this.dataItem,columnSetField:this.columnSet.field})}onSetValue(e){this.dataItem[this.columnSet.field]!==e&&(this.currentSelectedDisplayValue=this.dataFormatService.convertToLocalUom(e,d.a.DOUBLE,void 0,this.allowUoMValueAsText),this.onValueChanged({value:e,isInvalid:!1}))}parseData(e){this.units=this.parseUOMList(e,this.columnSet.isMandatory),this.currentSelectedDisplayValue=this.getLocalValueAndSetSymbols(this.currentSelectedDisplayValue,e)}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(u.a),a.Sb(r.a),a.Sb(c.a),a.Sb(h.a),a.Sb(l.a))},e.\u0275cmp=a.Mb({type:e,selectors:[["sda-edit-grid-cell-uom"]],inputs:{columnSet:"columnSet",dataItem:"dataItem",isEditable:"isEditable",formControl:"formControl"},outputs:{dataChange:"dataChange"},features:[a.Db([{provide:i.n,useExisting:Object(a.W)(()=>e),multi:!0}]),a.Bb],decls:2,vars:2,consts:[["class","list-uom list-uom--non-editable",4,"ngIf"],["class","list-uom list-uom--editable",4,"ngIf"],[1,"list-uom","list-uom--non-editable"],[1,"list-uom","list-uom--editable"],[3,"buttonName","click"],["overlay",""],[1,"sda-overlay-content-hook"],[1,"edit-uom"],["class","edit-uom__input","type","text",3,"ngModel","ngModelChange","keyup.enter",4,"ngIf"],["class","edit-uom__double-field",3,"value","isEditable","valueChanged","keyup.enter",4,"ngIf"],["class","edit-uom__select",3,"ngModel","ngModelChange",4,"ngIf"],["type","text",1,"edit-uom__input",3,"ngModel","ngModelChange","keyup.enter"],[1,"edit-uom__double-field",3,"value","isEditable","valueChanged","keyup.enter"],[1,"edit-uom__select",3,"ngModel","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],[3,"value"]],template:function(e,t){1&e&&(a.Sc(0,b,2,1,"div",0),a.Sc(1,D,9,4,"div",1)),2&e&&(a.sc("ngIf",!t.isEditable),a.Eb(1),a.sc("ngIf",t.isEditable))},directives:[f.t,m.a,p.a,i.c,i.p,i.s,g.a,i.B,f.s,i.u,i.E],styles:[".list-uom[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}.edit-uom__double-field[_ngcontent-%COMP%]     .double-input, .edit-uom__input[_ngcontent-%COMP%], .edit-uom__select[_ngcontent-%COMP%]{height:34px;border-color:#a9b4be}[_nghost-%COMP%]{width:100%}.list-uom__icon[_ngcontent-%COMP%]{flex:0 0 auto;width:18px;height:auto;margin-right:5px}.list-uom__icon[_ngcontent-%COMP%]   path[_ngcontent-%COMP%]{fill:currentColor}.edit-uom[_ngcontent-%COMP%]{display:flex;align-items:center;padding:8px;background-color:#fff}.edit-uom__double-field[_ngcontent-%COMP%], .edit-uom__input[_ngcontent-%COMP%]{margin-right:4px}.edit-uom__select[_ngcontent-%COMP%]{flex:1;min-width:120px;max-width:200px}"]}),e})()},suEs:function(e,t,n){"use strict";n.d(t,"a",(function(){return d}));var a=n("fXoL"),i=n("kx0E"),r=n("Ejbi"),s=n("41Lq"),o=n("ofXK"),l=n("3Pt+");function c(e,t){if(1&e&&(a.Yb(0,"p",2),a.Uc(1),a.Xb()),2&e){const e=a.lc();a.Eb(1),a.Wc(" ",e.value,"\n")}}function u(e,t){if(1&e){const e=a.Zb();a.Yb(0,"input",3),a.hc("ngModelChange",(function(t){return a.Kc(e),a.lc().onValueChanged(t)}))("keypress",(function(t){return a.Kc(e),a.lc().keyPress(t)}))("paste",(function(t){return a.Kc(e),a.lc().onPaste(t)})),a.Xb()}if(2&e){const e=a.lc();a.sc("ngModel",e.value)("maxlength",e.maxLength)("pattern",e.validationPattern)("size",e.fieldSize&&e.fieldSize>0?e.fieldSize:35)("disabled",e.readOnly)}}let d=(()=>{class e{constructor(e,t,n){this.dataFormatService=e,this.notificationService=t,this.sdaTranslateService=n,this.readOnly=!1,this.valueChanged=new a.o,this.maxLength="",this.patternInvalid=!1,this.FORM_INVALID_PASTED_TEXT=this.sdaTranslateService.get("FORM_INVALID_PASTED_TEXT","The pasted text contained invalid characters"),this.FORM_INVALID_PASTED_TEXT_LENGTH=this.sdaTranslateService.get("FORM_INVALID_PASTED_TEXT_LENGTH","The pasted text exceeded the character limit");const i=kendo.culture().numberFormat[","];this.validationPattern=`^-?([0-9]|[0-9][${i}]+|[${i}]+[0-9]|[${i}]+[0-9][${i}]+)+([${kendo.culture().numberFormat["."]}]?[0-9]+)?([eE]+[+-]?[0-9]+)?$`}get value(){return this.localVal}set value(e){this.localVal=this.patternInvalid?e:this.dataFormatService.convertToLocalDouble(e)}onValueChanged(e){const t=this.setMaxLength(e);this.patternInvalid=this.doubleOnlyPatternValidation(e);const n=this.patternInvalid?e:this.dataFormatService.convertToServerDouble(e)+(this.patternInvalid?"":this.dataFormatService.retrieveUnconvertableLocalDecimal(e,kendo.culture().numberFormat["."],"."));this.value=n,this.valueChanged.emit({value:n,isInvalid:this.patternInvalid||t})}keyPress(e){const t=String.fromCharCode(e.charCode);/[0-9\-\,\.]/.test(t)||e.preventDefault()}onPaste(e){const t=e.clipboardData.getData("text");this.doubleOnlyPatternValidation(t)?(this.notificationService.warning(this.FORM_INVALID_PASTED_TEXT),e.preventDefault()):this.setMaxLength(t,!1)&&(this.notificationService.warning(this.FORM_INVALID_PASTED_TEXT_LENGTH),e.preventDefault())}doubleOnlyPatternValidation(e){let t=!1;return e&&e.length&&(t=!new RegExp(this.validationPattern,"g").test(e)),t}setMaxLength(e,t=!0){let n=!1;if(e)if(e.toLowerCase().indexOf("e")>0)this.maxLength="";else{const a=e.startsWith("-")?19:18;if(n=e.length-(e.match(/,|\./g)||[]).length>a,t||!n){const t=e.replace(new RegExp("\\"+kendo.culture().numberFormat[","],"g"),""),n=Math.ceil(t.slice(0,t.indexOf(kendo.culture().numberFormat["."])).length/3)-1,i=(e.match(new RegExp("\\"+kendo.culture().numberFormat["."],"g"))||[]).length;this.maxLength=(n+i+a).toString()}}else this.maxLength="";return n}}return e.\u0275fac=function(t){return new(t||e)(a.Sb(i.a),a.Sb(s.a),a.Sb(r.a))},e.\u0275cmp=a.Mb({type:e,selectors:[["sda-double-type"]],inputs:{isEditable:"isEditable",value:"value",fieldSize:"fieldSize",readOnly:"readOnly"},outputs:{valueChanged:"valueChanged"},decls:2,vars:2,consts:[["class","double-non-editable",4,"ngIf"],["type","text","step","any","class","double-input",3,"ngModel","maxlength","pattern","size","disabled","ngModelChange","keypress","paste",4,"ngIf"],[1,"double-non-editable"],["type","text","step","any",1,"double-input",3,"ngModel","maxlength","pattern","size","disabled","ngModelChange","keypress","paste"]],template:function(e,t){1&e&&(a.Sc(0,c,2,1,"p",0),a.Sc(1,u,1,5,"input",1)),2&e&&(a.sc("ngIf",!t.isEditable),a.Eb(1),a.sc("ngIf",t.isEditable))},directives:[o.t,l.c,l.p,l.s,l.k,l.w],styles:[".double-non-editable[_ngcontent-%COMP%]{align-items:center}.double-input[_ngcontent-%COMP%]{height:34px;padding:0 5px;line-height:1.1;border-color:#cfd6dd}.double-input[_ngcontent-%COMP%]:disabled{background-color:#e6e6e6;color:grey;opacity:.7;cursor:not-allowed}"]}),e})()},uinc:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var a=n("ofXK"),i=n("3Pt+"),r=n("txXS"),s=n("fXoL");let o=(()=>{class e{}return e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({factory:function(t){return new(t||e)},imports:[[a.c,i.j,r.a]]}),e})()}}]);