(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{GW71:function(t,e,o){"use strict";o.d(e,"a",(function(){return _}));var i=o("R0Ic"),n=o("fXoL"),a=o("WPJx"),s=o("ofXK"),r=o("qKxU");function c(t,e){if(1&t){const t=n.Zb();n.Yb(0,"uxt-icon-button",12),n.hc("click",(function(){return n.Kc(t),n.lc().handleSubmit()})),n.Xb()}}function l(t,e){if(1&t){const t=n.Zb();n.Yb(0,"uxt-icon-button",13),n.hc("click",(function(){return n.Kc(t),n.lc().handleCancel()})),n.Xb()}}function h(t,e){if(1&t){const t=n.Zb();n.Yb(0,"button",14),n.hc("click",(function(){return n.Kc(t),n.lc().handleSubmit()})),n.Uc(1),n.Xb()}if(2&t){const t=n.lc();n.Eb(1),n.Wc(" ",t.submitText," ")}}function d(t,e){if(1&t){const t=n.Zb();n.Yb(0,"button",15),n.hc("click",(function(){return n.Kc(t),n.lc().handleCancel()})),n.Uc(1),n.Xb()}if(2&t){const t=n.lc();n.Eb(1),n.Wc(" ",t.cancelText," ")}}const u=["*"];let _=(()=>{class t{constructor(){this.cancelText="Cancel",this.showCancelButton=!0,this.submitText="Ok",this.enableSubmitButton=!0,this.cancel=new n.o,this.submit=new n.o,this.className=!0}get isOpenClass(){return this.isOpen}handleCancel(){this.cancel.emit()}handleSubmit(){this.submit.emit()}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Mb({type:t,selectors:[["uxt-modal"]],hostVars:4,hostBindings:function(t,e){2&t&&n.Ib("uxt-modal",e.className)("uxt-modal--open",e.isOpenClass)},inputs:{isOpen:"isOpen",cancelText:"cancelText",showCancelButton:"showCancelButton",submitText:"submitText",titleText:"titleText",enableSubmitButton:"enableSubmitButton"},outputs:{cancel:"cancel",submit:"submit"},ngContentSelectors:u,decls:15,vars:9,consts:[[1,"uxt-modal__overlay"],[1,"uxt-modal__window"],["position","top",1,"uxt-modal__header"],["class","uxt-modal__header__button__close uxt-modal__header__button__close__back","iconName","arrow-left",3,"click",4,"ngIf"],["class","uxt-modal__header__button__close uxt-modal__header__button__close__close","iconName","close",3,"click",4,"ngIf"],[1,"uxt-modal__header__title"],["class","uxt-modal__header__button__submit",3,"click",4,"ngIf"],[1,"uxt-modal__content"],[1,"uxt-modal__actions"],[1,"uxt-modal__actions__buttons"],["class","uxt-modal__actions__button uxt-modal__actions__button__cancel",3,"click",4,"ngIf"],[1,"uxt-modal__actions__button","uxt-modal__actions__button__submit",3,"disabled","click"],["iconName","arrow-left",1,"uxt-modal__header__button__close","uxt-modal__header__button__close__back",3,"click"],["iconName","close",1,"uxt-modal__header__button__close","uxt-modal__header__button__close__close",3,"click"],[1,"uxt-modal__header__button__submit",3,"click"],[1,"uxt-modal__actions__button","uxt-modal__actions__button__cancel",3,"click"]],template:function(t,e){1&t&&(n.rc(),n.Tb(0,"div",0),n.Yb(1,"div",1),n.Yb(2,"uxt-toolbar",2),n.Sc(3,c,1,0,"uxt-icon-button",3),n.Sc(4,l,1,0,"uxt-icon-button",4),n.Yb(5,"h1",5),n.Uc(6),n.Xb(),n.Sc(7,h,2,1,"button",6),n.Xb(),n.Yb(8,"div",7),n.qc(9),n.Xb(),n.Yb(10,"uxt-toolbar",8),n.Yb(11,"div",9),n.Sc(12,d,2,1,"button",10),n.Yb(13,"button",11),n.hc("click",(function(){return e.handleSubmit()})),n.Uc(14),n.Xb(),n.Xb(),n.Xb(),n.Xb()),2&t&&(n.sc("@overlay",e.isOpen?"open":"closed"),n.Eb(1),n.sc("@window",e.isOpen?"open":"closed"),n.Eb(2),n.sc("ngIf",!e.showCancelButton),n.Eb(1),n.sc("ngIf",e.showCancelButton),n.Eb(2),n.Wc(" ",e.titleText," "),n.Eb(1),n.sc("ngIf",e.showCancelButton),n.Eb(5),n.sc("ngIf",e.showCancelButton),n.Eb(1),n.sc("disabled",!e.enableSubmitButton),n.Eb(1),n.Wc(" ",e.submitText," "))},directives:[a.a,s.t,r.a],styles:[".uxt-modal{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;z-index:450}.uxt-modal:not(.uxt-modal--open){pointer-events:none}.uxt-modal__overlay{position:absolute;top:0;left:0;right:0;bottom:0;background-color:#000}.uxt-modal__window{display:flex;flex-direction:column;background-color:#fff;box-shadow:1px 1px 10px rgba(0,0,0,.25)}.uxt-modal__header{display:flex;align-items:center;height:56px;padding-right:8px;padding-left:8px;background-color:#fff!important}.uxt-modal__header__title{font-size:1.25rem;font-weight:500}.uxt-modal__content{display:flex;flex-grow:1;flex-direction:column;width:100%;min-height:100%;padding:16px;overflow-x:hidden;overflow-y:scroll}@media (max-height:300px){.uxt-modal__content{height:140px}}@media (max-width:768px){.uxt-modal__window{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;max-width:none;min-height:inherit}.uxt-modal__header{margin-top:56px;box-shadow:0 2px 5px rgba(0,0,0,.15)}.uxt-modal__header__title{flex-grow:1;margin-left:8px;padding-left:40px!important}.uxt-modal__header__button__close,.uxt-modal__header__button__submit{display:none!important}.uxt-modal__content{min-height:inherit;padding-left:56px}.uxt-modal textarea{overflow-y:scroll}.uxt-modal__actions{border-bottom-left-radius:2px;border-bottom-right-radius:2px;background-color:#fff!important;display:flex!important}.uxt-modal__actions__buttons{display:flex;margin-left:auto}.uxt-modal__actions__button{color:#02adff!important;border:none!important}}@media (min-width:769px){.uxt-modal__window{flex-shrink:1;min-width:420px;max-width:768px;max-height:90vh;border-radius:2px;z-index:451}.uxt-modal__header{border-top-left-radius:2px;border-top-right-radius:2px;padding-right:16px;padding-left:16px}.uxt-modal__header__button__close,.uxt-modal__header__button__submit{display:none!important}.uxt-modal__content{padding-right:24px;padding-left:24px;overflow-y:inherit}.uxt-modal__actions{border-bottom-left-radius:2px;border-bottom-right-radius:2px;background-color:#fff!important}.uxt-modal__actions__buttons{display:flex;margin-left:auto}.uxt-modal__actions__button{color:#02adff!important;border:none!important}}"],encapsulation:2,data:{animation:[Object(i.o)("overlay",[Object(i.l)("open",Object(i.m)({opacity:"0.5"})),Object(i.l)("closed",Object(i.m)({opacity:"0.0"})),Object(i.n)("open <=> closed",Object(i.e)("0.125s ease"))]),Object(i.o)("window",[Object(i.l)("open",Object(i.m)({marginTop:"0px"})),Object(i.l)("closed",Object(i.m)({marginTop:"2000px"})),Object(i.n)("open <=> closed",Object(i.e)("0.250s ease"))])]}}),t})()},ctyU:function(t,e,o){"use strict";o.d(e,"a",(function(){return D}));var i=o("fXoL"),n=o("LRne"),a=o("IzEk"),s=o("eIep"),r=o("lJxs"),c=o("JIr8"),l=o("m8I0"),h=o("LUpO"),d=o("C4gn"),u=o("xc+7"),_=o("ti2P"),b=o("7Ekh"),m=o("lUp+"),p=o("z0XX"),g=o("hqbt"),f=o("Ejbi"),S=o("xiba"),x=(o("jZ6j"),o("qVk3")),C=(o("iAId"),o("Z2F1")),E=o("dp0o"),T=o("9eFW"),O=o("tyNb"),w=o("GW71"),v=o("3Pt+"),R=o("ofXK");function M(t,e){if(1&t&&(i.Yb(0,"div",5),i.Uc(1),i.Xb()),2&t){const t=i.lc();i.Eb(1),i.Wc(" ",t.RESPONSE_MANAGEMENT_REJECT_MODAL_TOOLTIP," ")}}function A(t,e){if(1&t&&(i.Yb(0,"div",6),i.Uc(1),i.Xb()),2&t){const t=i.lc();i.Eb(1),i.Wc(" ",t.MODALALERT," ")}}let B=(()=>{class t{constructor(t){this.sdaTranslateService=t,this.messageToNextStepChange=new i.o,this.enableSubmitButtonChange=new i.o,this.RESPONSE_MANAGEMENT_REJECT_MODAL_TOOLTIP=this.sdaTranslateService.get("RESPONSE_MANAGEMENT_REJECT_MODAL_TOOLTIP","At least 5 characters should be entered")}onModelChange(t){t.replace(/\s|\r?\n|\r/g,"").length>=5?(this.enableSubmitButton=!0,this.enableSubmitButtonChange.emit(this.enableSubmitButton),this.messageToNextStepChange.emit(this.messageToNextStep)):(this.enableSubmitButton=!1,this.enableSubmitButtonChange.emit(this.enableSubmitButton))}}return t.\u0275fac=function(e){return new(e||t)(i.Sb(f.a))},t.\u0275cmp=i.Mb({type:t,selectors:[["sda-revisable-header-modal-content"]],inputs:{enableSubmitButton:"enableSubmitButton",MODALFIELD:"MODALFIELD",messageToNextStep:"messageToNextStep",MODALALERT:"MODALALERT"},outputs:{messageToNextStepChange:"messageToNextStepChange",enableSubmitButtonChange:"enableSubmitButtonChange"},decls:7,vars:4,consts:[[1,"reject-form"],[1,"reject-form__title","reject-form__title--required"],[1,"reject-form__textarea",3,"ngModel","ngModelChange"],["class","reject-form__message",4,"ngIf"],["class","reject-form__alert",4,"ngIf"],[1,"reject-form__message"],[1,"reject-form__alert"]],template:function(t,e){1&t&&(i.Yb(0,"div",0),i.Yb(1,"div",1),i.Uc(2),i.Xb(),i.Yb(3,"textarea",2),i.hc("ngModelChange",(function(t){return e.messageToNextStep=t}))("ngModelChange",(function(t){return e.onModelChange(t)})),i.Uc(4," "),i.Xb(),i.Sc(5,M,2,1,"div",3),i.Sc(6,A,2,1,"div",4),i.Xb()),2&t&&(i.Eb(2),i.Vc(e.MODALFIELD),i.Eb(1),i.sc("ngModel",e.messageToNextStep),i.Eb(2),i.sc("ngIf",!e.enableSubmitButton),i.Eb(1),i.sc("ngIf",null==e.MODALALERT?null:e.MODALALERT.length))},directives:[v.c,v.p,v.s,R.t],styles:['.reject-form[_ngcontent-%COMP%]{padding:5px}.reject-form__title[_ngcontent-%COMP%]{margin-bottom:5px}.reject-form__title--required[_ngcontent-%COMP%]:after{content:"*";display:inline-block;color:#d7142c;font-size:18px;-webkit-transform:translate3d(4px,-4px,0);transform:translate3d(4px,-4px,0)}.reject-form__textarea[_ngcontent-%COMP%]{width:100%}.reject-form__message[_ngcontent-%COMP%]{color:#697a8b;font-size:10px}.reject-form__alert[_ngcontent-%COMP%]{color:#d7142c;font-size:12px;padding-top:5px}']}),t})();const L=["powerBar"];let D=(()=>{class t{constructor(t,e,o,n,a,s,r,c,l,h,d){this.sdaTranslateService=t,this.relatedItemService=e,this.workflowService=o,this.exceptionService=n,this.revisionService=a,this.securityService=s,this.modeService=r,this.featureSetService=c,this.featureSetNavigationService=l,this.route=h,this.router=d,this.onSelectedRevisionChanged=new i.o,this.rightFooterPowerBarControls=void 0,this.MODAL_ALERT="",this.isCompleteOperation=!1,this.showModal=!1,this.messageToNextStep="",this.MODALFIELD=this.sdaTranslateService.get("RESPONSE_MANAGEMENT_REJECT_MODAL_FIELD","Reason for rejection / message"),this.RESPONSE_MANAGEMENT_REJECT_MODAL_TOOLTIP=this.sdaTranslateService.get("RESPONSE_MANAGEMENT_REJECT_MODAL_TOOLTIP","At least 5 characters should be entered"),this.enableSubmitButton=!1,this.WORKFLOW_ATTACHED_MESSAGE=this.sdaTranslateService.get("WORKFLOW_ATTACHED_MESSAGE","Object automatically attached to the workflow"),this.SUBMIT_TEXT=this.sdaTranslateService.get("OK","OK"),this.CANCEL_TEXT=this.sdaTranslateService.get("CANCEL","Cancel")}ngOnChanges(t){var e,o;const i=null===(o=null===(e=t.selectedRevision)||void 0===e?void 0:e.currentValue)||void 0===o?void 0:o.isLatest;this.initialiseRightFooterPowerBar(i)}onModelChange(t){this.enableSubmitButton=t}submit(){this.MODAL_ALERT=void 0;let t=this.apiConfig.notificationMessages.onRejectChange;const e=this.sdaTranslateService.get("RESPONSE_MANAGEMENT_MOC_REWORK_HEAD","Rework Change Request"),o=this.sdaTranslateService.get("RESPONSE_MANAGEMENT_HANDOVER_REWORK_HEAD","Rework Handover Request");if(this.MODAL_TITLE.match(e)?t=this.apiConfig.notificationMessages.onReject:this.MODAL_TITLE.match(o)?t=this.apiConfig.notificationMessages.onRework:this.MODAL_TITLE.match(this.sdaTranslateService.get("RESPONSE_MANAGEMENT_REVIEW_REWORK_MODAL_TITLE","Rework Common Schema Change Request"))&&(t=this.apiConfig.notificationMessages.onReject),this.modeService.isRejectModal(this.apiConfig.mode,!this.isCompleteOperation)){const e=new x.a(this.selectedRevision.obid,()=>{this.workflowService.rejectResponse(this.apiConfig,this.workflowStepOBID,t,this.messageToNextStep,this.messageToNextStep).subscribe(()=>{this.featureSetNavigationService.navigateBack()})},S.a.Reject);this.onSelectedRevisionChanged.emit(e)}else this.signOffStep(this.apiConfig.header.updateObservationStatusOnComplete);this.isCompleteOperation=!1}cancel(){this.showModal=!1,this.messageToNextStep="",this.MODAL_ALERT=void 0,this.isCompleteOperation=!1}initialiseRightFooterPowerBar(t){if(this.rightFooterPowerBarControls=[],this.powerBar.clearOverflow(),t){if(this.revisionSummary.CreateTechnicalQueryMethod){let t;t=this.revisionSummary.CreateTechnicalQueryMethod.SPFArgument5&&this.revisionSummary.CreateTechnicalQueryMethod.SPFArgument5.length>0?this.revisionSummary.CreateTechnicalQueryMethod.SPFArgument5:this.sdaTranslateService.get("REVIEW_POWER_BAR_CREATE_TQ","Technical Query"),this.createTQButtonCntrl=new _.a(()=>{const t=this.selectedRevision;this.relatedItemService.onExecuteMethod(this.revisionSummary.CreateTechnicalQueryMethod,t,[t.obid],this.parentClientAPI,this.parentMethodOBID,this.parentObjects)},t,"fa-external-link power-bar-button__icon"),this.rightFooterPowerBarControls.push(this.createTQButtonCntrl)}this.rightFooterPowerBarControls.length>0&&this.rightFooterPowerBarControls.push(new b.a),this.apiConfig.header.showWaiveButton&&this.addWaiveResponseButton(),this.apiConfig.header.showRejectButton&&this.addRejectResponseButton(),this.apiConfig.header.showMoCRejectChangeButton&&this.addMoCRejectChangeButton(),this.apiConfig.header.showSaveAsDraft&&this.addSaveAsDraftButton(),this.apiConfig.header.showReworkButton&&this.addReworkResponseButton(),this.apiConfig.header.showCompleteButton&&this.addCompleteButton(this.apiConfig.header.updateObservationStatusOnComplete)}}addWaiveResponseButton(){this.rightFooterPowerBarControls.push(new _.a(()=>{const t=new x.a(this.selectedRevision.obid,()=>{this.workflowService.waiveResponse(this.workflowStepOBID,this.apiConfig.notificationMessages.onWaive)},S.a.Waive);this.onSelectedRevisionChanged.emit(t)},this.apiConfig.buttonText.onWaive,"",void 0,l.a.Abort))}addReworkResponseButton(){this.rightFooterPowerBarControls.push(new _.a(()=>{this.apiConfig.header.showReworkButton=!0,this.handleRejectButton(this.apiConfig.buttonText.onRework)},this.apiConfig.buttonText.onRework,"",void 0,l.a.Destroy))}addRejectResponseButton(){this.rightFooterPowerBarControls.push(new _.a(()=>{this.apiConfig.header.showMoCReject=!1,this.apiConfig.header.showReworkButton=!1,this.handleRejectButton()},this.apiConfig.buttonText.onReject,"",void 0,l.a.Abort))}addMoCRejectChangeButton(){this.rightFooterPowerBarControls.push(new _.a(()=>{this.handleRejectButton(this.apiConfig.buttonText.onRejectChange),this.apiConfig.header.showMoCReject=!0},this.apiConfig.buttonText.onRejectChange,"",void 0,l.a.Abort))}handleRejectButton(t=""){if(this.MODAL_TITLE=this.modeService.setRejectModalTitle(this.apiConfig.mode,t),this.MODAL_TITLE)this.showModal=!0,this.setMODALFIELD(),this.MODAL_ALERT=this.modeService.setRejectModalAlert(this.apiConfig.mode,t);else{const t=new x.a(this.selectedRevision.obid,()=>{this.revisionService.getRejectComment(this.selectedRevision.obid,this.selectedRevision.config,this.securityService.getUserName()).pipe(Object(a.a)(1),Object(s.a)(t=>t?this.workflowService.rejectResponse(this.apiConfig,this.workflowStepOBID,this.apiConfig.notificationMessages.onReject,t.length>0?t[0]:"",t.length>0?t[0]:"").pipe(Object(r.a)(()=>{this.navigateBackOnCompletion?this.featureSetNavigationService.navigateBack():this.router.navigate(["/home"])})):Object(n.a)(void 0)),Object(c.a)(t=>(this.exceptionService.handleException(t),Object(n.a)(void 0)))).subscribe()},S.a.Reject);this.onSelectedRevisionChanged.emit(t)}}setMODALFIELD(){const t=this.sdaTranslateService.get("RESPONSE_MANAGEMENT_MOC_REWORK_HEAD","Rework Change Request"),e=this.sdaTranslateService.get("REWORK_HANDOVER_REQUEST","Rework Handover Request");this.MODALFIELD=this.MODAL_TITLE.match(t)||this.MODAL_TITLE.match(e)||this.MODAL_TITLE.match(this.sdaTranslateService.get("RESPONSE_MANAGEMENT_REVIEW_REWORK_MODAL_TITLE","Rework Common Schema Change Request"))?this.sdaTranslateService.get("RESPONSE_MANAGEMENT_REWORK_MODAL_FIELD","Reason for rework"):this.sdaTranslateService.get("RESPONSE_MANAGEMENT_REJECT_MODAL_FIELD","Reason for rejection / message")}addCompleteButton(t=!1){this.rightFooterPowerBarControls.push(new _.a(()=>{this.MODAL_TITLE=this.modeService.setAcceptModalTitle(this.apiConfig.mode),this.MODALFIELD=this.modeService.setAcceptModalField(this.apiConfig.mode),this.MODAL_TITLE?(this.showModal=!0,this.isCompleteOperation=!0):this.signOffStep(t)},this.apiConfig.buttonText.onComplete,"",void 0,l.a.Primary))}addSaveAsDraftButton(){this.rightFooterPowerBarControls.push(new _.a(()=>{this.featureSetService.getClientApiMethods("ShowInbox").subscribe(t=>{t&&t.length>0?this.featureSetNavigationService.navigateToFeature(t[0]):this.router.navigate(["/home"])})},this.apiConfig.buttonText.onSaveAsDraft,"",void 0,l.a.Primary))}signOffStep(t=!1){const e=new x.a(this.selectedRevision.obid,()=>{const e=new x.a(this.selectedRevision.obid,()=>{t?this.workflowService.signOffStepAndAdvanceUserResponse(this.apiConfig,this.workflowStepOBID,this.apiConfig.notificationMessages.onComplete,this.navigateBackOnCompletion).subscribe(()=>{this.navigateBackOnCompletion||this.router.navigate(["/home"])}):this.workflowService.signOffStep(this.workflowStepOBID,this.apiConfig.notificationMessages.onComplete,this.messageToNextStep)},S.a.Default);this.onSelectedRevisionChanged.emit(e)},S.a.Complete);this.onSelectedRevisionChanged.emit(e)}}return t.\u0275fac=function(e){return new(e||t)(i.Sb(f.a),i.Sb(p.a),i.Sb(T.a),i.Sb(h.a),i.Sb(E.a),i.Sb(g.a),i.Sb(C.a),i.Sb(u.a),i.Sb(d.a),i.Sb(O.a),i.Sb(O.g))},t.\u0275cmp=i.Mb({type:t,selectors:[["sda-revisable-footer"]],viewQuery:function(t,e){var o;1&t&&i.Qc(L,!0),2&t&&i.Gc(o=i.ic())&&(e.powerBar=o.first)},inputs:{revisionSummary:"revisionSummary",apiConfig:"apiConfig",selectedRevision:"selectedRevision",parentMethodOBID:"parentMethodOBID",parentClientAPI:"parentClientAPI",workflowStepOBID:"workflowStepOBID",parentObjects:"parentObjects",navigateBackOnCompletion:"navigateBackOnCompletion"},outputs:{onSelectedRevisionChanged:"onSelectedRevisionChanged"},features:[i.Cb],decls:4,vars:11,consts:[[1,"footer-powerbar",3,"rightControls"],["powerBar",""],[3,"isOpen","titleText","submitText","cancelText","enableSubmitButton","showCancelButton","cancel","submit"],[3,"MODALFIELD","messageToNextStep","MODALALERT","enableSubmitButton","messageToNextStepChange","enableSubmitButtonChange"]],template:function(t,e){1&t&&(i.Tb(0,"sda-power-bar-view",0,1),i.Yb(2,"uxt-modal",2),i.hc("cancel",(function(){return e.cancel()}))("submit",(function(){return e.submit()})),i.Yb(3,"sda-revisable-header-modal-content",3),i.hc("messageToNextStepChange",(function(t){return e.messageToNextStep=t}))("enableSubmitButtonChange",(function(t){return e.onModelChange(t)})),i.Xb(),i.Xb()),2&t&&(i.sc("rightControls",e.rightFooterPowerBarControls),i.Eb(2),i.sc("isOpen",e.showModal)("titleText",e.MODAL_TITLE)("submitText",e.SUBMIT_TEXT)("cancelText",e.CANCEL_TEXT)("enableSubmitButton",e.enableSubmitButton)("showCancelButton",!0),i.Eb(1),i.sc("MODALFIELD",e.MODALFIELD)("messageToNextStep",e.messageToNextStep)("MODALALERT",e.MODAL_ALERT)("enableSubmitButton",e.enableSubmitButton))},directives:[m.a,w.a,B],styles:[".footer-powerbar[_ngcontent-%COMP%]     .power-bar{border-top:1px solid #cad0d7;background:none}"]}),t})()}}]);