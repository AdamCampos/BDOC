(window.webpackJsonp=window.webpackJsonp||[]).push([[120],{"+T9e":function(t,e,i){"use strict";i.d(e,"a",(function(){return x}));var n=i("mrSG"),r=i("IzEk"),s=i("ONOH"),o=i("Z9D8"),a=i("LUpO"),c=i("PoZZ"),h=i("d74k"),l=i("Ejbi"),u=i("W5cs"),d=i("gBNM"),f=i("UVhF"),g=i("zewe"),p=i("fXoL"),v=i("ofXK"),m=i("TLn4"),b=i("qx4N"),_=i("+qkj");function y(t,e){if(1&t&&p.Tb(0,"sda-loading-indicator",3),2&t){const t=p.lc();p.sc("message",t.OBJECT_DETAILS_LOADING)("centered",!0)}}function w(t,e){if(1&t&&(p.Yb(0,"div",4),p.Tb(1,"sda-form-controls",5),p.Xb()),2&t){const t=p.lc();p.Ib("object-details--fixed-height",t.relatedItemTabs.length>0),p.Eb(1),p.sc("form",t.form)("isEditable",!1)}}function S(t,e){if(1&t&&p.Tb(0,"sda-related-items-section",6),2&t){const t=p.lc();p.sc("tabs",t.relatedItemTabs)}}let x=(()=>{class t{constructor(t,e,i,n,r,s,o){this.formService=t,this.exceptionService=e,this.filterService=i,this.objectDetailsService=n,this.sdaTranslateService=r,this.changeDetection=s,this.configService=o,this.relatedItemTabs=[],this.initialized=!1,this.OBJECT_DETAILS_LOADING=this.sdaTranslateService.get("OBJECT_DETAILS_LOADING","Loading object details, please wait..."),this.OBJECT_DETAILS_ERROR=this.sdaTranslateService.get("INITIALISATION_ERROR","An error occurred whilst initializing"),this.showTodoListForm=!1}ngOnChanges(){this.getFormSubscription&&this.getFormSubscription.unsubscribe(),this.buildForm()}ngOnDestroy(){this.getFormSubscription&&this.getFormSubscription.unsubscribe()}buildForm(){try{this.id&&this.config&&(this.initialized=!1,this.getFormSubscription=this.formService.getForm(this.id,this.config,this.methodOBID,this.showTodoListForm).pipe(Object(r.a)(1)).subscribe(t=>{this.relatedItemTabs=[];const e=this.formService.filterDisplayItemsByDisplayType(t,"RelationshipMaintenance"),{filteredItems:i=[]}=e,r=Object(n.a)(e,["filteredItems"]);this.form=r,this.generateGridTabs(i),this.initialized=!0,this.changeDetection.detectChanges()}))}catch(t){const e=new o.a(t,this.OBJECT_DETAILS_ERROR,"ObjectDetailsComponent","buildForm");this.exceptionService.handleException(e)}}generateGridTabs(t){t.forEach(t=>{const e=t.navigation?new d.a(t.name,`Objects('${t.obid}')/${t.navigation}?$count=true`,this.config,void 0,t.obid,t.navigation):new d.a(t.name,void 0,this.config);e.isRowSelectable=!0,e.config=this.config,e.onCellClicked=t=>this.routeToDetailsView(t),this.relatedItemTabs.push(e)})}routeToDetailsView(t){this.objectDetailsService.showObjectDetailsForm(this.filterService.createLinkOdataQueryFilter(this.getDataSource(t),t.parentTab.parentOBID,t.parentTab.parentRelDef,void 0),t.object.OBID,this.configService.selectedQueryConfigs,t.parentTab.columnSetUID)}getDataSource(t){const e=new kendo.data.DataSource,i=new u.a,n=[new h.a(t.parentTab.state.sort[0].field,t.parentTab.state.sort[0].dir)];return e.filter(i),e.page=()=>t.parentTab.currentPageNumber,e.sort=()=>n,e}}return t.\u0275fac=function(e){return new(e||t)(p.Sb(f.a),p.Sb(a.a),p.Sb(c.a),p.Sb(g.a),p.Sb(l.a),p.Sb(p.h),p.Sb(s.a))},t.\u0275cmp=p.Mb({type:t,selectors:[["sda-object-details"]],inputs:{id:"id",config:"config",methodOBID:"methodOBID",showTodoListForm:"showTodoListForm"},features:[p.Cb],decls:3,vars:3,consts:[[3,"message","centered",4,"ngIf"],["class","object-details",3,"object-details--fixed-height",4,"ngIf"],[3,"tabs",4,"ngIf"],[3,"message","centered"],[1,"object-details"],[3,"form","isEditable"],[3,"tabs"]],template:function(t,e){1&t&&(p.Sc(0,y,1,2,"sda-loading-indicator",0),p.Sc(1,w,2,4,"div",1),p.Sc(2,S,1,1,"sda-related-items-section",2)),2&t&&(p.sc("ngIf",!e.initialized),p.Eb(1),p.sc("ngIf",e.initialized),p.Eb(1),p.sc("ngIf",e.initialized&&e.relatedItemTabs.length>0))},directives:[v.t,m.a,b.a,_.a],styles:[".object-details[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column;height:100%}.object-details[_ngcontent-%COMP%]{display:flex;flex:1 1 100%;flex-direction:column;border-bottom:1px solid #cad0d7}"]}),t})()},"+qkj":function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("Ejbi"),r=i("fXoL"),s=i("7EHt"),o=i("HXFx");let a=(()=>{class t{constructor(t){this.sdaTranslateService=t,this.FORM_RELATED_ITEMS=this.sdaTranslateService.get("FORM_RELATED_ITEMS","Related Items")}}return t.\u0275fac=function(e){return new(e||t)(r.Sb(n.a))},t.\u0275cmp=r.Mb({type:t,selectors:[["sda-related-items-section"]],inputs:{tabs:"tabs"},decls:6,vars:5,consts:[["displayMode","flat"],[1,"related-items-panel",3,"expanded"],["collapsedHeight","38px","expandedHeight","38px"],[3,"tabs","openInfoMapInNewTab","showItemCount"]],template:function(t,e){1&t&&(r.Yb(0,"mat-accordion",0),r.Yb(1,"mat-expansion-panel",1),r.Yb(2,"mat-expansion-panel-header",2),r.Yb(3,"mat-panel-title"),r.Uc(4),r.Xb(),r.Xb(),r.Tb(5,"sda-tabbed-grid-view",3),r.Xb(),r.Xb()),2&t&&(r.Eb(1),r.sc("expanded",!0),r.Eb(3),r.Wc(" ",e.FORM_RELATED_ITEMS," "),r.Eb(1),r.sc("tabs",e.tabs)("openInfoMapInNewTab",!0)("showItemCount",!0))},directives:[s.a,s.c,s.g,s.h,o.a],styles:[".related-items-panel[_ngcontent-%COMP%]{border-radius:0!important;box-shadow:none!important}.related-items-panel.mat-expanded[_ngcontent-%COMP%]{overflow:visible;-webkit-animation:delay-overflow 1s;animation:delay-overflow 1s}.related-items-panel[_ngcontent-%COMP%]   mat-expansion-panel-header[_ngcontent-%COMP%]{background-color:#ebedf0!important}.related-items-panel[_ngcontent-%COMP%]     .mat-expansion-panel-body{padding:0}.related-items-panel[_ngcontent-%COMP%]     sda-tabbed-grid-view{flex:none;height:auto}.related-items-panel[_ngcontent-%COMP%]     sda-tabbed-grid-view mat-tab-group{height:40vh;min-height:250px;border-top:1px solid #cad0d7}"]}),t})()},"1gqn":function(t,e){t.exports=function(t){return t&&"object"==typeof t&&"function"==typeof t.copy&&"function"==typeof t.fill&&"function"==typeof t.readUInt8}},"2C+J":function(t,e,i){"use strict";i.d(e,"a",(function(){return s}));var n=i("ofXK"),r=i("fXoL");let s=(()=>{class t{}return t.\u0275mod=r.Qb({type:t}),t.\u0275inj=r.Pb({factory:function(e){return new(e||t)},imports:[[n.c]]}),t})()},"AJ/N":function(t,e,i){"use strict";var n=i("xo8x"),r=i("AWXE"),s=i("4k54"),o=i("AKWm"),a=i("YJZE"),c=i("tU+D"),h=i("cdIC"),l=function(t){return function(){return t}};function u(t,e,i,n,r,s,o,a,c,h){this.target=t,this.type=e,this.subject=i,this.identifier=n,this.active=r,this.x=s,this.y=o,this.dx=a,this.dy=c,this._=h}function d(){return!r.c.ctrlKey&&!r.c.button}function f(){return this.parentNode}function g(t){return null==t?{x:r.c.x,y:r.c.y}:t}function p(){return navigator.maxTouchPoints||"ontouchstart"in this}u.prototype.on=function(){var t=this._.on.apply(this._,arguments);return t===this._?this:t},e.a=function(){var t,e,i,v,m=d,b=f,_=g,y=p,w={},S=Object(n.a)("start","drag","end"),x=0,D=0;function O(t){t.on("mousedown.drag",M).filter(y).on("touchstart.drag",T).on("touchmove.drag",C).on("touchend.drag touchcancel.drag",E).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function M(){if(!v&&m.apply(this,arguments)){var n=P("mouse",b.apply(this,arguments),s.a,this,arguments);n&&(Object(o.a)(r.c.view).on("mousemove.drag",N,!0).on("mouseup.drag",I,!0),Object(c.a)(r.c.view),Object(h.b)(),i=!1,t=r.c.clientX,e=r.c.clientY,n("start"))}}function N(){if(Object(h.a)(),!i){var n=r.c.clientX-t,s=r.c.clientY-e;i=n*n+s*s>D}w.mouse("drag")}function I(){Object(o.a)(r.c.view).on("mousemove.drag mouseup.drag",null),Object(c.b)(r.c.view,i),Object(h.a)(),w.mouse("end")}function T(){if(m.apply(this,arguments)){var t,e,i=r.c.changedTouches,n=b.apply(this,arguments),s=i.length;for(t=0;t<s;++t)(e=P(i[t].identifier,n,a.a,this,arguments))&&(Object(h.b)(),e("start"))}}function C(){var t,e,i=r.c.changedTouches,n=i.length;for(t=0;t<n;++t)(e=w[i[t].identifier])&&(Object(h.a)(),e("drag"))}function E(){var t,e,i=r.c.changedTouches,n=i.length;for(v&&clearTimeout(v),v=setTimeout((function(){v=null}),500),t=0;t<n;++t)(e=w[i[t].identifier])&&(Object(h.b)(),e("end"))}function P(t,e,i,n,s){var o,a,c,h=i(e,t),l=S.copy();if(Object(r.a)(new u(O,"beforestart",o,t,x,h[0],h[1],0,0,l),(function(){return null!=(r.c.subject=o=_.apply(n,s))&&(a=o.x-h[0]||0,c=o.y-h[1]||0,!0)})))return function d(f){var g,p=h;switch(f){case"start":w[t]=d,g=x++;break;case"end":delete w[t],--x;case"drag":h=i(e,t),g=x}Object(r.a)(new u(O,f,o,t,g,h[0]+a,h[1]+c,h[0]-p[0],h[1]-p[1],l),l.apply,l,[f,n,s])}}return O.filter=function(t){return arguments.length?(m="function"==typeof t?t:l(!!t),O):m},O.container=function(t){return arguments.length?(b="function"==typeof t?t:l(t),O):b},O.subject=function(t){return arguments.length?(_="function"==typeof t?t:l(t),O):_},O.touchable=function(t){return arguments.length?(y="function"==typeof t?t:l(!!t),O):y},O.on=function(){var t=S.on.apply(S,arguments);return t===S?O:t},O.clickDistance=function(t){return arguments.length?(D=(t=+t)*t,O):Math.sqrt(D)},O}},HKSQ:function(t,e,i){"use strict";i.r(e),i.d(e,"InfoMapRoutingModule",(function(){return Ws}));var n=i("fXoL"),r=i("ofXK"),s=i("vxfF"),o=i("nLfN"),a=i("8LU1"),c=i("XNiG"),h=i("quSY"),l=i("l5mm"),u=i("eNwd"),d=(i("HDdC"),i("VRyK"),i("1G5W")),f=i("lJxs"),g=i("IzEk"),p=(i("JX91"),i("vkgz")),v=i("eIep");function m(t,e){for(let i in e)e.hasOwnProperty(i)&&(t[i]=e[i]);return t}function b(t,e){const i=e?"":"none";m(t.style,{touchAction:e?"":"none",webkitUserDrag:e?"":"none",webkitTapHighlightColor:e?"":"transparent",userSelect:i,msUserSelect:i,webkitUserSelect:i,MozUserSelect:i})}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function _(t){const e=t.toLowerCase().indexOf("ms")>-1?1:1e3;return parseFloat(t)*e}function y(t,e){return t.getPropertyValue(e).split(",").map(t=>t.trim())}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function w(t){const e=t.getBoundingClientRect();return{top:e.top,right:e.right,bottom:e.bottom,left:e.left,width:e.width,height:e.height}}function S(t,e,i){const{top:n,bottom:r,left:s,right:o}=t;return i>=n&&i<=r&&e>=s&&e<=o}function x(t,e,i){t.top+=e,t.bottom=t.top+t.height,t.left+=i,t.right=t.left+t.width}function D(t,e,i,n){const{top:r,right:s,bottom:o,left:a,width:c,height:h}=t,l=c*e,u=h*e;return n>r-u&&n<o+u&&i>a-l&&i<s+l}i("cH1L");class O{constructor(t,e){this._document=t,this._viewportRuler=e,this.positions=new Map}clear(){this.positions.clear()}cache(t){this.clear(),this.positions.set(this._document,{scrollPosition:this._viewportRuler.getViewportScrollPosition()}),t.forEach(t=>{this.positions.set(t,{scrollPosition:{top:t.scrollTop,left:t.scrollLeft},clientRect:w(t)})})}handleScroll(t){const e=t.target,i=this.positions.get(e);if(!i)return null;const n=e===this._document?e.documentElement:e,r=i.scrollPosition;let s,o;if(e===this._document){const t=this._viewportRuler.getViewportScrollPosition();s=t.top,o=t.left}else s=e.scrollTop,o=e.scrollLeft;const a=r.top-s,c=r.left-o;return this.positions.forEach((t,i)=>{t.clientRect&&e!==i&&n.contains(i)&&x(t.clientRect,a,c)}),r.top=s,r.left=o,{top:a,left:c}}}const M=Object(o.f)({passive:!0}),N=Object(o.f)({passive:!1});class I{constructor(t,e,i,n,r,s){this._config=e,this._document=i,this._ngZone=n,this._viewportRuler=r,this._dragDropRegistry=s,this._passiveTransform={x:0,y:0},this._activeTransform={x:0,y:0},this._moveEvents=new c.a,this._pointerMoveSubscription=h.a.EMPTY,this._pointerUpSubscription=h.a.EMPTY,this._scrollSubscription=h.a.EMPTY,this._resizeSubscription=h.a.EMPTY,this._boundaryElement=null,this._nativeInteractionsEnabled=!0,this._handles=[],this._disabledHandles=new Set,this._direction="ltr",this.dragStartDelay=0,this._disabled=!1,this.beforeStarted=new c.a,this.started=new c.a,this.released=new c.a,this.ended=new c.a,this.entered=new c.a,this.exited=new c.a,this.dropped=new c.a,this.moved=this._moveEvents.asObservable(),this._pointerDown=t=>{if(this.beforeStarted.next(),this._handles.length){const e=this._handles.find(e=>{const i=t.target;return!!i&&(i===e||e.contains(i))});!e||this._disabledHandles.has(e)||this.disabled||this._initializeDragSequence(e,t)}else this.disabled||this._initializeDragSequence(this._rootElement,t)},this._pointerMove=t=>{t.preventDefault();const e=this._getPointerPositionOnPage(t);if(!this._hasStartedDragging){if(Math.abs(e.x-this._pickupPositionOnPage.x)+Math.abs(e.y-this._pickupPositionOnPage.y)>=this._config.dragStartThreshold){if(!(Date.now()>=this._dragStartTime+this._getDragStartDelay(t)))return void this._endDragSequence(t);this._dropContainer&&this._dropContainer.isDragging()||(this._hasStartedDragging=!0,this._ngZone.run(()=>this._startDragSequence(t)))}return}this._boundaryElement&&(this._previewRect&&(this._previewRect.width||this._previewRect.height)||(this._previewRect=(this._preview||this._rootElement).getBoundingClientRect()));const i=this._getConstrainedPointerPosition(e);if(this._hasMoved=!0,this._updatePointerDirectionDelta(i),this._dropContainer)this._updateActiveDropContainer(i);else{const t=this._activeTransform;t.x=i.x-this._pickupPositionOnPage.x+this._passiveTransform.x,t.y=i.y-this._pickupPositionOnPage.y+this._passiveTransform.y,this._applyRootElementTransform(t.x,t.y),"undefined"!=typeof SVGElement&&this._rootElement instanceof SVGElement&&this._rootElement.setAttribute("transform",`translate(${t.x} ${t.y})`)}this._moveEvents.observers.length&&this._ngZone.run(()=>{this._moveEvents.next({source:this,pointerPosition:i,event:t,distance:this._getDragDistance(i),delta:this._pointerDirectionDelta})})},this._pointerUp=t=>{this._endDragSequence(t)},this.withRootElement(t),this._parentPositions=new O(i,r),s.registerDragItem(this)}get disabled(){return this._disabled||!(!this._dropContainer||!this._dropContainer.disabled)}set disabled(t){const e=Object(a.c)(t);e!==this._disabled&&(this._disabled=e,this._toggleNativeDragInteractions())}getPlaceholderElement(){return this._placeholder}getRootElement(){return this._rootElement}getVisibleElement(){return this.isDragging()?this.getPlaceholderElement():this.getRootElement()}withHandles(t){return this._handles=t.map(t=>Object(a.e)(t)),this._handles.forEach(t=>b(t,!1)),this._toggleNativeDragInteractions(),this}withPreviewTemplate(t){return this._previewTemplate=t,this}withPlaceholderTemplate(t){return this._placeholderTemplate=t,this}withRootElement(t){const e=Object(a.e)(t);return e!==this._rootElement&&(this._rootElement&&this._removeRootElementListeners(this._rootElement),this._ngZone.runOutsideAngular(()=>{e.addEventListener("mousedown",this._pointerDown,N),e.addEventListener("touchstart",this._pointerDown,M)}),this._initialTransform=void 0,this._rootElement=e),this}withBoundaryElement(t){return this._boundaryElement=t?Object(a.e)(t):null,this._resizeSubscription.unsubscribe(),t&&(this._resizeSubscription=this._viewportRuler.change(10).subscribe(()=>this._containInsideBoundaryOnResize())),this}dispose(){this._removeRootElementListeners(this._rootElement),this.isDragging()&&P(this._rootElement),P(this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._dragDropRegistry.removeDragItem(this),this._removeSubscriptions(),this.beforeStarted.complete(),this.started.complete(),this.released.complete(),this.ended.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this._moveEvents.complete(),this._handles=[],this._disabledHandles.clear(),this._dropContainer=void 0,this._resizeSubscription.unsubscribe(),this._parentPositions.clear(),this._boundaryElement=this._rootElement=this._placeholderTemplate=this._previewTemplate=this._anchor=null}isDragging(){return this._hasStartedDragging&&this._dragDropRegistry.isDragging(this)}reset(){this._rootElement.style.transform=this._initialTransform||"",this._activeTransform={x:0,y:0},this._passiveTransform={x:0,y:0}}disableHandle(t){this._handles.indexOf(t)>-1&&this._disabledHandles.add(t)}enableHandle(t){this._disabledHandles.delete(t)}withDirection(t){return this._direction=t,this}_withDropContainer(t){this._dropContainer=t}getFreeDragPosition(){const t=this.isDragging()?this._activeTransform:this._passiveTransform;return{x:t.x,y:t.y}}setFreeDragPosition(t){return this._activeTransform={x:0,y:0},this._passiveTransform.x=t.x,this._passiveTransform.y=t.y,this._dropContainer||this._applyRootElementTransform(t.x,t.y),this}_sortFromLastPointerPosition(){const t=this._pointerPositionAtLastDirectionChange;t&&this._dropContainer&&this._updateActiveDropContainer(this._getConstrainedPointerPosition(t))}_removeSubscriptions(){this._pointerMoveSubscription.unsubscribe(),this._pointerUpSubscription.unsubscribe(),this._scrollSubscription.unsubscribe()}_destroyPreview(){this._preview&&P(this._preview),this._previewRef&&this._previewRef.destroy(),this._preview=this._previewRef=null}_destroyPlaceholder(){this._placeholder&&P(this._placeholder),this._placeholderRef&&this._placeholderRef.destroy(),this._placeholder=this._placeholderRef=null}_endDragSequence(t){this._dragDropRegistry.isDragging(this)&&(this._removeSubscriptions(),this._dragDropRegistry.stopDragging(this),this._toggleNativeDragInteractions(),this._handles&&(this._rootElement.style.webkitTapHighlightColor=this._rootElementTapHighlight),this._hasStartedDragging&&(this.released.next({source:this}),this._dropContainer?(this._dropContainer._stopScrolling(),this._animatePreviewToPlaceholder().then(()=>{this._cleanupDragArtifacts(t),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this)})):(this._passiveTransform.x=this._activeTransform.x,this._passiveTransform.y=this._activeTransform.y,this._ngZone.run(()=>{this.ended.next({source:this,distance:this._getDragDistance(this._getPointerPositionOnPage(t))})}),this._cleanupCachedDimensions(),this._dragDropRegistry.stopDragging(this))))}_startDragSequence(t){this.started.next({source:this}),k(t)&&(this._lastTouchEventTime=Date.now()),this._toggleNativeDragInteractions();const e=this._dropContainer;if(e){const t=this._rootElement,n=t.parentNode,r=this._preview=this._createPreviewElement(),s=this._placeholder=this._createPlaceholderElement(),o=this._anchor=this._anchor||this._document.createComment("");n.insertBefore(o,t),t.style.display="none",this._document.body.appendChild(n.replaceChild(s,t)),(i=this._document,i.fullscreenElement||i.webkitFullscreenElement||i.mozFullScreenElement||i.msFullscreenElement||i.body).appendChild(r),e.start(),this._initialContainer=e,this._initialIndex=e.getItemIndex(this)}else this._initialContainer=this._initialIndex=void 0;var i;this._parentPositions.cache(e?e.getScrollableParents():[])}_initializeDragSequence(t,e){e.stopPropagation();const i=this.isDragging(),n=k(e),r=!n&&0!==e.button,s=this._rootElement,o=!n&&this._lastTouchEventTime&&this._lastTouchEventTime+800>Date.now();if(e.target&&e.target.draggable&&"mousedown"===e.type&&e.preventDefault(),i||r||o)return;this._handles.length&&(this._rootElementTapHighlight=s.style.webkitTapHighlightColor,s.style.webkitTapHighlightColor="transparent"),this._hasStartedDragging=this._hasMoved=!1,this._removeSubscriptions(),this._pointerMoveSubscription=this._dragDropRegistry.pointerMove.subscribe(this._pointerMove),this._pointerUpSubscription=this._dragDropRegistry.pointerUp.subscribe(this._pointerUp),this._scrollSubscription=this._dragDropRegistry.scroll.subscribe(t=>{this._updateOnScroll(t)}),this._boundaryElement&&(this._boundaryRect=w(this._boundaryElement));const a=this._previewTemplate;this._pickupPositionInElement=a&&a.template&&!a.matchSize?{x:0,y:0}:this._getPointerPositionInElement(t,e);const c=this._pickupPositionOnPage=this._getPointerPositionOnPage(e);this._pointerDirectionDelta={x:0,y:0},this._pointerPositionAtLastDirectionChange={x:c.x,y:c.y},this._dragStartTime=Date.now(),this._dragDropRegistry.startDragging(this,e)}_cleanupDragArtifacts(t){this._rootElement.style.display="",this._anchor.parentNode.replaceChild(this._rootElement,this._anchor),this._destroyPreview(),this._destroyPlaceholder(),this._boundaryRect=this._previewRect=void 0,this._ngZone.run(()=>{const e=this._dropContainer,i=e.getItemIndex(this),n=this._getPointerPositionOnPage(t),r=this._getDragDistance(this._getPointerPositionOnPage(t)),s=e._isOverContainer(n.x,n.y);this.ended.next({source:this,distance:r}),this.dropped.next({item:this,currentIndex:i,previousIndex:this._initialIndex,container:e,previousContainer:this._initialContainer,isPointerOverContainer:s,distance:r}),e.drop(this,i,this._initialContainer,s,r,this._initialIndex),this._dropContainer=this._initialContainer})}_updateActiveDropContainer({x:t,y:e}){let i=this._initialContainer._getSiblingContainerFromPosition(this,t,e);!i&&this._dropContainer!==this._initialContainer&&this._initialContainer._isOverContainer(t,e)&&(i=this._initialContainer),i&&i!==this._dropContainer&&this._ngZone.run(()=>{this.exited.next({item:this,container:this._dropContainer}),this._dropContainer.exit(this),this._dropContainer=i,this._dropContainer.enter(this,t,e,i===this._initialContainer&&i.sortingDisabled?this._initialIndex:void 0),this.entered.next({item:this,container:i,currentIndex:i.getItemIndex(this)})}),this._dropContainer._startScrollingIfNecessary(t,e),this._dropContainer._sortItem(this,t,e,this._pointerDirectionDelta),this._preview.style.transform=T(t-this._pickupPositionInElement.x,e-this._pickupPositionInElement.y)}_createPreviewElement(){const t=this._previewTemplate,e=this.previewClass,i=t?t.template:null;let n;if(i&&t){const e=t.matchSize?this._rootElement.getBoundingClientRect():null,r=t.viewContainer.createEmbeddedView(i,t.context);r.detectChanges(),n=R(r,this._document),this._previewRef=r,t.matchSize?A(n,e):n.style.transform=T(this._pickupPositionOnPage.x,this._pickupPositionOnPage.y)}else{const t=this._rootElement;n=C(t),A(n,t.getBoundingClientRect())}return m(n.style,{pointerEvents:"none",margin:"0",position:"fixed",top:"0",left:"0",zIndex:""+(this._config.zIndex||1e3)}),b(n,!1),n.classList.add("cdk-drag-preview"),n.setAttribute("dir",this._direction),e&&(Array.isArray(e)?e.forEach(t=>n.classList.add(t)):n.classList.add(e)),n}_animatePreviewToPlaceholder(){if(!this._hasMoved)return Promise.resolve();const t=this._placeholder.getBoundingClientRect();this._preview.classList.add("cdk-drag-animating"),this._preview.style.transform=T(t.left,t.top);const e=function(t){const e=getComputedStyle(t),i=y(e,"transition-property"),n=i.find(t=>"transform"===t||"all"===t);if(!n)return 0;const r=i.indexOf(n),s=y(e,"transition-duration"),o=y(e,"transition-delay");return _(s[r])+_(o[r])}(this._preview);return 0===e?Promise.resolve():this._ngZone.runOutsideAngular(()=>new Promise(t=>{const i=e=>{(!e||e.target===this._preview&&"transform"===e.propertyName)&&(this._preview.removeEventListener("transitionend",i),t(),clearTimeout(n))},n=setTimeout(i,1.5*e);this._preview.addEventListener("transitionend",i)}))}_createPlaceholderElement(){const t=this._placeholderTemplate,e=t?t.template:null;let i;return e?(this._placeholderRef=t.viewContainer.createEmbeddedView(e,t.context),this._placeholderRef.detectChanges(),i=R(this._placeholderRef,this._document)):i=C(this._rootElement),i.classList.add("cdk-drag-placeholder"),i}_getPointerPositionInElement(t,e){const i=this._rootElement.getBoundingClientRect(),n=t===this._rootElement?null:t,r=n?n.getBoundingClientRect():i,s=k(e)?e.targetTouches[0]:e,o=this._getViewportScrollPosition();return{x:r.left-i.left+(s.pageX-r.left-o.left),y:r.top-i.top+(s.pageY-r.top-o.top)}}_getPointerPositionOnPage(t){const e=k(t)?t.touches[0]||t.changedTouches[0]:t,i=this._getViewportScrollPosition();return{x:e.pageX-i.left,y:e.pageY-i.top}}_getConstrainedPointerPosition(t){const e=this.constrainPosition?this.constrainPosition(t,this):t,i=this._dropContainer?this._dropContainer.lockAxis:null;if("x"===this.lockAxis||"x"===i?e.y=this._pickupPositionOnPage.y:"y"!==this.lockAxis&&"y"!==i||(e.x=this._pickupPositionOnPage.x),this._boundaryRect){const{x:t,y:i}=this._pickupPositionInElement,n=this._boundaryRect,r=this._previewRect,s=n.top+i,o=n.bottom-(r.height-i);e.x=E(e.x,n.left+t,n.right-(r.width-t)),e.y=E(e.y,s,o)}return e}_updatePointerDirectionDelta(t){const{x:e,y:i}=t,n=this._pointerDirectionDelta,r=this._pointerPositionAtLastDirectionChange,s=Math.abs(e-r.x),o=Math.abs(i-r.y);return s>this._config.pointerDirectionChangeThreshold&&(n.x=e>r.x?1:-1,r.x=e),o>this._config.pointerDirectionChangeThreshold&&(n.y=i>r.y?1:-1,r.y=i),n}_toggleNativeDragInteractions(){if(!this._rootElement||!this._handles)return;const t=this._handles.length>0||!this.isDragging();t!==this._nativeInteractionsEnabled&&(this._nativeInteractionsEnabled=t,b(this._rootElement,t))}_removeRootElementListeners(t){t.removeEventListener("mousedown",this._pointerDown,N),t.removeEventListener("touchstart",this._pointerDown,M)}_applyRootElementTransform(t,e){const i=T(t,e);null==this._initialTransform&&(this._initialTransform=this._rootElement.style.transform||""),this._rootElement.style.transform=this._initialTransform?i+" "+this._initialTransform:i}_getDragDistance(t){const e=this._pickupPositionOnPage;return e?{x:t.x-e.x,y:t.y-e.y}:{x:0,y:0}}_cleanupCachedDimensions(){this._boundaryRect=this._previewRect=void 0,this._parentPositions.clear()}_containInsideBoundaryOnResize(){let{x:t,y:e}=this._passiveTransform;if(0===t&&0===e||this.isDragging()||!this._boundaryElement)return;const i=this._boundaryElement.getBoundingClientRect(),n=this._rootElement.getBoundingClientRect();if(0===i.width&&0===i.height||0===n.width&&0===n.height)return;const r=i.left-n.left,s=n.right-i.right,o=i.top-n.top,a=n.bottom-i.bottom;i.width>n.width?(r>0&&(t+=r),s>0&&(t-=s)):t=0,i.height>n.height?(o>0&&(e+=o),a>0&&(e-=a)):e=0,t===this._passiveTransform.x&&e===this._passiveTransform.y||this.setFreeDragPosition({y:e,x:t})}_getDragStartDelay(t){const e=this.dragStartDelay;return"number"==typeof e?e:k(t)?e.touch:e?e.mouse:0}_updateOnScroll(t){const e=this._parentPositions.handleScroll(t);this._boundaryRect&&e&&x(this._boundaryRect,e.top,e.left)}_getViewportScrollPosition(){const t=this._parentPositions.positions.get(this._document);return t?t.scrollPosition:this._viewportRuler.getViewportScrollPosition()}}function T(t,e){return`translate3d(${Math.round(t)}px, ${Math.round(e)}px, 0)`}function C(t){const e=t.cloneNode(!0),i=e.querySelectorAll("[id]"),n=t.querySelectorAll("canvas");e.removeAttribute("id");for(let r=0;r<i.length;r++)i[r].removeAttribute("id");if(n.length){const t=e.querySelectorAll("canvas");for(let e=0;e<n.length;e++){const i=t[e].getContext("2d");i&&i.drawImage(n[e],0,0)}}return e}function E(t,e,i){return Math.max(e,Math.min(i,t))}function P(t){t&&t.parentNode&&t.parentNode.removeChild(t)}function k(t){return"t"===t.type[0]}function R(t,e){const i=t.rootNodes;if(1===i.length&&i[0].nodeType===e.ELEMENT_NODE)return i[0];const n=e.createElement("div");return i.forEach(t=>n.appendChild(t)),n}function A(t,e){t.style.width=e.width+"px",t.style.height=e.height+"px",t.style.transform=T(e.left,e.top)}
/**
 * @license
 * Copyright Google LLC All Rights Reserved.
 *
 * Use of this source code is governed by an MIT-style license that can be
 * found in the LICENSE file at https://angular.io/license
 */function F(t,e){return Math.max(0,Math.min(e,t))}class L{constructor(t,e,i,n,r){this._dragDropRegistry=e,this._ngZone=n,this._viewportRuler=r,this.disabled=!1,this.sortingDisabled=!1,this.autoScrollDisabled=!1,this.enterPredicate=()=>!0,this.beforeStarted=new c.a,this.entered=new c.a,this.exited=new c.a,this.dropped=new c.a,this.sorted=new c.a,this._isDragging=!1,this._itemPositions=[],this._previousSwap={drag:null,delta:0},this._siblings=[],this._orientation="vertical",this._activeSiblings=new Set,this._direction="ltr",this._viewportScrollSubscription=h.a.EMPTY,this._verticalScrollDirection=0,this._horizontalScrollDirection=0,this._stopScrollTimers=new c.a,this._cachedShadowRoot=null,this._startScrollInterval=()=>{this._stopScrolling(),Object(l.a)(0,u.a).pipe(Object(d.a)(this._stopScrollTimers)).subscribe(()=>{const t=this._scrollNode;1===this._verticalScrollDirection?U(t,-2):2===this._verticalScrollDirection&&U(t,2),1===this._horizontalScrollDirection?B(t,-2):2===this._horizontalScrollDirection&&B(t,2)})},this.element=Object(a.e)(t),this._document=i,this.withScrollableParents([this.element]),e.registerDropContainer(this),this._parentPositions=new O(i,r)}dispose(){this._stopScrolling(),this._stopScrollTimers.complete(),this._viewportScrollSubscription.unsubscribe(),this.beforeStarted.complete(),this.entered.complete(),this.exited.complete(),this.dropped.complete(),this.sorted.complete(),this._activeSiblings.clear(),this._scrollNode=null,this._parentPositions.clear(),this._dragDropRegistry.removeDropContainer(this)}isDragging(){return this._isDragging}start(){const t=Object(a.e)(this.element).style;this.beforeStarted.next(),this._isDragging=!0,this._initialScrollSnap=t.msScrollSnapType||t.scrollSnapType||"",t.scrollSnapType=t.msScrollSnapType="none",this._cacheItems(),this._siblings.forEach(t=>t._startReceiving(this)),this._viewportScrollSubscription.unsubscribe(),this._listenToScrollEvents()}enter(t,e,i,n){let r;this.start(),null==n?(r=this.sortingDisabled?this._draggables.indexOf(t):-1,-1===r&&(r=this._getItemIndexFromPointerPosition(t,e,i))):r=n;const s=this._activeDraggables,o=s.indexOf(t),c=t.getPlaceholderElement();let h=s[r];if(h===t&&(h=s[r+1]),o>-1&&s.splice(o,1),h&&!this._dragDropRegistry.isDragging(h)){const e=h.getRootElement();e.parentElement.insertBefore(c,e),s.splice(r,0,t)}else{const n=Object(a.e)(this.element);this._shouldEnterAsFirstChild(e,i)?(n.insertBefore(c,s[0].getRootElement()),s.unshift(t)):(n.appendChild(c),s.push(t))}c.style.transform="",this._cacheItemPositions(),this._cacheParentPositions(),this.entered.next({item:t,container:this,currentIndex:this.getItemIndex(t)})}exit(t){this._reset(),this.exited.next({item:t,container:this})}drop(t,e,i,n,r,s){this._reset(),null==s&&(s=i.getItemIndex(t)),this.dropped.next({item:t,currentIndex:e,previousIndex:s,container:this,previousContainer:i,isPointerOverContainer:n,distance:r})}withItems(t){const e=this._draggables;return this._draggables=t,t.forEach(t=>t._withDropContainer(this)),this.isDragging()&&(e.filter(t=>t.isDragging()).every(e=>-1===t.indexOf(e))?this._reset():this._cacheItems()),this}withDirection(t){return this._direction=t,this}connectedTo(t){return this._siblings=t.slice(),this}withOrientation(t){return this._orientation=t,this}withScrollableParents(t){const e=Object(a.e)(this.element);return this._scrollableElements=-1===t.indexOf(e)?[e,...t]:t.slice(),this}getScrollableParents(){return this._scrollableElements}getItemIndex(t){return this._isDragging?j("horizontal"===this._orientation&&"rtl"===this._direction?this._itemPositions.slice().reverse():this._itemPositions,e=>e.drag===t):this._draggables.indexOf(t)}isReceiving(){return this._activeSiblings.size>0}_sortItem(t,e,i,n){if(this.sortingDisabled||!D(this._clientRect,.05,e,i))return;const r=this._itemPositions,s=this._getItemIndexFromPointerPosition(t,e,i,n);if(-1===s&&r.length>0)return;const o="horizontal"===this._orientation,a=j(r,e=>e.drag===t),c=r[s],h=r[a].clientRect,l=c.clientRect,u=a>s?1:-1;this._previousSwap.drag=c.drag,this._previousSwap.delta=o?n.x:n.y;const d=this._getItemOffsetPx(h,l,u),f=this._getSiblingOffsetPx(a,r,u),g=r.slice();!function(t,e,i){const n=F(e,t.length-1),r=F(i,t.length-1);if(n===r)return;const s=t[n],o=r<n?-1:1;for(let a=n;a!==r;a+=o)t[a]=t[a+o];t[r]=s}(r,a,s),this.sorted.next({previousIndex:a,currentIndex:s,container:this,item:t}),r.forEach((e,i)=>{if(g[i]===e)return;const n=e.drag===t,r=n?d:f,s=n?t.getPlaceholderElement():e.drag.getRootElement();e.offset+=r,o?(s.style.transform=`translate3d(${Math.round(e.offset)}px, 0, 0)`,x(e.clientRect,0,r)):(s.style.transform=`translate3d(0, ${Math.round(e.offset)}px, 0)`,x(e.clientRect,r,0))})}_startScrollingIfNecessary(t,e){if(this.autoScrollDisabled)return;let i,n=0,r=0;if(this._parentPositions.positions.forEach((s,o)=>{o!==this._document&&s.clientRect&&!i&&D(s.clientRect,.05,t,e)&&([n,r]=function(t,e,i,n){const r=z(e,n),s=q(e,i);let o=0,a=0;if(r){const e=t.scrollTop;1===r?e>0&&(o=1):t.scrollHeight-e>t.clientHeight&&(o=2)}if(s){const e=t.scrollLeft;1===s?e>0&&(a=1):t.scrollWidth-e>t.clientWidth&&(a=2)}return[o,a]}(o,s.clientRect,t,e),(n||r)&&(i=o))}),!n&&!r){const{width:s,height:o}=this._viewportRuler.getViewportSize(),a={width:s,height:o,top:0,right:s,bottom:o,left:0};n=z(a,e),r=q(a,t),i=window}!i||n===this._verticalScrollDirection&&r===this._horizontalScrollDirection&&i===this._scrollNode||(this._verticalScrollDirection=n,this._horizontalScrollDirection=r,this._scrollNode=i,(n||r)&&i?this._ngZone.runOutsideAngular(this._startScrollInterval):this._stopScrolling())}_stopScrolling(){this._stopScrollTimers.next()}_cacheParentPositions(){const t=Object(a.e)(this.element);this._parentPositions.cache(this._scrollableElements),this._clientRect=this._parentPositions.positions.get(t).clientRect}_cacheItemPositions(){const t="horizontal"===this._orientation;this._itemPositions=this._activeDraggables.map(t=>{const e=t.getVisibleElement();return{drag:t,offset:0,clientRect:w(e)}}).sort((e,i)=>t?e.clientRect.left-i.clientRect.left:e.clientRect.top-i.clientRect.top)}_reset(){this._isDragging=!1;const t=Object(a.e)(this.element).style;t.scrollSnapType=t.msScrollSnapType=this._initialScrollSnap,this._activeDraggables.forEach(t=>{const e=t.getRootElement();e&&(e.style.transform="")}),this._siblings.forEach(t=>t._stopReceiving(this)),this._activeDraggables=[],this._itemPositions=[],this._previousSwap.drag=null,this._previousSwap.delta=0,this._stopScrolling(),this._viewportScrollSubscription.unsubscribe(),this._parentPositions.clear()}_getSiblingOffsetPx(t,e,i){const n="horizontal"===this._orientation,r=e[t].clientRect,s=e[t+-1*i];let o=r[n?"width":"height"]*i;if(s){const t=n?"left":"top",e=n?"right":"bottom";-1===i?o-=s.clientRect[t]-r[e]:o+=r[t]-s.clientRect[e]}return o}_getItemOffsetPx(t,e,i){const n="horizontal"===this._orientation;let r=n?e.left-t.left:e.top-t.top;return-1===i&&(r+=n?e.width-t.width:e.height-t.height),r}_shouldEnterAsFirstChild(t,e){if(!this._activeDraggables.length)return!1;const i=this._itemPositions,n="horizontal"===this._orientation;if(i[0].drag!==this._activeDraggables[0]){const r=i[i.length-1].clientRect;return n?t>=r.right:e>=r.bottom}{const r=i[0].clientRect;return n?t<=r.left:e<=r.top}}_getItemIndexFromPointerPosition(t,e,i,n){const r="horizontal"===this._orientation;return j(this._itemPositions,({drag:s,clientRect:o},a,c)=>{if(s===t)return c.length<2;if(n){const t=r?n.x:n.y;if(s===this._previousSwap.drag&&t===this._previousSwap.delta)return!1}return r?e>=Math.floor(o.left)&&e<Math.floor(o.right):i>=Math.floor(o.top)&&i<Math.floor(o.bottom)})}_cacheItems(){this._activeDraggables=this._draggables.slice(),this._cacheItemPositions(),this._cacheParentPositions()}_isOverContainer(t,e){return S(this._clientRect,t,e)}_getSiblingContainerFromPosition(t,e,i){return this._siblings.find(n=>n._canReceive(t,e,i))}_canReceive(t,e,i){if(!S(this._clientRect,e,i)||!this.enterPredicate(t,this))return!1;const n=this._getShadowRoot().elementFromPoint(e,i);if(!n)return!1;const r=Object(a.e)(this.element);return n===r||r.contains(n)}_startReceiving(t){const e=this._activeSiblings;e.has(t)||(e.add(t),this._cacheParentPositions(),this._listenToScrollEvents())}_stopReceiving(t){this._activeSiblings.delete(t),this._viewportScrollSubscription.unsubscribe()}_listenToScrollEvents(){this._viewportScrollSubscription=this._dragDropRegistry.scroll.subscribe(t=>{if(this.isDragging()){const e=this._parentPositions.handleScroll(t);e&&(this._itemPositions.forEach(({clientRect:t})=>{x(t,e.top,e.left)}),this._itemPositions.forEach(({drag:t})=>{this._dragDropRegistry.isDragging(t)&&t._sortFromLastPointerPosition()}))}else this.isReceiving()&&this._cacheParentPositions()})}_getShadowRoot(){if(!this._cachedShadowRoot){const t=Object(o.c)(Object(a.e)(this.element));this._cachedShadowRoot=t||this._document}return this._cachedShadowRoot}}function j(t,e){for(let i=0;i<t.length;i++)if(e(t[i],i,t))return i;return-1}function U(t,e){t===window?t.scrollBy(0,e):t.scrollTop+=e}function B(t,e){t===window?t.scrollBy(e,0):t.scrollLeft+=e}function z(t,e){const{top:i,bottom:n,height:r}=t,s=.05*r;return e>=i-s&&e<=i+s?1:e>=n-s&&e<=n+s?2:0}function q(t,e){const{left:i,right:n,width:r}=t,s=.05*r;return e>=i-s&&e<=i+s?1:e>=n-s&&e<=n+s?2:0}const H=Object(o.f)({passive:!1,capture:!0});let Y=(()=>{class t{constructor(t,e){this._ngZone=t,this._dropInstances=new Set,this._dragInstances=new Set,this._activeDragInstances=new Set,this._globalListeners=new Map,this.pointerMove=new c.a,this.pointerUp=new c.a,this.scroll=new c.a,this._preventDefaultWhileDragging=t=>{this._activeDragInstances.size&&t.preventDefault()},this._document=e}registerDropContainer(t){this._dropInstances.has(t)||this._dropInstances.add(t)}registerDragItem(t){this._dragInstances.add(t),1===this._dragInstances.size&&this._ngZone.runOutsideAngular(()=>{this._document.addEventListener("touchmove",this._preventDefaultWhileDragging,H)})}removeDropContainer(t){this._dropInstances.delete(t)}removeDragItem(t){this._dragInstances.delete(t),this.stopDragging(t),0===this._dragInstances.size&&this._document.removeEventListener("touchmove",this._preventDefaultWhileDragging,H)}startDragging(t,e){if(!this._activeDragInstances.has(t)&&(this._activeDragInstances.add(t),1===this._activeDragInstances.size)){const t=e.type.startsWith("touch"),i=t?"touchend":"mouseup";this._globalListeners.set(t?"touchmove":"mousemove",{handler:t=>this.pointerMove.next(t),options:H}).set(i,{handler:t=>this.pointerUp.next(t),options:!0}).set("scroll",{handler:t=>this.scroll.next(t),options:!0}).set("selectstart",{handler:this._preventDefaultWhileDragging,options:H}),this._ngZone.runOutsideAngular(()=>{this._globalListeners.forEach((t,e)=>{this._document.addEventListener(e,t.handler,t.options)})})}}stopDragging(t){this._activeDragInstances.delete(t),0===this._activeDragInstances.size&&this._clearGlobalListeners()}isDragging(t){return this._activeDragInstances.has(t)}ngOnDestroy(){this._dragInstances.forEach(t=>this.removeDragItem(t)),this._dropInstances.forEach(t=>this.removeDropContainer(t)),this._clearGlobalListeners(),this.pointerMove.complete(),this.pointerUp.complete()}_clearGlobalListeners(){this._globalListeners.forEach((t,e)=>{this._document.removeEventListener(e,t.handler,t.options)}),this._globalListeners.clear()}}return t.\u0275fac=function(e){return new(e||t)(n.dc(n.B),n.dc(r.e))},t.\u0275prov=Object(n.Ob)({factory:function(){return new t(Object(n.dc)(n.B),Object(n.dc)(r.e))},token:t,providedIn:"root"}),t})();const $={dragStartThreshold:5,pointerDirectionChangeThreshold:5};let X=(()=>{class t{constructor(t,e,i,n){this._document=t,this._ngZone=e,this._viewportRuler=i,this._dragDropRegistry=n}createDrag(t,e=$){return new I(t,e,this._document,this._ngZone,this._viewportRuler,this._dragDropRegistry)}createDropList(t){return new L(t,this._dragDropRegistry,this._document,this._ngZone,this._viewportRuler)}}return t.\u0275fac=function(e){return new(e||t)(n.dc(r.e),n.dc(n.B),n.dc(s.h),n.dc(Y))},t.\u0275prov=Object(n.Ob)({factory:function(){return new t(Object(n.dc)(r.e),Object(n.dc)(n.B),Object(n.dc)(s.h),Object(n.dc)(Y))},token:t,providedIn:"root"}),t})(),G=(()=>{class t{}return t.\u0275mod=n.Qb({type:t}),t.\u0275inj=n.Pb({factory:function(e){return new(e||t)},providers:[X],imports:[s.c]}),t})();var V=i("bSwM"),W=i("7EHt"),Z=i("NFeN"),J=i("1jcm"),K=i("wZkO"),Q=i("9Abt"),tt=i("K9v4"),et=i("GDd0"),it=i("b5tu"),nt=i("PEjJ");class rt{constructor(t){this.visited=!1,this.showLink=!1,this.source=t.parentUID?t.parentUID:t.uid,this.target=t.uid,this.relationship=t.navigation,this.uid=t.uid,this.navigatioDisplayName=t.navigationDisplayName}}class st{constructor(t,e,i,n,r,s,o,a,c,h,l,u,d,f,g){this.name=t,this.icon=e,this.obid=i,this.type=n,this.description=r,this.uid=s,this.navigation=o,this.navigationDisplayName=a,this.parentUID=c,this.classDefDisplayName=h,this.documentLevelAnnotation=l,this.endInterface=u,this.columnSet=d,this.link=f,this.parentOBID=g}}var ot=i("MCLT"),at=function(t){return t.e1ClassdefDisplayName="CLASS_DEF_NAME",t.e1RelatioshipRoleName="ROLE_NAME",t}({});class ct{constructor(t,e,i,n){this.data=t,this.showName=e,this.typeDisplayName=i,this.uid="",this.relationship="",this.obid="",this.expanded=!1,this.description="",this.type="",this.icon="",this.showViewFileIcon=!1,this.name=[],this.children=[],this.visited=!1,this.highlight="white",this.uid=t.uid,this.relationship=t.navigation,this.parent=n&&n.get(t.parentUID)&&n.get(t.parentUID).data,this.obid=t.obid,this.description=t.description,this.type=t.type,this.name=this.groupName(t.name?t.name:""),this.icon=t.icon,this.showViewFileIcon=t.showViewFileIcon,this.smartClassDefDisplayName=this.groupName(this.data.classDefDisplayName),this.smartnavigationDisplayName=this.groupName(this.data.navigationDisplayName||this.data.classDefDisplayName)}get nodeTypeDisplayName(){switch(this.typeDisplayName.value){case at.e1RelatioshipRoleName:return this.smartnavigationDisplayName;default:return this.smartClassDefDisplayName}}groupName(t,e=!1,i=18){if(Object(ot.isArray)(t)&&t.length)return t;let n=0;const r=[];return t.trim().split(" ").forEach(t=>{if(t=e?this.capitalize(t):t,(t+=" ").length>i){let e=0,s=0;do{const o=r[n]?r[n]:"";let a;o&&o.length?(a=o+t.substr(s,i-o.length),s=i-o.length):(a=t.substr(s,i),s+=i),r[n]=a,e++,t.substr(e*i).length&&n++}while(t.substr(e*i).length)}else{const e=r[n],s=e?e+t:t;s.length<=i?r[n]=s:(n++,r[n]=r[n]?r[n]+=t:t)}}),r}capitalize(t){return t.replace(/[a-zA-Z]/,t=>t.toUpperCase())}}let ht=(()=>{class t{constructor(){this.nodeData=[],this.classDisplayName="Class@Intergraph.SPF.Server.API.Model.ClassDisplayNameAnnotation",this.classAnnotation="Class@Intergraph.SPF.Server.API.Model.DocumentLevelAnnotation",this.rootUID="",this.rootOBID=""}convertToDataNode(t,e=""){this.nodeData=[],this.rootUID=e||this.guid,this.rootOBID=t[0][0].OBID,this.nodeData.push(new st(t[0][0].Name,t[0][0].icon,t[0][0].OBID,t[0][0].Class,t[0][0].CI_Description,this.rootUID,"Classified Item","","",t[0][0][this.classDisplayName],t[0][0][this.classAnnotation])),t[0][0].docVersionOBID&&(this.nodeData[0].docVersionOBID=t[0][0].docVersionOBID);for(const i of t.slice(1))this.processGridAndDataNodes(i);return this.nodeData}convertToGraphNode(t,e,i,n){return new ct(t,e,i,n)}convertToLink(t){return new rt(t)}get guid(){return Math.random().toString(36).replace("0.","")}processGridAndDataNodes(t){const e=this.getParentNodeUID(t,t[0].navigationName,t[0].navigation,t[0].count);t[0].count<4&&t[0].OBID!==this.rootOBID&&t.forEach(i=>{this.addNodeData(i,t[0].navigation,e,t[0].navigationName)})}addNodeData(t,e,i,n,r=this.guid){this.nodeData.push(new st(t.Name,t.icon,t.OBID,t.Class,t.CI_Description,r,e,n,i,t[this.classDisplayName],t[this.classAnnotation],"","","",this.rootOBID))}getParentNodeUID(t,e,i,n){if(Array.isArray(t)&&(t.length>1||n>3)){const r=this.guid;return this.enterGridNode(e,n.toString(),t[0],i,this.rootUID,r),r}return this.rootUID}enterGridNode(t,e,i,n,r,s){this.nodeData.push(new st(t,"","","GRID_NODE",e,s,n,t,r,t,"",i.endInterface,i.columnSet,i.link,i.parentOBID))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})(),lt=(()=>{class t{constructor(t,e){this.nodeConvertService=t,this.dataRefreshService=e,this.dataRefreshRequired=new c.a,this.nodeMap=new Map,this.infomapDataUpdated$=this.dataRefreshService.itemsRemoved$.pipe(Object(f.a)(t=>{let e;return this.nodeMap.forEach((i,n)=>{t.indexOf(i.data.obid)>-1&&(e=i.data.obid)}),e}))}addNodes(t,e,i){t.forEach(t=>{this.nodeMap.has(t.uid)||this.nodeMap.set(t.uid,{data:this.nodeConvertService.convertToGraphNode(t,e,i,this.nodeMap),link:this.nodeConvertService.convertToLink(t)})}),this.mapChildReferences(t[0].uid,t.slice(1)),this.mapNewRootNodeData(t[0],this.nodeMap.get(t[0].uid).data)}destroy(){this.nodeMap.clear()}getNodeByUID(t){return this.nodeMap.get(t)}findUIDbyOBID(t){let e;return this.nodeMap.forEach((i,n)=>{i.data.obid===t&&(e=n)}),e}mapChildReferences(t,e){e.forEach(e=>{this.nodeMap.get(t).data.children.push(this.nodeMap.get(e.uid))})}mapNewRootNodeData(t,e){e.showViewFileIcon=t.showViewFileIcon}}return t.\u0275fac=function(e){return new(e||t)(n.dc(ht),n.dc(nt.a))},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})(),ut=(()=>{class t extends Array{constructor(){super(),this.currentIndex=0,this.add=(t,e,i)=>{const n=this[this.currentIndex-1];this.currentIndex<this.length&&this.splice(this.currentIndex,this.length-this.currentIndex),this.push(Object.assign(Object.assign(Object.assign({},n),{[t]:i}),{focused:e,uid:t})),this.currentIndex++},this.getCurrentAndNextState=t=>{const e=this[this.currentIndex-1];return this.currentIndex+=t,{currentState:e,nextState:this[this.currentIndex-1],index:this.currentIndex}},this.destroy=()=>{this.currentIndex=0,this.length=0}}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})();var dt=i("bOdf"),ft=i("Z9D8"),gt=i("LUpO"),pt=i("C4gn"),vt=i("jNCI"),mt=i("UPSG"),bt=i("Ejbi"),_t=i("+eYH"),yt=function(t){return t.enter="[controller] enter new nodes",t.remove="[controller] remove nodes",t.select="[controller] selects node",t.destroy="[controller] empties the graph",t.nodeChangeEvent="[presentation] emits node change events",t.setConfig="[controller] sets config",t.setEmbeddedMode="[controller] sets embedded mode",t.nothing="[controller] do nothing",t}({});class wt{constructor(t){this.payload=t,this.type=yt.enter}}class St{constructor(t){this.payload=t,this.type=yt.remove}}class xt{constructor(t){this.payload=t,this.type=yt.select}}class Dt{constructor(t){this.payload=t,this.type=yt.destroy}}class Ot{constructor(t){this.payload=t,this.type=yt.nodeChangeEvent}}class Mt{constructor(t){this.payload=t,this.type=yt.setConfig}}class Nt{constructor(t){this.payload=t,this.type=yt.setEmbeddedMode}}var It=function(t){return t.clear_sticky="[powerbar] resets node positions",t.zoomToFit="[powerbar] fits data in the screen",t.highlight="[powerbar] toggles highlight mode",t}({}),Tt=function(t){return t[t.undoButton=0]="undoButton",t[t.redoButton=1]="redoButton",t[t.followModeButton=2]="followModeButton",t[t.stickyModeButton=3]="stickyModeButton",t[t.clearHistoryButton=4]="clearHistoryButton",t[t.showLabelButton=5]="showLabelButton",t[t.zoomToFitButton=6]="zoomToFitButton",t}({});class Ct{constructor(t){this.payload=t,this.type=It.clear_sticky}}class Et{constructor(t){this.payload=t,this.type=It.zoomToFit}}var Pt=i("tk/3"),kt=i("5+tZ"),Rt=i("I2fW"),At=i("J7mc"),Ft=i("blvr"),Lt=i("nqum");let jt=(()=>{class t{constructor(t,e,i){this.dataService=t,this.relationshipService=e,this.objectIconService=i,this.reqheaders=new Pt.d}getOdataQuerySettings(t){const e=new Ft.a;return e.pageSize=Settings.application.defaultPageSize,e.page=1,e.endInterface=t.data.endInterface,e.expandFromObjectId=t.data.parentOBID,e.columnSet=t.data.columnSet,t.children.some(i=>{const n=i.data.data;return n.name===t.data.name&&(e.expandFromObjectId=n.obid,!0)}),e.navigation=t.data.navigation,t.data.link&&(e.hasLink=!0),e}getResolvedRelationships(t,e){return this.getNodeExpansions(t,e,this.getRelationships(t,e))}getRelationships(t,e){return this.relationshipService.getNavigationOptions(t,e,!0)}getNodeExpansions(t,e,i){let n=[];return i.pipe(Object(kt.a)(i=>{let r=this.getInitialUrlWithOBIDs(t,i),s=!1;n=i;const o={};i.forEach(t=>{t.count<4&&(s?r+=",":(r+="&$expand=",s=!0),r+=t.navigation+"($count=true)"),o[t.navigation]=t});const a=[];return this.getExpansions(r,e).pipe(Object(f.a)(t=>this.resolveData(t,n,a)),Object(kt.a)(t=>this.objectIconService.getIconNames(a,e).pipe(Object(f.a)(e=>this.mergeIconsIntoNavigations(e,t)))))}))}resolveData(t,e,i){const n=[];return n.push([this.resolveToDocumentVersion(t)]),i.push(n[0][0].OBID),e.forEach(e=>{if(e.count<4)t.forEach(t=>{const r=t[e.navigation];Array.isArray(r)&&r.length>0?(r.forEach(n=>this.mapData(n,e,t.OBID,i)),n.push(r)):r&&r.hasOwnProperty("OBID")&&(this.mapData(r,e,t.OBID,i),n.push([r]))});else{const t={};this.mapData(t,e,e.startingOBID,i),n.push([t])}}),n}resolveToDocumentVersion(t){let e=t[0];if(t.length>1){const i="Class@Intergraph.SPF.Server.API.Model.DocumentLevelAnnotation";t.forEach(t=>{"Version"===t[i]&&(e=t,e.docVersionOBID=t.OBID)})}return e}mapData(t,e,i,n){n.push(t.OBID),t.count=e.count,t.navigation=e.navigation,t.navigationName=e.displayName,t.endInterface=e.endInterface,t.columnSet=e.columnSet,t.link=e.link,t.parentOBID=i}mergeIconsIntoNavigations(t,e){return e.forEach(e=>{e.forEach(e=>this.mapIcon(e,t))}),e}mapIcon(t,e){e.forEach(e=>{e.OBID===t.OBID&&(t.icon=e.IconName)})}getInitialUrlWithOBIDs(t,e){let i=`Objects?$filter=OBID eq '${t}'`;return e&&e.length&&e.forEach(t=>{-1===i.indexOf(t.objectObid)&&(i+=` or OBID eq '${t.objectObid}'`)}),i}getExpansions(t,e){const i=new Pt.d({SPFResolveDocumentsToVersion:"false",Prefer:'odata.include-annotations="*"'});return this.dataService.get(t,e,!1,"",i)}}return t.\u0275fac=function(e){return new(e||t)(n.dc(At.a),n.dc(Lt.a),n.dc(Rt.a))},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})();var Ut=i("4B5/"),Bt=i("6JPj");let zt=(()=>{class t{constructor(t,e){this.actionMenuProvider=t,this.contentMenuService=e}loadActionsMenu(t,e=!1){const i=!this.actionMenuProvider.getItems().find(e=>e.obid===t.obid);i&&(this.actionMenuProvider.clearItems(),this.actionMenuProvider.addItem(t)),e&&this.contentMenuService.isActionsMenuOpen()&&!i?this.contentMenuService.closeContentMenu():e&&!this.contentMenuService.isActionsMenuOpen()&&this.contentMenuService.showActionsMenu(!1)}destroy(){this.actionMenuProvider.clearAndCloseActionsMenu()}}return t.\u0275fac=function(e){return new(e||t)(n.dc(Ut.a),n.dc(Bt.a))},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})();var qt=i("2Vo4"),Ht=i("pLZG"),Yt=i("vOvS"),$t=i("tqyv"),Xt=i("XpAN");class Gt{constructor(t){this.value=t}}var Vt=i("LRne"),Wt=i("JIr8");let Zt=(()=>{class t{constructor(t,e,i){this.infomapDataService=t,this.nodeConversion=e,this.exceptionService=i}getDataNodes(t,e,i){return this.infomapDataService.getResolvedRelationships(t,i).pipe(Object(f.a)(t=>this.nodeConversion.convertToDataNode(t,e)),Object(Wt.a)(t=>(this.exceptionService.handleException(t),Object(Vt.a)(void 0))))}}return t.\u0275fac=function(e){return new(e||t)(n.dc(jt),n.dc(ht),n.dc(gt.a))},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})(),Jt=(()=>{class t{constructor(t,e,i,n){this.extensionsService=t,this.viewNativeDataService=i,this.iconService=n,this.config="",this.embedded=!1,this.nodeTypeDisplay=new Gt(at.e1ClassdefDisplayName),this.nodesClickAction=new Gt("expand"),this.showLabel=new Gt(!0),this.requestNodes$=new qt.a(void 0),this.nodes$=this.requestNodes$.pipe(Object(Ht.a)(t=>!!t),Object(v.a)(t=>this.extensionsService.getDataNodes(t.obid,t.uid,this.config).pipe(Object(g.a)(1))),Object(v.a)(t=>this.viewNativeDataService.getFileViewType(t[0].obid,this.config).pipe(Object(g.a)(1),Object(f.a)(e=>(t[0].showViewFileIcon=e!==Yt.a.INVALID,t)))),Object(f.a)(t=>{for(const e of t)e.icon=this.iconService.getIconName(e.icon);return t})),this.checkpoint$=e}}return t.\u0275fac=function(e){return new(e||t)(n.dc(Zt),n.dc(ut),n.dc($t.a),n.dc(Xt.a))},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})(),Kt=(()=>{class t{constructor(t){this.state=t}dispatch(t){this.executeAction(t)}get(t){return this.state[t]}executeAction(t){switch(t.type){case It.highlight:this.get("nodesClickAction").value=t.payload?"highlight":"expand";break;case yt.setConfig:this.state.config=t.payload;break;case yt.setEmbeddedMode:this.state.embedded=t.payload,this.get("nodesClickAction").value=t.payload?"routeToInfomap":"expand"}}}return t.\u0275fac=function(e){return new(e||t)(n.dc(Jt))},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})();var Qt=i("tyNb");let te=(()=>{class t{constructor(t,e,i,n,r,s,o,a,h,l,u){this.cacheService=t,this.store=e,this.actionsMenuService=i,this.navigationService=n,this.router=r,this.location=s,this.infomapDataService=o,this.modalService=a,this.sdaTranslateService=h,this.featureSetNavigationService=l,this.exceptionService=u,this.initialised=!0,this.loaded=!0,this.viewActions$=new c.a,this.updatePowerBarButtons=new c.a,this.isSingleModeActive=new Gt(!0),this.focusedOBID="",this.focusedUID="INITIAL_UID",this.INFOMAP_RELATIONSHIP_ERROR=this.sdaTranslateService.get("INFOMAP_RELATIONSHIP_ERROR","Retrieving the relationships for this object failed"),this.INFOMAP_CLEAR_HISTORY_CONFIRMATION=this.sdaTranslateService.get("INFOMAP_CLEAR_HISTORY_CONFIRMATION","Are you sure you want to continue?"),this.INFOMAP_CLEAR_HISTORY=this.sdaTranslateService.get("INFOMAP_CLEAR_HISTORY","Clear history"),this.INFOMAP_ROUTING_ERROR=this.sdaTranslateService.get("INFOMAP_ROUTING_ERROR","Unable to route to infomap"),this.cacheService.infomapDataUpdated$.subscribe(t=>{t&&(t===this.focusedOBID?this.modalService.alert(this.sdaTranslateService.get("INFOMAP_ITEM_REMOVED","An object in this info map is no longer available. You will now be redirected away from the Infomap."),this.sdaTranslateService.get("WARNING","Warning")).then(()=>{this.featureSetNavigationService.navigateBackToPreviousRoute()}):(this.destroy(),this.refreshViewData()))}),this.clickAction=this.store.get("nodesClickAction"),this.nodeTypeDisplayName=this.store.get("nodeTypeDisplay"),this.showLabel=this.store.get("showLabel")}set FocusedUID(t){if(t){const e=this.cacheService.getNodeByUID(t).data;this.focusedOBID=e.obid,this.updateUrl(e.obid);const i=new _t.a(e.obid,e.data.name,this.store.get("config"));this.actionsMenuService.loadActionsMenu(i)}this.focusedUID=t}get FocusedUID(){return this.focusedUID}getFocusedNode(t=this.FocusedUID){return this.cacheService.getNodeByUID(t)}changeNodeProperties(t,e){const i=this.cacheService.getNodeByUID(t).data;Object.entries(e).forEach(([t,e])=>i[t]=e)}saveCheckpointState(t,e={},i=this.FocusedUID){this.store.get("embedded")||(this.store.get("checkpoint$").add(t,i,e),this.checkButtonsDisabledState())}focusAndExpandNode(t){t.expanded?this.FocusedUID!==t.uid&&(t.visited?this.loadData(t.uid,new xt,{}):(this.loadData(t.uid,new wt({current:"",focused:t.uid}),{visited:!0}),this.changeNodeProperties(t.uid,{expanded:!0,visited:!0}))):(this.requestNewNodes(t.obid,t.uid),this.loaded=!1)}cacheNodes(t){this.cacheService.addNodes(t,this.showLabel,this.nodeTypeDisplayName)}loadData(t,e,i){this.FocusedUID=t,this.saveCheckpointState(t,i,t),this.viewActions$.next(e)}routeToInfomap(t,e,i="/infomap-viewer"){e&&(this.navigationService.requestOBID=e),this.navigate("/infomap-viewer",{obid:t},this.INFOMAP_ROUTING_ERROR)}updateUrl(t){if(t&&!this.store.get("embedded")){const e=this.router.parseUrl(this.router.url),i=e.root.children.primary.segments;Object.assign(i[i.length-1].parameters,{obid:t});const n=this.router.serializeUrl(e);this.location.replaceState(n)}}resetInitiliseData(){this.focusedUID="INITIAL_UID",this.initialised=!1}gridNodeSelected(t){this.updateUrl(t.parent.obid);const e=this.infomapDataService.getOdataQuerySettings(t);this.navigate("/results",{queryFilter:JSON.stringify(e),requestConfigOnly:JSON.stringify(!0)},this.INFOMAP_RELATIONSHIP_ERROR,"getRelationships")}requestNodes(t){return this.navigationService.requestOBID?this.requestNewNodes(this.navigationService.requestOBID).pipe(Object(dt.a)(e=>(e.length&&(this.focusedUID=e[0].uid,this.cacheNodes(e),this.changeNodeProperties(e[0].uid,{expanded:!0,visited:!0}),this.saveCheckpointState(e[0].uid,{visited:!0},e[0].uid)),this.clearNavigationHistory(),this.requestNewNodes(t,this.cacheService.findUIDbyOBID(t))))):this.requestNewNodes(t)}destroy(){this.store.get("checkpoint$").destroy(),this.cacheService.destroy(),this.actionsMenuService.destroy(),this.resetInitiliseData()}clearHistoryClicked(){this.modalService.confirm(this.INFOMAP_CLEAR_HISTORY,this.INFOMAP_CLEAR_HISTORY_CONFIRMATION).then(t=>{t&&(this.destroy(),this.refreshViewData())})}disableButtonsInEmbeddedMode(){const t=this.store.get("embedded");this.updatePowerBarButtons.next([{index:Tt.clearHistoryButton,prop:"isDisabled",value:t},{index:Tt.followModeButton,prop:"isDisabled",value:t}])}checkButtonsDisabledState(){const t=this.store.get("checkpoint$").currentIndex>1,e=this.store.get("checkpoint$").currentIndex<this.store.get("checkpoint$").length;this.updatePowerBarButtons.next([{index:Tt.undoButton,prop:"isDisabled",value:!t},{index:Tt.clearHistoryButton,prop:"isDisabled",value:!t&&!e},{index:Tt.redoButton,prop:"isDisabled",value:!e}])}refreshViewData(){this.loaded=!1,this.viewActions$.next(new Dt),this.requestNewNodes(this.focusedOBID)}navigate(t,e,i,n){e.config=JSON.stringify([this.store.get("config")]),this.router.navigate([t,e]).catch(t=>{const e=new ft.a(t,i,"InfomapViewerComponent",n);this.exceptionService.handleException(e)})}requestNewNodes(t,e=""){return this.store.get("requestNodes$").next({obid:t,uid:e}),this.store.get("nodes$")}clearNavigationHistory(){this.navigationService.requestOBID=""}}return t.\u0275fac=function(e){return new(e||t)(n.dc(lt),n.dc(Kt),n.dc(zt),n.dc(mt.a),n.dc(Qt.g),n.dc(r.n),n.dc(jt),n.dc(vt.a),n.dc(bt.a),n.dc(pt.a),n.dc(gt.a))},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})();var ee=i("zewe"),ie=i("Qqho"),ne=i("oT+2"),re=i("dEBh"),se=i("JVCe");let oe=(()=>{class t{constructor(t,e,i,n,r,s,o,a,c,h){this.actionsMenu=t,this.viewNativeDataService=e,this.objectDetailsService=i,this.docResolverService=n,this.store=r,this.componentFactoryResolver=s,this.injector=o,this.windowService=a,this.sdaTranslateService=c,this.filePickerService=h,this.separatorPos={x1:-99,y1:0,x2:119,y2:0},this.ACTIONS_MENU_TITLE=this.sdaTranslateService.get("ACTIONS_MENU_TITLE","Actions"),this.VIEW_FILES_TITLE=this.sdaTranslateService.get("INFOMAP_VIEW_FILES","View File"),this.DETAILS_FORM_TITLE=this.sdaTranslateService.get("INFOMAP_DETAILS_FORM","Details"),this.SELECT_DOCUMENT=this.sdaTranslateService.get("SELECT_DOCUMENT","Select a Document"),this.DOCUMENT=this.sdaTranslateService.get("DOCUMENT","Document"),this.isDeviceMobile=!1,this.icons=[{iconPath:"list",title:this.ACTIONS_MENU_TITLE,width:20,height:20,show:"block",x:-60,y:10},{iconPath:"view",title:this.VIEW_FILES_TITLE,width:20,height:20,show:"none",x:0,y:10},{iconPath:"expand",title:this.DETAILS_FORM_TITLE,width:20,height:20,show:"block",x:60,y:10}],this.isDeviceMobile=this.windowService.isDeviceMobile(),this.isDeviceMobile&&this.updateMainMenuOnTablet()}menuClicked(t,e){switch(t){case 0:const t=new _t.a(e.obid,e.name.join(""),this.store.get("config"));this.actionsMenu.loadActionsMenu(t,!0);break;case 1:this.getResolvedViewFilesOBID(e,this.store.get("config")).pipe(Object(g.a)(1)).subscribe(t=>{t&&this.viewNativeDataService.viewFile(t,this.store.get("config"),!0)});break;case 2:const i=new _t.a(e.obid,e.name.join(""),this.store.get("config"));this.objectDetailsService.showObjectDetailsModal(this.componentFactoryResolver,this.injector,i)}}updateMainMenuOnTablet(){for(let t=0;t<this.icons.length;t++)this.icons[t].width=30,this.icons[t].height=30,this.icons[t].x=65*t-70,this.icons[t].y=0;this.separatorPos.y1=-10,this.separatorPos.y2=-10}getResolvedViewFilesOBID(t,e){let i="";return"Master"===t.data.documentLevelAnnotation?i="EDG_LatestRevisions":"Revision"===t.data.documentLevelAnnotation&&(i="EDG_LatestVersion"),i?this.docResolverService.getDocVersionOBIDFromEdgDef(t.obid,i,e,"CS_InfoMapSelectRevision").pipe(Object(v.a)(e=>e.length<2?Object(Vt.a)(e):this.filePickerService.selectFiles(this.componentFactoryResolver,this.injector,{OBID:t.obid,[t.data.classDefDisplayName]:t.data.name},e,!0,!0,!0,this.DOCUMENT.toLowerCase(),this.SELECT_DOCUMENT,ie.a.View)),Object(f.a)(t=>t&&t.length&&t[0].OBID)):Object(Vt.a)(t.obid)}}return t.\u0275fac=function(e){return new(e||t)(n.dc(zt),n.dc($t.a),n.dc(ee.a),n.dc(se.a),n.dc(Kt),n.dc(n.j),n.dc(n.s),n.dc(re.a),n.dc(bt.a),n.dc(ne.a))},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})();var ae=i("ti2P");class ce{constructor(t){this.focusedUID=t}}var he=function(t){return t.remove="[stack] removes nodes on undo event",t.enter="[stack] adds nodes on redo event",t.highlight="[stack] highlights nodes on redo event",t.nothing="[stack] does nothiing",t}({});class le{constructor(t=!1){this.payload=t,this.type=he.remove}}class ue{constructor(t=!0){this.payload=t,this.type=he.enter}}class de{constructor(t="#ffffff"){this.payload=t,this.type=he.highlight}}class fe{constructor(t){this.payload=t,this.type=he.nothing}}let ge=(()=>{class t{constructor(){this.undo={visited:(t,e)=>t&&!e?new le:new fe,highlight:(t,e)=>e?new de(e):new de},this.redo={visited:(t,e)=>!t&&e?new ue:new fe,highlight:(t,e)=>e?new de(e):new de}}getActions(t,e,i,n){const r={};return Object.keys(n).forEach(n=>{const s=this[i][n](e[n],t[e.uid]&&t[e.uid][n]);r[s.type]=s}),r}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})(),pe=(()=>{class t{constructor(t,e,i){this.graphStateService=t,this.store=e,this.operations=i,this.isSelectActionNeeded=!0}moveCheckPointHead(t){if(t){const e=this.store.get("checkpoint$").getCurrentAndNextState(t);let i,n;-1===t?(i=e.currentState,n="undo"):(i=e.nextState,n="redo");const r=this.getActionStack(i,e.nextState,n);this.executeStack(r)}this.graphStateService.checkButtonsDisabledState()}executeStack(t){this.isSelectActionNeeded=!0,this.graphStateService.FocusedUID=t.focusedUID,Object.entries(t.actions).forEach(([e,i])=>this.executeActions(e,i.payload,t.uid,t.focusedUID)),this.isSelectActionNeeded&&this.graphStateService.viewActions$.next(new xt)}getActionStack(t,e,i){const n=new ce(e.focused);return n.uid=t.uid,n.actions=this.operations.getActions(e,this.graphStateService.getFocusedNode(t.uid).data,i,t[t.uid]),n}executeActions(t,e,i,n){switch(t){case he.highlight:this.graphStateService.changeNodeProperties(i,{highlight:e}),this.isSelectActionNeeded=!1;break;case he.remove:this.graphStateService.changeNodeProperties(i,{visited:e}),this.isSelectActionNeeded=!1,this.graphStateService.viewActions$.next(new St({current:i,focused:n}));break;case he.enter:this.graphStateService.changeNodeProperties(i,{visited:e}),this.isSelectActionNeeded=!1,this.graphStateService.viewActions$.next(new wt({current:"",focused:i}))}}}return t.\u0275fac=function(e){return new(e||t)(n.dc(te),n.dc(Kt),n.dc(ge))},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})(),ve=(()=>{class t{constructor(t,e,i){this.undoService=t,this.sdaTranslateService=e,this.graphControlService=i,this.singleModeWindowActive=!0,this.showLabel=!0,this.UNDO=this.sdaTranslateService.get("INFOMAP_UNDO","Undo"),this.REDO=this.sdaTranslateService.get("INFOMAP_REDO","Redo"),this.INFOMAP_FOLLOW_MODE=this.sdaTranslateService.get("INFOMAP_FOLLOW_MODE","Switch to follow mode"),this.INFOMAP_SINGLE_MODE=this.sdaTranslateService.get("INFOMAP_SINGLE_MODE","Switch to single mode"),this.INFOMAP_STICKY_MODE=this.sdaTranslateService.get("INFOMAP_STICKY_MODE","Reset node positions"),this.INFOMAP_CLEAR_HISTORY=this.sdaTranslateService.get("INFOMAP_CLEAR_HISTORY","Clear history"),this.INFOMAP_SHOW_NAMES=this.sdaTranslateService.get("INFOMAP_SHOW_NAMES","Show node names"),this.INFOMAP_HIDE_NAMES=this.sdaTranslateService.get("INFOMAP_HIDE_NAMES","Hide node names"),this.INFOMAP_ZOOM_TO_FIT=this.sdaTranslateService.get("INFOMAP_ZOOM_TO_FIT","Zoom to fit"),this.subscriptions=new h.a,this.leftPowerBarButtons=[],this.subscriptions.add(this.graphControlService.updatePowerBarButtons.subscribe(t=>this.updateButtons(t)))}setUpPowerBar(){const t=new ae.a(()=>this.undo(),"","","undo",void 0,!0);t.tooltip=this.UNDO;const e=new ae.a(()=>this.redo(),"","","redo",void 0,!0);e.tooltip=this.REDO;const i=new ae.a(()=>this.toggleMode(),"",void 0,this.singleModeWindowActive?"follow-mode":"single-mode",void 0,!0);i.tooltip=this.singleModeWindowActive?this.INFOMAP_FOLLOW_MODE:this.INFOMAP_SINGLE_MODE;const n=new ae.a(()=>this.resetNodePositions(),"","","sticky");n.tooltip=this.INFOMAP_STICKY_MODE;const r=new ae.a(()=>this.clearHistory(),"","","clear-history");r.tooltip=this.INFOMAP_CLEAR_HISTORY;const s=new ae.a(()=>this.toggleDisplayNames(),"",void 0,this.showLabel?"hide-name":"show-name");s.tooltip=this.showLabel?this.INFOMAP_HIDE_NAMES:this.INFOMAP_SHOW_NAMES;const o=new ae.a(()=>this.zoomToFit(),"","","zoom-to-fit");return o.tooltip=this.INFOMAP_ZOOM_TO_FIT,this.leftPowerBarButtons=[t,e,i,n,r,s,o],this.leftPowerBarButtons}undo(){this.undoService.moveCheckPointHead(-1)}redo(){this.undoService.moveCheckPointHead(1)}toggleMode(){this.singleModeWindowActive=!this.singleModeWindowActive,this.graphControlService.isSingleModeActive.value=this.singleModeWindowActive,this.graphControlService.updatePowerBarButtons.next([{index:Tt.followModeButton,prop:"matIcon",value:this.singleModeWindowActive?"follow-mode":"single-mode"},{index:Tt.followModeButton,prop:"tooltip",value:this.singleModeWindowActive?this.INFOMAP_FOLLOW_MODE:this.INFOMAP_SINGLE_MODE}])}resetNodePositions(){this.graphControlService.viewActions$.next(new Ct(this.selectResponseChildName()))}clearHistory(){this.graphControlService.clearHistoryClicked()}toggleDisplayNames(){this.showLabel=!this.showLabel,this.graphControlService.showLabel.value=this.showLabel,this.graphControlService.updatePowerBarButtons.next([{index:Tt.showLabelButton,prop:"matIcon",value:this.showLabel?"hide-name":"show-name"},{index:Tt.showLabelButton,prop:"tooltip",value:this.showLabel?this.INFOMAP_HIDE_NAMES:this.INFOMAP_SHOW_NAMES}])}zoomToFit(){this.graphControlService.viewActions$.next(new Et(this.selectResponseChildName()))}updateButtons(t){t.forEach(t=>this.leftPowerBarButtons[t.index][t.prop]=t.value)}selectResponseChildName(){return this.singleModeWindowActive?"SINGLE_MODE":"MULTI_MODE"}}return t.\u0275fac=function(e){return new(e||t)(n.dc(pe),n.dc(bt.a),n.dc(te))},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})();var me,be,_e=function(t,e){return t<e?-1:t>e?1:t>=e?0:NaN},ye=(1===(me=_e).length&&(be=me,me=function(t,e){return _e(be(t),e)}),{left:function(t,e,i,n){for(null==i&&(i=0),null==n&&(n=t.length);i<n;){var r=i+n>>>1;me(t[r],e)<0?i=r+1:n=r}return i},right:function(t,e,i,n){for(null==i&&(i=0),null==n&&(n=t.length);i<n;){var r=i+n>>>1;me(t[r],e)>0?n=r:i=r+1}return i}}).right,we=Math.sqrt(50),Se=Math.sqrt(10),xe=Math.sqrt(2);function De(t,e,i){var n=(e-t)/Math.max(0,i),r=Math.floor(Math.log(n)/Math.LN10),s=n/Math.pow(10,r);return r>=0?(s>=we?10:s>=Se?5:s>=xe?2:1)*Math.pow(10,r):-Math.pow(10,-r)/(s>=we?10:s>=Se?5:s>=xe?2:1)}function Oe(t,e){switch(arguments.length){case 0:break;case 1:this.range(t);break;default:this.range(e).domain(t)}return this}function Me(){}function Ne(t,e){var i=new Me;if(t instanceof Me)t.each((function(t,e){i.set(e,t)}));else if(Array.isArray(t)){var n,r=-1,s=t.length;if(null==e)for(;++r<s;)i.set(r,t[r]);else for(;++r<s;)i.set(e(n=t[r],r,t),n)}else if(t)for(var o in t)i.set(o,t[o]);return i}Me.prototype=Ne.prototype={constructor:Me,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var Ie=Ne;function Te(){}var Ce=Ie.prototype;Te.prototype=(function(t,e){var i=new Te;if(t instanceof Te)t.each((function(t){i.add(t)}));else if(t){var n=-1,r=t.length;if(null==e)for(;++n<r;)i.add(t[n]);else for(;++n<r;)i.add(e(t[n],n,t))}return i}).prototype={constructor:Te,has:Ce.has,add:function(t){return this["$"+(t+="")]=t,this},remove:Ce.remove,clear:Ce.clear,values:Ce.keys,size:Ce.size,empty:Ce.empty,each:Ce.each};var Ee=Array.prototype,Pe=Ee.map,ke=Ee.slice,Re=i("FmoU"),Ae=i("42CK"),Fe=function(t,e){e||(e=[]);var i,n=t?Math.min(e.length,t.length):0,r=e.slice();return function(s){for(i=0;i<n;++i)r[i]=t[i]*(1-s)+e[i]*s;return r}};function Le(t,e){var i,n=e?e.length:0,r=t?Math.min(n,t.length):0,s=new Array(r),o=new Array(n);for(i=0;i<r;++i)s[i]=He(t[i],e[i]);for(;i<n;++i)o[i]=e[i];return function(t){for(i=0;i<r;++i)o[i]=s[i](t);return o}}var je=function(t,e){var i=new Date;return t=+t,e=+e,function(n){return i.setTime(t*(1-n)+e*n),i}},Ue=i("4xfg"),Be=function(t,e){var i,n={},r={};for(i in null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={}),e)i in t?n[i]=He(t[i],e[i]):r[i]=e[i];return function(t){for(i in n)r[i]=n[i](t);return r}},ze=i("kO9b"),qe=i("xpj1"),He=function(t,e){var i,n,r=typeof e;return null==e||"boolean"===r?Object(qe.a)(e):("number"===r?Ue.a:"string"===r?(i=Object(Re.a)(e))?(e=i,Ae.a):ze.a:e instanceof Re.a?Ae.a:e instanceof Date?je:(n=e,!ArrayBuffer.isView(n)||n instanceof DataView?Array.isArray(e)?Le:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Be:Ue.a:Fe))(t,e)},Ye=function(t,e){return t=+t,e=+e,function(i){return Math.round(t*(1-i)+e*i)}},$e=function(t){return+t},Xe=[0,1];function Ge(t){return t}function Ve(t,e){return(e-=t=+t)?function(i){return(i-t)/e}:(i=isNaN(e)?NaN:.5,function(){return i});var i}function We(t){var e,i=t[0],n=t[t.length-1];return i>n&&(e=i,i=n,n=e),function(t){return Math.max(i,Math.min(n,t))}}function Ze(t,e,i){var n=t[0],r=t[1],s=e[0],o=e[1];return r<n?(n=Ve(r,n),s=i(o,s)):(n=Ve(n,r),s=i(s,o)),function(t){return s(n(t))}}function Je(t,e,i){var n=Math.min(t.length,e.length)-1,r=new Array(n),s=new Array(n),o=-1;for(t[n]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++o<n;)r[o]=Ve(t[o],t[o+1]),s[o]=i(e[o],e[o+1]);return function(e){var i=ye(t,e,1,n)-1;return s[i](r[i](e))}}function Ke(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp()).unknown(t.unknown())}function Qe(){var t,e,i,n,r,s,o=Xe,a=Xe,c=He,h=Ge;function l(){return n=Math.min(o.length,a.length)>2?Je:Ze,r=s=null,u}function u(e){return isNaN(e=+e)?i:(r||(r=n(o.map(t),a,c)))(t(h(e)))}return u.invert=function(i){return h(e((s||(s=n(a,o.map(t),Ue.a)))(i)))},u.domain=function(t){return arguments.length?(o=Pe.call(t,$e),h===Ge||(h=We(o)),l()):o.slice()},u.range=function(t){return arguments.length?(a=ke.call(t),l()):a.slice()},u.rangeRound=function(t){return a=ke.call(t),c=Ye,l()},u.clamp=function(t){return arguments.length?(h=t?We(o):Ge,u):h!==Ge},u.interpolate=function(t){return arguments.length?(c=t,l()):c},u.unknown=function(t){return arguments.length?(i=t,u):i},function(i,n){return t=i,e=n,l()}}function ti(t,e){return Qe()(t,e)}var ei=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function ii(t){if(!(e=ei.exec(t)))throw new Error("invalid format: "+t);var e;return new ni({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}function ni(t){this.fill=void 0===t.fill?" ":t.fill+"",this.align=void 0===t.align?">":t.align+"",this.sign=void 0===t.sign?"-":t.sign+"",this.symbol=void 0===t.symbol?"":t.symbol+"",this.zero=!!t.zero,this.width=void 0===t.width?void 0:+t.width,this.comma=!!t.comma,this.precision=void 0===t.precision?void 0:+t.precision,this.trim=!!t.trim,this.type=void 0===t.type?"":t.type+""}ii.prototype=ni.prototype,ni.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(void 0===this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(void 0===this.precision?"":"."+Math.max(0,0|this.precision))+(this.trim?"~":"")+this.type};var ri,si,oi,ai,ci=function(t,e){if((i=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var i,n=t.slice(0,i);return[n.length>1?n[0]+n.slice(2):n,+t.slice(i+1)]},hi=function(t){return(t=ci(Math.abs(t)))?t[1]:NaN},li=function(t,e){var i=ci(t,e);if(!i)return t+"";var n=i[0],r=i[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")},ui={"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return li(100*t,e)},r:li,s:function(t,e){var i=ci(t,e);if(!i)return t+"";var n=i[0],r=i[1],s=r-(ri=3*Math.max(-8,Math.min(8,Math.floor(r/3))))+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+ci(t,Math.max(0,e+s-1))[0]},X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},di=function(t){return t},fi=Array.prototype.map,gi=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];si=function(t){var e,i,n=void 0===t.grouping||void 0===t.thousands?di:(e=fi.call(t.grouping,Number),i=t.thousands+"",function(t,n){for(var r=t.length,s=[],o=0,a=e[0],c=0;r>0&&a>0&&(c+a+1>n&&(a=Math.max(1,n-c)),s.push(t.substring(r-=a,r+a)),!((c+=a+1)>n));)a=e[o=(o+1)%e.length];return s.reverse().join(i)}),r=void 0===t.currency?"":t.currency[0]+"",s=void 0===t.currency?"":t.currency[1]+"",o=void 0===t.decimal?".":t.decimal+"",a=void 0===t.numerals?di:function(t){return function(e){return e.replace(/[0-9]/g,(function(e){return t[+e]}))}}(fi.call(t.numerals,String)),c=void 0===t.percent?"%":t.percent+"",h=void 0===t.minus?"-":t.minus+"",l=void 0===t.nan?"NaN":t.nan+"";function u(t){var e=(t=ii(t)).fill,i=t.align,u=t.sign,d=t.symbol,f=t.zero,g=t.width,p=t.comma,v=t.precision,m=t.trim,b=t.type;"n"===b?(p=!0,b="g"):ui[b]||(void 0===v&&(v=12),m=!0,b="g"),(f||"0"===e&&"="===i)&&(f=!0,e="0",i="=");var _="$"===d?r:"#"===d&&/[boxX]/.test(b)?"0"+b.toLowerCase():"",y="$"===d?s:/[%p]/.test(b)?c:"",w=ui[b],S=/[defgprs%]/.test(b);function x(t){var r,s,c,d=_,x=y;if("c"===b)x=w(t)+x,t="";else{var D=(t=+t)<0||1/t<0;if(t=isNaN(t)?l:w(Math.abs(t),v),m&&(t=function(t){t:for(var e,i=t.length,n=1,r=-1;n<i;++n)switch(t[n]){case".":r=e=n;break;case"0":0===r&&(r=n),e=n;break;default:if(!+t[n])break t;r>0&&(r=0)}return r>0?t.slice(0,r)+t.slice(e+1):t}(t)),D&&0==+t&&"+"!==u&&(D=!1),d=(D?"("===u?u:h:"-"===u||"("===u?"":u)+d,x=("s"===b?gi[8+ri/3]:"")+x+(D&&"("===u?")":""),S)for(r=-1,s=t.length;++r<s;)if(48>(c=t.charCodeAt(r))||c>57){x=(46===c?o+t.slice(r+1):t.slice(r))+x,t=t.slice(0,r);break}}p&&!f&&(t=n(t,1/0));var O=d.length+t.length+x.length,M=O<g?new Array(g-O+1).join(e):"";switch(p&&f&&(t=n(M+t,M.length?g-x.length:1/0),M=""),i){case"<":t=d+t+x+M;break;case"=":t=d+M+t+x;break;case"^":t=M.slice(0,O=M.length>>1)+d+t+x+M.slice(O);break;default:t=M+d+t+x}return a(t)}return v=void 0===v?6:/[gprs]/.test(b)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v)),x.toString=function(){return t+""},x}return{format:u,formatPrefix:function(t,e){var i=u(((t=ii(t)).type="f",t)),n=3*Math.max(-8,Math.min(8,Math.floor(hi(e)/3))),r=Math.pow(10,-n),s=gi[8+n/3];return function(t){return i(r*t)+s}}}}({decimal:".",thousands:",",grouping:[3],currency:["$",""],minus:"-"}),oi=si.format,ai=si.formatPrefix;function pi(t){var e=t.domain;return t.ticks=function(t){var i=e();return function(t,e,i){var n,r,s,o,a=-1;if(i=+i,(t=+t)==(e=+e)&&i>0)return[t];if((n=e<t)&&(r=t,t=e,e=r),0===(o=De(t,e,i))||!isFinite(o))return[];if(o>0)for(t=Math.ceil(t/o),e=Math.floor(e/o),s=new Array(r=Math.ceil(e-t+1));++a<r;)s[a]=(t+a)*o;else for(t=Math.floor(t*o),e=Math.ceil(e*o),s=new Array(r=Math.ceil(t-e+1));++a<r;)s[a]=(t-a)/o;return n&&s.reverse(),s}(i[0],i[i.length-1],null==t?10:t)},t.tickFormat=function(t,i){var n=e();return function(t,e,i,n){var r,s=function(t,e,i){var n=Math.abs(e-t)/Math.max(0,i),r=Math.pow(10,Math.floor(Math.log(n)/Math.LN10)),s=n/r;return s>=we?r*=10:s>=Se?r*=5:s>=xe&&(r*=2),e<t?-r:r}(t,e,i);switch((n=ii(null==n?",f":n)).type){case"s":var o=Math.max(Math.abs(t),Math.abs(e));return null!=n.precision||isNaN(r=function(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(hi(e)/3)))-hi(Math.abs(t)))}(s,o))||(n.precision=r),ai(n,o);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=function(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,hi(e)-hi(t))+1}(s,Math.max(Math.abs(t),Math.abs(e))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=function(t){return Math.max(0,-hi(Math.abs(t)))}(s))||(n.precision=r-2*("%"===n.type))}return oi(n)}(n[0],n[n.length-1],null==t?10:t,i)},t.nice=function(i){null==i&&(i=10);var n,r=e(),s=0,o=r.length-1,a=r[s],c=r[o];return c<a&&(n=a,a=c,c=n,n=s,s=o,o=n),(n=De(a,c,i))>0?n=De(a=Math.floor(a/n)*n,c=Math.ceil(c/n)*n,i):n<0&&(n=De(a=Math.ceil(a*n)/n,c=Math.floor(c*n)/n,i)),n>0?(r[s]=Math.floor(a/n)*n,r[o]=Math.ceil(c/n)*n,e(r)):n<0&&(r[s]=Math.ceil(a*n)/n,r[o]=Math.floor(c*n)/n,e(r)),t},t}function vi(){var t=ti(Ge,Ge);return t.copy=function(){return Ke(t,vi())},Oe.apply(t,arguments),pi(t)}function mi(t){return function(e){return e<0?-Math.pow(-e,t):Math.pow(e,t)}}function bi(t){return t<0?-Math.sqrt(-t):Math.sqrt(t)}function _i(t){return t<0?-t*t:t*t}function yi(t){var e=t(Ge,Ge),i=1;function n(){return 1===i?t(Ge,Ge):.5===i?t(bi,_i):t(mi(i),mi(1/i))}return e.exponent=function(t){return arguments.length?(i=+t,n()):i},pi(e)}function wi(){var t=yi(Qe());return t.copy=function(){return Ke(t,wi()).exponent(t.exponent())},Oe.apply(t,arguments),t}function Si(){return wi.apply(null,arguments).exponent(.5)}var xi=new Date,Di=new Date;function Oi(t,e,i,n){function r(e){return t(e=0===arguments.length?new Date:new Date(+e)),e}return r.floor=function(e){return t(e=new Date(+e)),e},r.ceil=function(i){return t(i=new Date(i-1)),e(i,1),t(i),i},r.round=function(t){var e=r(t),i=r.ceil(t);return t-e<i-t?e:i},r.offset=function(t,i){return e(t=new Date(+t),null==i?1:Math.floor(i)),t},r.range=function(i,n,s){var o,a=[];if(i=r.ceil(i),s=null==s?1:Math.floor(s),!(i<n&&s>0))return a;do{a.push(o=new Date(+i)),e(i,s),t(i)}while(o<i&&i<n);return a},r.filter=function(i){return Oi((function(e){if(e>=e)for(;t(e),!i(e);)e.setTime(e-1)}),(function(t,n){if(t>=t)if(n<0)for(;++n<=0;)for(;e(t,-1),!i(t););else for(;--n>=0;)for(;e(t,1),!i(t););}))},i&&(r.count=function(e,n){return xi.setTime(+e),Di.setTime(+n),t(xi),t(Di),Math.floor(i(xi,Di))},r.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?r.filter(n?function(e){return n(e)%t==0}:function(e){return r.count(0,e)%t==0}):r:null}),r}var Mi=Oi((function(t){t.setMonth(0,1),t.setHours(0,0,0,0)}),(function(t,e){t.setFullYear(t.getFullYear()+e)}),(function(t,e){return e.getFullYear()-t.getFullYear()}),(function(t){return t.getFullYear()}));Mi.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Oi((function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)}),(function(e,i){e.setFullYear(e.getFullYear()+i*t)})):null};var Ni=Mi;function Ii(t){return Oi((function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+7*e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/6048e5}))}Oi((function(t){t.setDate(1),t.setHours(0,0,0,0)}),(function(t,e){t.setMonth(t.getMonth()+e)}),(function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())}),(function(t){return t.getMonth()}));var Ti=Ii(0),Ci=Ii(1),Ei=(Ii(2),Ii(3),Ii(4)),Pi=(Ii(5),Ii(6),Oi((function(t){t.setHours(0,0,0,0)}),(function(t,e){t.setDate(t.getDate()+e)}),(function(t,e){return(e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5}),(function(t){return t.getDate()-1}))),ki=(Oi((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds()-6e4*t.getMinutes())}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getHours()})),Oi((function(t){t.setTime(t-t.getMilliseconds()-1e3*t.getSeconds())}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getMinutes()})),Oi((function(t){t.setTime(t-t.getMilliseconds())}),(function(t,e){t.setTime(+t+1e3*e)}),(function(t,e){return(e-t)/1e3}),(function(t){return t.getUTCSeconds()})),Oi((function(){}),(function(t,e){t.setTime(+t+e)}),(function(t,e){return e-t})));function Ri(t){return Oi((function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+7*e)}),(function(t,e){return(e-t)/6048e5}))}ki.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?Oi((function(e){e.setTime(Math.floor(e/t)*t)}),(function(e,i){e.setTime(+e+i*t)}),(function(e,i){return(i-e)/t})):ki:null};var Ai=Ri(0),Fi=Ri(1),Li=(Ri(2),Ri(3),Ri(4)),ji=(Ri(5),Ri(6),Oi((function(t){t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCDate(t.getUTCDate()+e)}),(function(t,e){return(e-t)/864e5}),(function(t){return t.getUTCDate()-1}))),Ui=Oi((function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)}),(function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()}),(function(t){return t.getUTCFullYear()}));Ui.every=function(t){return isFinite(t=Math.floor(t))&&t>0?Oi((function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)}),(function(e,i){e.setUTCFullYear(e.getUTCFullYear()+i*t)})):null};var Bi=Ui;var zi={"-":"",_:" ",0:"0"},qi=/[\\^$*+?|[\]().{}]/g;function Hi(t,e,i){var n=t<0?"-":"",r=(n?-t:t)+"",s=r.length;return n+(s<i?new Array(i-s+1).join(e)+r:r)}function Yi(t){return t.replace(qi,"\\$&")}function $i(t){return new RegExp("^(?:"+t.map(Yi).join("|")+")","i")}function Xi(t){for(var e={},i=-1,n=t.length;++i<n;)e[t[i].toLowerCase()]=i;return e}function Gi(t,e){return Hi(t.getDate(),e,2)}function Vi(t,e){return Hi(t.getHours(),e,2)}function Wi(t,e){return Hi(t.getHours()%12||12,e,2)}function Zi(t,e){return Hi(1+Pi.count(Ni(t),t),e,3)}function Ji(t,e){return Hi(t.getMilliseconds(),e,3)}function Ki(t,e){return Ji(t,e)+"000"}function Qi(t,e){return Hi(t.getMonth()+1,e,2)}function tn(t,e){return Hi(t.getMinutes(),e,2)}function en(t,e){return Hi(t.getSeconds(),e,2)}function nn(t){var e=t.getDay();return 0===e?7:e}function rn(t,e){return Hi(Ti.count(Ni(t)-1,t),e,2)}function sn(t,e){var i=t.getDay();return t=i>=4||0===i?Ei(t):Ei.ceil(t),Hi(Ei.count(Ni(t),t)+(4===Ni(t).getDay()),e,2)}function on(t){return t.getDay()}function an(t,e){return Hi(Ci.count(Ni(t)-1,t),e,2)}function cn(t,e){return Hi(t.getFullYear()%100,e,2)}function hn(t,e){return Hi(t.getFullYear()%1e4,e,4)}function ln(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+Hi(e/60|0,"0",2)+Hi(e%60,"0",2)}function un(t,e){return Hi(t.getUTCDate(),e,2)}function dn(t,e){return Hi(t.getUTCHours(),e,2)}function fn(t,e){return Hi(t.getUTCHours()%12||12,e,2)}function gn(t,e){return Hi(1+ji.count(Bi(t),t),e,3)}function pn(t,e){return Hi(t.getUTCMilliseconds(),e,3)}function vn(t,e){return pn(t,e)+"000"}function mn(t,e){return Hi(t.getUTCMonth()+1,e,2)}function bn(t,e){return Hi(t.getUTCMinutes(),e,2)}function _n(t,e){return Hi(t.getUTCSeconds(),e,2)}function yn(t){var e=t.getUTCDay();return 0===e?7:e}function wn(t,e){return Hi(Ai.count(Bi(t)-1,t),e,2)}function Sn(t,e){var i=t.getUTCDay();return t=i>=4||0===i?Li(t):Li.ceil(t),Hi(Li.count(Bi(t),t)+(4===Bi(t).getUTCDay()),e,2)}function xn(t){return t.getUTCDay()}function Dn(t,e){return Hi(Fi.count(Bi(t)-1,t),e,2)}function On(t,e){return Hi(t.getUTCFullYear()%100,e,2)}function Mn(t,e){return Hi(t.getUTCFullYear()%1e4,e,4)}function Nn(){return"+0000"}function In(){return"%"}function Tn(t){return+t}function Cn(t){return Math.floor(+t/1e3)}(function(t){var e=t.dateTime,i=t.date,n=t.time,r=t.periods,s=t.days,o=t.shortDays,a=t.months,c=t.shortMonths,h=($i(r),Xi(r),$i(s),Xi(s),$i(o),Xi(o),$i(a),Xi(a),$i(c),Xi(c),{a:function(t){return o[t.getDay()]},A:function(t){return s[t.getDay()]},b:function(t){return c[t.getMonth()]},B:function(t){return a[t.getMonth()]},c:null,d:Gi,e:Gi,f:Ki,H:Vi,I:Wi,j:Zi,L:Ji,m:Qi,M:tn,p:function(t){return r[+(t.getHours()>=12)]},q:function(t){return 1+~~(t.getMonth()/3)},Q:Tn,s:Cn,S:en,u:nn,U:rn,V:sn,w:on,W:an,x:null,X:null,y:cn,Y:hn,Z:ln,"%":In}),l={a:function(t){return o[t.getUTCDay()]},A:function(t){return s[t.getUTCDay()]},b:function(t){return c[t.getUTCMonth()]},B:function(t){return a[t.getUTCMonth()]},c:null,d:un,e:un,f:vn,H:dn,I:fn,j:gn,L:pn,m:mn,M:bn,p:function(t){return r[+(t.getUTCHours()>=12)]},q:function(t){return 1+~~(t.getUTCMonth()/3)},Q:Tn,s:Cn,S:_n,u:yn,U:wn,V:Sn,w:xn,W:Dn,x:null,X:null,y:On,Y:Mn,Z:Nn,"%":In};function u(t,e){return function(i){var n,r,s,o=[],a=-1,c=0,h=t.length;for(i instanceof Date||(i=new Date(+i));++a<h;)37===t.charCodeAt(a)&&(o.push(t.slice(c,a)),null!=(r=zi[n=t.charAt(++a)])?n=t.charAt(++a):r="e"===n?" ":"0",(s=e[n])&&(n=s(i,r)),o.push(n),c=a+1);return o.push(t.slice(c,a)),o.join("")}}h.x=u(i,h),h.X=u(n,h),h.c=u(e,h),l.x=u(i,l),l.X=u(n,l),l.c=u(e,l)})({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),Oi((function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)}),(function(t,e){t.setUTCMonth(t.getUTCMonth()+e)}),(function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())}),(function(t){return t.getUTCMonth()})),Oi((function(t){t.setUTCMinutes(0,0,0)}),(function(t,e){t.setTime(+t+36e5*e)}),(function(t,e){return(e-t)/36e5}),(function(t){return t.getUTCHours()})),Oi((function(t){t.setUTCSeconds(0,0)}),(function(t,e){t.setTime(+t+6e4*e)}),(function(t,e){return(e-t)/6e4}),(function(t){return t.getUTCMinutes()}));let En=(()=>{class t{constructor(t){this.scaleLinear=vi().domain([0,25]).rangeRound([160,350]),this.isDeviceMobile=!1,this.isDeviceMobile=t.isDeviceMobile()}enterLeafNodes(t,e,i,n=0,r=0){i&&i.data.children.forEach(i=>this.enterNode(t,e,i,n,r))}enterCluster(t,e,i){this.enterNode(t,e,i),t[0].r=this.getDistance(i.data.children.length),this.enterLeafNodes(t,e,i)}recenterNode(t,e,i,n){const r=this.getIndexOf(i.data.uid,t);return n?(r>=0?(t.splice(r+1,t.length-r-1),t.splice(0,r),e.splice(0,e.length,Object.assign(Object.assign({},i.link),{source:i.link.uid}))):this.enterRootNode(t,e,i),this.markRootForAnimation(t[0],i.data.children.length,!0)):t&&t.length&&r>=0?this.markRootForAnimation(t[r],i.data.children.length,!1):Object(Vt.a)(void 0)}removeChildNodes(t,e,i){const n=this.getFirstChildIndex(i.data.uid,t);t.splice(n,i.data.children.length),e.splice(n,i.data.children.length);const r=this.getIndexOf(i.data.uid,t);t&&r>=0&&(t[r].r=void 0)}setOpacity(t,e,i=1){t.forEach(t=>t.opacity=i),e.forEach(t=>t.showLink=i)}enterNode(t,e,i,n=0,r=0){t.push({data:i.data,childVisited:0,opacity:0,vx:n,vy:r}),e.push(Object.assign({},i.link))}enterRootNode(t,e,i){t.splice(0,t.length,{data:i.data,childVisited:0}),e.splice(0,e.length,Object.assign(Object.assign({},i.link),{source:i.link.uid}))}markRootForAnimation(t,e,i){return t.r=this.getDistance(e),t.isRoot=i,t.isLoading=!0,Object(Vt.a)(t)}getIndexOf(t,e){let i=-1;return e.forEach((e,n)=>{e.data.uid===t&&(i=n)}),i}getFirstChildIndex(t,e){let i=-1;return e.forEach((e,n)=>{-1===i&&(e.data.parent&&e.data.parent.uid)===t&&(i=n)}),i}getDistance(t){return this.isDeviceMobile&&(t=2*t/3),this.scaleLinear(t)}}return t.\u0275fac=function(e){return new(e||t)(n.dc(re.a))},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})(),Pn=(()=>{class t{}return t.\u0275mod=n.Qb({type:t}),t.\u0275inj=n.Pb({factory:function(e){return new(e||t)},providers:[ht,jt,lt,zt,En,Zt,ve,te,ut,pe,ge,Kt,Jt,oe],imports:[[r.c,Z.b,J.b,V.b,G,W.b,K.e,tt.a,et.a,Q.a,it.a]]}),t})();var kn=i("A3La");let Rn=(()=>{class t{constructor(t,e,i,n){this.sdaTranslateService=t,this.odataService=e,this.featureSetNavigationService=i,this.modalService=n}canActivate(t,e){const i=JSON.parse(t.params.config).length?JSON.parse(t.params.config)[0]:void 0,n=t.params.obid;return n&&i?this.odataService.get(`Objects?$filter=OBID eq '${n}'&$top=0&$count=true`,i).pipe(Object(f.a)(t=>{const e=1===t.count;return e||this.entityIsNoLongerAvailable(),e}),Object(Wt.a)(()=>(this.showAccessDeniedMessage(),Object(Vt.a)(!1)))):Object(Vt.a)(!1)}entityIsNoLongerAvailable(){this.showAccessDeniedMessage(),this.featureSetNavigationService.navigateBackToPreviousRoute()}showAccessDeniedMessage(){this.modalService.alert(this.sdaTranslateService.get("INFOMAP_ITEM_UNAVAILABLE","The URL you are navigating to is not valid. One or more of the target items may no longer exist, may have changed state, or may be inaccessible to your profile."),this.sdaTranslateService.get("WARNING","Warning"))}}return t.\u0275fac=function(e){return new(e||t)(n.dc(bt.a),n.dc(kn.a),n.dc(pt.a),n.dc(vt.a))},t.\u0275prov=n.Ob({token:t,factory:t.\u0275fac}),t})();var An=i("YwUS"),Fn=i("QkNQ"),Ln=i("iwlc"),jn=i("yzqN"),Un=i("lUp+"),Bn=i("b/tf"),zn=i("3E0/"),qn=function(t){return function(){return t}},Hn=function(){return 1e-6*(Math.random()-.5)};function Yn(t,e,i,n){if(isNaN(e)||isNaN(i))return t;var r,s,o,a,c,h,l,u,d,f=t._root,g={data:n},p=t._x0,v=t._y0,m=t._x1,b=t._y1;if(!f)return t._root=g,t;for(;f.length;)if((h=e>=(s=(p+m)/2))?p=s:m=s,(l=i>=(o=(v+b)/2))?v=o:b=o,r=f,!(f=f[u=l<<1|h]))return r[u]=g,t;if(a=+t._x.call(null,f.data),c=+t._y.call(null,f.data),e===a&&i===c)return g.next=f,r?r[u]=g:t._root=g,t;do{r=r?r[u]=new Array(4):t._root=new Array(4),(h=e>=(s=(p+m)/2))?p=s:m=s,(l=i>=(o=(v+b)/2))?v=o:b=o}while((u=l<<1|h)==(d=(c>=o)<<1|a>=s));return r[d]=f,r[u]=g,t}var $n=function(t,e,i,n,r){this.node=t,this.x0=e,this.y0=i,this.x1=n,this.y1=r};function Xn(t){return t[0]}function Gn(t){return t[1]}function Vn(t,e,i){var n=new Wn(null==e?Xn:e,null==i?Gn:i,NaN,NaN,NaN,NaN);return null==t?n:n.addAll(t)}function Wn(t,e,i,n,r,s){this._x=t,this._y=e,this._x0=i,this._y0=n,this._x1=r,this._y1=s,this._root=void 0}function Zn(t){for(var e={data:t.data},i=e;t=t.next;)i=i.next={data:t.data};return e}var Jn=Vn.prototype=Wn.prototype;function Kn(t){return t.x+t.vx}function Qn(t){return t.y+t.vy}Jn.copy=function(){var t,e,i=new Wn(this._x,this._y,this._x0,this._y0,this._x1,this._y1),n=this._root;if(!n)return i;if(!n.length)return i._root=Zn(n),i;for(t=[{source:n,target:i._root=new Array(4)}];n=t.pop();)for(var r=0;r<4;++r)(e=n.source[r])&&(e.length?t.push({source:e,target:n.target[r]=new Array(4)}):n.target[r]=Zn(e));return i},Jn.add=function(t){var e=+this._x.call(null,t),i=+this._y.call(null,t);return Yn(this.cover(e,i),e,i,t)},Jn.addAll=function(t){var e,i,n,r,s=t.length,o=new Array(s),a=new Array(s),c=1/0,h=1/0,l=-1/0,u=-1/0;for(i=0;i<s;++i)isNaN(n=+this._x.call(null,e=t[i]))||isNaN(r=+this._y.call(null,e))||(o[i]=n,a[i]=r,n<c&&(c=n),n>l&&(l=n),r<h&&(h=r),r>u&&(u=r));if(c>l||h>u)return this;for(this.cover(c,h).cover(l,u),i=0;i<s;++i)Yn(this,o[i],a[i],t[i]);return this},Jn.cover=function(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var i=this._x0,n=this._y0,r=this._x1,s=this._y1;if(isNaN(i))r=(i=Math.floor(t))+1,s=(n=Math.floor(e))+1;else{for(var o,a,c=r-i,h=this._root;i>t||t>=r||n>e||e>=s;)switch(a=(e<n)<<1|t<i,(o=new Array(4))[a]=h,h=o,c*=2,a){case 0:r=i+c,s=n+c;break;case 1:i=r-c,s=n+c;break;case 2:r=i+c,n=s-c;break;case 3:i=r-c,n=s-c}this._root&&this._root.length&&(this._root=h)}return this._x0=i,this._y0=n,this._x1=r,this._y1=s,this},Jn.data=function(){var t=[];return this.visit((function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)})),t},Jn.extent=function(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]},Jn.find=function(t,e,i){var n,r,s,o,a,c,h,l=this._x0,u=this._y0,d=this._x1,f=this._y1,g=[],p=this._root;for(p&&g.push(new $n(p,l,u,d,f)),null==i?i=1/0:(l=t-i,u=e-i,d=t+i,f=e+i,i*=i);c=g.pop();)if(!(!(p=c.node)||(r=c.x0)>d||(s=c.y0)>f||(o=c.x1)<l||(a=c.y1)<u))if(p.length){var v=(r+o)/2,m=(s+a)/2;g.push(new $n(p[3],v,m,o,a),new $n(p[2],r,m,v,a),new $n(p[1],v,s,o,m),new $n(p[0],r,s,v,m)),(h=(e>=m)<<1|t>=v)&&(c=g[g.length-1],g[g.length-1]=g[g.length-1-h],g[g.length-1-h]=c)}else{var b=t-+this._x.call(null,p.data),_=e-+this._y.call(null,p.data),y=b*b+_*_;if(y<i){var w=Math.sqrt(i=y);l=t-w,u=e-w,d=t+w,f=e+w,n=p.data}}return n},Jn.remove=function(t){if(isNaN(s=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,i,n,r,s,o,a,c,h,l,u,d,f=this._root,g=this._x0,p=this._y0,v=this._x1,m=this._y1;if(!f)return this;if(f.length)for(;;){if((h=s>=(a=(g+v)/2))?g=a:v=a,(l=o>=(c=(p+m)/2))?p=c:m=c,e=f,!(f=f[u=l<<1|h]))return this;if(!f.length)break;(e[u+1&3]||e[u+2&3]||e[u+3&3])&&(i=e,d=u)}for(;f.data!==t;)if(n=f,!(f=f.next))return this;return(r=f.next)&&delete f.next,n?(r?n.next=r:delete n.next,this):e?(r?e[u]=r:delete e[u],(f=e[0]||e[1]||e[2]||e[3])&&f===(e[3]||e[2]||e[1]||e[0])&&!f.length&&(i?i[d]=f:this._root=f),this):(this._root=r,this)},Jn.removeAll=function(t){for(var e=0,i=t.length;e<i;++e)this.remove(t[e]);return this},Jn.root=function(){return this._root},Jn.size=function(){var t=0;return this.visit((function(e){if(!e.length)do{++t}while(e=e.next)})),t},Jn.visit=function(t){var e,i,n,r,s,o,a=[],c=this._root;for(c&&a.push(new $n(c,this._x0,this._y0,this._x1,this._y1));e=a.pop();)if(!t(c=e.node,n=e.x0,r=e.y0,s=e.x1,o=e.y1)&&c.length){var h=(n+s)/2,l=(r+o)/2;(i=c[3])&&a.push(new $n(i,h,l,s,o)),(i=c[2])&&a.push(new $n(i,n,l,h,o)),(i=c[1])&&a.push(new $n(i,h,r,s,l)),(i=c[0])&&a.push(new $n(i,n,r,h,l))}return this},Jn.visitAfter=function(t){var e,i=[],n=[];for(this._root&&i.push(new $n(this._root,this._x0,this._y0,this._x1,this._y1));e=i.pop();){var r=e.node;if(r.length){var s,o=e.x0,a=e.y0,c=e.x1,h=e.y1,l=(o+c)/2,u=(a+h)/2;(s=r[0])&&i.push(new $n(s,o,a,l,u)),(s=r[1])&&i.push(new $n(s,l,a,c,u)),(s=r[2])&&i.push(new $n(s,o,u,l,h)),(s=r[3])&&i.push(new $n(s,l,u,c,h))}n.push(e)}for(;e=n.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this},Jn.x=function(t){return arguments.length?(this._x=t,this):this._x},Jn.y=function(t){return arguments.length?(this._y=t,this):this._y};var tr=function(t){var e,i,n=1,r=1;function s(){for(var t,s,a,c,h,l,u,d=e.length,f=0;f<r;++f)for(s=Vn(e,Kn,Qn).visitAfter(o),t=0;t<d;++t)u=(l=i[(a=e[t]).index])*l,c=a.x+a.vx,h=a.y+a.vy,s.visit(g);function g(t,e,i,r,s){var o=t.data,d=t.r,f=l+d;if(!o)return e>c+f||r<c-f||i>h+f||s<h-f;if(o.index>a.index){var g=c-o.x-o.vx,p=h-o.y-o.vy,v=g*g+p*p;v<f*f&&(0===g&&(v+=(g=Hn())*g),0===p&&(v+=(p=Hn())*p),v=(f-(v=Math.sqrt(v)))/v*n,a.vx+=(g*=v)*(f=(d*=d)/(u+d)),a.vy+=(p*=v)*f,o.vx-=g*(f=1-f),o.vy-=p*f)}}}function o(t){if(t.data)return t.r=i[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function a(){if(e){var n,r,s=e.length;for(i=new Array(s),n=0;n<s;++n)i[(r=e[n]).index]=+t(r,n,e)}}return"function"!=typeof t&&(t=qn(null==t?1:+t)),s.initialize=function(t){e=t,a()},s.iterations=function(t){return arguments.length?(r=+t,s):r},s.strength=function(t){return arguments.length?(n=+t,s):n},s.radius=function(e){return arguments.length?(t="function"==typeof e?e:qn(+e),a(),s):t},s};function er(t){return t.index}function ir(t,e){var i=t.get(e);if(!i)throw new Error("missing: "+e);return i}var nr=i("xo8x"),rr=i("dPRQ");function sr(t){return t.x}function or(t){return t.y}var ar=Math.PI*(3-Math.sqrt(5)),cr=function(t){var e,i=1,n=.001,r=1-Math.pow(n,1/300),s=0,o=.6,a=Ie(),c=Object(rr.c)(l),h=Object(nr.a)("tick","end");function l(){u(),h.call("tick",e),i<n&&(c.stop(),h.call("end",e))}function u(n){var c,h,l=t.length;void 0===n&&(n=1);for(var u=0;u<n;++u)for(i+=(s-i)*r,a.each((function(t){t(i)})),c=0;c<l;++c)null==(h=t[c]).fx?h.x+=h.vx*=o:(h.x=h.fx,h.vx=0),null==h.fy?h.y+=h.vy*=o:(h.y=h.fy,h.vy=0);return e}function d(){for(var e,i=0,n=t.length;i<n;++i){if((e=t[i]).index=i,null!=e.fx&&(e.x=e.fx),null!=e.fy&&(e.y=e.fy),isNaN(e.x)||isNaN(e.y)){var r=10*Math.sqrt(i),s=i*ar;e.x=r*Math.cos(s),e.y=r*Math.sin(s)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function f(e){return e.initialize&&e.initialize(t),e}return null==t&&(t=[]),d(),e={tick:u,restart:function(){return c.restart(l),e},stop:function(){return c.stop(),e},nodes:function(i){return arguments.length?(t=i,d(),a.each(f),e):t},alpha:function(t){return arguments.length?(i=+t,e):i},alphaMin:function(t){return arguments.length?(n=+t,e):n},alphaDecay:function(t){return arguments.length?(r=+t,e):+r},alphaTarget:function(t){return arguments.length?(s=+t,e):s},velocityDecay:function(t){return arguments.length?(o=1-t,e):1-o},force:function(t,i){return arguments.length>1?(null==i?a.remove(t):a.set(t,f(i)),e):a.get(t)},find:function(e,i,n){var r,s,o,a,c,h=0,l=t.length;for(null==n?n=1/0:n*=n,h=0;h<l;++h)(o=(r=e-(a=t[h]).x)*r+(s=i-a.y)*s)<n&&(c=a,n=o);return c},on:function(t,i){return arguments.length>1?(h.on(t,i),e):h.on(t)}}},hr=function(){var t,e,i,n,r=qn(-30),s=1,o=1/0,a=.81;function c(n){var r,s=t.length,o=Vn(t,sr,or).visitAfter(l);for(i=n,r=0;r<s;++r)e=t[r],o.visit(u)}function h(){if(t){var e,i,s=t.length;for(n=new Array(s),e=0;e<s;++e)n[(i=t[e]).index]=+r(i,e,t)}}function l(t){var e,i,r,s,o,a=0,c=0;if(t.length){for(r=s=o=0;o<4;++o)(e=t[o])&&(i=Math.abs(e.value))&&(a+=e.value,c+=i,r+=i*e.x,s+=i*e.y);t.x=r/c,t.y=s/c}else{(e=t).x=e.data.x,e.y=e.data.y;do{a+=n[e.data.index]}while(e=e.next)}t.value=a}function u(t,r,c,h){if(!t.value)return!0;var l=t.x-e.x,u=t.y-e.y,d=h-r,f=l*l+u*u;if(d*d/a<f)return f<o&&(0===l&&(f+=(l=Hn())*l),0===u&&(f+=(u=Hn())*u),f<s&&(f=Math.sqrt(s*f)),e.vx+=l*t.value*i/f,e.vy+=u*t.value*i/f),!0;if(!(t.length||f>=o)){(t.data!==e||t.next)&&(0===l&&(f+=(l=Hn())*l),0===u&&(f+=(u=Hn())*u),f<s&&(f=Math.sqrt(s*f)));do{t.data!==e&&(e.vx+=l*(d=n[t.data.index]*i/f),e.vy+=u*d)}while(t=t.next)}}return c.initialize=function(e){t=e,h()},c.strength=function(t){return arguments.length?(r="function"==typeof t?t:qn(+t),h(),c):r},c.distanceMin=function(t){return arguments.length?(s=t*t,c):Math.sqrt(s)},c.distanceMax=function(t){return arguments.length?(o=t*t,c):Math.sqrt(o)},c.theta=function(t){return arguments.length?(a=t*t,c):Math.sqrt(a)},c};class lr{initNodes(t){if(!this.simulation)throw new Error("simulation was not initialized yet");this.simulation.nodes(t)}initLinks(t){if(!this.simulation)throw new Error("simulation was not initialized yet");this.simulation.force("links",function(t){var e,i,n,r,s,o=er,a=function(t){return 1/Math.min(r[t.source.index],r[t.target.index])},c=qn(30),h=1;function l(n){for(var r=0,o=t.length;r<h;++r)for(var a,c,l,u,d,f,g,p=0;p<o;++p)u=(l=(a=t[p]).target).x+l.vx-(c=a.source).x-c.vx||Hn(),d=l.y+l.vy-c.y-c.vy||Hn(),d*=f=((f=Math.sqrt(u*u+d*d))-i[p])/f*n*e[p],l.vx-=(u*=f)*(g=s[p]),l.vy-=d*g,c.vx+=u*(g=1-g),c.vy+=d*g}function u(){if(n){var a,c,h=n.length,l=t.length,u=Ie(n,o);for(a=0,r=new Array(h);a<l;++a)(c=t[a]).index=a,"object"!=typeof c.source&&(c.source=ir(u,c.source)),"object"!=typeof c.target&&(c.target=ir(u,c.target)),r[c.source.index]=(r[c.source.index]||0)+1,r[c.target.index]=(r[c.target.index]||0)+1;for(a=0,s=new Array(l);a<l;++a)s[a]=r[(c=t[a]).source.index]/(r[c.source.index]+r[c.target.index]);e=new Array(l),d(),i=new Array(l),f()}}function d(){if(n)for(var i=0,r=t.length;i<r;++i)e[i]=+a(t[i],i,t)}function f(){if(n)for(var e=0,r=t.length;e<r;++e)i[e]=+c(t[e],e,t)}return null==t&&(t=[]),l.initialize=function(t){n=t,u()},l.links=function(e){return arguments.length?(t=e,u(),l):t},l.id=function(t){return arguments.length?(o=t,l):o},l.iterations=function(t){return arguments.length?(h=+t,l):h},l.strength=function(t){return arguments.length?(a="function"==typeof t?t:qn(+t),d(),l):a},l.distance=function(t){return arguments.length?(c="function"==typeof t?t:qn(+t),f(),l):c},l}(t).id(t=>t.data.uid).distance(10).strength(2))}}class ur extends lr{constructor(t){super(),this.initSimulation(t.nodes,t.links)}initSimulation(t,e){this.simulation||(this.simulation=cr().force("collision",tr(t=>t.r?t.r:60).strength(.8)).force("charge",hr().strength(-1e4)).force("x",function(t){var e,i,n,r=qn(.1);function s(t){for(var r,s=0,o=e.length;s<o;++s)(r=e[s]).vx+=(n[s]-r.x)*i[s]*t}function o(){if(e){var s,o=e.length;for(i=new Array(o),n=new Array(o),s=0;s<o;++s)i[s]=isNaN(n[s]=+t(e[s],s,e))?0:+r(e[s],s,e)}}return"function"!=typeof t&&(t=qn(null==t?0:+t)),s.initialize=function(t){e=t,o()},s.strength=function(t){return arguments.length?(r="function"==typeof t?t:qn(+t),o(),s):r},s.x=function(e){return arguments.length?(t="function"==typeof e?e:qn(+e),o(),s):t},s}().x(0).strength(t=>t.isRoot?.6:0)).force("y",function(t){var e,i,n,r=qn(.1);function s(t){for(var r,s=0,o=e.length;s<o;++s)(r=e[s]).vy+=(n[s]-r.y)*i[s]*t}function o(){if(e){var s,o=e.length;for(i=new Array(o),n=new Array(o),s=0;s<o;++s)i[s]=isNaN(n[s]=+t(e[s],s,e))?0:+r(e[s],s,e)}}return"function"!=typeof t&&(t=qn(null==t?0:+t)),s.initialize=function(t){e=t,o()},s.strength=function(t){return arguments.length?(r="function"==typeof t?t:qn(+t),o(),s):r},s.y=function(e){return arguments.length?(t="function"==typeof e?e:qn(+e),o(),s):t},s}().y(0).strength(t=>t.isRoot?.6:0)),this.initNodes(t),this.initLinks(e)),this.simulation.alpha(.2).restart()}}i("tU+D"),i("YJZE");var dr=i("AWXE"),fr=i("AKWm");function gr(t){return{type:t}}i("4k54"),i("sQjb"),["w","e"].map(gr),["n","s"].map(gr),["n","w","e","s","nw","ne","sw","se"].map(gr),Math,Math,Math,Math;var pr=Math.PI,vr=2*pr,mr=vr-1e-6;function br(){this._x0=this._y0=this._x1=this._y1=null,this._=""}br.prototype=(function(){return new br}).prototype={constructor:br,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,i,n){this._+="Q"+ +t+","+ +e+","+(this._x1=+i)+","+(this._y1=+n)},bezierCurveTo:function(t,e,i,n,r,s){this._+="C"+ +t+","+ +e+","+ +i+","+ +n+","+(this._x1=+r)+","+(this._y1=+s)},arcTo:function(t,e,i,n,r){var s=this._x1,o=this._y1,a=(i=+i)-(t=+t),c=(n=+n)-(e=+e),h=s-t,l=o-e,u=h*h+l*l;if((r=+r)<0)throw new Error("negative radius: "+r);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(u>1e-6)if(Math.abs(l*a-c*h)>1e-6&&r){var d=i-s,f=n-o,g=a*a+c*c,p=d*d+f*f,v=Math.sqrt(g),m=Math.sqrt(u),b=r*Math.tan((pr-Math.acos((g+u-p)/(2*v*m)))/2),_=b/m,y=b/v;Math.abs(_-1)>1e-6&&(this._+="L"+(t+_*h)+","+(e+_*l)),this._+="A"+r+","+r+",0,0,"+ +(l*d>h*f)+","+(this._x1=t+y*a)+","+(this._y1=e+y*c)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,i,n,r,s){t=+t,e=+e,s=!!s;var o=(i=+i)*Math.cos(n),a=i*Math.sin(n),c=t+o,h=e+a,l=1^s,u=s?n-r:r-n;if(i<0)throw new Error("negative radius: "+i);null===this._x1?this._+="M"+c+","+h:(Math.abs(this._x1-c)>1e-6||Math.abs(this._y1-h)>1e-6)&&(this._+="L"+c+","+h),i&&(u<0&&(u=u%vr+vr),u>mr?this._+="A"+i+","+i+",0,1,"+l+","+(t-o)+","+(e-a)+"A"+i+","+i+",0,1,"+l+","+(this._x1=c)+","+(this._y1=h):u>1e-6&&(this._+="A"+i+","+i+",0,"+ +(u>=pr)+","+l+","+(this._x1=t+i*Math.cos(r))+","+(this._y1=e+i*Math.sin(r))))},rect:function(t,e,i,n){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +i+"v"+ +n+"h"+-i+"Z"},toString:function(){return this._}};var _r=function(){return Math.random()},yr=(function t(e){function i(t,i){return t=null==t?0:+t,i=null==i?1:+i,1===arguments.length?(i=t,t=0):i-=t,function(){return e()*i+t}}return i.source=t,i}(_r),function t(e){function i(t,i){var n,r;return t=null==t?0:+t,i=null==i?1:+i,function(){var s;if(null!=n)s=n,n=null;else do{n=2*e()-1,s=2*e()-1,r=n*n+s*s}while(!r||r>1);return t+i*s*Math.sqrt(-2*Math.log(r)/r)}}return i.source=t,i}(_r)),wr=(function t(e){function i(){var t=yr.source(e).apply(this,arguments);return function(){return Math.exp(t())}}return i.source=t,i}(_r),function t(e){function i(t){return function(){for(var i=0,n=0;n<t;++n)i+=e();return i}}return i.source=t,i}(_r));function Sr(){this._=null}function xr(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function Dr(t,e){var i=e,n=e.R,r=i.U;r?r.L===i?r.L=n:r.R=n:t._=n,n.U=r,i.U=n,i.R=n.L,i.R&&(i.R.U=i),n.L=i}function Or(t,e){var i=e,n=e.L,r=i.U;r?r.L===i?r.L=n:r.R=n:t._=n,n.U=r,i.U=n,i.L=n.R,i.L&&(i.L.U=i),n.R=i}function Mr(t){for(;t.L;)t=t.L;return t}(function t(e){function i(t){var i=wr.source(e)(t);return function(){return i()/t}}return i.source=t,i})(_r),function t(e){function i(t){return function(){return-Math.log(1-e())/t}}return i.source=t,i}(_r),Sr.prototype={constructor:Sr,insert:function(t,e){var i,n,r;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;i=t}else this._?(t=Mr(this._),e.P=null,e.N=t,t.P=t.L=e,i=t):(e.P=e.N=null,this._=e,i=null);for(e.L=e.R=null,e.U=i,e.C=!0,t=e;i&&i.C;)i===(n=i.U).L?(r=n.R)&&r.C?(i.C=r.C=!1,n.C=!0,t=n):(t===i.R&&(Dr(this,i),i=(t=i).U),i.C=!1,n.C=!0,Or(this,n)):(r=n.L)&&r.C?(i.C=r.C=!1,n.C=!0,t=n):(t===i.L&&(Or(this,i),i=(t=i).U),i.C=!1,n.C=!0,Dr(this,n)),i=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,i,n,r=t.U,s=t.L,o=t.R;if(i=s?o?Mr(o):s:o,r?r.L===t?r.L=i:r.R=i:this._=i,s&&o?(n=i.C,i.C=t.C,i.L=s,s.U=i,i!==o?(r=i.U,i.U=t.U,r.L=t=i.R,i.R=o,o.U=i):(i.U=r,r=i,t=i.R)):(n=t.C,t=i),t&&(t.U=r),!n)if(t&&t.C)t.C=!1;else{do{if(t===this._)break;if(t===r.L){if((e=r.R).C&&(e.C=!1,r.C=!0,Dr(this,r),e=r.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,Or(this,e),e=r.R),e.C=r.C,r.C=e.R.C=!1,Dr(this,r),t=this._;break}}else if((e=r.L).C&&(e.C=!1,r.C=!0,Or(this,r),e=r.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,Dr(this,e),e=r.L),e.C=r.C,r.C=e.L.C=!1,Or(this,r),t=this._;break}e.C=!0,t=r,r=r.U}while(!t.C);t&&(t.C=!1)}}};var Nr=Sr;function Ir(t,e,i,n){var r=[null,null],s=Kr.push(r)-1;return r.left=t,r.right=e,i&&Cr(r,t,e,i),n&&Cr(r,e,t,n),Zr[t.index].halfedges.push(s),Zr[e.index].halfedges.push(s),r}function Tr(t,e,i){var n=[e,i];return n.left=t,n}function Cr(t,e,i,n){t[0]||t[1]?t.left===i?t[1]=n:t[0]=n:(t[0]=n,t.left=e,t.right=i)}function Er(t,e,i,n,r){var s,o=t[0],a=t[1],c=o[0],h=o[1],l=0,u=1,d=a[0]-c,f=a[1]-h;if(s=e-c,d||!(s>0)){if(s/=d,d<0){if(s<l)return;s<u&&(u=s)}else if(d>0){if(s>u)return;s>l&&(l=s)}if(s=n-c,d||!(s<0)){if(s/=d,d<0){if(s>u)return;s>l&&(l=s)}else if(d>0){if(s<l)return;s<u&&(u=s)}if(s=i-h,f||!(s>0)){if(s/=f,f<0){if(s<l)return;s<u&&(u=s)}else if(f>0){if(s>u)return;s>l&&(l=s)}if(s=r-h,f||!(s<0)){if(s/=f,f<0){if(s>u)return;s>l&&(l=s)}else if(f>0){if(s<l)return;s<u&&(u=s)}return!(l>0||u<1)||(l>0&&(t[0]=[c+l*d,h+l*f]),u<1&&(t[1]=[c+u*d,h+u*f]),!0)}}}}}function Pr(t,e,i,n,r){var s=t[1];if(s)return!0;var o,a,c=t[0],h=t.left,l=t.right,u=h[0],d=h[1],f=l[0],g=l[1],p=(u+f)/2;if(g===d){if(p<e||p>=n)return;if(u>f){if(c){if(c[1]>=r)return}else c=[p,i];s=[p,r]}else{if(c){if(c[1]<i)return}else c=[p,r];s=[p,i]}}else if(a=(d+g)/2-(o=(u-f)/(g-d))*p,o<-1||o>1)if(u>f){if(c){if(c[1]>=r)return}else c=[(i-a)/o,i];s=[(r-a)/o,r]}else{if(c){if(c[1]<i)return}else c=[(r-a)/o,r];s=[(i-a)/o,i]}else if(d<g){if(c){if(c[0]>=n)return}else c=[e,o*e+a];s=[n,o*n+a]}else{if(c){if(c[0]<e)return}else c=[n,o*n+a];s=[e,o*e+a]}return t[0]=c,t[1]=s,!0}function kr(t,e){var i=t.site,n=e.left,r=e.right;return i===r&&(r=n,n=i),r?Math.atan2(r[1]-n[1],r[0]-n[0]):(i===n?(n=e[1],r=e[0]):(n=e[0],r=e[1]),Math.atan2(n[0]-r[0],r[1]-n[1]))}function Rr(t,e){return e[+(e.left!==t.site)]}function Ar(t,e){return e[+(e.left===t.site)]}var Fr,Lr=[];function jr(){xr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Ur(t){var e=t.P,i=t.N;if(e&&i){var n=e.site,r=t.site,s=i.site;if(n!==s){var o=r[0],a=r[1],c=n[0]-o,h=n[1]-a,l=s[0]-o,u=s[1]-a,d=2*(c*u-h*l);if(!(d>=-ts)){var f=c*c+h*h,g=l*l+u*u,p=(u*f-h*g)/d,v=(c*g-l*f)/d,m=Lr.pop()||new jr;m.arc=t,m.site=r,m.x=p+o,m.y=(m.cy=v+a)+Math.sqrt(p*p+v*v),t.circle=m;for(var b=null,_=Jr._;_;)if(m.y<_.y||m.y===_.y&&m.x<=_.x){if(!_.L){b=_.P;break}_=_.L}else{if(!_.R){b=_;break}_=_.R}Jr.insert(b,m),b||(Fr=m)}}}}function Br(t){var e=t.circle;e&&(e.P||(Fr=e.N),Jr.remove(e),Lr.push(e),xr(e),t.circle=null)}var zr=[];function qr(){xr(this),this.edge=this.site=this.circle=null}function Hr(t){var e=zr.pop()||new qr;return e.site=t,e}function Yr(t){Br(t),Wr.remove(t),zr.push(t),xr(t)}function $r(t){var e=t.circle,i=e.x,n=e.cy,r=[i,n],s=t.P,o=t.N,a=[t];Yr(t);for(var c=s;c.circle&&Math.abs(i-c.circle.x)<Qr&&Math.abs(n-c.circle.cy)<Qr;)s=c.P,a.unshift(c),Yr(c),c=s;a.unshift(c),Br(c);for(var h=o;h.circle&&Math.abs(i-h.circle.x)<Qr&&Math.abs(n-h.circle.cy)<Qr;)o=h.N,a.push(h),Yr(h),h=o;a.push(h),Br(h);var l,u=a.length;for(l=1;l<u;++l)Cr((h=a[l]).edge,(c=a[l-1]).site,h.site,r);(h=a[u-1]).edge=Ir((c=a[0]).site,h.site,null,r),Ur(c),Ur(h)}function Xr(t){for(var e,i,n,r,s=t[0],o=t[1],a=Wr._;a;)if((n=Gr(a,o)-s)>Qr)a=a.L;else{if(!((r=s-Vr(a,o))>Qr)){n>-Qr?(e=a.P,i=a):r>-Qr?(e=a,i=a.N):e=i=a;break}if(!a.R){e=a;break}a=a.R}!function(t){Zr[t.index]={site:t,halfedges:[]}}(t);var c=Hr(t);if(Wr.insert(e,c),e||i){if(e===i)return Br(e),i=Hr(e.site),Wr.insert(c,i),c.edge=i.edge=Ir(e.site,c.site),Ur(e),void Ur(i);if(i){Br(e),Br(i);var h=e.site,l=h[0],u=h[1],d=t[0]-l,f=t[1]-u,g=i.site,p=g[0]-l,v=g[1]-u,m=2*(d*v-f*p),b=d*d+f*f,_=p*p+v*v,y=[(v*b-f*_)/m+l,(d*_-p*b)/m+u];Cr(i.edge,h,g,y),c.edge=Ir(h,t,null,y),i.edge=Ir(t,g,null,y),Ur(e),Ur(i)}else c.edge=Ir(e.site,c.site)}}function Gr(t,e){var i=t.site,n=i[0],r=i[1],s=r-e;if(!s)return n;var o=t.P;if(!o)return-1/0;var a=(i=o.site)[0],c=i[1],h=c-e;if(!h)return a;var l=a-n,u=1/s-1/h,d=l/h;return u?(-d+Math.sqrt(d*d-2*u*(l*l/(-2*h)-c+h/2+r-s/2)))/u+n:(n+a)/2}function Vr(t,e){var i=t.N;if(i)return Gr(i,e);var n=t.site;return n[1]===e?n[0]:1/0}var Wr,Zr,Jr,Kr,Qr=1e-6,ts=1e-12;function es(t,e){return e[1]-t[1]||e[0]-t[0]}function is(t,e){var i,n,r,s=t.sort(es).pop();for(Kr=[],Zr=new Array(t.length),Wr=new Nr,Jr=new Nr;;)if(r=Fr,s&&(!r||s[1]<r.y||s[1]===r.y&&s[0]<r.x))s[0]===i&&s[1]===n||(Xr(s),i=s[0],n=s[1]),s=t.pop();else{if(!r)break;$r(r.arc)}if(function(){for(var t,e,i,n,r=0,s=Zr.length;r<s;++r)if((t=Zr[r])&&(n=(e=t.halfedges).length)){var o=new Array(n),a=new Array(n);for(i=0;i<n;++i)o[i]=i,a[i]=kr(t,Kr[e[i]]);for(o.sort((function(t,e){return a[e]-a[t]})),i=0;i<n;++i)a[i]=e[o[i]];for(i=0;i<n;++i)e[i]=a[i]}}(),e){var o=+e[0][0],a=+e[0][1],c=+e[1][0],h=+e[1][1];!function(t,e,i,n){for(var r,s=Kr.length;s--;)Pr(r=Kr[s],t,e,i,n)&&Er(r,t,e,i,n)&&(Math.abs(r[0][0]-r[1][0])>Qr||Math.abs(r[0][1]-r[1][1])>Qr)||delete Kr[s]}(o,a,c,h),function(t,e,i,n){var r,s,o,a,c,h,l,u,d,f,g,p,v=Zr.length,m=!0;for(r=0;r<v;++r)if(s=Zr[r]){for(o=s.site,a=(c=s.halfedges).length;a--;)Kr[c[a]]||c.splice(a,1);for(a=0,h=c.length;a<h;)g=(f=Ar(s,Kr[c[a]]))[0],p=f[1],u=(l=Rr(s,Kr[c[++a%h]]))[0],d=l[1],(Math.abs(g-u)>Qr||Math.abs(p-d)>Qr)&&(c.splice(a,0,Kr.push(Tr(o,f,Math.abs(g-t)<Qr&&n-p>Qr?[t,Math.abs(u-t)<Qr?d:n]:Math.abs(p-n)<Qr&&i-g>Qr?[Math.abs(d-n)<Qr?u:i,n]:Math.abs(g-i)<Qr&&p-e>Qr?[i,Math.abs(u-i)<Qr?d:e]:Math.abs(p-e)<Qr&&g-t>Qr?[Math.abs(d-e)<Qr?u:t,e]:null))-1),++h);h&&(m=!1)}if(m){var b,_,y,w=1/0;for(r=0,m=null;r<v;++r)(s=Zr[r])&&(y=(b=(o=s.site)[0]-t)*b+(_=o[1]-e)*_)<w&&(w=y,m=s);if(m){var S=[t,e],x=[t,n],D=[i,n],O=[i,e];m.halfedges.push(Kr.push(Tr(o=m.site,S,x))-1,Kr.push(Tr(o,x,D))-1,Kr.push(Tr(o,D,O))-1,Kr.push(Tr(o,O,S))-1)}}for(r=0;r<v;++r)(s=Zr[r])&&(s.halfedges.length||delete Zr[r])}(o,a,c,h)}this.edges=Kr,this.cells=Zr,Wr=Jr=Kr=Zr=null}is.prototype={constructor:is,polygons:function(){var t=this.edges;return this.cells.map((function(e){var i=e.halfedges.map((function(i){return Rr(e,t[i])}));return i.data=e.site.data,i}))},triangles:function(){var t=[],e=this.edges;return this.cells.forEach((function(i,n){if(s=(r=i.halfedges).length)for(var r,s,o,a,c,h,l=i.site,u=-1,d=e[r[s-1]],f=d.left===l?d.right:d.left;++u<s;)o=f,f=(d=e[r[u]]).left===l?d.right:d.left,o&&f&&n<o.index&&n<f.index&&((a=l)[0]-(h=f)[0])*((c=o)[1]-a[1])-(a[0]-c[0])*(h[1]-a[1])<0&&t.push([l.data,o.data,f.data])})),t},links:function(){return this.edges.filter((function(t){return t.right})).map((function(t){return{source:t.left.data,target:t.right.data}}))},find:function(t,e,i){for(var n,r,s=this,o=s._found||0,a=s.cells.length;!(r=s.cells[o]);)if(++o>=a)return null;var c=t-r.site[0],h=e-r.site[1],l=c*c+h*h;do{r=s.cells[n=o],o=null,r.halfedges.forEach((function(i){var n=s.edges[i],a=n.left;if(a!==r.site&&a||(a=n.right)){var c=t-a[0],h=e-a[1],u=c*c+h*h;u<l&&(l=u,o=a.index)}}))}while(null!==o);return s._found=n,null==i||l<=i*i?r.site:null}};var ns=i("2TRZ");let rs=(()=>{class t{constructor(){this.nodeClick=new n.o,this.loaded$=new c.a,this.subscriptions=new h.a,this.links=[],this.nodes=[],this.zoomActions=new Gt(""),this.aplhaScale=vi().domain([0,18]).range([.2,.6]),this.opacityDelayScale=Si().domain([0,9]).range([400,800]),this.initialised=!1}ngOnDestroy(){this.subscriptions&&this.subscriptions.unsubscribe()}bringNodeForward(t,e){t.appendChild(e)}clearSticky(t,e,i,n){t===this.name&&(this.reset(this.nodes),this.refreshWithDelay(e,i,n))}zoomToFit(t){t===this.name&&(this.zoomActions=new Gt("FIT"))}unStick(t){t.fx=void 0,t.fy=void 0}stick(t){t.fx=t.x,t.fy=t.y}managePathVisited(t,e,i){i.forEach(n=>{if(n.uid===t){n.visited=e;const t=n.source;if("GRID_NODE"===t.data.type){const n=t.childVisited+=e?1:-1;i[t.index].visited=n>0}}})}refreshGraph(t=0){this.graph.initNodes(this.nodes),this.graph.initLinks(this.links),t?this.graph.simulation.alphaTarget(t).restart():this.graph.simulation.alphaTarget(t)}refreshWithDelay(t,e,i){this.refreshGraph(t),setTimeout(()=>{this.refreshGraph(e)},i)}destory(t,e){this.initialised=!1,this.zoomActions=new Gt("RESET"),this.empty(t,e)}empty(t,e){t.length&&(t.splice(0,t.length),e.splice(0,e.length))}resolveFirstTimeInitialised(t){switch(t){case"INITIAL_UID":return this.empty(this.nodes,this.links),this.initialised=!1,!1;case"":return!1;default:return!0}}reset(t){t.forEach(t=>t.isRoot||t.isSelected?this.stick(t):this.unStick(t))}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Mb({type:t,selectors:[["sda-base-graph"]],outputs:{nodeClick:"nodeClick"},decls:0,vars:0,template:function(t,e){},encapsulation:2}),t})(),ss=(()=>{class t{constructor(t){this.elRef=t,this.sqrt=Si().domain([1,30]).range([0,.3])}ngOnInit(){this.applyZoomableBehaviour(this.innerSvg,this.elRef.nativeElement)}set zoomActions(t){switch(t.value){case"FIT":this.zoomToFit();break;case"RESET":this.resetZoom();break;default:this.setInitialZoom(t.value)}}zoomToFit(t=this.svg){const e=this.elRef.nativeElement.getBBox();if(0===e.width||0===e.height)return;const i=.9/Math.max(e.width/t.clientWidth,e.height/t.clientHeight),n={width:-(e.x+e.width/2),height:-(e.y+e.height/2)},r=ns.b.scale(i).translate(n.width,n.height);Object(fr.a)(this.innerSvg).transition().duration(750).call(this.zoom.transform,r)}applyZoomableBehaviour(t,e){this.zoom=Object(ns.a)().on("zoom",()=>{const t=dr.c.transform;Object(fr.a)(e).attr("transform","translate("+t.x+","+t.y+") scale("+t.k+")")}),Object(fr.a)(t).call(this.zoom).on("dblclick.zoom",void 0)}resetZoom(){Object(fr.a)(this.innerSvg).call(this.zoom.transform,ns.b)}setInitialZoom(t){if(t){const e=ns.b.scale(1-this.sqrt(t));Object(fr.a)(this.innerSvg).transition().duration(100).call(this.zoom.transform,e)}}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(n.l))},t.\u0275dir=n.Nb({type:t,selectors:[["","sdaZoom",""]],inputs:{innerSvg:"innerSvg",svg:"svg",zoomActions:"zoomActions"}}),t})();const os=["sdaLink",""];function as(t,e){if(1&t&&(n.kc(),n.Yb(0,"title"),n.Uc(1),n.Xb()),2&t){const t=n.lc();n.Eb(1),n.Vc(t.link.navigatioDisplayName)}}let cs=(()=>{class t{}return t.\u0275fac=function(e){return new(e||t)},t.\u0275cmp=n.Mb({type:t,selectors:[["","sdaLink",""]],inputs:{link:"link"},attrs:os,decls:4,vars:12,consts:[[1,"link-group"],[4,"ngIf"],[1,"link-line"],[1,"link-overlay"]],template:function(t,e){1&t&&(n.kc(),n.Yb(0,"g",0),n.Sc(1,as,2,1,"title",1),n.Tb(2,"line",2),n.Tb(3,"line",3),n.Xb()),2&t&&(n.Eb(1),n.sc("ngIf",e.link.navigatioDisplayName),n.Eb(1),n.Rc("visibility",e.link.showLink?"visible":"hidden"),n.Fb("stroke",e.link.visited?"#026be3":"#a9b4be")("x1",e.link.source.x)("y1",e.link.source.y)("x2",e.link.target.x)("y2",e.link.target.y),n.Eb(1),n.Fb("x1",e.link.source.x)("y1",e.link.source.y)("x2",e.link.target.x)("y2",e.link.target.y))},directives:[r.t],styles:[".link-line[_ngcontent-%COMP%]{stroke-width:2px}.link-overlay[_ngcontent-%COMP%]{stroke:#000;stroke-width:30px;stroke-opacity:0}@media screen and (min-width:1200px){.link-group[_ngcontent-%COMP%]:hover   .link-line[_ngcontent-%COMP%]{stroke-width:5px}}"]}),t})();var hs=i("AJ/N");let ls=(()=>{class t{constructor(t){this.elRef=t}ngOnInit(){this.applyDraggableBehaviour(this.elRef.nativeElement,this.node,this.graph)}applyDraggableBehaviour(t,e,i){Object(fr.a)(t).call(Object(hs.a)().on("start",(function(){this.startTime=Date.now();const t=dr.c.x,n=dr.c.y;dr.c.on("drag",(function(){Date.now()-this.startTime>100&&(i.simulation.alphaTarget(.08).restart(),e.fx=dr.c.x,e.fy=dr.c.y)})).on("end",(function(){var r,s;dr.c.active||i.simulation.alphaTarget(0),r=n,s=dr.c,Math.abs(t-s.x)<5||Math.abs(r-s.y)<5||(e.fx=dr.c.x,e.fy=dr.c.y)}))})))}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(n.l))},t.\u0275dir=n.Nb({type:t,selectors:[["","sdaDrag",""]],inputs:{node:"node",graph:"graph"}}),t})();const us=["sdaSquircle",""];function ds(t,e){if(1&t&&(n.kc(),n.Yb(0,"tspan",5),n.Uc(1),n.Xb()),2&t){const t=e.$implicit,i=n.lc(2);n.Fb("dy",i.size),n.Eb(1),n.Wc(" ",t," ")}}function fs(t,e){if(1&t&&(n.kc(),n.Yb(0,"text",3),n.Sc(1,ds,2,2,"tspan",4),n.Xb()),2&t){const t=n.lc();n.Eb(1),n.sc("ngForOf",t.classificationName)}}function gs(t,e){if(1&t&&(n.kc(),n.Yb(0,"tspan",7),n.Uc(1),n.Xb()),2&t){const t=e.$implicit,i=e.index,r=n.lc(2);n.Fb("y",r.classificationName.length?(r.classificationName.length+i)*r.size:i*r.size)("dy",r.size+r.spaceBetweenText),n.Eb(1),n.Wc(" ",t," ")}}function ps(t,e){if(1&t&&(n.kc(),n.Yb(0,"text",3),n.Sc(1,gs,2,3,"tspan",6),n.Xb()),2&t){const t=n.lc();n.Eb(1),n.sc("ngForOf",t.text)}}let vs=(()=>{class t{constructor(t){this.elRef=t,this.squircleType="",this.size=16,this.cornerRadius=10,this.paddingX=10,this.paddingY=10,this.classificationName=[],this.spaceBetweenText=6}ngAfterViewInit(){setTimeout(()=>{const t=this.elRef.nativeElement.getBBox();0!==t.x&&(this.x=t.x-this.paddingX,this.y=t.y-this.paddingY,this.width=t.width+2*this.paddingX,this.height=t.height+2*this.paddingY)})}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(n.l))},t.\u0275cmp=n.Mb({type:t,selectors:[["","sdaSquircle",""]],inputs:{squircleType:"squircleType",size:"size",cornerRadius:"cornerRadius",paddingX:"paddingX",paddingY:"paddingY",classificationName:"classificationName",text:"text"},attrs:us,decls:4,vars:16,consts:[[1,"squircle"],[1,"squircle-rect"],["class","squircle-text","lengthAdjust","spacingAndGlyphs",4,"ngIf"],["lengthAdjust","spacingAndGlyphs",1,"squircle-text"],["class","squircle-text__classification-name","x","0.1",4,"ngFor","ngForOf"],["x","0.1",1,"squircle-text__classification-name"],["class","e2e-squircle-text__object-name","x","0.1",4,"ngFor","ngForOf"],["x","0.1",1,"e2e-squircle-text__object-name"]],template:function(t,e){1&t&&(n.kc(),n.Yb(0,"g",0),n.Tb(1,"rect",1),n.Sc(2,fs,2,1,"text",2),n.Sc(3,ps,2,1,"text",2),n.Xb()),2&t&&(n.Ib("squircle--selected-node","selectedNode"===e.squircleType)("squircle--unselected-node","unselectedNode"===e.squircleType)("squircle--grid-node","gridNode"===e.squircleType)("squircle--badge","badge"===e.squircleType),n.Eb(1),n.Fb("x",e.x)("y",e.y)("rx",e.cornerRadius)("ry",e.cornerRadius)("width",e.width)("height",e.height),n.Eb(1),n.sc("ngIf",e.classificationName.length),n.Eb(1),n.sc("ngIf",e.text.length))},directives:[r.t,r.s],styles:[".squircle--selected-node[_ngcontent-%COMP%]   .squircle-rect[_ngcontent-%COMP%]{fill:#fff}.squircle--selected-node[_ngcontent-%COMP%]   .squircle-text[_ngcontent-%COMP%]{font-size:14px;fill:#8997a5;font-family:Roboto,sans-serif}.squircle--unselected-node[_ngcontent-%COMP%]   .squircle-rect[_ngcontent-%COMP%]{fill:#000;opacity:.5}.squircle--unselected-node[_ngcontent-%COMP%]   .squircle-text[_ngcontent-%COMP%]{font-size:14px;fill:#fff;font-family:Roboto,sans-serif}.squircle--grid-node[_ngcontent-%COMP%]   .squircle-rect[_ngcontent-%COMP%]{fill:#fff;stroke:#5b5c5d}.squircle--grid-node[_ngcontent-%COMP%]   .squircle-text[_ngcontent-%COMP%]{font-size:14px;fill:#5b5c5d;font-family:Roboto,sans-serif}.squircle--badge[_ngcontent-%COMP%]   .squircle-rect[_ngcontent-%COMP%]{fill:#03a9f4;stroke:#03a9f4}.squircle--badge[_ngcontent-%COMP%]   .squircle-text[_ngcontent-%COMP%]{font-size:14px;fill:#fff;font-family:Roboto,sans-serif}.squircle-text__classification-name[_ngcontent-%COMP%]{font-style:italic}"]}),t})();const ms=["sdaHoverMenu",""];function bs(t,e){if(1&t){const t=n.Zb();n.kc(),n.Yb(0,"g",1),n.hc("click",(function(i){n.Kc(t);const r=e.$implicit;return n.lc().clicked(r,i)})),n.Yb(1,"title"),n.Uc(2),n.Xb(),n.Tb(3,"circle",2),n.Tb(4,"image",3),n.Xb()}if(2&t){const t=e.$implicit;n.Eb(2),n.Vc(t.name),n.Eb(1),n.Fb("r",t.r)("cx",t.cx)("cy",t.cy),n.Eb(1),n.Fb("x",t.cx-10)("y",t.cy-10)("href","./content/images/infomap/"+t.icon+".svg",null,"xlink")}}let _s=(()=>{class t{constructor(t){this.menuService=t,this.menuList=[],this.radius=65}onMouseDown(t){t.stopPropagation()}ngOnInit(){const t=vi().domain([0,this.menuService.icons.length]).range([-3,-5.5]);for(let e=0;e<this.menuService.icons.length;e++)this.menuList.push({r:20,cx:Math.sin(t(e))*this.radius,cy:Math.cos(t(e))*this.radius,id:e,icon:this.menuService.icons[e].iconPath,name:this.menuService.icons[e].title})}clicked(t,e){e.stopPropagation(),this.menuService.menuClicked(t.id,this.menuNode)}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(oe))},t.\u0275cmp=n.Mb({type:t,selectors:[["","sdaHoverMenu",""]],hostBindings:function(t,e){1&t&&n.hc("mousedown",(function(t){return e.onMouseDown(t)}))},inputs:{menuNode:"menuNode"},attrs:ms,decls:1,vars:1,consts:[["class","menu-item",3,"click",4,"ngFor","ngForOf"],[1,"menu-item",3,"click"],[1,"menu-circle"],["width","20","height","20"]],template:function(t,e){1&t&&n.Sc(0,bs,5,7,"g",0),2&t&&n.sc("ngForOf",e.menuList)},directives:[r.s],styles:[".menu-item[_ngcontent-%COMP%]:hover   .menu-circle[_ngcontent-%COMP%]{stroke:#026be3}.menu-circle[_ngcontent-%COMP%]{fill:#fff;stroke:#a9b4be;stroke-width:1}"]}),t})();const ys=["sdaMainMenu",""];function ws(t,e){if(1&t){const t=n.Zb();n.kc(),n.Yb(0,"image",2),n.hc("click",(function(i){n.Kc(t);const r=e.index;return n.lc().menuClicked(r,i)})),n.Yb(1,"title"),n.Uc(2),n.Xb(),n.Xb()}if(2&t){const t=e.$implicit;n.Rc("display",t.show),n.Fb("width",t.width)("height",t.height)("x",t.x)("y",t.y)("href","./content/images/infomap/"+t.iconPath+".svg",null,"xlink"),n.Eb(2),n.Vc(t.title)}}let Ss=(()=>{class t{constructor(t,e){this.elRef=t,this.menuService=e,this.icons=[],this.icons=this.menuService.icons,this.lineSeperator=this.menuService.separatorPos}ngOnInit(){this.icons[1].show=this.menuNode.showViewFileIcon?"block":"none"}onMouseDown(t){t.stopPropagation()}menuClicked(t,e){e.stopPropagation(),this.menuService.menuClicked(t,this.menuNode)}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(n.l),n.Sb(oe))},t.\u0275cmp=n.Mb({type:t,selectors:[["","sdaMainMenu",""]],hostBindings:function(t,e){1&t&&n.hc("mousedown",(function(t){return e.onMouseDown(t)}))},inputs:{menuNode:"menuNode"},attrs:ys,decls:2,vars:5,consts:[[1,"main-menu-separator"],["class","main-menu-icon",3,"display","click",4,"ngFor","ngForOf"],[1,"main-menu-icon",3,"click"]],template:function(t,e){1&t&&(n.kc(),n.Tb(0,"line",0),n.Sc(1,ws,3,8,"image",1)),2&t&&(n.Fb("x1",e.lineSeperator.x1)("y1",e.lineSeperator.y1)("x2",e.lineSeperator.x2)("y2",e.lineSeperator.y2),n.Eb(1),n.sc("ngForOf",e.icons))},directives:[r.s],styles:[".main-menu-separator[_ngcontent-%COMP%]{stroke:#a9b4be}.main-menu-icon[_ngcontent-%COMP%]{cursor:pointer}"]}),t})();const xs=["singleNode"],Ds=["graphNodeName"],Os=["imaginaryNode"],Ms=["badgeNode"],Ns=["sdaNode",""];function Is(t,e){if(1&t&&(n.kc(),n.Yb(0,"title"),n.Uc(1),n.Xb()),2&t){const t=n.lc(2);n.Eb(1),n.Xc("",t.DESCRIPTION+": "," ",t.node.data.description,"")}}function Ts(t,e){if(1&t&&(n.kc(),n.Yb(0,"g",7),n.Tb(1,"circle",8),n.Tb(2,"circle",9),n.Tb(3,"g",10,11),n.Tb(5,"image",12),n.Yb(6,"g",13),n.Tb(7,"g",14),n.Xb(),n.Xb()),2&t){const t=n.lc(2);n.Eb(1),n.Ib("infomap-unselected-node__circle--loading",t.node.isLoading),n.Eb(2),n.Rc("visibility",t.node.data.showName.value?"visible":"hidden"),n.sc("text",t.node.data.name)("classificationName",t.node.data.nodeTypeDisplayName)("squircleType","unselectedNode")("cornerRadius",8)("paddingX",6)("paddingY",6),n.Fb("transform",t.nodeNameTranslate),n.Eb(2),n.Fb("href","./content/images/object-types/"+t.node.data.icon+".svg"),n.Eb(2),n.sc("menuNode",t.node.data)}}function Cs(t,e){if(1&t&&(n.kc(),n.Yb(0,"g",15),n.Tb(1,"rect",16),n.Tb(2,"g",17,11),n.Tb(4,"image",18),n.Tb(5,"g",19),n.Xb()),2&t){const t=n.lc(2);n.Eb(1),n.Fb("height",t.rectHeight)("y",(0-t.rectHeight)/2),n.Eb(1),n.sc("text",t.node.data.name)("classificationName",t.node.data.nodeTypeDisplayName)("squircleType","selectedNode")("cornerRadius",8)("paddingX",6)("paddingY",6),n.Fb("transform",t.openNodeTextTranslate),n.Eb(2),n.Fb("y",t.openNodeImageY)("href","./content/images/object-types/"+t.node.data.icon+".svg"),n.Eb(1),n.sc("menuNode",t.node.data),n.Fb("transform",t.openNodeMenuTranslate)}}function Es(t,e){if(1&t&&(n.kc(),n.Yb(0,"g",3),n.Sc(1,Is,2,2,"title",4),n.Sc(2,Ts,8,13,"g",5),n.Sc(3,Cs,6,13,"g",6),n.Xb()),2&t){const t=n.lc();n.Rc("cursor",t.node.isSelected?"move":"pointer"),n.Eb(1),n.sc("ngIf",t.node.data.description),n.Eb(1),n.sc("ngIf",!t.node.isSelected),n.Eb(1),n.sc("ngIf",t.node.isSelected)}}const Ps=function(t){return[t]};function ks(t,e){if(1&t&&(n.kc(),n.Yb(0,"g",20,21),n.Tb(2,"g",22),n.Tb(3,"g",23,24),n.Xb()),2&t){const t=n.lc();n.Fb("transform",t.imaginaryNodeTranslate),n.Eb(2),n.sc("text",t.node.data.name)("squircleType","gridNode")("cornerRadius",10)("paddingX",8)("paddingY",2),n.Eb(1),n.sc("text",n.xc(13,Ps,t.node.data.description))("squircleType","badge")("size",12)("cornerRadius",8)("paddingX",4)("paddingY",1),n.Fb("transform",t.badgeTranslate)}}let Rs=(()=>{class t{constructor(t,e){this.translation=t,this.windowService=e,this.nodeIsHovered=new n.o,this.DESCRIPTION=this.translation.get("DESCRIPTION_LABEL","Description"),this.nodeNameTranslate="",this.openNodeTextTranslate="",this.openNodeMenuTranslate="",this.imaginaryNodeTranslate="",this.badgeTranslate="",this.rectHeight=100,this.openNodeImageY="",this.viewLoaded=!1,this.selectedNodeUID="",this.selectedNodeSeparator=0,this.isDeviceAndroid=!1,this.isDeviceIos=!1,this.isDeviceAndroid=this.windowService.isDeviceAndroid(),this.isDeviceIos=this.windowService.isDeviceIos()}set changes(t){t.hasOwnProperty("selectedNode")&&(this.viewLoaded?(this.focusSelectedNode(t.selectedNode),this.addMouseEnterEvent()):this.selectedNodeUID=t.selectedNode)}ngAfterViewInit(){setTimeout(()=>{if("GRID_NODE"!==this.node.data.type){const t=this.graphNodeName.elRef.nativeElement.getBBox();this.rectHeight=t.height+20+20+40,this.selectedNodeSeparator=-this.rectHeight/2+40,this.openNodeImageY=-this.rectHeight/2+20+"px",this.nodeNameTranslate="translate("+-(t.x+t.width/2)+",44)",this.openNodeTextTranslate="translate(-45,"+-(this.rectHeight/2+6-(this.node.data.name.length>1?20:28)+4)+")",this.openNodeMenuTranslate="translate(0,"+-this.selectedNodeSeparator+")"}else{const t=this.imaginaryNode.nativeElement.getBBox(),e=this.badgeNode.elRef.nativeElement.getBBox();this.imaginaryNodeTranslate="translate(-"+.55*t.width+",-"+.4*t.height+")",this.badgeTranslate="translate("+(t.width-e.width/2-8)+",-12)"}this.viewLoaded=!0})}focusSelectedNode(t){this.node.data.uid===t&&this.node.data.uid!==this.selectedNodeUID?(this.node.isLoading=!1,this.selectedNodeUID=t,this.selectNode()):this.node.data.uid!==t&&this.node.data.uid===this.selectedNodeUID&&(this.unselectNode(),this.selectedNodeUID=t)}selectNode(){this.node.isSelected=!0,this.stickNode()}unselectNode(){this.node.isSelected=!1,this.node.isRoot||this.unStickNode()}stickNode(){this.node.fx=this.node.x,this.node.fy=this.node.y}unStickNode(){this.node.fx=void 0,this.node.fy=void 0}addMouseEnterEvent(){this.isDeviceAndroid||this.isDeviceIos&&(this.node.isSelected||"GRID_NODE"===this.node.data.type)||this.singleNode.nativeElement.addEventListener("mouseenter",()=>{this.nodeIsHovered.emit()})}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(bt.a),n.Sb(re.a))},t.\u0275cmp=n.Mb({type:t,selectors:[["","sdaNode",""]],viewQuery:function(t,e){var i;1&t&&(n.bd(xs,!0),n.bd(Ds,!0),n.bd(Os,!0),n.bd(Ms,!0)),2&t&&(n.Gc(i=n.ic())&&(e.singleNode=i.first),n.Gc(i=n.ic())&&(e.graphNodeName=i.first),n.Gc(i=n.ic())&&(e.imaginaryNode=i.first),n.Gc(i=n.ic())&&(e.badgeNode=i.first))},inputs:{node:"node",changes:"changes"},outputs:{nodeIsHovered:"nodeIsHovered"},attrs:Ns,decls:4,vars:5,consts:[["singleNode",""],["class","infomap-container",3,"cursor",4,"ngIf"],["class","infomap-grid-node",4,"ngIf"],[1,"infomap-container"],[4,"ngIf"],["class","infomap-unselected-node",4,"ngIf"],["class","e2e-infomap-selected-node",4,"ngIf"],[1,"infomap-unselected-node"],["r","34","x","0","y","0",1,"infomap-unselected-node__circle"],["r","90",1,"infomap-unselected-node__overlay-circle"],["sdaSquircle","",1,"infomap-unselected-node__name",3,"text","classificationName","squircleType","cornerRadius","paddingX","paddingY"],["graphNodeName",""],["width","30px","height","30px","x","-15","y","-15"],[1,"infomap-unselected-node__hover-menu"],["sdaHoverMenu","",3,"menuNode"],[1,"e2e-infomap-selected-node"],["width","220px","x","-100","rx","10","ry","10",1,"infomap-selected-node__rect"],["sdaSquircle","",3,"text","classificationName","squircleType","cornerRadius","paddingX","paddingY"],["width","30px","height","30px","x","-85"],["sdaMainMenu","",1,"e2e-infomap-selected-node__menu",3,"menuNode"],[1,"infomap-grid-node"],["imaginaryNode",""],["sdaSquircle","",3,"text","squircleType","cornerRadius","paddingX","paddingY"],["sdaSquircle","",3,"text","squircleType","size","cornerRadius","paddingX","paddingY"],["badgeNode",""]],template:function(t,e){1&t&&(n.kc(),n.Yb(0,"g",null,0),n.Sc(2,Es,4,5,"g",1),n.Sc(3,ks,5,15,"g",2),n.Xb()),2&t&&(n.Rc("opacity",e.node.opacity),n.Fb("transform","translate("+e.node.x+","+e.node.y+")"),n.Eb(2),n.sc("ngIf","GRID_NODE"!==e.node.data.type),n.Eb(1),n.sc("ngIf","GRID_NODE"===e.node.data.type))},directives:[r.t,vs,_s,Ss],styles:["@-webkit-keyframes dash{0%{stroke-dashoffset:1000}to{stroke-dashoffset:0}}@keyframes dash{0%{stroke-dashoffset:1000}to{stroke-dashoffset:0}}.infomap-unselected-node__circle[_ngcontent-%COMP%]{fill:#fff;stroke:#a9b4be}.infomap-unselected-node__circle--loading[_ngcontent-%COMP%]{stroke-width:3;stroke-dasharray:10;stroke-dashoffset:100;-webkit-animation:dash 20s linear infinite alternate;animation:dash 20s linear infinite alternate}.infomap-unselected-node__overlay-circle[_ngcontent-%COMP%]{fill:transparent}.infomap-unselected-node__hover-menu[_ngcontent-%COMP%], .infomap-unselected-node__overlay-circle[_ngcontent-%COMP%]{visibility:hidden}.infomap-selected-node__rect[_ngcontent-%COMP%]{stroke:#026be3;stroke-width:2;fill:#fff}.infomap-grid-node[_ngcontent-%COMP%]{cursor:pointer}.infomap-container[_ngcontent-%COMP%]:hover   .infomap-unselected-node[_ngcontent-%COMP%]{-webkit-transform:scale(1.13);transform:scale(1.13)}.infomap-container[_ngcontent-%COMP%]:hover   .infomap-unselected-node__hover-menu[_ngcontent-%COMP%], .infomap-container[_ngcontent-%COMP%]:hover   .infomap-unselected-node__name[_ngcontent-%COMP%], .infomap-container[_ngcontent-%COMP%]:hover   .infomap-unselected-node__overlay-circle[_ngcontent-%COMP%]{visibility:visible!important}"]}),t})();function As(t,e){1&t&&(n.kc(),n.Tb(0,"g",9)),2&t&&n.sc("link",e.$implicit)}function Fs(t,e){if(1&t){const t=n.Zb();n.kc(),n.Yb(0,"g",null,10),n.Yb(2,"g",11),n.hc("click",(function(i){n.Kc(t);const r=e.$implicit;return n.lc().clicked(r,i)}))("nodeIsHovered",(function(){n.Kc(t);const e=n.Hc(1),i=n.lc(),r=n.Hc(6);return i.bringNodeForward(r,e)})),n.Xb(),n.Xb()}if(2&t){const t=e.$implicit,i=n.lc();n.Eb(2),n.sc("graph",i.graph)("node",t)("changes",i.nodeChanges)}}let Ls=(()=>{class t extends rs{constructor(t,e){super(),this.updateService=t,this.graphController=e,this.nodeChanges={},this.name="SINGLE_MODE",this.graph=new ur({nodes:this.nodes,links:this.links}),this.subscriptions.add(this.graphController.viewActions$.subscribe(t=>this.executeActions(t)))}clicked(t,e){e.stopPropagation(),"GRID_NODE"===t.data.type?this.graphController.gridNodeSelected(t.data):t.isSelected||(this.unStick(t),t.data.expanded||(t.isLoading=!0),this.nodeClick.emit(new Ot(t.data)))}executeActions(t){switch(t.type){case yt.enter:this.resolveFirstTimeInitialised(t.payload.current),this.enter(this.graphController.getFocusedNode());break;case yt.remove:this.remove(t.payload);break;case yt.destroy:this.destory(this.nodes,this.links);break;case It.clear_sticky:this.clearSticky(t.payload,.1,0,500);break;case It.zoomToFit:this.zoomToFit(t.payload);break;case yt.select:this.enter(this.graphController.getFocusedNode())}}enter(t){this.loaded$.next(!1),this.updateService.recenterNode(this.nodes,this.links,t,!0).pipe(Object(g.a)(1),Object(p.a)(()=>{this.refreshGraph(.5),this.zoomActions={value:t.data.children.length.toString()}}),Object(zn.a)(800),Object(p.a)(()=>this.selectNode()),Object(p.a)(t=>{t&&(this.updateService.enterLeafNodes(this.nodes,this.links,t,t.x,t.y),this.refreshGraph(this.aplhaScale(t.data.children.length)))}),Object(zn.a)(300),Object(p.a)(()=>this.refreshGraph()),Object(zn.a)(this.opacityDelayScale(t.data.children.length)),Object(p.a)(()=>{this.updateService.setOpacity(this.nodes,this.links),this.loaded$.next(!0),this.initialised=!0})).subscribe()}remove(t){this.enter(this.graphController.getFocusedNode(t.focused))}selectNode(){this.nodeChanges={selectedNode:this.graphController.FocusedUID}}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(En),n.Sb(te))},t.\u0275cmp=n.Mb({type:t,selectors:[["sda-single-mode-graph"]],features:[n.Bb],decls:9,vars:5,consts:[[1,"base-graph"],["svg",""],["x","50%","y","50%",1,"base-graph__position-svg"],["innerSvg",""],["x","-50%","y","-50%","width","100%","height","100%",1,"base-graph__overlay-rect"],["sdaZoom","",3,"innerSvg","svg","zoomActions"],["nodesGraph",""],["sdaLink","",3,"link",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["sdaLink","",3,"link"],["nodeGroup",""],["sdaDrag","","sdaNode","",3,"graph","node","changes","click","nodeIsHovered"]],template:function(t,e){if(1&t&&(n.kc(),n.Yb(0,"svg",0,1),n.Yb(2,"svg",2,3),n.Tb(4,"rect",4),n.Yb(5,"g",5,6),n.Sc(7,As,1,1,"g",7),n.Sc(8,Fs,3,3,"g",8),n.Xb(),n.Xb(),n.Xb()),2&t){const t=n.Hc(1),i=n.Hc(3);n.Eb(5),n.sc("innerSvg",i)("svg",t)("zoomActions",e.zoomActions),n.Eb(2),n.sc("ngForOf",e.links),n.Eb(1),n.sc("ngForOf",e.nodes)}},directives:[ss,r.s,cs,ls,Rs],styles:["[_nghost-%COMP%]{display:flex}.base-graph[_ngcontent-%COMP%], [_nghost-%COMP%]{width:100%;height:100%}.base-graph__position-svg[_ngcontent-%COMP%]{overflow:visible}.base-graph__overlay-rect[_ngcontent-%COMP%]{opacity:0}"]}),t})();class js extends lr{constructor(t){super(),this.initSimulation(t.nodes,t.links)}initSimulation(t,e){this.simulation||(this.simulation=cr().force("collision",tr(t=>t.r?t.r:60).strength(.8)).force("charge",hr().strength(-1e4)),this.initNodes(t),this.initLinks(e)),this.simulation.alpha(.2).restart()}}function Us(t,e){1&t&&(n.kc(),n.Tb(0,"g",9)),2&t&&n.sc("link",e.$implicit)}function Bs(t,e){if(1&t){const t=n.Zb();n.kc(),n.Yb(0,"g",null,10),n.Yb(2,"g",11),n.hc("click",(function(i){n.Kc(t);const r=e.$implicit;return n.lc().clicked(r,i)}))("nodeIsHovered",(function(){n.Kc(t);const e=n.Hc(1),i=n.lc(),r=n.Hc(6);return i.bringNodeForward(r,e)})),n.Xb(),n.Xb()}if(2&t){const t=e.$implicit,i=n.lc();n.Eb(2),n.sc("graph",i.graph)("node",t)("changes",i.nodeChanges)}}let zs=(()=>{class t extends rs{constructor(t,e){super(),this.updateService=t,this.graphController=e,this.nodeChanges={},this.name="MULTI_MODE",this.graph=new js({nodes:this.nodes,links:this.links}),this.subscriptions.add(this.graphController.viewActions$.subscribe(t=>this.executeActions(t)))}clicked(t,e){e.stopPropagation(),"GRID_NODE"===t.data.type?this.graphController.gridNodeSelected(t.data):t.isSelected||(this.stick(t),t.data.expanded||(t.isLoading=!0),this.nodeClick.emit(new Ot(t.data)))}executeActions(t){switch(t.type){case yt.enter:const e=t.payload.current;this.resolveFirstTimeInitialised(e)&&e&&(this.updateService.enterCluster(this.nodes,this.links,this.graphController.getFocusedNode(e)),this.initialised=!0),this.enter(this.graphController.getFocusedNode());break;case yt.remove:this.remove(t.payload);break;case yt.destroy:this.destory(this.nodes,this.links);break;case It.clear_sticky:this.clearSticky(t.payload,.1,0,500);break;case It.zoomToFit:this.zoomToFit(t.payload);break;case yt.select:this.loaded$.next(!1),this.selectNode(),this.refreshGraph(.01),setTimeout(()=>{this.loaded$.next(!0),this.refreshGraph(0)},200)}}enter(t){this.loaded$.next(!1),this.updateService.recenterNode(this.nodes,this.links,t,!this.initialised).pipe(Object(g.a)(1),Object(p.a)(()=>{this.initialised?this.refreshGraph():(this.refreshGraph(.5),this.zoomActions={value:t.data.children.length.toString()})}),Object(zn.a)(800),Object(p.a)(()=>this.selectNode()),Object(p.a)(t=>{t&&(this.updateService.enterLeafNodes(this.nodes,this.links,t,t.x,t.y),this.managePathVisited(t.data.uid,!0,this.links),this.refreshGraph(.6*this.aplhaScale(t.data.children.length)))}),Object(zn.a)(this.opacityDelayScale(t.data.children.length)),Object(p.a)(()=>this.refreshGraph()),Object(zn.a)(this.opacityDelayScale(t.data.children.length)),Object(p.a)(()=>{this.updateService.setOpacity(this.nodes,this.links),this.loaded$.next(!0),this.initialised=!0})).subscribe()}remove(t){this.loaded$.next(!1),this.refreshGraph(.2),this.selectNode(),this.updateService.removeChildNodes(this.nodes,this.links,this.graphController.getFocusedNode(t.current)),this.managePathVisited(t.current,!1,this.links),setTimeout(()=>{this.refreshGraph(),this.loaded$.next(!0)},300)}selectNode(){this.nodeChanges={selectedNode:this.graphController.FocusedUID}}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(En),n.Sb(te))},t.\u0275cmp=n.Mb({type:t,selectors:[["sda-multi-mode-graph"]],features:[n.Bb],decls:9,vars:5,consts:[[1,"base-graph"],["svg",""],["x","50%","y","50%",1,"base-graph__position-svg"],["innerSvg",""],["x","-50%","y","-50%","width","100%","height","100%",1,"base-graph__overlay-rect"],["sdaZoom","",3,"innerSvg","svg","zoomActions"],["nodesGraph",""],["sdaLink","",3,"link",4,"ngFor","ngForOf"],[4,"ngFor","ngForOf"],["sdaLink","",3,"link"],["nodeGroup",""],["sdaDrag","","sdaNode","",3,"graph","node","changes","click","nodeIsHovered"]],template:function(t,e){if(1&t&&(n.kc(),n.Yb(0,"svg",0,1),n.Yb(2,"svg",2,3),n.Tb(4,"rect",4),n.Yb(5,"g",5,6),n.Sc(7,Us,1,1,"g",7),n.Sc(8,Bs,3,3,"g",8),n.Xb(),n.Xb(),n.Xb()),2&t){const t=n.Hc(1),i=n.Hc(3);n.Eb(5),n.sc("innerSvg",i)("svg",t)("zoomActions",e.zoomActions),n.Eb(2),n.sc("ngForOf",e.links),n.Eb(1),n.sc("ngForOf",e.nodes)}},directives:[ss,r.s,cs,ls,Rs],styles:["[_nghost-%COMP%]{display:flex}.base-graph[_ngcontent-%COMP%], [_nghost-%COMP%]{width:100%;height:100%}.base-graph__position-svg[_ngcontent-%COMP%]{overflow:visible}.base-graph__overlay-rect[_ngcontent-%COMP%]{opacity:0}"]}),t})();var qs=i("BLbD"),Hs=i("1uah");let Ys=(()=>{class t{constructor(t){this.controllerService=t,this.subscriptions=new h.a}ngOnInit(){this.subscriptions.add(Object(Hs.a)(...this.viewLoaded).subscribe(t=>{let e=!0;t.forEach(t=>e=t&&e),this.controllerService.loaded=e}))}ngOnDestroy(){this.subscriptions.unsubscribe()}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(te))},t.\u0275dir=n.Nb({type:t,selectors:[["","sdaViewLoaded",""]],inputs:{viewLoaded:"viewLoaded"}}),t})();const $s=function(t,e){return[t,e]};let Xs=(()=>{class t{constructor(t,e,i,n){this.graphControllerService=t,this.route=e,this.store=i,this.preferencesService=n,this.subscriptions=new h.a}ngOnInit(){this.subscriptions.add(this.route.paramMap.pipe(Object(v.a)(t=>{const e=Array.isArray(JSON.parse(t.get("config")))?JSON.parse(t.get("config"))[0]:JSON.parse(t.get("config")),i=t.get("obid"),n=this.route.snapshot.queryParamMap.get("mode");return this.store.dispatch(new Nt("embedded"===n)),this.store.dispatch(new Mt(e)),this.graphControllerService.resetInitiliseData(),this.graphControllerService.requestNodes(i)})).subscribe(t=>{t.length&&(this.graphControllerService.cacheNodes(t),this.graphControllerService.loadData(t[0].uid,new wt({current:this.graphControllerService.initialised?"":this.graphControllerService.FocusedUID,focused:t[0].uid}),{visited:!0}),this.graphControllerService.changeNodeProperties(t[0].uid,{expanded:!0,visited:!0}),this.graphControllerService.initialised=!0)})),this.subscriptions.add(this.preferencesService.preferencesChanged$.subscribe(t=>{this.store.get("nodeTypeDisplay").value=at[t.SPFInfoMapNodeDisplayType]})),this.graphControllerService.disableButtonsInEmbeddedMode()}ngOnDestroy(){this.subscriptions.unsubscribe(),this.store.get("embedded")||this.graphControllerService.destroy()}nodeClickEvent(t){switch(this.graphControllerService.clickAction.value){case"expand":this.graphControllerService.focusAndExpandNode(t.payload);break;case"highlight":t.payload.highlight="#03a9f4"===t.payload.highlight?"#fff":"#03a9f4",this.graphControllerService.saveCheckpointState(t.payload.uid,{highlight:t.payload.highlight});break;case"routeToInfomap":this.graphControllerService.routeToInfomap(t.payload.obid,t.payload.data.parentOBID)}}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(te),n.Sb(Qt.a),n.Sb(Kt),n.Sb(Bn.a))},t.\u0275cmp=n.Mb({type:t,selectors:[["sda-graph-controller"]],decls:8,vars:10,consts:[[1,"graph-controller"],[1,"graph-controller__container"],[3,"nodeClick"],["singleMode",""],["multiMode",""],["sdaViewLoaded","",3,"toggle","mode","viewLoaded"]],template:function(t,e){if(1&t&&(n.Yb(0,"div",0),n.Yb(1,"div",1),n.Yb(2,"sda-single-mode-graph",2,3),n.hc("nodeClick",(function(t){return e.nodeClickEvent(t)})),n.Xb(),n.Xb(),n.Yb(4,"div",1),n.Yb(5,"sda-multi-mode-graph",2,4),n.hc("nodeClick",(function(t){return e.nodeClickEvent(t)})),n.Xb(),n.Xb(),n.Xb(),n.Tb(7,"sda-blanket",5)),2&t){const t=n.Hc(3),i=n.Hc(6);n.Eb(1),n.Rc("width",e.graphControllerService.isSingleModeActive.value?"100%":0),n.Eb(3),n.Rc("width",e.graphControllerService.isSingleModeActive.value?0:"100%"),n.Eb(3),n.sc("toggle",!e.graphControllerService.loaded)("mode","light-grey")("viewLoaded",n.yc(7,$s,t.loaded$,i.loaded$))}},directives:[Ls,zs,qs.a,Ys],styles:["[_nghost-%COMP%]{display:flex;height:100%;background-color:#ebedf0}[_nghost-%COMP%]     .blanket{left:44px}.graph-controller[_ngcontent-%COMP%]{display:flex;width:100%;height:100%;-webkit-user-select:none;-ms-user-select:none;user-select:none}.graph-controller__container[_ngcontent-%COMP%]{overflow:hidden}"]}),t})();const Gs=[{path:"",component:(()=>{class t{constructor(t,e,i,n,r){this.infomapPowerBarService=t,this.applicationSettingsService=e,this.sdaTranslateService=i,this.helpService=n,this.route=r,this.leftPowerBarButtons=[],this.backgroundStyle=Fn.a.Transparent,this.applicationSettingsService.setPageTitle(this.sdaTranslateService.get("INFOMAP_TITLE","Infomap")),this.helpService.setHandlers(jn.s),this.leftPowerBarButtons=this.infomapPowerBarService.setUpPowerBar()}}return t.\u0275fac=function(e){return new(e||t)(n.Sb(ve),n.Sb(An.a),n.Sb(bt.a),n.Sb(Ln.a),n.Sb(Qt.a))},t.\u0275cmp=n.Mb({type:t,selectors:[["sda-info-map"]],decls:2,vars:2,consts:[[3,"background","leftControls"]],template:function(t,e){1&t&&(n.Tb(0,"sda-power-bar-view",0),n.Tb(1,"sda-graph-controller")),2&t&&n.sc("background",e.backgroundStyle)("leftControls",e.leftPowerBarButtons)},directives:[Un.a,Xs],styles:["[_nghost-%COMP%]{display:flex;flex-direction:column;width:100%;height:100%}[_nghost-%COMP%]     .button--default{color:#697a8b!important}sda-power-bar-view[_ngcontent-%COMP%]{padding:0 6px;background-color:#fff;border-bottom:1px solid #d0d0d0}"]}),t})(),canActivate:[Rn]}];let Vs=(()=>{class t{}return t.\u0275mod=n.Qb({type:t}),t.\u0275inj=n.Pb({factory:function(e){return new(e||t)},providers:[Rn],imports:[[Qt.k.forChild(Gs)],Qt.k]}),t})(),Ws=(()=>{class t{}return t.\u0275mod=n.Qb({type:t}),t.\u0275inj=n.Pb({factory:function(e){return new(e||t)},imports:[[Vs,Pn]]}),t})()},K9v4:function(t,e,i){"use strict";i.d(e,"a",(function(){return I}));var n=i("ofXK"),r=i("3Pt+"),s=i("tyNb"),o=i("F+hv"),a=i("txXS"),c=i("Tfoa"),h=i("uD/B"),l=i("BLqR"),u=i("+T9e"),d=i("fXoL"),f=i("TLn4"),g=i("ue3H"),p=i("qx4N"),v=i("+qkj"),m=i("RY2J"),b=i("HDO1"),_=i("4dwF"),y=i("dLJk"),w=i("F8dI"),S=i("rrPm"),x=i("8OmR"),D=i("ltBE"),O=i("XwBL");let M=(()=>{class t{transform(t){return O.a.replaceUnderscore(t)}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=d.Rb({name:"sdaFormatEntityType",type:t,pure:!0}),t})();var N=i("7Ihv");let I=(()=>{class t{}return t.\u0275mod=d.Qb({type:t}),t.\u0275inj=d.Pb({factory:function(e){return new(e||t)},imports:[[n.c,r.j,a.a,s.k,o.a,h.a,c.a]]}),t})();d.Nc(l.a,[n.q,n.r,n.s,n.t,n.A,n.w,n.x,n.y,n.z,n.u,n.v,r.F,r.u,r.E,r.c,r.v,r.y,r.a,r.B,r.C,r.x,r.p,r.q,r.A,r.l,r.k,r.w,r.b,r.d,r.s,r.t,r.r,s.l,s.h,s.j,s.i,s.n,f.a,g.a,p.a,v.a,u.a,l.a],[n.b,n.G,n.p,n.k,n.E,n.g,n.C,n.F,n.d,n.f,n.i,n.j,n.l,m.a,b.a,_.a,y.a,w.a,S.a,x.a,D.a,M,N.a])},KKCa:function(t,e){t.exports="function"==typeof Object.create?function(t,e){t.super_=e,t.prototype=Object.create(e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}})}:function(t,e){t.super_=e;var i=function(){};i.prototype=e.prototype,t.prototype=new i,t.prototype.constructor=t}},MCLT:function(t,e,i){var n=Object.getOwnPropertyDescriptors||function(t){for(var e=Object.keys(t),i={},n=0;n<e.length;n++)i[e[n]]=Object.getOwnPropertyDescriptor(t,e[n]);return i},r=/%[sdj%]/g;e.format=function(t){if(!m(t)){for(var e=[],i=0;i<arguments.length;i++)e.push(a(arguments[i]));return e.join(" ")}i=1;for(var n=arguments,s=n.length,o=String(t).replace(r,(function(t){if("%%"===t)return"%";if(i>=s)return t;switch(t){case"%s":return String(n[i++]);case"%d":return Number(n[i++]);case"%j":try{return JSON.stringify(n[i++])}catch(e){return"[Circular]"}default:return t}})),c=n[i];i<s;c=n[++i])p(c)||!y(c)?o+=" "+c:o+=" "+a(c);return o},e.deprecate=function(t,i){if("undefined"!=typeof process&&!0===process.noDeprecation)return t;if("undefined"==typeof process)return function(){return e.deprecate(t,i).apply(this,arguments)};var n=!1;return function(){if(!n){if(process.throwDeprecation)throw new Error(i);process.traceDeprecation?console.trace(i):console.error(i),n=!0}return t.apply(this,arguments)}};var s,o={};function a(t,i){var n={seen:[],stylize:h};return arguments.length>=3&&(n.depth=arguments[2]),arguments.length>=4&&(n.colors=arguments[3]),g(i)?n.showHidden=i:i&&e._extend(n,i),b(n.showHidden)&&(n.showHidden=!1),b(n.depth)&&(n.depth=2),b(n.colors)&&(n.colors=!1),b(n.customInspect)&&(n.customInspect=!0),n.colors&&(n.stylize=c),l(n,t,n.depth)}function c(t,e){var i=a.styles[e];return i?"\x1b["+a.colors[i][0]+"m"+t+"\x1b["+a.colors[i][1]+"m":t}function h(t,e){return t}function l(t,i,n){if(t.customInspect&&i&&x(i.inspect)&&i.inspect!==e.inspect&&(!i.constructor||i.constructor.prototype!==i)){var r=i.inspect(n,t);return m(r)||(r=l(t,r,n)),r}var s=function(t,e){if(b(e))return t.stylize("undefined","undefined");if(m(e)){var i="'"+JSON.stringify(e).replace(/^"|"$/g,"").replace(/'/g,"\\'").replace(/\\"/g,'"')+"'";return t.stylize(i,"string")}return v(e)?t.stylize(""+e,"number"):g(e)?t.stylize(""+e,"boolean"):p(e)?t.stylize("null","null"):void 0}(t,i);if(s)return s;var o=Object.keys(i),a=function(t){var e={};return t.forEach((function(t,i){e[t]=!0})),e}(o);if(t.showHidden&&(o=Object.getOwnPropertyNames(i)),S(i)&&(o.indexOf("message")>=0||o.indexOf("description")>=0))return u(i);if(0===o.length){if(x(i))return t.stylize("[Function"+(i.name?": "+i.name:"")+"]","special");if(_(i))return t.stylize(RegExp.prototype.toString.call(i),"regexp");if(w(i))return t.stylize(Date.prototype.toString.call(i),"date");if(S(i))return u(i)}var c,h="",y=!1,D=["{","}"];return f(i)&&(y=!0,D=["[","]"]),x(i)&&(h=" [Function"+(i.name?": "+i.name:"")+"]"),_(i)&&(h=" "+RegExp.prototype.toString.call(i)),w(i)&&(h=" "+Date.prototype.toUTCString.call(i)),S(i)&&(h=" "+u(i)),0!==o.length||y&&0!=i.length?n<0?_(i)?t.stylize(RegExp.prototype.toString.call(i),"regexp"):t.stylize("[Object]","special"):(t.seen.push(i),c=y?function(t,e,i,n,r){for(var s=[],o=0,a=e.length;o<a;++o)I(e,String(o))?s.push(d(t,e,i,n,String(o),!0)):s.push("");return r.forEach((function(r){r.match(/^\d+$/)||s.push(d(t,e,i,n,r,!0))})),s}(t,i,n,a,o):o.map((function(e){return d(t,i,n,a,e,y)})),t.seen.pop(),function(t,e,i){return t.reduce((function(t,e){return e.indexOf("\n"),t+e.replace(/\u001b\[\d\d?m/g,"").length+1}),0)>60?i[0]+(""===e?"":e+"\n ")+" "+t.join(",\n  ")+" "+i[1]:i[0]+e+" "+t.join(", ")+" "+i[1]}(c,h,D)):D[0]+h+D[1]}function u(t){return"["+Error.prototype.toString.call(t)+"]"}function d(t,e,i,n,r,s){var o,a,c;if((c=Object.getOwnPropertyDescriptor(e,r)||{value:e[r]}).get?a=t.stylize(c.set?"[Getter/Setter]":"[Getter]","special"):c.set&&(a=t.stylize("[Setter]","special")),I(n,r)||(o="["+r+"]"),a||(t.seen.indexOf(c.value)<0?(a=p(i)?l(t,c.value,null):l(t,c.value,i-1)).indexOf("\n")>-1&&(a=s?a.split("\n").map((function(t){return"  "+t})).join("\n").substr(2):"\n"+a.split("\n").map((function(t){return"   "+t})).join("\n")):a=t.stylize("[Circular]","special")),b(o)){if(s&&r.match(/^\d+$/))return a;(o=JSON.stringify(""+r)).match(/^"([a-zA-Z_][a-zA-Z_0-9]*)"$/)?(o=o.substr(1,o.length-2),o=t.stylize(o,"name")):(o=o.replace(/'/g,"\\'").replace(/\\"/g,'"').replace(/(^"|"$)/g,"'"),o=t.stylize(o,"string"))}return o+": "+a}function f(t){return Array.isArray(t)}function g(t){return"boolean"==typeof t}function p(t){return null===t}function v(t){return"number"==typeof t}function m(t){return"string"==typeof t}function b(t){return void 0===t}function _(t){return y(t)&&"[object RegExp]"===D(t)}function y(t){return"object"==typeof t&&null!==t}function w(t){return y(t)&&"[object Date]"===D(t)}function S(t){return y(t)&&("[object Error]"===D(t)||t instanceof Error)}function x(t){return"function"==typeof t}function D(t){return Object.prototype.toString.call(t)}function O(t){return t<10?"0"+t.toString(10):t.toString(10)}e.debuglog=function(t){if(b(s)&&(s=process.env.NODE_DEBUG||""),t=t.toUpperCase(),!o[t])if(new RegExp("\\b"+t+"\\b","i").test(s)){var i=process.pid;o[t]=function(){var n=e.format.apply(e,arguments);console.error("%s %d: %s",t,i,n)}}else o[t]=function(){};return o[t]},e.inspect=a,a.colors={bold:[1,22],italic:[3,23],underline:[4,24],inverse:[7,27],white:[37,39],grey:[90,39],black:[30,39],blue:[34,39],cyan:[36,39],green:[32,39],magenta:[35,39],red:[31,39],yellow:[33,39]},a.styles={special:"cyan",number:"yellow",boolean:"yellow",undefined:"grey",null:"bold",string:"green",date:"magenta",regexp:"red"},e.isArray=f,e.isBoolean=g,e.isNull=p,e.isNullOrUndefined=function(t){return null==t},e.isNumber=v,e.isString=m,e.isSymbol=function(t){return"symbol"==typeof t},e.isUndefined=b,e.isRegExp=_,e.isObject=y,e.isDate=w,e.isError=S,e.isFunction=x,e.isPrimitive=function(t){return null===t||"boolean"==typeof t||"number"==typeof t||"string"==typeof t||"symbol"==typeof t||void 0===t},e.isBuffer=i("1gqn");var M=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];function N(){var t=new Date,e=[O(t.getHours()),O(t.getMinutes()),O(t.getSeconds())].join(":");return[t.getDate(),M[t.getMonth()],e].join(" ")}function I(t,e){return Object.prototype.hasOwnProperty.call(t,e)}e.log=function(){console.log("%s - %s",N(),e.format.apply(e,arguments))},e.inherits=i("KKCa"),e._extend=function(t,e){if(!e||!y(e))return t;for(var i=Object.keys(e),n=i.length;n--;)t[i[n]]=e[i[n]];return t};var T="undefined"!=typeof Symbol?Symbol("util.promisify.custom"):void 0;function C(t,e){if(!t){var i=new Error("Promise was rejected with a falsy value");i.reason=t,t=i}return e(t)}e.promisify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');if(T&&t[T]){var e;if("function"!=typeof(e=t[T]))throw new TypeError('The "util.promisify.custom" argument must be of type Function');return Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0}),e}function e(){for(var e,i,n=new Promise((function(t,n){e=t,i=n})),r=[],s=0;s<arguments.length;s++)r.push(arguments[s]);r.push((function(t,n){t?i(t):e(n)}));try{t.apply(this,r)}catch(o){i(o)}return n}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),T&&Object.defineProperty(e,T,{value:e,enumerable:!1,writable:!1,configurable:!0}),Object.defineProperties(e,n(t))},e.promisify.custom=T,e.callbackify=function(t){if("function"!=typeof t)throw new TypeError('The "original" argument must be of type Function');function e(){for(var e=[],i=0;i<arguments.length;i++)e.push(arguments[i]);var n=e.pop();if("function"!=typeof n)throw new TypeError("The last argument must be of type Function");var r=this,s=function(){return n.apply(r,arguments)};t.apply(this,e).then((function(t){process.nextTick(s,null,t)}),(function(t){process.nextTick(C,t,s)}))}return Object.setPrototypeOf(e,Object.getPrototypeOf(t)),Object.defineProperties(e,n(t)),e}},b5tu:function(t,e,i){"use strict";i.d(e,"a",(function(){return u}));var n=i("ofXK"),r=i("bSwM"),s=i("M9IT"),o=i("QibW"),a=i("+0xr"),c=i("2C+J"),h=i("tAal"),l=i("fXoL");let u=(()=>{class t{}return t.\u0275mod=l.Qb({type:t}),t.\u0275inj=l.Pb({factory:function(e){return new(e||t)},imports:[[n.c,c.a,h.a,a.l,r.b,o.c,s.b]]}),t})()},d74k:function(t,e,i){"use strict";i.d(e,"a",(function(){return n}));class n{constructor(t,e){this.field=t,this.dir=e}}},ltBE:function(t,e,i){"use strict";i.d(e,"a",(function(){return r}));var n=i("fXoL");let r=(()=>{class t{transform(t,e,i){return t?i?t.filter(t=>t[e].toLowerCase().includes(i.toLowerCase())):t:[]}}return t.\u0275fac=function(e){return new(e||t)},t.\u0275pipe=n.Rb({name:"sdaFilter",type:t,pure:!0}),t})()},tAal:function(t,e,i){"use strict";i.d(e,"a",(function(){return a}));var n=i("ofXK"),r=i("vFAW"),s=i("fXoL");let o=(()=>{class t{}return t.\u0275mod=s.Qb({type:t}),t.\u0275inj=s.Pb({factory:function(e){return new(e||t)},imports:[[n.c]]}),t})(),a=(()=>{class t{}return t.\u0275mod=s.Qb({type:t}),t.\u0275inj=s.Pb({factory:function(e){return new(e||t)},imports:[[n.c,r.a,o]]}),t})()},yzqN:function(t,e,i){"use strict";i.d(e,"a",(function(){return n})),i.d(e,"b",(function(){return r})),i.d(e,"c",(function(){return s})),i.d(e,"e",(function(){return o})),i.d(e,"f",(function(){return a})),i.d(e,"g",(function(){return c})),i.d(e,"h",(function(){return h})),i.d(e,"k",(function(){return l})),i.d(e,"i",(function(){return u})),i.d(e,"j",(function(){return d})),i.d(e,"m",(function(){return f})),i.d(e,"o",(function(){return g})),i.d(e,"p",(function(){return p})),i.d(e,"r",(function(){return v})),i.d(e,"s",(function(){return m})),i.d(e,"t",(function(){return b})),i.d(e,"u",(function(){return _})),i.d(e,"v",(function(){return y})),i.d(e,"w",(function(){return w})),i.d(e,"x",(function(){return S})),i.d(e,"y",(function(){return x})),i.d(e,"z",(function(){return D})),i.d(e,"A",(function(){return O})),i.d(e,"B",(function(){return M})),i.d(e,"C",(function(){return N})),i.d(e,"E",(function(){return I})),i.d(e,"F",(function(){return T})),i.d(e,"q",(function(){return C})),i.d(e,"D",(function(){return E})),i.d(e,"n",(function(){return P})),i.d(e,"d",(function(){return k})),i.d(e,"l",(function(){return R}));const n="787103",r="820826",s="825969",o="858646",a="858646",c="858646",h="858646",l="858646",u="858646",d="858646",f="791026",g="858646",p="817611",v="787103",m="794537",b="824313",_="791026",y="926854",w="939623",S="816118",x="791870",D="812357",O="794563",M="939623",N="791037",I="820826",T="817611",C="865948",E="987283",P="1016694",k="1028155",R="1125484"}}]);