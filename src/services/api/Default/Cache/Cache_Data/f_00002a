(window.webpackJsonp=window.webpackJsonp||[]).push([[22],{KxGU:function(e,t,n){"use strict";n.d(t,"a",(function(){return j}));var i=n("0EQZ"),c=n("FvrZ"),o=n("8yBR"),a=n("lJxs"),s=n("IzEk"),l=n("uxyQ"),r=n("C4gn"),d=n("xc+7"),h=n("PoZZ"),b=n("Ejbi"),u=n("+eYH"),g=n("JrsU"),m=n("sK1G"),f=n("o8o6"),p=n("fXoL"),S=n("ofXK"),_=n("qymv"),C=n("Qu3c"),T=n("STbY"),O=n("bTqV"),v=n("bSwM"),x=n("Jgl7"),k=n("4CIq"),I=n("NFeN");function w(e,t){if(1&e){const e=p.Zb();p.Yb(0,"sda-odata-filter",6),p.hc("valueChange",(function(t){return p.Kc(e),p.lc().primaryCellFilterChanged(t)})),p.Xb()}if(2&e){const e=p.lc();p.sc("showSelectedItemsFilter",e.tab.showSelectedItemsFilter)("disableSelectedItemsFilter",0===e.tab.selectedRows.length)("fields",e.filterableColumns)}}function M(e,t){1&e&&p.Tb(0,"button",18)}function E(e,t){if(1&e){const e=p.Zb();p.Yb(0,"mat-checkbox",19),p.hc("change",(function(){p.Kc(e);const t=p.lc().$implicit;return p.lc().onLeafNodeCheckboxChange(t)})),p.Xb()}if(2&e){const e=p.lc().$implicit,t=p.lc();p.sc("checked",t.checklistSelection.isSelected(e))("disabled",e.disabled)("disabled",e.disabled)}}function N(e,t){if(1&e){const e=p.Zb();p.Yb(0,"mat-checkbox",20),p.hc("change",(function(){p.Kc(e);const t=p.lc().$implicit;return p.lc().selectedNodeChanged(t)})),p.Xb()}if(2&e){const e=p.lc().$implicit,t=p.lc();p.sc("checked",t.checklistSelection.isSelected(e))("disabled",e.disabled)}}function P(e,t){if(1&e&&p.Tb(0,"sda-object-icon",21),2&e){const e=p.lc().$implicit;p.sc("imageName",null==e?null:e.iconName)}}function F(e,t){if(1&e){const e=p.Zb();p.Yb(0,"sda-button-plain",22),p.hc("onMenuOpen",(function(){p.Kc(e);const t=p.lc().$implicit;return p.lc().onMenuOpened(t)})),p.Xb()}if(2&e){p.lc();const e=p.Hc(11);p.sc("matMenuTriggerFor",e)("matSvgIcon","overflow")}}function R(e,t){if(1&e){const e=p.Zb();p.Yb(0,"button",23),p.hc("click",(function(){p.Kc(e);const n=t.$implicit,i=p.lc().$implicit;return p.lc().onMenuItemClick(n,i)})),p.Uc(1),p.Xb()}if(2&e){const e=t.$implicit;p.Eb(1),p.Wc(" ",e.DisplayName," ")}}function y(e,t){if(1&e){const e=p.Zb();p.Yb(0,"mat-tree-node",7),p.Yb(1,"li",8),p.Sc(2,M,1,0,"button",9),p.Sc(3,E,1,3,"mat-checkbox",10),p.Sc(4,N,1,2,"mat-checkbox",11),p.Yb(5,"div",12),p.hc("click",(function(){p.Kc(e);const n=t.$implicit;return p.lc().selectedNodeChanged(n)})),p.Sc(6,P,1,1,"sda-object-icon",13),p.Yb(7,"p",14),p.Uc(8),p.Xb(),p.Xb(),p.Sc(9,F,1,2,"sda-button-plain",15),p.Yb(10,"mat-menu",null,16),p.Sc(12,R,2,1,"button",17),p.Xb(),p.Xb(),p.Xb()}if(2&e){const e=t.$implicit,n=p.lc();p.Eb(1),p.Ib("tree-node--disabled",e.disabled)("tree-node--active",n.checklistSelection.isSelected(e)&&(n.tab.type===n.treeType.List||!n.tab.showRowSelectionCheckbox)),p.sc("matTooltip",null==e?null:e.tooltip)("matTooltipShowDelay",400)("matTooltipPosition","left")("matTooltipTouchGestures","off"),p.Eb(1),p.sc("ngIf",n.tab.type!==n.treeType.List),p.Eb(1),p.sc("ngIf",n.tab.showRowSelectionCheckbox&&!n.tab.singleNodeSelection),p.Eb(1),p.sc("ngIf",n.tab.showRowSelectionCheckbox&&n.tab.singleNodeSelection),p.Eb(2),p.sc("ngIf",null==e?null:e.iconName),p.Eb(2),p.Vc(e.name),p.Eb(1),p.sc("ngIf",n.tab.showOverflowMenu&&((null==n.tab.apiContextMenu?null:n.tab.apiContextMenu.menuOptionAPIs)||(null==e.apiContextMenu?null:e.apiContextMenu.menuOptionAPIs))),p.Eb(3),p.sc("ngForOf",n.menuItems)}}function D(e,t){if(1&e){const e=p.Zb();p.Yb(0,"mat-checkbox",30),p.hc("change",(function(){p.Kc(e);const t=p.lc().$implicit;return p.lc().onCheckboxChange(t)})),p.Xb()}if(2&e){const e=p.lc().$implicit,t=p.lc();p.sc("checked",t.checklistSelection.isSelected(e))("indeterminate",t.descendantsPartiallySelected(e))("disabled",e.disabled)("disabled",e.disabled)}}function L(e,t){if(1&e){const e=p.Zb();p.Yb(0,"mat-checkbox",20),p.hc("change",(function(){p.Kc(e);const t=p.lc().$implicit;return p.lc().selectedNodeChanged(t)})),p.Xb()}if(2&e){const e=p.lc().$implicit,t=p.lc();p.sc("checked",t.checklistSelection.isSelected(e))("disabled",e.disabled)}}function X(e,t){if(1&e&&p.Tb(0,"sda-object-icon",21),2&e){const e=p.lc().$implicit;p.sc("imageName",null==e?null:e.iconName)}}function Y(e,t){if(1&e){const e=p.Zb();p.Yb(0,"sda-button-plain",22),p.hc("onMenuOpen",(function(){p.Kc(e);const t=p.lc().$implicit;return p.lc().onMenuOpened(t)})),p.Xb()}if(2&e){p.lc();const e=p.Hc(13);p.sc("matMenuTriggerFor",e)("matSvgIcon","overflow")}}function A(e,t){if(1&e){const e=p.Zb();p.Yb(0,"button",23),p.hc("click",(function(){p.Kc(e);const n=t.$implicit,i=p.lc().$implicit;return p.lc().onMenuItemClick(n,i)})),p.Uc(1),p.Xb()}if(2&e){const e=t.$implicit;p.Eb(1),p.Wc(" ",e.DisplayName," ")}}function $(e,t){if(1&e){const e=p.Zb();p.Yb(0,"mat-nested-tree-node"),p.Yb(1,"li"),p.Yb(2,"div",24),p.Yb(3,"button",25),p.Tb(4,"mat-icon",26),p.Xb(),p.Sc(5,D,1,4,"mat-checkbox",27),p.Sc(6,L,1,2,"mat-checkbox",11),p.Yb(7,"div",12),p.hc("click",(function(){p.Kc(e);const n=t.$implicit;return p.lc().selectedNodeChanged(n)})),p.Sc(8,X,1,1,"sda-object-icon",13),p.Yb(9,"p",14),p.Uc(10),p.Xb(),p.Xb(),p.Sc(11,Y,1,2,"sda-button-plain",15),p.Yb(12,"mat-menu",null,16),p.Sc(14,A,2,1,"button",17),p.Xb(),p.Xb(),p.Yb(15,"ul",28),p.Ub(16,29),p.Xb(),p.Xb(),p.Xb()}if(2&e){const e=t.$implicit,n=p.lc();p.Eb(2),p.Ib("tree-node--active",n.checklistSelection.isSelected(e)&&(n.tab.type===n.treeType.List||!n.tab.showRowSelectionCheckbox))("tree-node--disabled",!e.isValid||e.disabled),p.Eb(1),p.Fb("aria-label","toggle "+e.name),p.Eb(1),p.sc("svgIcon",n.treeControl.isExpanded(e)?"chevron-down":"chevron-right"),p.Eb(1),p.sc("ngIf",n.tab.showRowSelectionCheckbox&&!n.tab.singleNodeSelection),p.Eb(1),p.sc("ngIf",n.tab.showRowSelectionCheckbox&&n.tab.singleNodeSelection),p.Eb(2),p.sc("ngIf",null==e?null:e.iconName),p.Eb(2),p.Vc(e.name),p.Eb(1),p.sc("ngIf",n.tab.showOverflowMenu&&((null==n.tab.apiContextMenu?null:n.tab.apiContextMenu.menuOptionAPIs)||(null==e.apiContextMenu?null:e.apiContextMenu.menuOptionAPIs))),p.Eb(3),p.sc("ngForOf",n.menuItems),p.Eb(1),p.Ib("tree-control__list--hidden",!n.treeControl.isExpanded(e))}}function K(e,t){if(1&e){const e=p.Zb();p.Yb(0,"mat-nested-tree-node"),p.Yb(1,"sda-button-plain",31),p.hc("click",(function(){p.Kc(e);const n=t.$implicit;return p.lc().loadMore(n.parentObid)})),p.Xb(),p.Xb()}if(2&e){const e=p.lc();p.Eb(1),p.sc("displayName",e.LOAD_MORE)("title",e.LOAD_MORE)}}function Z(e,t){if(1&e&&(p.Yb(0,"p",32),p.Uc(1),p.Xb()),2&e){const e=p.lc();p.Eb(1),p.Vc(e.NO_RESULTS_FOUND)}}function U(e,t){if(1&e&&(p.Yb(0,"div",33),p.Yb(1,"span",34),p.Uc(2),p.Xb(),p.Tb(3,"div",35),p.Tb(4,"div",36),p.Xb()),2&e){const e=p.lc();p.Eb(2),p.Vc(e.LOADING)}}let j=(()=>{class e extends f.a{constructor(e,t,n,a,s,l,r){super(e,t,n,a,s,l,r),this.tabbedTreeDataService=e,this.sdaTranslateService=t,this.filterService=n,this.changeDetect=a,this.featureSetService=s,this.featureSetNavigationService=l,this.apiMenuService=r,this.checklistSelection=new i.c(!0),this.treeControl=new c.k(e=>e.children),this.dataSource=new o.f}hasChild(e,t){return t.children&&t.children.length>0}hasLazyChild(e,t){return t.count>0}ngOnInit(){this.tab&&(this.tabbedTreeDataServiceSubscription=this.tabbedTreeDataService.pipe(Object(a.a)(e=>(this.tabbedTreeDataService.isLoading||(this.tab.isStale=!1),e))).subscribe(e=>{this.dataSource.data=void 0,this.dataSource.data=e,this.tab.onInitializeTree?(this.tab.onInitializeTree(this.dataSource.data,this.treeControl,this.checklistSelection),this.tab.preserveSelectionOnSearch&&this.setSelectedNodes(e)):this.setDefaultSelectedItem(e),this.expandSelectedNodes?this.expandSelectedNodeParents():this.expandTopLevelNodes(this.dataSource.data,!!this.tab.state.filter),this.changeDetect.detectChanges()}),this.tabbedTreeDataService.read(this.tab),this.tab.refresh=e=>{this.refresh(!1)},this.tab.reInitialise=e=>{e?(this.expandTopLevelNodes(this.dataSource.data,!!this.tab.state.filter),this.setDefaultSelectedItem(this.dataSource.data)):(this.tab.selectedRows=[],this.checklistSelection.clear()),this.refresh(e)},this.lazyLoadChildNodes&&(this.onTreeNodesExpandedChangeSubscription=this.treeControl.expansionModel.changed.subscribe(e=>{this.onTreeNodesExpandedChange(e)})))}ngOnDestroy(){this.tabbedTreeDataServiceSubscription&&this.tabbedTreeDataServiceSubscription.unsubscribe(),this.onTreeNodesExpandedChangeSubscription&&this.onTreeNodesExpandedChangeSubscription.unsubscribe()}get filterableColumns(){return[new g.a("Name",this.sdaTranslateService.get("NAME","Name"))]}primaryCellFilterChanged(e){this.tab.preserveSelectionOnSearch||(this.tab.selectedRows=[]);const t={skip:0,filter:this.filterService.createFilter(e)};this.tab.applyState(t,e),this.tabbedTreeDataService.read(this.tab)}selectedNodeChanged(e){e.disabled||(this.tab.showRowSelectionCheckbox||this.checklistSelection.clear(),this.checklistSelection.toggle(e),this.tab.showRowSelectionCheckbox&&this.tab.singleNodeSelection?this.checklistSelection.isSelected(e)?this.tab.selectedRows.push(e):this.tab.selectedRows=this.tab.selectedRows.filter(t=>t.obid!==e.obid):this.tab.selectedRows=this.checklistSelection.selected,this.tab.onRowSelectedChanged&&this.tab.onRowSelectedChanged(this.tab.selectedRows))}onMenuOpened(e){const t=e.apiContextMenu?e.apiContextMenu:this.tab.apiContextMenu;this.contextMenuIsLoading=!0,this.apiMenuService.loadMethodsByClientAPI(t,e.obid,this.tab.config).pipe(Object(s.a)(1)).subscribe(t=>{this.menuItems=t,this.menuContext=e,this.contextMenuIsLoading=!1,this.changeDetect.detectChanges()})}onMenuItemClick(e,t){const n=t.apiContextMenu?t.apiContextMenu:this.tab.apiContextMenu,i=this.featureSetService.convertToFeature(e,e.ContextObjectOBIDs.map(e=>new u.a(e,this.menuContext.name,this.tab.config)),[this.tab.config]),c=n.menuOptionAPIs.find(e=>e.apiName===i.clientAPI);i.data=c.onExecuteDataParam,this.featureSetNavigationService.navigateToFeature(i)}checkAllDescendants(e){this.checklistSelection.toggle(e);const t=this.treeControl.getDescendants(e);this.checklistSelection.isSelected(e)?this.checklistSelection.select(...t):this.checklistSelection.deselect(...t),t.every(e=>this.checklistSelection.isSelected(e)),this.checkAllParentsSelection(e)}checkAllParentsSelection(e){let t=e.parentNode;for(;t;)this.checkRootNodeSelection(t),t=t.parentNode}onTreeNodesExpandedChange(e){e.added&&e.added.forEach(e=>{e.isLazy&&(e.isLazy=!1,this.loadMore(e.obid))})}refresh(e,t){e||this.tabbedTreeDataService.read(this.tab,t),this.changeDetect.detectChanges()}setDefaultSelectedItem(e){e&&e.length>0?(this.noResultsFound=!1,0===this.tab.selectedRows.length&&this.tab.defaultSelection&&(this.tab.selectedRows=[this.findDefaultNode(e)]),this.setSelectedNodes(e),this.tab.onRowSelectedChanged&&this.tab.selectedRows.length>0&&this.tab.onRowSelectedChanged(this.tab.selectedRows)):(this.noResultsFound=!0,this.tab.onNoResultsFound&&this.tab.onNoResultsFound())}setSelectedNodes(e){this.checklistSelection.clear(),this.tab.selectedRows.forEach(t=>{this.flattenTree(e).filter(e=>e.uid===t.uid||e.obid===t.obid).forEach(e=>{t.rawResult=e.rawResult,this.checklistSelection.select(e)})})}expandSelectedNodeParents(){this.tab.selectedRows.forEach(e=>{this.flattenTree(this.dataSource.data).filter(t=>t.uid===e.uid||t.obid===e.obid).forEach(e=>{this.expandParent(e)})})}expandParent(e){this.treeControl.expand(e),e.parentNode&&this.expandParent(e.parentNode)}flattenTree(e){return e.reduce((e,t)=>(e.push(t),t.children&&(e=e.concat(this.flattenTree(t.children))),e),[])}findDefaultNode(e){let t;return e.forEach(e=>{t||(e.isValid?t=e:e.children.length>0&&(t=this.findDefaultNode(e.children)))}),t}expandTopLevelNodes(e,t=!1){e&&e.forEach(e=>{this.treeControl.expand(e),e.children&&t&&this.expandTopLevelNodes(e.children,t)})}}return e.\u0275fac=function(t){return new(t||e)(p.Sb(m.a),p.Sb(b.a),p.Sb(h.a),p.Sb(p.h),p.Sb(d.a),p.Sb(r.a),p.Sb(l.a))},e.\u0275cmp=p.Mb({type:e,selectors:[["sda-tree-view"]],features:[p.Db([m.a]),p.Bb],decls:7,vars:9,consts:[["class","tree-filter",3,"showSelectedItemsFilter","disableSelectedItemsFilter","fields","valueChange",4,"ngIf"],[1,"tree-control",3,"dataSource","treeControl"],["matTreeNodeToggle","",4,"matTreeNodeDef"],[4,"matTreeNodeDef","matTreeNodeDefWhen"],["class","tree-control__no-results",4,"ngIf"],["class","k-loading-mask",4,"ngIf"],[1,"tree-filter",3,"showSelectedItemsFilter","disableSelectedItemsFilter","fields","valueChange"],["matTreeNodeToggle",""],[1,"mat-tree-node","tree-node",3,"matTooltip","matTooltipShowDelay","matTooltipPosition","matTooltipTouchGestures"],["mat-icon-button","","disabled","","class","tree-node__btn",4,"ngIf"],["class","checklist-leaf-node tree-node__checkbox",3,"checked","disabled","change",4,"ngIf"],["class","tree-node__checkbox",3,"checked","disabled","change",4,"ngIf"],[1,"tree-node__item",3,"click"],["class","tree-node__object-icon",3,"imageName",4,"ngIf"],[1,"tree-node__name"],["class","tree-node__menu",3,"matMenuTriggerFor","matSvgIcon","onMenuOpen",4,"ngIf"],["menu","matMenu"],["mat-menu-item","",3,"click",4,"ngFor","ngForOf"],["mat-icon-button","","disabled","",1,"tree-node__btn"],[1,"checklist-leaf-node","tree-node__checkbox",3,"checked","disabled","change"],[1,"tree-node__checkbox",3,"checked","disabled","change"],[1,"tree-node__object-icon",3,"imageName"],[1,"tree-node__menu",3,"matMenuTriggerFor","matSvgIcon","onMenuOpen"],["mat-menu-item","",3,"click"],[1,"mat-tree-node","tree-node"],["mat-icon-button","","matTreeNodeToggle","",1,"tree-node__btn"],[1,"tree-node__expander",3,"svgIcon"],["class","tree-node__checkbox",3,"checked","indeterminate","disabled","change",4,"ngIf"],[1,"tree-control__list"],["matTreeNodeOutlet",""],[1,"tree-node__checkbox",3,"checked","indeterminate","disabled","change"],[1,"tree-control__btn",3,"displayName","title","click"],[1,"tree-control__no-results"],[1,"k-loading-mask"],[1,"k-loading-text"],[1,"k-loading-image"],[1,"k-loading-color"]],template:function(e,t){1&e&&(p.Sc(0,w,1,3,"sda-odata-filter",0),p.Yb(1,"mat-tree",1),p.Sc(2,y,13,15,"mat-tree-node",2),p.Sc(3,$,17,14,"mat-nested-tree-node",3),p.Sc(4,K,2,2,"mat-nested-tree-node",3),p.Xb(),p.Sc(5,Z,2,1,"p",4),p.Sc(6,U,5,1,"div",5)),2&e&&(p.sc("ngIf",t.tab.isFilterable),p.Eb(1),p.Ib("tree-control--compact",t.isCompact),p.sc("dataSource",t.dataSource)("treeControl",t.treeControl),p.Eb(2),p.sc("matTreeNodeDefWhen",t.lazyLoadChildNodes?t.hasLazyChild:t.hasChild),p.Eb(1),p.sc("matTreeNodeDefWhen",t.isLoadMore),p.Eb(1),p.sc("ngIf",t.noResultsFound),p.Eb(1),p.sc("ngIf",t.tabbedTreeDataService.isLoading||t.contextMenuIsLoading))},directives:[S.t,o.b,o.h,_.a,o.g,o.k,C.a,T.e,S.s,O.a,v.a,x.a,k.a,T.d,T.b,o.a,I.a,o.i],styles:[".tree-control[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}.tree-node__name[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]{position:relative;display:flex;flex-direction:column;height:100%}.tree-control[_ngcontent-%COMP%]{padding:10px}.tree-control--compact[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]{min-height:32px}.tree-control--compact[_ngcontent-%COMP%]   .tree-node__btn[_ngcontent-%COMP%], .tree-control--compact[_ngcontent-%COMP%]   .tree-node__item[_ngcontent-%COMP%]{height:32px}.tree-control--compact[_ngcontent-%COMP%]   .tree-node__btn[_ngcontent-%COMP%]{line-height:32px}.tree-control[_ngcontent-%COMP%]   .mat-tree-node[_ngcontent-%COMP%]{min-width:0}.tree-control__list[_ngcontent-%COMP%]{padding-left:25px}.tree-control__list--hidden[_ngcontent-%COMP%]{display:none}.tree-control__btn[_ngcontent-%COMP%]{display:inline-flex;margin:10px 15px}.tree-control__btn[_ngcontent-%COMP%]  .button{color:#02adff}.tree-control__no-results[_ngcontent-%COMP%]{margin:15px;text-align:center}.tree-filter[_ngcontent-%COMP%]{padding:8px;background-color:#f6f7f8;border-bottom:1px solid #ebedf0}.tree-node[_ngcontent-%COMP%]:not(.tree-node--disabled):not(.tree-node--active):hover{background-color:#e8f7ff}.tree-node--active[_ngcontent-%COMP%]{background-color:#afe5ff}.tree-node--disabled[_ngcontent-%COMP%]   .tree-node__item[_ngcontent-%COMP%]{opacity:.5;pointer-events:none}.tree-node__expander[_ngcontent-%COMP%]{width:18px;height:18px}.tree-node__checkbox[_ngcontent-%COMP%]{margin-left:10px}.tree-node__item[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;height:48px;cursor:pointer;overflow:hidden}.tree-node__name[_ngcontent-%COMP%]{width:100%;padding:0 10px}.tree-node__object-icon[_ngcontent-%COMP%] {margin-left:10px}.tree-node__object-icon[_ngcontent-%COMP%]  .object-icon{max-width:20px;margin-right:0}.tree-node__btn[_ngcontent-%COMP%] + .tree-node__checkbox[_ngcontent-%COMP%], .tree-node__btn[_ngcontent-%COMP%] + .tree-node__item[_ngcontent-%COMP%] > .tree-node__object-icon[_ngcontent-%COMP%]{margin-left:0}.tree-node__menu[_ngcontent-%COMP%]{align-self:stretch}.tree-node__menu[_ngcontent-%COMP%]  .button{height:100%;border-radius:0}.k-loading-mask[_ngcontent-%COMP%]{top:0;left:0;width:100%;height:100%}"],changeDetection:0}),e})()},qymv:function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("fXoL"),c=n("zPje"),o=n("Ejbi"),a=n("JrsU"),s=n("1eVd"),l=n("ofXK"),r=n("4CIq"),d=n("STbY"),h=n("d3UM"),b=n("Qu3c"),u=n("FKr1");function g(e,t){if(1&e){const e=i.Zb();i.Yb(0,"sda-button-plain",9),i.hc("click",(function(){return i.Kc(e),i.lc().toggleSelectedItemsOnly()})),i.Xb()}if(2&e){const e=i.lc();i.Ib("odata-filter__btn--active",e.selectedItemsOnly),i.sc("isDisabled",e.disableSelectedItemsFilter&&!e.selectedItemsOnly)("matTooltip",e.selectedItemsOnly?e.SHOW_ALL:e.SHOW_SELECTED_ITEMS)}}function m(e,t){if(1&e&&(i.Yb(0,"mat-option",10),i.Uc(1),i.Xb()),2&e){const e=t.$implicit;i.sc("value",e.key),i.Eb(1),i.Vc(e.value)}}function f(e,t){if(1&e){const e=i.Zb();i.Yb(0,"button",11),i.hc("click",(function(){i.Kc(e);const n=t.$implicit;return i.lc().onOperatorChange(n.key)})),i.Uc(1),i.Xb()}if(2&e){const e=t.$implicit,n=i.lc();i.Ib("filter-options__btn--active",e.key===n.operator),i.Eb(1),i.Wc(" ",e.value," ")}}let p=(()=>{class e{constructor(e){this.sdaTranslateService=e,this.fields=[],this.showSelectedItemsFilter=!1,this.disableSelectedItemsFilter=!1,this.valueChange=new i.o,this.searchTerm="",this.operator=c.a.FILTER_OPERATORS.contains,this.FILTER_PLACEHOLDER=this.sdaTranslateService.get("FILTER","Filter..."),this.SHOW_SELECTED_ITEMS=this.sdaTranslateService.get("SHOW_SELECTED_ITEMS","Show selected items"),this.SHOW_ALL=this.sdaTranslateService.get("SHOW_ALL","Show all"),this.operators=[new a.a(c.a.FILTER_OPERATORS.eq,this.sdaTranslateService.get("EQUALS","Equals")),new a.a(c.a.FILTER_OPERATORS.neq,this.sdaTranslateService.get("NOT_EQUALS","Not equals")),new a.a(c.a.FILTER_OPERATORS.contains,this.sdaTranslateService.get("CONTAINS","Contains")),new a.a(c.a.FILTER_OPERATORS.doesnotcontain,this.sdaTranslateService.get("DOES_NOT_CONTAIN","Does not contain")),new a.a(c.a.FILTER_OPERATORS.startswith,this.sdaTranslateService.get("STARTS_WITH","Starts with")),new a.a(c.a.FILTER_OPERATORS.endswith,this.sdaTranslateService.get("ENDS_WITH","Ends with"))],this.selectedItemsOnly=!1}ngOnChanges(e){e.fields&&e.fields.firstChange&&(this.selectedFields=this.fields.map(e=>e.key))}columnSelectionChange(e){this.selectedFields&&0===this.selectedFields.length&&(this.selectedFields=this.fields.some(e=>e.value.toLowerCase().indexOf("name")>-1)?[this.fields.filter(e=>e.value.toLowerCase().indexOf("name")>-1)[0].key]:[this.fields[0].key]),this.searchTerm&&this.searchTerm.length>0&&this.onSearchTermChange(this.searchTerm)}toggleSelectedItemsOnly(){this.selectedItemsOnly=!this.selectedItemsOnly,this.onSearchTermChange(this.searchTerm)}onOperatorChange(e){this.operator=e,this.searchTerm&&this.searchTerm.length>0&&this.onSearchTermChange(this.searchTerm)}trackBy(e,t){return t.key}onSearchTermChange(e){this.searchTerm=e,this.valueChange.emit({searchTerm:e,operator:this.operator,fields:this.selectedFields,showSelectedItemsOnly:this.selectedItemsOnly})}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(o.a))},e.\u0275cmp=i.Mb({type:e,selectors:[["sda-odata-filter"]],inputs:{fields:"fields",showSelectedItemsFilter:"showSelectedItemsFilter",disableSelectedItemsFilter:"disableSelectedItemsFilter"},outputs:{valueChange:"valueChange"},features:[i.Cb],decls:10,vars:11,consts:[[1,"odata-filter"],[1,"odata-filter__search",3,"searchTerm","useDebounce","placeholder","showClearIcon","searchTermChange"],["class","odata-filter__btn","matSvgIcon","beenhere",3,"isDisabled","odata-filter__btn--active","matTooltip","click",4,"ngIf"],[1,"odata-filter__btn",3,"matMenuTriggerFor","matSvgIcon"],["multiple","",1,"odata-filter__select",3,"value","valueChange","selectionChange"],[3,"value",4,"ngFor","ngForOf","ngForTrackBy"],["menu","matMenu"],[1,"filter-options"],["mat-menu-item","","class","filter-options__btn",3,"filter-options__btn--active","click",4,"ngFor","ngForOf"],["matSvgIcon","beenhere",1,"odata-filter__btn",3,"isDisabled","matTooltip","click"],[3,"value"],["mat-menu-item","",1,"filter-options__btn",3,"click"]],template:function(e,t){if(1&e&&(i.Yb(0,"div",0),i.Yb(1,"sda-simple-search",1),i.hc("searchTermChange",(function(e){return t.onSearchTermChange(e)})),i.Xb(),i.Sc(2,g,1,4,"sda-button-plain",2),i.Tb(3,"sda-button-plain",3),i.Yb(4,"mat-select",4),i.hc("valueChange",(function(e){return t.selectedFields=e}))("selectionChange",(function(e){return t.columnSelectionChange(e)})),i.Sc(5,m,2,2,"mat-option",5),i.Xb(),i.Xb(),i.Yb(6,"mat-menu",null,6),i.Yb(8,"div",7),i.Sc(9,f,2,3,"button",8),i.Xb(),i.Xb()),2&e){const e=i.Hc(7);i.Eb(1),i.sc("searchTerm",t.searchTerm)("useDebounce",!0)("placeholder",t.FILTER_PLACEHOLDER)("showClearIcon",!0),i.Eb(1),i.sc("ngIf",t.showSelectedItemsFilter),i.Eb(1),i.sc("matMenuTriggerFor",e)("matSvgIcon","manage-filter"),i.Eb(1),i.sc("value",t.selectedFields),i.Eb(1),i.sc("ngForOf",t.fields)("ngForTrackBy",t.trackBy),i.Eb(4),i.sc("ngForOf",t.operators)}},directives:[s.a,l.t,r.a,d.d,h.a,l.s,d.e,b.a,u.i,d.b],styles:["[_nghost-%COMP%]{display:flex;flex-shrink:0}.odata-filter[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;min-width:0}.odata-filter__search[_ngcontent-%COMP%]{min-width:0}.odata-filter__btn[_ngcontent-%COMP%]{margin-left:8px}.odata-filter__btn--active[_ngcontent-%COMP%]{border-color:hsla(0,0%,62%,.8);background-color:#d0d0d0;border-radius:3px}.odata-filter__select[_ngcontent-%COMP%] {flex-shrink:0;width:40px;height:100%;overflow:hidden}.odata-filter__select[_ngcontent-%COMP%]  .mat-select-value{display:none}.odata-filter__select[_ngcontent-%COMP%]  .mat-select-trigger{width:200px;height:100%;padding:10px}.filter-options[_ngcontent-%COMP%]{max-height:300px}.filter-options__btn--active[_ngcontent-%COMP%]{background-color:#ebedf0}"]}),e})()}}]);