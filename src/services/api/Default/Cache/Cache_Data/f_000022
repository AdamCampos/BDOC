(window.webpackJsonp=window.webpackJsonp||[]).push([[11],{"0g6M":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("SXtU"),a=n("fXoL");let c=(()=>{class e{constructor(e){this.rootDataService=e,this.updateRefsToLatestVersion=!1}checkInFile(e){return this.rootDataService.post("FileMgmt/SDAVersionCheckIn",JSON.stringify(e))}validateDocReferencesForCKIUndoCKO(e,t){const n=JSON.stringify({ObjectOBIDs:e,UpdateRefsToLatestVersion:this.updateRefsToLatestVersion,IgnoreCheckedOutValidation:t});return this.rootDataService.post("SDA/ValidateDocReferencesForCKIUndoCKO",n,void 0,void 0,"CS_CKIColumnSet")}}return e.\u0275fac=function(t){return new(t||e)(a.dc(i.a))},e.\u0275prov=a.Ob({token:e,factory:e.\u0275fac}),e})()},"4JBC":function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));var i=function(e){return e[e.Info=0]="Info",e[e.Success=1]="Success",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Dark=4]="Dark",e}({})},"8/aj":function(e,t,n){"use strict";n.d(t,"a",(function(){return p}));var i=n("fXoL"),a=(n("4JBC"),n("ofXK")),c=n("NFeN");function s(e,t){if(1&e&&i.Tb(0,"mat-icon",11),2&e){const e=i.lc(3);i.sc("svgIcon",e.bannerIcon)}}function o(e,t){if(1&e&&(i.Yb(0,"h4",9),i.Sc(1,s,1,1,"mat-icon",10),i.Uc(2),i.Xb()),2&e){const e=i.lc(2);i.Eb(1),i.sc("ngIf",e.showBannerIcon),i.Eb(1),i.Wc(" ",e.bannerTypeText," ")}}function r(e,t){if(1&e&&(i.Yb(0,"p",12),i.Uc(1),i.Xb()),2&e){const e=i.lc(2);i.Eb(1),i.Vc(e.bannerText)}}function l(e,t){if(1&e&&(i.Yb(0,"li",15),i.Uc(1),i.Xb()),2&e){const e=t.$implicit;i.Eb(1),i.Vc(e)}}function h(e,t){if(1&e&&(i.Yb(0,"ul",13),i.Sc(1,l,2,1,"li",14),i.Xb()),2&e){const e=i.lc(2);i.Eb(1),i.sc("ngForOf",e.bannerList)}}function d(e,t){if(1&e&&(i.Yb(0,"p",12),i.Uc(1),i.Xb()),2&e){const e=i.lc(2);i.Eb(1),i.Vc(e.bannerExtraText)}}function f(e,t){if(1&e){const e=i.Zb();i.Yb(0,"mat-icon",16),i.hc("click",(function(){return i.Kc(e),i.lc(2).closeBanner()})),i.Xb()}2&e&&i.sc("svgIcon","close")}function g(e,t){if(1&e&&(i.Yb(0,"div",1),i.Yb(1,"div",2),i.Yb(2,"div",3),i.Sc(3,o,3,2,"h4",4),i.Sc(4,r,2,1,"p",5),i.Sc(5,h,2,1,"ul",6),i.qc(6),i.Sc(7,d,2,1,"p",5),i.Xb(),i.Sc(8,f,1,1,"mat-icon",7),i.Xb(),i.Yb(9,"div",8),i.qc(10,1),i.Xb(),i.Xb()),2&e){const e=i.lc();i.Rc("max-width",e.maxWidth,"px"),i.Ib("banner--compact",e.isCompact)("banner--full",e.isFullWidth)("banner--info",0===e.bannerType)("banner--warning",2===e.bannerType),i.Eb(3),i.sc("ngIf",e.showBannerType),i.Eb(1),i.sc("ngIf",e.bannerText),i.Eb(1),i.sc("ngIf",(null==e.bannerList?null:e.bannerList.length)>0),i.Eb(2),i.sc("ngIf",e.bannerExtraText),i.Eb(1),i.sc("ngIf",e.showCloseIcon)}}const b=[[["",8,"sda-banner-content-hook"]],[["",8,"sda-banner-actions-hook"]]],u=[".sda-banner-content-hook",".sda-banner-actions-hook"];let p=(()=>{class e{constructor(){this.isCompact=!1,this.isFullWidth=!1,this.bannerIcon="error",this.showBannerType=!0,this.showBannerIcon=!0,this.showCloseIcon=!1,this.bannerClosed=!1,this.onBannerClosed=new i.o}closeBanner(){this.bannerClosed=!0,this.onBannerClosed.emit(this.bannerClosed)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=i.Mb({type:e,selectors:[["sda-banner"]],inputs:{isCompact:"isCompact",isFullWidth:"isFullWidth",maxWidth:"maxWidth",bannerType:"bannerType",bannerTypeText:"bannerTypeText",bannerText:"bannerText",bannerExtraText:"bannerExtraText",bannerList:"bannerList",bannerIcon:"bannerIcon",showBannerType:"showBannerType",showBannerIcon:"showBannerIcon",showCloseIcon:"showCloseIcon",bannerClosed:"bannerClosed"},outputs:{onBannerClosed:"onBannerClosed"},ngContentSelectors:u,decls:1,vars:1,consts:[["class","banner",3,"banner--compact","banner--full","banner--info","banner--warning","maxWidth",4,"ngIf"],[1,"banner"],[1,"banner-header"],[1,"banner-header__content"],["class","banner-header__type",4,"ngIf"],["class","banner-header__message",4,"ngIf"],["class","banner-list",4,"ngIf"],["class","banner-header__close",3,"svgIcon","click",4,"ngIf"],[1,"banner-actions"],[1,"banner-header__type"],["class","banner-header__icon",3,"svgIcon",4,"ngIf"],[1,"banner-header__icon",3,"svgIcon"],[1,"banner-header__message"],[1,"banner-list"],["class","banner-list__item",4,"ngFor","ngForOf"],[1,"banner-list__item"],[1,"banner-header__close",3,"svgIcon","click"]],template:function(e,t){1&e&&(i.rc(b),i.Sc(0,g,11,15,"div",0)),2&e&&i.sc("ngIf",!t.bannerClosed)},directives:[a.t,c.a,a.s],styles:["[_nghost-%COMP%]{display:flex;flex-shrink:0;justify-content:center}.banner[_ngcontent-%COMP%]{align-self:center;margin:10px;border:1px solid #8997a5;border-radius:2px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.banner--full[_ngcontent-%COMP%]{width:100%}.banner--compact[_ngcontent-%COMP%]   .banner-header__content[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.banner--compact[_ngcontent-%COMP%]   .banner-header__type[_ngcontent-%COMP%]{margin-bottom:0}.banner--info[_ngcontent-%COMP%]{border-color:#0087c8}.banner--info[_ngcontent-%COMP%]   .banner-header[_ngcontent-%COMP%]{background-color:#e8f7ff}.banner--info[_ngcontent-%COMP%]   .banner-header__icon[_ngcontent-%COMP%]{color:#02adff}.banner--info[_ngcontent-%COMP%]   .banner-actions[_ngcontent-%COMP%]{border-top-color:#0087c8}.banner--warning[_ngcontent-%COMP%]{border-color:#d1a00c}.banner--warning[_ngcontent-%COMP%]   .banner-header[_ngcontent-%COMP%]{background-color:#fcefc7}.banner--warning[_ngcontent-%COMP%]   .banner-header__icon[_ngcontent-%COMP%]{color:#f2bf25}.banner--warning[_ngcontent-%COMP%]   .banner-actions[_ngcontent-%COMP%]{border-top-color:#d1a00c}.banner-header[_ngcontent-%COMP%]{display:flex;flex-shrink:0;padding:8px;background-color:#ebedf0}.banner-header__content[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;width:100%}.banner-header__type[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:5px;margin-bottom:5px;color:#1f2429;font-weight:500}.banner-header__icon[_ngcontent-%COMP%]{flex-shrink:0;width:18px;height:18px;margin-right:8px}.banner-header__message[_ngcontent-%COMP%]{font-size:14px}.banner-header__message[_ngcontent-%COMP%]:not(:first-of-type){width:100%;margin-top:8px}.banner-header__message[_ngcontent-%COMP%] + .banner-list[_ngcontent-%COMP%]{margin-top:8px}.banner-header__close[_ngcontent-%COMP%]{flex-shrink:0;align-self:flex-start;width:16px;height:16px;margin-left:15px;cursor:pointer;opacity:.6;transition:opacity .15s linear}.banner-header__close[_ngcontent-%COMP%]:hover{opacity:1}.banner-list[_ngcontent-%COMP%]{width:100%;padding-left:20px;font-size:14px}.banner-list__item[_ngcontent-%COMP%]{list-style:circle}.banner-list[_ngcontent-%COMP%] + .banner-header__message[_ngcontent-%COMP%]{margin-top:8px}.banner-actions[_ngcontent-%COMP%]:not(:empty){display:flex;justify-content:flex-end;padding:8px;border-top:1px solid #8997a5}.banner-actions[_ngcontent-%COMP%]:not(:empty)     .sda-banner-actions-hook{display:flex;flex:1;justify-content:flex-end;flex-wrap:wrap;align-items:center}.banner-actions[_ngcontent-%COMP%]:not(:empty)     .button{margin-left:10px}"]}),e})()},"8Vnw":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("ofXK"),a=n("fXoL");let c=(()=>{class e{}return e.\u0275mod=a.Qb({type:e}),e.\u0275inj=a.Pb({factory:function(t){return new(t||e)},imports:[[i.c]]}),e})()},AujL:function(e,t,n){"use strict";n.d(t,"a",(function(){return s}));var i=n("ofXK"),a=n("NFeN"),c=n("fXoL");let s=(()=>{class e{}return e.\u0275mod=c.Qb({type:e}),e.\u0275inj=c.Pb({factory:function(t){return new(t||e)},imports:[[i.c,a.b]]}),e})()},HOWf:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("SXtU"),a=n("fXoL");let c=(()=>{class e{constructor(e){this.rootdataService=e}validateDocRefForEditFiles(e,t,n,i,a){const c=JSON.stringify({ObjectOBIDs:e,showFile:t,methodOBID:n,mainMethodOBID:a});return this.rootdataService.post("SDA/ValidateDocReferencesForEditFiles",c,void 0,void 0,i)}}return e.\u0275fac=function(t){return new(t||e)(a.dc(i.a))},e.\u0275prov=a.Ob({token:e,factory:e.\u0275fac}),e})()},MyPT:function(e,t,n){"use strict";n.d(t,"a",(function(){return l}));var i=n("Zyse"),a=n("Ejbi"),c=n("4JBC"),s=n("ONOH"),o=n("dSq9"),r=n("fXoL");let l=(()=>{class e{constructor(e,t,n){this.sdaTranslateService=e,this.configService=t,this.calcService=n}getBannerForObject(e,t,n,i){let a;if(e)if(n){const n=e.Instances.filter(e=>e.IsDeleted).map(e=>this.configService.currentConfigs.find(t=>e.Config===t.ConfigUID).DisplayName).join(", ");a=e.HasConflict?this.getBannerForObjectInConflict(n,t):this.getBannerForResolvedObjectDeletedAtHigherConfig(n)}else a=e.HasConflict?this.getBannerForObjectWithConflicts(e,t):i?this.getBannerForCreatedObject():this.getBannerForObjectWithNoConflicts();else a=this.getBannerForEmptyObject();return a}getBannerForObjectWithNoConflicts(){return this.getBanner(this.sdaTranslateService.get("CONFLICT_RESOLUTION_OBJECT_OBJECT_RESOLVED_INFO","There are no outstanding conflicts for this object."),[],c.a.Info,!0,!1,this.sdaTranslateService.get("CONFLICT_RESOLUTION_OBJECT_OBJECT_RESOLVED_TITLE","No Conflicts"))}getBannerForCreatedObject(){return this.getBanner(this.sdaTranslateService.get("CONFLICT_RESOLUTION_OBJECT_CREATE_INFO","This object has been created at the current configuration."),[],c.a.Info,!0,!1,this.sdaTranslateService.get("CONFLICT_RESOLUTION_OBJECT_NEW_TITLE","New Object"))}getBannerForObjectWithConflicts(e,t){const n=this.calcService.calculateItemsWithConflicts(e,!0);let i="";i=n>1?this.sdaTranslateService.getFormatted("CONFLICT_RESOLUTION_OBJECT_RESOLVE_CONFLICTS_REMAINING","{0} conflicts remaining.",[n.toString()]):1===n?this.sdaTranslateService.get("CONFLICT_RESOLUTION_OBJECT_RESOLVE_CONFLICT_REMAINING","1 conflict remaining."):this.sdaTranslateService.get("CONFLICT_RESOLUTION_OBJECT_RESOLVE_NO_CONFLICTS_REMAINING","No conflicts remaining.");const a=[{message:i,icon:n>0?"blockage":"check",styleClass:n>0?"conflicts-banner-list__icon--conflict":"conflicts-banner-list__icon--conflict-resolved"}],s=this.calcService.calculateItemsWithRelConflicts(e);s>1?a.push({message:this.sdaTranslateService.getFormatted("CONFLICT_RESOLUTION_OBJECT_RESOLVE_CHANGES_REMAINING","{0} relationships with changes.",[s.toString()]),icon:"blockage"}):1===s&&a.push({message:this.sdaTranslateService.get("CONFLICT_RESOLUTION_OBJECT_RESOLVE_CHANGE_REMAINING","1 relationship with changes."),icon:"blockage"}),this.calcService.hasFilesWithChangesAtHigherConfig(e,e.ComparedConfigs[0])&&a.push({message:this.sdaTranslateService.get("CONFLICT_RESOLUTION_OBJECT_RESOLVE_FILE_WITH_CHANGES","Files with changes must be updated manually."),icon:"info",styleClass:"conflicts-banner-list__icon--info"});let o="";return o=t?this.sdaTranslateService.get("CONFLICT_RESOLUTION_HELP_BANNER_VIEW_ONLY","This object has outstanding conflicts."):this.sdaTranslateService.get("CONFLICT_RESOLUTION_HELP_BANNER","Resolve conflicts by selecting a value from the correct configuration for each property or relationship. Save and resolve the object once all conflicts have been resolved."),this.getBanner(o,[],c.a.Warning,!0,!1,this.sdaTranslateService.get("CONFLICT_RESOLUTION_OBJECT_RESOLVE_CONFLICTS_TITLE","Resolve Conflicts"),600,a)}getBannerForResolvedObjectDeletedAtHigherConfig(e){return this.getBanner("",[this.sdaTranslateService.getFormatted("CONFLICT_RESOLUTION_OBJECT_TERMINATE_WARNING","This object has been terminated from one or more configurations ({0}). ",[e]),this.sdaTranslateService.get("CONFLICT_RESOLUTION_OBJECT_TERMINATE_RESOLUTION","The resolution was to not terminate it from the current configuration.")],c.a.Info,!0,!1,this.sdaTranslateService.get("CONFLICT_RESOLUTION_OBJECT_OBJECT_RESOLVED_TITLE","Conflicts Resolved"))}getBannerForObjectInConflict(e,t){let n=[],i="";return t?i=this.sdaTranslateService.getFormatted("CONFLICT_RESOLUTION_OBJECT_TERMINATE_WARNING_VIEWONLY","This object has been terminated from one or more configurations ({0}).",[e]):(n=[this.sdaTranslateService.get("CONFLICT_RESOLUTION_OBJECT_TERMINATE_WARNING_PROMPT","Would you like to terminate the object from the current configuration?")],i=this.sdaTranslateService.getFormatted("CONFLICT_RESOLUTION_OBJECT_TERMINATE_WARNING_QUESTION","This object has been terminated from one or more configurations ({0}). It can either be terminated from the current configuration or retained and merged back to the parent configuration.",[e])),this.getBanner(i,n,c.a.Warning,!0,!1,this.sdaTranslateService.get("CONFLICT_RESOLUTION_OBJECT_TERMINATE_RESOLVE","Resolve Conflict"),600)}getBannerForEmptyObject(){return this.getBanner(this.sdaTranslateService.get("CONFLICT_RESOLUTION_NO_ITEMS_BANNER","No properties or relationships found..."),[],c.a.Info,!1,!1)}getBanner(e,t,n,a,s,o,r,l){const h=new i.a(e,t,n,a,s,o,r,l);if(o)h.header=o;else switch(n){case c.a.Info:h.header=this.sdaTranslateService.get("CONFLICT_RESOLUTION_BANNER_INFO_TITLE","Information");break;case c.a.Warning:h.header=this.sdaTranslateService.get("CONFLICT_RESOLUTION_BANNER_WARNING_TITLE","Warning");break;case c.a.Success:h.header=this.sdaTranslateService.get("CONFLICT_RESOLUTION_BANNER_SUCCESS_TITLE","Success");break;case c.a.Error:h.header=this.sdaTranslateService.get("CONFLICT_RESOLUTION_BANNER_ERROR_TITLE","Error");break;default:h.header=""}return h.isClosed=!1,h}}return e.\u0275fac=function(t){return new(t||e)(r.dc(a.a),r.dc(s.a),r.dc(o.a))},e.\u0275prov=r.Ob({token:e,factory:e.\u0275fac}),e})()},Qcck:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("fXoL"),a=n("Ejbi");let c=(()=>{class e{constructor(e){this.sdaTranslateService=e,this.changePage=new i.o,this.OF=this.sdaTranslateService.get("OF","of")}changePageNumber(e){e<0||this.changePage.emit(e)}}return e.\u0275fac=function(t){return new(t||e)(i.Sb(a.a))},e.\u0275cmp=i.Mb({type:e,selectors:[["sda-pagination"]],inputs:{totalPages:"totalPages",currentPage:"currentPage"},outputs:{changePage:"changePage"},decls:13,vars:11,consts:[[1,"pagination"],[1,"pagination__item","pagination__item--prev",3,"click"],[1,"fa","fa-fw","fa-angle-double-left"],[1,"fa","fa-fw","fa-angle-left"],[1,"pagination__item","pagination__item--current"],[1,"pagination__item"],[1,"pagination__item","pagination__item--next",3,"click"],[1,"fa","fa-fw","fa-angle-right"],[1,"fa","fa-fw","fa-angle-double-right"]],template:function(e,t){1&e&&(i.Yb(0,"div",0),i.Yb(1,"span",1),i.hc("click",(function(){return t.changePageNumber(0)})),i.Tb(2,"i",2),i.Xb(),i.Yb(3,"span",1),i.hc("click",(function(){return t.changePageNumber(t.currentPage-1)})),i.Tb(4,"i",3),i.Xb(),i.Yb(5,"span",4),i.Uc(6),i.Xb(),i.Yb(7,"span",5),i.Uc(8),i.Xb(),i.Yb(9,"span",6),i.hc("click",(function(){return t.changePageNumber(t.currentPage+1)})),i.Tb(10,"i",7),i.Xb(),i.Yb(11,"span",6),i.hc("click",(function(){return t.changePageNumber(t.totalPages-1)})),i.Tb(12,"i",8),i.Xb(),i.Xb()),2&e&&(i.Eb(1),i.Ib("pagination__item--disabled",0==t.currentPage),i.Eb(2),i.Ib("pagination__item--disabled",0==t.currentPage),i.Eb(3),i.Wc(" ",t.currentPage+1," "),i.Eb(2),i.Xc(" ",t.OF," ",t.totalPages," "),i.Eb(1),i.Ib("pagination__item--disabled",t.currentPage==t.totalPages-1),i.Eb(2),i.Ib("pagination__item--disabled",t.currentPage==t.totalPages-1))},styles:["[_nghost-%COMP%]{position:relative;align-items:center;justify-content:center;height:47px}.pagination[_ngcontent-%COMP%], [_nghost-%COMP%]{display:flex}.pagination__item[_ngcontent-%COMP%]{font-size:14px;color:rgba(0,0,0,.7);font-weight:500;line-height:1;border-radius:3px;margin:10px 2px;padding:6px 8px;cursor:pointer;text-align:center;-webkit-user-select:none;-ms-user-select:none;user-select:none}.pagination__item--next[_ngcontent-%COMP%], .pagination__item--prev[_ngcontent-%COMP%]{width:28px;margin:0;padding:16px 0}.pagination__item--next[_ngcontent-%COMP%]:hover, .pagination__item--prev[_ngcontent-%COMP%]:hover{background:rgba(0,0,0,.03)}.pagination__item--current[_ngcontent-%COMP%]{background:#e8444b;color:#fff;margin-left:10px}.pagination__item--disabled[_ngcontent-%COMP%]{pointer-events:none;opacity:.8}"]}),e})()},"YT+F":function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("SXtU"),a=n("fXoL");let c=(()=>{class e{constructor(e){this.rootdataService=e}GetNestedReferenceStructure(e,t,n){const i=JSON.stringify({ObjectOBIDs:e,ShowHiddenFiles:t});return this.rootdataService.post("SDA/GetNestedReferenceStructure",i,void 0,void 0,n)}}return e.\u0275fac=function(t){return new(t||e)(a.dc(i.a))},e.\u0275prov=a.Ob({token:e,factory:e.\u0275fac}),e})()},Zyse:function(e,t,n){"use strict";n.d(t,"a",(function(){return i}));class i{constructor(e,t,n,i,a,c,s,o){this.message=e,this.messages=t,this.type=n,this.isVisible=i,this.showClose=a,this.header=c,this.maxWidth=s,this.bannerItems=o,this.isClosed=!0}}},dSq9:function(e,t,n){"use strict";n.d(t,"a",(function(){return a}));var i=n("fXoL");let a=(()=>{class e{getRelCount(e){let t=0;return e.Relationships&&(t+=e.Relationships.length),e.ComplexObjects&&e.ComplexObjects.forEach(e=>{t+=e.Relationships.length}),e.Instances&&e.Instances.forEach(e=>{t+=this.getRelCount(e)}),t}getPropertyCount(e){let t=0;return e.Properties&&(t+=e.Properties.length),e.ComplexObjects&&e.ComplexObjects.forEach(e=>{t+=e.Properties.length}),e.Instances&&e.Instances.forEach(e=>{t+=this.getPropertyCount(e)}),t}calculateItemsWithConflicts(e,t=!1){let n=0;return e.Properties&&(n+=e.Properties.filter(e=>this.hasConflicts(e,t)).length),e.Relationships&&e.Relationships.forEach(e=>{e.HasConflict&&"1"===e.OtherEndMax&&(t?!e.ignoreConflict&&e.Values[0].Instances.every(e=>!e.isSelected)&&n++:n++)}),e.ComplexObjects&&e.ComplexObjects.forEach(e=>{n+=this.calculateItemsWithConflicts(e,t)}),e.Instances&&e.Instances.forEach(e=>{n+=this.calculateItemsWithConflicts(e,t)}),n}calculateItemsWithPreviews(e){let t=0;return e.Relationships&&(t+=e.Relationships.filter(e=>"1"!==e.OtherEndMax&&e.HasConflict).length),e.ComplexObjects&&e.ComplexObjects.forEach(e=>{t+=this.calculateItemsWithPreviews(e)}),e.Instances&&e.Instances.forEach(e=>{t+=this.calculateItemsWithPreviews(e)}),t}calculateItemsWithRelConflicts(e){let t=0;return e.Relationships&&(t+=e.Relationships.filter(e=>e.HasConflict&&"1"!==e.OtherEndMax).length),e.ComplexObjects&&e.ComplexObjects.forEach(e=>{t+=this.calculateItemsWithPreviews(e)}),e.Instances&&e.Instances.forEach(e=>{t+=this.calculateItemsWithPreviews(e)}),t}hasFilesWithChangesAtHigherConfig(e,t){let n=!1;if(e.Relationships&&e.Relationships.some(e=>e.HasConflict&&e.IsFile)){const i=e.Relationships.find(e=>e.HasConflict&&e.IsFile);if(1===i.Values.length){const e=i.Values[0].Instances.find(e=>!e.IsValueAsClaimed&&e.Config===t);e&&(n=e.HasChanged)}else if(i.Values.length>1){const e=i.Values.find(e=>!e.IsValueAsClaimed&&e.Config===t);e&&(n=e.Instances.some(e=>e.HasChanged))}}return e.ComplexObjects&&!n&&e.ComplexObjects.forEach(e=>{n||(n=this.hasFilesWithChangesAtHigherConfig(e,t))}),n}hasConflicts(e,t=!1){return t?e.HasConflict&&e.Instances.every(e=>!e.isSelected):e.HasConflict}calculateItemsWithEmptyValues(e){let t=0;return e.Properties&&(t+=e.Properties.filter(e=>e.Instances.some(e=>!e.Value)).length),e.Relationships&&e.Relationships.forEach(e=>{t+=e.Values.filter(e=>e.Instances.some(e=>!e.Value)).length}),e.ComplexObjects&&e.ComplexObjects.forEach(e=>{t+=this.calculateItemsWithEmptyValues(e)}),e.Instances&&e.Instances.forEach(e=>{t+=this.calculateItemsWithEmptyValues(e)}),t}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275prov=i.Ob({token:e,factory:e.\u0275fac}),e})()},icLz:function(e,t,n){"use strict";n.d(t,"a",(function(){return pe}));var i=n("LRne"),a=n("IzEk"),c=n("eIep"),s=n("5+tZ"),o=n("vkgz"),r=n("8ihU"),l=n("IUya"),h=n("jNCI"),d=n("Ejbi"),f=n("YT+F"),g=n("wQW7"),b=n("HOWf"),u=n("0g6M"),p=n("ONOH"),O=n("4B5/"),_=n("MyPT"),I=n("6JPj"),S=n("LUpO"),C=n("I2fW"),m=n("dEBh"),E=n("UPSG"),T=n("b/tf"),v=n("qPJN"),F=n("+eYH"),N=n("4JBC"),x=n("YsXg"),P=n("41Lq"),w=n("fPNj"),R=n("tqyv"),k=n("Qqho");class D{}n("tYhX");var y=n("fXoL"),B=n("ofXK"),M=n("EVgl"),L=n("7zfz"),j=n("8/aj"),W=n("bSwM"),A=n("3Pt+"),U=n("NFeN"),V=n("Jgl7"),X=n("Qcck");function Y(e,t){if(1&e&&(y.Yb(0,"div",3),y.Uc(1),y.Xb()),2&e){const e=y.lc();y.Eb(1),y.Vc(e.FILE_PICKER_NO_FILE)}}function H(e,t){if(1&e&&y.Tb(0,"sda-banner",12),2&e){const e=y.lc(2);y.sc("bannerTypeText",e.bannerTypeText)("bannerText",e.SIGNOFF_ABORTED_MESSAGE)("bannerType",e.banner.type)("showCloseIcon",e.banner.showClose)("showBannerType",!0)("maxWidth",e.banner.maxWidth)("showBannerIcon",!0)("bannerIcon",e.bannerIcon)("isFullWidth",!0)}}function J(e,t){1&e&&y.Tb(0,"col")}function K(e,t){if(1&e&&(y.Yb(0,"colgroup"),y.Sc(1,J,1,0,"col",13),y.Xb()),2&e){const e=y.lc(2);y.Eb(1),y.sc("ngForOf",e.columnset)}}function z(e,t){if(1&e){const e=y.Zb();y.Yb(0,"tr",15),y.Yb(1,"th",16),y.Yb(2,"mat-checkbox",17),y.hc("change",(function(t){return y.Kc(e),y.lc(3).toggleAllNone(t)}))("ngModelChange",(function(t){return y.Kc(e),y.lc(3).selectAll=t})),y.Xb(),y.Xb(),y.Xb()}if(2&e){const e=t.$implicit,n=y.lc(3);y.sc("ttRow",e),y.Eb(2),y.sc("ngModel",n.selectAll)}}function G(e,t){1&e&&y.Sc(0,z,3,2,"ng-template",14)}function q(e,t){if(1&e&&(y.Yb(0,"th",19),y.Uc(1),y.Xb()),2&e){const e=t.$implicit;y.Eb(1),y.Wc(" ",e.header," ")}}function $(e,t){if(1&e&&(y.Yb(0,"tr",15),y.Sc(1,q,2,1,"th",18),y.Xb()),2&e){const e=t.$implicit,n=y.lc(2);y.sc("ttRow",e),y.Eb(1),y.sc("ngForOf",n.columnset)}}function Z(e,t){if(1&e){const e=y.Zb();y.Yb(0,"tr"),y.Yb(1,"td",16),y.Yb(2,"mat-checkbox",21),y.hc("ngModelChange",(function(n){return y.Kc(e),t.rowData.isSelected=n}))("change",(function(){return y.Kc(e),y.lc(3).toggleCheckBox()})),y.Xb(),y.Xb(),y.Xb()}if(2&e){const e=t.rowData;y.Eb(2),y.sc("ngModel",e.isSelected)("disabled",e.isReadOnly)}}function Q(e,t){1&e&&y.Sc(0,Z,3,2,"ng-template",20)}function ee(e,t){if(1&e){const e=y.Zb();y.Yb(0,"mat-checkbox",36),y.hc("change",(function(t){y.Kc(e);const n=y.lc(3).rowData;return y.lc(2).toggleCheckBoxForRefFile(n,t)}))("ngModelChange",(function(t){return y.Kc(e),y.lc(3).rowData.isSelected=t})),y.Xb()}if(2&e){const e=y.lc(3).rowData,t=y.lc(2);y.sc("title",t.SELECT_THIS_ITEM)("ngModel",e.isSelected)}}function te(e,t){if(1&e){const e=y.Zb();y.Yb(0,"mat-icon",37),y.hc("click",(function(){y.Kc(e);const t=y.lc(3).rowData;return y.lc(2).showActionsMenu(t)})),y.Xb()}if(2&e){const e=y.lc(5);y.sc("title",e.ACTIONS_MENU_TITLE)}}function ne(e,t){if(1&e){const e=y.Zb();y.Yb(0,"mat-icon",38),y.hc("click",(function(){y.Kc(e);const t=y.lc(3).rowData;return y.lc(2).onInfoMapClicked(t.OBID)})),y.Xb()}if(2&e){const e=y.lc(5);y.sc("title",e.ACTIONS_MENU_INFOMAP_SHORTCUT)}}function ie(e,t){if(1&e){const e=y.Zb();y.Yb(0,"mat-icon",39),y.hc("click",(function(){y.Kc(e);const t=y.lc(3).rowData;return y.lc(2).viewFile(t.OBID)})),y.Xb()}if(2&e){const e=y.lc(5);y.sc("title",e.RESULTS_VIEW_FILES)}}function ae(e,t){if(1&e&&y.Tb(0,"sda-object-icon",40),2&e){const e=y.lc(3).rowData;y.sc("imageName",e.icon)}}function ce(e,t){1&e&&y.Tb(0,"mat-icon",41)}function se(e,t){if(1&e){const e=y.Zb();y.Yb(0,"span",42),y.hc("click",(function(){y.Kc(e);const t=y.lc(3).rowData;return y.lc(2).viewDocumentDetails(t.OBID)})),y.Uc(1),y.Xb()}if(2&e){const e=y.lc(2).$implicit,t=y.lc().rowData;y.sc("title",t[e.field]),y.Eb(1),y.Vc(t[e.field])}}function oe(e,t){if(1&e&&(y.Yb(0,"span",43),y.Uc(1),y.Xb()),2&e){const e=y.lc(3).rowData;y.Eb(1),y.Vc(e.name)}}function re(e,t){if(1&e&&(y.Yb(0,"div",26),y.Tb(1,"p-treeTableToggler",27),y.Sc(2,ee,1,2,"mat-checkbox",28),y.Sc(3,te,1,1,"mat-icon",29),y.Sc(4,ne,1,1,"mat-icon",30),y.Sc(5,ie,1,1,"mat-icon",31),y.Sc(6,ae,1,1,"sda-object-icon",32),y.Sc(7,ce,1,0,"mat-icon",33),y.Sc(8,se,2,2,"span",34),y.Sc(9,oe,2,1,"span",35),y.Xb()),2&e){const e=y.lc(2),t=e.$implicit,n=e.rowData;y.Eb(1),y.sc("rowNode",t),y.Eb(1),y.sc("ngIf",!n.isFile),y.Eb(1),y.sc("ngIf",!n.isFile),y.Eb(1),y.sc("ngIf",!n.isFile),y.Eb(1),y.sc("ngIf",n.isViewable),y.Eb(1),y.sc("ngIf",n.isViewable),y.Eb(1),y.sc("ngIf",!n.isViewable),y.Eb(1),y.sc("ngIf",!n.isFile),y.Eb(1),y.sc("ngIf",n.isFile)}}function le(e,t){1&e&&y.Tb(0,"mat-icon",46)}function he(e,t){if(1&e&&(y.Yb(0,"div",26),y.Tb(1,"p-treeTableToggler",27),y.Tb(2,"sda-object-icon",40),y.Yb(3,"span",44),y.Uc(4),y.Xb(),y.Sc(5,le,1,0,"mat-icon",45),y.Xb()),2&e){const e=y.lc().$implicit,t=y.lc(),n=t.$implicit,i=t.rowData;y.Eb(1),y.sc("rowNode",n),y.Eb(1),y.sc("imageName",i.icon),y.Eb(1),y.sc("title",i[e.field]),y.Eb(1),y.Vc(i[e.field]),y.Eb(1),y.sc("ngIf",i.InvalidObject)}}function de(e,t){if(1&e&&(y.Yb(0,"span",44),y.Uc(1),y.Xb()),2&e){const e=y.lc().$implicit,t=y.lc().rowData;y.sc("title",t[e.field]),y.Eb(1),y.Vc(t[e.field])}}function fe(e,t){if(1&e&&(y.Yb(0,"td",23),y.Sc(1,re,10,9,"div",24),y.Sc(2,he,6,5,"div",24),y.Sc(3,de,2,2,"span",25),y.Xb()),2&e){const e=t.index,n=y.lc(3);y.Eb(1),y.sc("ngIf",0===e&&n.isExpandDocNestedStructure),y.Eb(1),y.sc("ngIf",0===e&&!n.isExpandDocNestedStructure),y.Eb(1),y.sc("ngIf",0!==e)}}function ge(e,t){if(1&e&&(y.Yb(0,"tr"),y.Sc(1,fe,4,3,"td",22),y.Xb()),2&e){const e=y.lc(2);y.Eb(1),y.sc("ngForOf",e.columnset)}}function be(e,t){if(1&e){const e=y.Zb();y.Yb(0,"sda-pagination",47),y.hc("changePage",(function(t){return y.Kc(e),y.lc(2).changePageNumber(t)})),y.Xb()}if(2&e){const e=y.lc(2);y.sc("totalPages",e.totalPages)("currentPage",e.pageNumber)}}function ue(e,t){if(1&e){const e=y.Zb();y.Yb(0,"div",4),y.Sc(1,H,1,9,"sda-banner",5),y.Yb(2,"p-treeTable",6),y.hc("onNodeExpand",(function(t){return y.Kc(e),y.lc().onNodeExpand(t)})),y.Sc(3,K,2,1,"ng-template",7),y.Sc(4,G,1,0,void 0,8),y.Sc(5,$,2,2,"ng-template",9),y.Sc(6,Q,1,0,void 0,8),y.Sc(7,ge,2,1,"ng-template",10),y.Xb(),y.Sc(8,be,1,2,"sda-pagination",11),y.Xb()}if(2&e){const e=y.lc();y.Eb(1),y.sc("ngIf",e.inValidSignOffTextTobeShown),y.Eb(1),y.sc("value",e.currentFilesForNestedStructure)("columns",e.columnset)("frozenColumns",e.showCheckBoxes?e.frozenColumnset:"")("frozenWidth",e.showCheckBoxes?"40px":"0px")("scrollable",!0)("resizableColumns",!0),y.Eb(2),y.sc("ngIf",e.showCheckBoxes),y.Eb(2),y.sc("ngIf",e.showCheckBoxes),y.Eb(2),y.sc("ngIf",e.showPaging)}}let pe=(()=>{class e extends r.a{constructor(e,t,n,i,a,c,s,o,r,l,h,d,f,g,b,u,p,O){super(e),this.sdaTranslateService=t,this.signoffUndoSignoffDocumentService=n,this.checkInFileService=i,this.expandNestedStructureService=a,this.preferencesService=c,this.exceptionService=s,this.actionMenuProvider=o,this.configService=r,this.notificationService=l,this.viewNativeDataService=h,this.urlFilterFactory=d,this.windowService=f,this.infomapNavigationService=g,this.contentMenuService=b,this.iconService=u,this.bannerService=p,this.editFileService=O,this.isExpandDocNestedStructure=!1,this.selectAll=!0,this.noFileWarning=!1,this.frozenColumnset=new D,this.FILE_PICKER_NO_FILE=this.sdaTranslateService.get("FILE_PICKER_NO_FILE","Please select a file before continuing or select CANCEL to close the dialog"),this.SELECT_THIS_ITEM=this.sdaTranslateService.get("SELECT_THIS_ITEM","Select this item"),this.ACTIONS_MENU_TITLE=this.sdaTranslateService.get("ACTIONS_MENU_TITLE","Actions"),this.ACTIONS_MENU_INFOMAP_SHORTCUT=this.sdaTranslateService.get("ACTIONS_MENU_INFOMAP_SHORTCUT","Show Info Map"),this.RESULTS_VIEW_FILES=this.sdaTranslateService.get("RESULTS_VIEW_FILES","View File(s)"),this.FILES_WITH_REFERENCES=this.sdaTranslateService.get("FILES_WITH_REFERENCES","Files with references"),this.pageNumber=0,this.totalRecords=0,this.showPaging=!1,this.pageSize=Settings.application.defaultPageSize,this.filesAvailable=!1,this.showCheckBoxes=!0,this.isSelected=!1,this.SIGNOFF_ABORTED_MESSAGE=this.sdaTranslateService.get("SIGNOFF_ABORTED_MESSAGE",'The following reference revisions have references which are either "WORKING" or "SUPERSEDED". SignOff is aborted.'),this.bannerIcon="blockage",this.bannerTypeText="Warning",this.inValidSignOffTextTobeShown=!1,this.mainMethodOBID="",this.allowWorkingRefsForSignoff=!1,this.RESULTS_NO_FILES=this.sdaTranslateService.get("RESULTS_NO_FILES","No viewable files were found.")}ngOnInit(){this.obj=new v.a({OBID:"1234",Name:"banner",HasConflict:!1}),this.banner=this.bannerService.getBannerForObject(this.obj.copy,!0,!1,!0),this.banner.type=N.a.Warning,this.banner.message=this.SIGNOFF_ABORTED_MESSAGE,this.obidsWithIcons=[],this.showLoadingIndicator(),this.data||(this.data=this.getData());const e=this.data.displayTitle?this.data.displayTitle:this.data.document.Name;this.refFileColumnSet=this.data.columnSet?this.data.columnSet:"",this.data.filePickerType!==k.a.ExpandDocStructure&&this.data.filePickerType!==k.a.ExpandFileStructure||(this.preferencesService.preferencesChanged$.pipe(Object(a.a)(1)).subscribe(e=>{this.nestedRefFileLevel=e.SPFNestedReferenceFileLevel}),this.showCheckBoxes=!1),this.fillAllServiceData(),this.FILE_PICKER_PROPERTIES_TITLE=this.sdaTranslateService.getFormatted("FILE_PICKER_PROPERTIES_TITLE-NAME","Information about {0}",[e]),this.filesAvailable=this.data.document.length>0,this.totalRecords=this.data.document.length,this.allowWorkingRefsForSignoff=this.data.allowWorkingRefsForSignoff,this.totalPages=Math.ceil(this.totalRecords/this.pageSize),this.showPaging=this.totalPages>1,this.setupColumnHeaders(),this.setupTreeDataForNestedDocuments().subscribe()}changePageNumber(e){e>=this.totalPages&&(e=0),this.pageNumber=e;const t=this.pageNumber*this.pageSize;this.currentFilesForNestedStructure=this.filesForNestedStructure.slice(t,t+this.pageSize)}onInfoMapClicked(e){this.infomapNavigationService.navigateToInfoMap(e,this.configService.selectedCreateConfig,!0)}showActionsMenu(e){if(this.currentFilesForNestedStructure.forEach(t=>{t.children&&t.children.forEach(t=>{t.data.isSelected=e.OBID===t.data.OBID}),t.data.isSelected=e.OBID===t.data.OBID}),e.OBID){const t={OBID:e.OBID};this.actionMenuProvider.clearItems(),this.actionMenuProvider.addItem(new F.a(e.OBID,e.Name,this.configService.selectedCreateConfig,void 0,void 0,t)),this.contentMenuService.showActionsMenu()}}toggleCheckBoxForRefFile(e,t){e.isSelected=t.checked,t.checked?e.OBID&&this.actionMenuProvider.addItem(new F.a(e.OBID,e.Name,this.configService.selectedCreateConfig,void 0,void 0,{OBID:e.OBID})):e.OBID&&this.actionMenuProvider.removeItem(new F.a(e.OBID,e.Name,this.configService.selectedCreateConfig,void 0,void 0,{OBID:e.OBID}))}ok(){const e=this.filesForNestedStructure.filter(e=>!0===e.data.isSelected).map(e=>e.data);if(e&&e.length>0)if(this.data.filePickerType===k.a.SignOff){const t=e.map(e=>e.OBID);this.returnValue(t)}else this.returnValue(e);else this.noFileWarning=!0}viewFile(e){this.viewNativeDataService.canShowFile(e,this.configService.selectedCreateConfig,void 0,!0).subscribe(t=>{t===w.a.NoViewableFiles?this.notificationService.info(this.RESULTS_NO_FILES):this.actionMenuProvider.notifyShortcutClickedForItem([e])},e=>{this.exceptionService.handleException(e)})}viewDocumentDetails(e){const t=JSON.stringify(this.urlFilterFactory.createLinkFilterSettings(e)),n=JSON.stringify([this.configService.selectedCreateConfig]);this.windowService.Window.open(`${this.windowService.Window.location.origin+this.windowService.Window.location.pathname}#/objects;queryFilter=${t};config=${n};fromGrid=true/detail/${e}`)}toggleAllNone(e){this.filesForNestedStructure.forEach(t=>{t.data.isSelected=e.checked}),this.inValidSignOffTextTobeShown=this.isBannerComponentRequired()}toggleCheckBox(){this.inValidSignOffTextTobeShown=this.isBannerComponentRequired()}cancel(){this.returnValue(void 0)}onNodeExpand(e){const t=e.node;void 0!==t.data.isExpanded&&!1!==t.data.isExpanded||(this.data.filePickerType===k.a.SignOff?this.validateSignOffDocuments(t).subscribe(()=>{this.inValidSignOffTextTobeShown=this.isBannerComponentRequired()}):this.data.filePickerType===k.a.CheckIn||this.data.filePickerType===k.a.UndoCheckOut?this.validateDocReferencesForCKI(t).subscribe():this.data.filePickerType===k.a.EditFiles?this.validateEditDocuments(t).subscribe():this.data.filePickerType!==k.a.ExpandDocStructure&&this.data.filePickerType!==k.a.ExpandFileStructure||t.data.FileReferencesNodeid===this.FILES_WITH_REFERENCES||this.checkForAllowedNestedRefLevel(t)&&this.expandDocNestedReferences(t).subscribe())}fillAllServiceData(){const e=[];this.data.filePickerType===k.a.EditFiles&&(this.refFileColumnSet=this.data.document.columnSet,this.methodOBID=this.data.document.methodOBID,this.mainMethodOBID=this.data.document.mainMethodOBID,this.editFileParentDocOBID=this.data.document.OBID,this.data.document=this.data.document.Children),this.data.document.forEach(t=>{const n={};t.ColumnSetProperties[0].DuplicateReferences.forEach(e=>{n[e.Key]=e.Value}),n.InvalidObject=t.InvalidObject,n.Children=[],e.push(n),t.Children.forEach(e=>{const t={};e.ColumnSetProperties[0].DuplicateReferences.forEach(e=>{t[e.Key]=e.Value}),t.InvalidObject=e.InvalidObject,n.Children.push(t)})}),this.data.document=e}validateEditDocuments(e){if(e.children&&e.children.length>0){const t=[];return e.children.forEach(e=>{t.push(e.data.OBID)}),this.editFileService.validateDocRefForEditFiles(t,!1,this.methodOBID,this.refFileColumnSet,this.mainMethodOBID).pipe(Object(a.a)(1),Object(c.a)(n=>n&&n.length>0?this.getReferencesForChildren(n,t,e,this.refFileColumnSet):Object(i.a)(void 0)))}return Object(i.a)(void 0)}isBannerComponentRequired(){const e=!!this.filesForNestedStructure.find(e=>e.data.isSelected&&e.data.InvalidObject);return e?this.disableOkayButton():this.enableOkayButton(),e}validateSignOffDocuments(e){const t=[];return e.children.forEach(e=>{t.push(e.data.OBID)}),this.signoffUndoSignoffDocumentService.validateSignOffDocuments(t,1,this.allowWorkingRefsForSignoff,this.configService.selectedCreateConfig).pipe(Object(a.a)(1),Object(s.a)(n=>n&&n.length>0?this.getReferencesForChildren(n,t,e,"CS_SignOffColumnSet"):Object(i.a)(void 0)))}validateDocReferencesForCKI(e){const t=[];return e.children.forEach(e=>{t.push(e.data.OBID)}),this.checkInFileService.validateDocReferencesForCKIUndoCKO(t,!1).pipe(Object(a.a)(1),Object(s.a)(n=>n&&n.length>0?this.getReferencesForChildren(n,t,e,this.refFileColumnSet):Object(i.a)(void 0)))}expandDocNestedReferences(e){const t=[];return e.children&&e.children.forEach(e=>{e.data.OBID&&t.push(e.data.OBID)}),this.getNestedReferenceStructure(t).pipe(Object(a.a)(1),Object(c.a)(n=>n&&n.length>0?this.getReferencesForChildren(n,t,e,this.refFileColumnSet):Object(i.a)(void 0)))}getNestedReferenceStructure(e){return this.data.filePickerType===k.a.ExpandDocStructure?e&&e.length>0?this.expandNestedStructureService.GetNestedReferenceStructure(e,this.data.showHiddenFiles,this.refFileColumnSet):Object(i.a)(void 0):this.expandNestedStructureService.GetNestedReferenceStructure(e,!1,this.refFileColumnSet)}fillAllDocsPropertiesForEditFiles(e){const t=[];return e.forEach(e=>{const n={};e.ColumnSetProperties[0].DuplicateReferences.forEach(e=>{n[e.Key]=e.Value}),n.InvalidObject=e.InvalidObject,n.Children=[],t.push(n),e.Children.forEach(e=>{const t={};e.ColumnSetProperties[0].DuplicateReferences.forEach(e=>{t[e.Key]=e.Value}),t.InvalidObject=e.InvalidObject,n.Children.push(t)})}),t}getReferencesForChildren(e,t,n,s){const o=[],r=[];e.forEach(e=>{if(t.indexOf(e.OBID)>-1){o.push(e.OBID);const t=this.extractRefFilesFromDynProperty(e.DynSPFFiles);r.push(...t.map(e=>e.obid)),e.Children&&e.Children.length>0&&e.Children.forEach(e=>{o.push(e.OBID)})}}),e=this.fillAllDocsPropertiesForEditFiles(e);const l=[];return l.push(...o),l.push(...r),this.getIcons(l).pipe(Object(a.a)(1),Object(c.a)(t=>t?this.getParentChildDocuments(e,o):Object(i.a)(void 0)),Object(c.a)(t=>t&&t.length>0?(this.addReferenceToTreeStructure(e,n.children),n.data.isExpanded=!0,Object(i.a)(!0)):Object(i.a)(!1)))}cyclicReferenceCheck(e,t){let n=!1;return e&&(n=!(!e.data||e.data.OBID!==t.OBID&&this.editFileParentDocOBID!==t.OBID)||this.cyclicReferenceCheck(e.parent,t)),n}returnValue(e){const t=new l.a(!0);t.setData(e),this.closeModal.next(t)}setupColumnHeaders(){if(this.frozenColumnset.field="",this.frozenColumnset.header="",this.columnset=new Array,this.data.isColumnsetConfigured)Object.keys(this.data.document[0]).forEach(e=>{e.startsWith("CI_")&&!1===e.includes("DisplayName")&&this.columnset.push({field:e,header:this.data.document[0][e+"DisplayName"]})});else for(const e in this.data.document[0])if(this.data.document[0].hasOwnProperty(e)&&"uid"!==e.toLowerCase()&&"id"!==e.toLowerCase()&&"obid"!==e.toLowerCase()){const t=e.replace(/_/g," ");this.columnset.push({field:e,header:t})}}fillAllDocsForEditFiles(e){const t=[];return e.forEach(e=>{let n=t.find(t=>t.OBID===e.OBID);n||t.push(e),e.Children.forEach(e=>{n=t.find(t=>t.OBID===e.OBID),n||t.push(e)})}),Object(i.a)(t)}getParentChildDocuments(e,t){const n=[];return Object.assign(n,e||this.data.document),this.fillAllDocsForEditFiles(n)}setupTreeDataForNestedDocuments(){const e=[];return this.getParentChildDocuments().pipe(Object(a.a)(1),Object(c.a)(e=>{if(e&&e.length>0){const t=e.map(e=>e.OBID),n=[];return this.data.document.forEach(e=>{n.push(...this.extractRefFilesFromDynProperty(e.DynSPFFiles))}),t.push(...n.map(e=>e.obid)),this.getIcons(t)}return Object(i.a)(void 0)}),Object(o.a)(t=>{t&&(this.addDocumentProperties(e),this.getDataForUI(e))}))}addDocumentProperties(e){this.data.document.forEach(t=>{const n={};t.isReadOnly=!(!t.DynStatus||"true"!==t.DynStatus.toLowerCase()),t.isSelected=!0,t.isViewable=!0,this.actionMenuProvider.addItem(new F.a(t.OBID,t.OBID,this.configService.selectedCreateConfig,void 0,void 0,{OBID:t.OBID})),n.data=t,t.icon=this.obidsWithIcons.find(e=>e.OBID===t.OBID).IconName,t&&t.Children&&t.Children.length>0&&this.data.filePickerType===k.a.ExpandDocStructure&&this.addRefFilesFolder(n,t.DynSPFFiles),t&&t.Children&&t.Children.length>0&&t.Children.forEach(e=>{if(e){const t={};e&&(e.isReadOnly=!0,e.isSelected=!1,e.cyclicFound=!1,e.isViewable=!0,t.data=e,this.data.filePickerType!==k.a.EditFiles&&(t.data.icon=this.obidsWithIcons.find(e=>e.OBID===t.data.OBID).IconName),void 0===n.children?n.children=[t]:n.children.push(t),e.InvalidObject&&(n.data.InvalidObject=!0))}}),n&&n.data&&e.push(n)})}getDataForUI(e){this.filesForNestedStructure=e,this.currentFilesForNestedStructure=this.filesForNestedStructure.slice(0,this.pageSize),this.inValidSignOffTextTobeShown=this.isBannerComponentRequired(),this.filesForNestedStructure&&this.filesForNestedStructure.length>0&&this.filesForNestedStructure[0].children&&this.filesForNestedStructure[0].children.length>0&&(this.filesForNestedStructure[0].expanded=!0,this.onNodeExpand({node:this.filesForNestedStructure[0]})),this.hideLoadingIndicator()}addRefFilesFolder(e,t){const n={};n.data={name:this.FILES_WITH_REFERENCES,FileReferencesNodeid:this.FILES_WITH_REFERENCES,isFile:!0},this.extractRefFilesFromDynProperty(t).forEach(e=>{const t={};t.name=e.name,t.OBID=e.obid,t.isFile=!0,t.isViewable=!0,t.icon=this.obidsWithIcons.find(t=>t.OBID===e.obid).IconName;const i={};i.data=t,void 0===n.children?n.children=[i]:n.children.push(i)}),void 0===e.children?e.children=[n]:e.children.push(n)}extractRefFilesFromDynProperty(e){const t=[];if(e&&e.length>0){const n=e.split("- ");n&&n.length>0&&n.forEach(e=>{const n=e.split("|");t.push(new F.a(n[0],n[1],""))})}return t}addReferenceToTreeStructure(e,t){e&&e.length>0&&t.forEach(t=>{if(!1===t.data.cyclicFound){const n=e.find(e=>e.OBID===t.data.OBID);t.data.InvalidObject=n.InvalidObject,t.data.InvalidObject&&(t.parent.data.InvalidObject=!0),t.data.icon=this.obidsWithIcons.find(e=>e.OBID===t.data.OBID).IconName,n.Children.length>0&&(this.data.filePickerType===k.a.ExpandDocStructure&&this.addRefFilesFolder(t,n.DynSPFFiles),n.Children.forEach(e=>{const n={};e.isReadOnly=!0,e.isViewable=!0,e.icon=this.obidsWithIcons.find(t=>t.OBID===e.OBID).IconName,e.cyclicFound=this.cyclicReferenceCheck(t,e),n.data=e,void 0===t.children?t.children=[n]:t.children.push(n),e.InvalidObject&&(t.data.InvalidObject=!0)}))}})}checkForAllowedNestedRefLevel(e){let t=1;for(;e.parent;)t++,e=e.parent;return t<this.nestedRefFileLevel}getIcons(e){return e&&e.length>0?this.iconService.getIconNames(e,this.configService.selectedCreateConfig).pipe(Object(a.a)(1),Object(c.a)(e=>e&&e.length>0?(this.obidsWithIcons.push(...e),Object(i.a)(!0)):Object(i.a)(!1))):Object(i.a)(!1)}}return e.\u0275fac=function(t){return new(t||e)(y.Sb(h.a),y.Sb(d.a),y.Sb(g.a),y.Sb(u.a),y.Sb(f.a),y.Sb(T.a),y.Sb(S.a),y.Sb(O.a),y.Sb(p.a),y.Sb(P.a),y.Sb(R.a),y.Sb(x.a),y.Sb(m.a),y.Sb(E.a),y.Sb(I.a),y.Sb(C.a),y.Sb(_.a),y.Sb(b.a))},e.\u0275cmp=y.Mb({type:e,selectors:[["sda-file-picker-nested-structure"]],inputs:{data:"data",isExpandDocNestedStructure:"isExpandDocNestedStructure"},features:[y.Bb],decls:3,vars:2,consts:[[1,"file-picker"],["class","file-picker__message",4,"ngIf"],["class","file-picker-nested",4,"ngIf"],[1,"file-picker__message"],[1,"file-picker-nested"],["class","file-picker-nested__banner",3,"bannerTypeText","bannerText","bannerType","showCloseIcon","showBannerType","maxWidth","showBannerIcon","bannerIcon","isFullWidth",4,"ngIf"],["styleClass","file-picker-table",3,"value","columns","frozenColumns","frozenWidth","scrollable","resizableColumns","onNodeExpand"],["pTemplate","colgroup"],[4,"ngIf"],["pTemplate","header"],["pTemplate","body"],[3,"totalPages","currentPage","changePage",4,"ngIf"],[1,"file-picker-nested__banner",3,"bannerTypeText","bannerText","bannerType","showCloseIcon","showBannerType","maxWidth","showBannerIcon","bannerIcon","isFullWidth"],[4,"ngFor","ngForOf"],["pTemplate","frozenheader"],[3,"ttRow"],[1,"file-picker-table__column","file-picker-table__column--frozen"],[3,"ngModel","change","ngModelChange"],["class","file-picker-table__column","ttResizableColumn","",4,"ngFor","ngForOf"],["ttResizableColumn","",1,"file-picker-table__column"],["pTemplate","frozenbody"],[3,"ngModel","disabled","ngModelChange","change"],["class","file-picker-table__column",4,"ngFor","ngForOf"],[1,"file-picker-table__column"],["class","file-picker-table__column--items",4,"ngIf"],["class","file-picker-table__text",3,"title",4,"ngIf"],[1,"file-picker-table__column--items"],[3,"rowNode"],["class","file-picker-table__checkbox",3,"title","ngModel","change","ngModelChange",4,"ngIf"],["svgIcon","list","class","file-picker-table__icon",3,"title","click",4,"ngIf"],["svgIcon","nodemap","class","file-picker-table__icon",3,"title","click",4,"ngIf"],["svgIcon","view","class","file-picker-table__icon",3,"title","click",4,"ngIf"],["class","file-picker-table__object-icon",3,"imageName",4,"ngIf"],["class","file-picker-table__icon file-picker-table__icon--folder","svgIcon","folder",4,"ngIf"],["class","file-picker-table__text file-picker-table__text--hyperlink",3,"title","click",4,"ngIf"],["class","file-picker-table__text",4,"ngIf"],[1,"file-picker-table__checkbox",3,"title","ngModel","change","ngModelChange"],["svgIcon","list",1,"file-picker-table__icon",3,"title","click"],["svgIcon","nodemap",1,"file-picker-table__icon",3,"title","click"],["svgIcon","view",1,"file-picker-table__icon",3,"title","click"],[1,"file-picker-table__object-icon",3,"imageName"],["svgIcon","folder",1,"file-picker-table__icon","file-picker-table__icon--folder"],[1,"file-picker-table__text","file-picker-table__text--hyperlink",3,"title","click"],[1,"file-picker-table__text"],[1,"file-picker-table__text",3,"title"],["class","file-picker-table__warning-icon","svgIcon","blockage",4,"ngIf"],["svgIcon","blockage",1,"file-picker-table__warning-icon"],[3,"totalPages","currentPage","changePage"]],template:function(e,t){1&e&&(y.Yb(0,"div",0),y.Sc(1,Y,2,1,"div",1),y.Sc(2,ue,9,10,"div",2),y.Xb()),2&e&&(y.Eb(1),y.sc("ngIf",t.noFileWarning),y.Eb(1),y.sc("ngIf",t.filesAvailable))},directives:[B.t,M.c,L.d,j.a,B.s,M.b,W.a,A.p,A.s,M.a,M.e,U.a,V.a,X.a],styles:[".file-picker-table__text[_ngcontent-%COMP%], [_nghost-%COMP%]     .ui-treetable table tbody tr td, [_nghost-%COMP%]     .ui-treetable table thead tr th{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]    {display:flex;flex:1 1 100%;flex-direction:column;overflow:hidden}[_nghost-%COMP%]     .object-icon{width:20px!important;height:20px!important;cursor:pointer}[_nghost-%COMP%]     .ui-treetable table{line-height:16px}[_nghost-%COMP%]     .ui-treetable table tbody{line-height:26px}[_nghost-%COMP%]     .ui-treetable table tbody tr td{border-bottom:#a9b4be;font-size:14px}[_nghost-%COMP%]     .ui-treetable table tbody .ui-state-highlight td{background-color:#afe5ff;color:#333}[_nghost-%COMP%]     .ui-treetable table tbody tr:nth-child(2n){background-color:rgba(0,0,0,.04)!important}[_nghost-%COMP%]     .ui-treetable table tbody tr:hover{background-color:#afe5ff!important}[_nghost-%COMP%]     .ui-treetable table thead tr th{outline:none;padding:7px;text-align:left;background-color:#ebedf0;border:1px solid #c1d5df;font-size:16px;font-weight:400}[_nghost-%COMP%]     .ui-treetable .ui-treetable-toggler{position:inherit}[_nghost-%COMP%]     .uxt-property-grid{flex-shrink:0}[_nghost-%COMP%]     .uxt-property__name:first-child{flex:0 0 auto;max-width:33%}.file-picker[_ngcontent-%COMP%]{padding:0 10px;overflow:auto}.file-picker__message[_ngcontent-%COMP%]{padding:8px;font-size:14px;color:#fff;background-color:#f2bf25}.file-picker-nested[_ngcontent-%COMP%]{overflow:auto!important}.file-picker-nested__banner[_ngcontent-%COMP%]     .banner{margin:10px 0}.file-picker-table__column[_ngcontent-%COMP%]{width:200px!important}.file-picker-table__column--items[_ngcontent-%COMP%]{display:flex;align-items:center}.file-picker-table__column--frozen[_ngcontent-%COMP%]{width:40px!important}.file-picker-table__text--hyperlink[_ngcontent-%COMP%]{text-decoration:underline;color:#02adff;cursor:pointer}.file-picker-table__warning-icon[_ngcontent-%COMP%]{flex-shrink:0;width:16px;height:16px;margin-left:auto;color:#f2bf25}.file-picker-table__checkbox[_ngcontent-%COMP%]{margin-right:5px;margin-left:5px}.file-picker-table__object-icon[_ngcontent-%COMP%]{flex-shrink:0}.file-picker-table__icon[_ngcontent-%COMP%]{flex-shrink:0;width:20px;height:20px;margin-right:5px;fill:#155e95;cursor:pointer}.file-picker-table__icon--folder[_ngcontent-%COMP%]{margin-left:5px;fill:#d1a00c;cursor:auto}sda-pagination[_ngcontent-%COMP%]{flex-shrink:0}"]}),e})()},wQW7:function(e,t,n){"use strict";n.d(t,"a",(function(){return c}));var i=n("SXtU"),a=n("fXoL");let c=(()=>{class e{constructor(e){this.rootdataService=e}signOffUndoSignOffDocuments(e,t,n=!1,i=!1){const a=JSON.stringify({ObjectOBIDs:e,UndoSignOff:t,AllowWorkingReferences:n,PurgeSupersededVersions:i});return this.rootdataService.post("SDA/SignOffOrUndoSignOffDocuments",a)}validateSignOffDocuments(e,t,n,i){const a=JSON.stringify({ObjectOBIDs:e,NestedLevel:t,AllowWorkingReferences:n});return this.rootdataService.post("SDA/ValidateSignOffDocuments",a,i,void 0,"CS_SignOffColumnSet")}}return e.\u0275fac=function(t){return new(t||e)(a.dc(i.a))},e.\u0275prov=a.Ob({token:e,factory:e.\u0275fac}),e})()}}]);