(window.webpackJsonp=window.webpackJsonp||[]).push([[131],{"1eVd":function(e,t,i){"use strict";i.d(t,"a",(function(){return m}));var n=i("fXoL"),r=i("XNiG"),s=i("Kj3r"),a=i("Ejbi"),o=i("ofXK"),c=i("3Pt+"),l=i("NFeN"),d=i("4CIq"),h=i("FcA5");function u(e,t){1&e&&n.Tb(0,"mat-icon",6)}function p(e,t){if(1&e){const e=n.Zb();n.Yb(0,"sda-button-plain",7),n.hc("click",(function(){return n.Kc(e),n.lc().onClear()})),n.Xb()}2&e&&n.sc("isCompact",!0)("matSvgIcon","close")}function b(e,t){if(1&e){const e=n.Zb();n.Yb(0,"sda-button-primary",8),n.hc("click",(function(){return n.Kc(e),n.lc().search()})),n.Xb()}2&e&&n.sc("matSvgIcon","search")}let m=(()=>{class e{constructor(e){this.sdaTranslateService=e,this.useFilterMode=!0,this.useDebounce=!1,this.showClearIcon=!1,this.searchTerm="",this.placeholder="",this.searchTermChange=new n.o,this.onSearch=new n.o,this.SEARCH_BAR_PLACEHOLDER=this.sdaTranslateService.get("SEARCH_BAR_PLACEHOLDER","Search..."),this.onChangeDebounce=new r.a,this.placeholder=this.SEARCH_BAR_PLACEHOLDER,this.onChangeDebounceSubscription=this.onChangeDebounce.pipe(Object(s.a)(500)).subscribe(()=>{this.searchTermChange.emit(this.searchTerm)})}ngOnChanges(e){e.placeholder&&""===this.placeholder&&(this.placeholder=this.SEARCH_BAR_PLACEHOLDER)}ngOnDestroy(){this.onChangeDebounceSubscription&&this.onChangeDebounceSubscription.unsubscribe()}get searchQuery(){return this.searchTerm}set searchQuery(e){e!==this.searchTerm&&(this.searchTerm=e,this.searchTermUpdated())}search(){this.useFilterMode||this.onSearch.emit(this.searchTerm)}onClear(){this.searchTerm="",this.searchTermChange.emit(this.searchTerm)}searchTermUpdated(){this.useDebounce?this.onChangeDebounce.next():this.searchTermChange.emit(this.searchTerm)}}return e.\u0275fac=function(t){return new(t||e)(n.Sb(a.a))},e.\u0275cmp=n.Mb({type:e,selectors:[["sda-simple-search"]],inputs:{useFilterMode:"useFilterMode",useDebounce:"useDebounce",showClearIcon:"showClearIcon",searchTerm:"searchTerm",placeholder:"placeholder"},outputs:{searchTermChange:"searchTermChange",onSearch:"onSearch"},features:[n.Cb],decls:6,vars:6,consts:[[1,"simple-search"],["svgIcon","search","class","simple-search__icon",4,"ngIf"],["type","text",1,"simple-search__input",3,"ngModel","placeholder","spellcheck","ngModelChange","keyup.enter"],["Search",""],["class","simple-search__button simple-search__button--clear",3,"isCompact","matSvgIcon","click",4,"ngIf"],["class","simple-search__button",3,"matSvgIcon","click",4,"ngIf"],["svgIcon","search",1,"simple-search__icon"],[1,"simple-search__button","simple-search__button--clear",3,"isCompact","matSvgIcon","click"],[1,"simple-search__button",3,"matSvgIcon","click"]],template:function(e,t){1&e&&(n.Yb(0,"div",0),n.Sc(1,u,1,0,"mat-icon",1),n.Yb(2,"input",2,3),n.hc("ngModelChange",(function(e){return t.searchQuery=e}))("keyup.enter",(function(){return t.search()})),n.Xb(),n.Sc(4,p,1,2,"sda-button-plain",4),n.Sc(5,b,1,1,"sda-button-primary",5),n.Xb()),2&e&&(n.Eb(1),n.sc("ngIf",t.useFilterMode),n.Eb(1),n.sc("ngModel",t.searchQuery)("placeholder",t.placeholder)("spellcheck",!1),n.Eb(2),n.sc("ngIf",t.showClearIcon&&(null==t.searchTerm?null:t.searchTerm.length)>0),n.Eb(1),n.sc("ngIf",!t.useFilterMode))},directives:[o.t,c.c,c.p,c.s,l.a,d.a,h.a],styles:[".simple-search__input[_ngcontent-%COMP%]{overflow:hidden;white-space:nowrap;text-overflow:ellipsis}[_nghost-%COMP%]{width:100%}.simple-search[_ngcontent-%COMP%]{display:flex;flex:1;align-items:center;height:34px;border:1px solid #dce0e5;background-color:#fff;color:#8997a5}.simple-search__icon[_ngcontent-%COMP%]{width:20px;height:20px;margin-left:5px}.simple-search__input[_ngcontent-%COMP%]{flex:1;min-width:0!important;height:34px;line-height:1;border:none;background-color:initial}.simple-search__button[_ngcontent-%COMP%]  .button{border-radius:0}.simple-search__button--clear[_ngcontent-%COMP%] {margin-right:1px}.simple-search__button--clear[_ngcontent-%COMP%]  .button__mat-icon{width:16px;height:16px}"]}),e})()},"4JBC":function(e,t,i){"use strict";i.d(t,"a",(function(){return n}));var n=function(e){return e[e.Info=0]="Info",e[e.Success=1]="Success",e[e.Warning=2]="Warning",e[e.Error=3]="Error",e[e.Dark=4]="Dark",e}({})},"8/aj":function(e,t,i){"use strict";i.d(t,"a",(function(){return g}));var n=i("fXoL"),r=(i("4JBC"),i("ofXK")),s=i("NFeN");function a(e,t){if(1&e&&n.Tb(0,"mat-icon",11),2&e){const e=n.lc(3);n.sc("svgIcon",e.bannerIcon)}}function o(e,t){if(1&e&&(n.Yb(0,"h4",9),n.Sc(1,a,1,1,"mat-icon",10),n.Uc(2),n.Xb()),2&e){const e=n.lc(2);n.Eb(1),n.sc("ngIf",e.showBannerIcon),n.Eb(1),n.Wc(" ",e.bannerTypeText," ")}}function c(e,t){if(1&e&&(n.Yb(0,"p",12),n.Uc(1),n.Xb()),2&e){const e=n.lc(2);n.Eb(1),n.Vc(e.bannerText)}}function l(e,t){if(1&e&&(n.Yb(0,"li",15),n.Uc(1),n.Xb()),2&e){const e=t.$implicit;n.Eb(1),n.Vc(e)}}function d(e,t){if(1&e&&(n.Yb(0,"ul",13),n.Sc(1,l,2,1,"li",14),n.Xb()),2&e){const e=n.lc(2);n.Eb(1),n.sc("ngForOf",e.bannerList)}}function h(e,t){if(1&e&&(n.Yb(0,"p",12),n.Uc(1),n.Xb()),2&e){const e=n.lc(2);n.Eb(1),n.Vc(e.bannerExtraText)}}function u(e,t){if(1&e){const e=n.Zb();n.Yb(0,"mat-icon",16),n.hc("click",(function(){return n.Kc(e),n.lc(2).closeBanner()})),n.Xb()}2&e&&n.sc("svgIcon","close")}function p(e,t){if(1&e&&(n.Yb(0,"div",1),n.Yb(1,"div",2),n.Yb(2,"div",3),n.Sc(3,o,3,2,"h4",4),n.Sc(4,c,2,1,"p",5),n.Sc(5,d,2,1,"ul",6),n.qc(6),n.Sc(7,h,2,1,"p",5),n.Xb(),n.Sc(8,u,1,1,"mat-icon",7),n.Xb(),n.Yb(9,"div",8),n.qc(10,1),n.Xb(),n.Xb()),2&e){const e=n.lc();n.Rc("max-width",e.maxWidth,"px"),n.Ib("banner--compact",e.isCompact)("banner--full",e.isFullWidth)("banner--info",0===e.bannerType)("banner--warning",2===e.bannerType),n.Eb(3),n.sc("ngIf",e.showBannerType),n.Eb(1),n.sc("ngIf",e.bannerText),n.Eb(1),n.sc("ngIf",(null==e.bannerList?null:e.bannerList.length)>0),n.Eb(2),n.sc("ngIf",e.bannerExtraText),n.Eb(1),n.sc("ngIf",e.showCloseIcon)}}const b=[[["",8,"sda-banner-content-hook"]],[["",8,"sda-banner-actions-hook"]]],m=[".sda-banner-content-hook",".sda-banner-actions-hook"];let g=(()=>{class e{constructor(){this.isCompact=!1,this.isFullWidth=!1,this.bannerIcon="error",this.showBannerType=!0,this.showBannerIcon=!0,this.showCloseIcon=!1,this.bannerClosed=!1,this.onBannerClosed=new n.o}closeBanner(){this.bannerClosed=!0,this.onBannerClosed.emit(this.bannerClosed)}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=n.Mb({type:e,selectors:[["sda-banner"]],inputs:{isCompact:"isCompact",isFullWidth:"isFullWidth",maxWidth:"maxWidth",bannerType:"bannerType",bannerTypeText:"bannerTypeText",bannerText:"bannerText",bannerExtraText:"bannerExtraText",bannerList:"bannerList",bannerIcon:"bannerIcon",showBannerType:"showBannerType",showBannerIcon:"showBannerIcon",showCloseIcon:"showCloseIcon",bannerClosed:"bannerClosed"},outputs:{onBannerClosed:"onBannerClosed"},ngContentSelectors:m,decls:1,vars:1,consts:[["class","banner",3,"banner--compact","banner--full","banner--info","banner--warning","maxWidth",4,"ngIf"],[1,"banner"],[1,"banner-header"],[1,"banner-header__content"],["class","banner-header__type",4,"ngIf"],["class","banner-header__message",4,"ngIf"],["class","banner-list",4,"ngIf"],["class","banner-header__close",3,"svgIcon","click",4,"ngIf"],[1,"banner-actions"],[1,"banner-header__type"],["class","banner-header__icon",3,"svgIcon",4,"ngIf"],[1,"banner-header__icon",3,"svgIcon"],[1,"banner-header__message"],[1,"banner-list"],["class","banner-list__item",4,"ngFor","ngForOf"],[1,"banner-list__item"],[1,"banner-header__close",3,"svgIcon","click"]],template:function(e,t){1&e&&(n.rc(b),n.Sc(0,p,11,15,"div",0)),2&e&&n.sc("ngIf",!t.bannerClosed)},directives:[r.t,s.a,r.s],styles:["[_nghost-%COMP%]{display:flex;flex-shrink:0;justify-content:center}.banner[_ngcontent-%COMP%]{align-self:center;margin:10px;border:1px solid #8997a5;border-radius:2px;overflow:hidden;box-shadow:0 2px 1px -1px rgba(0,0,0,.2),0 1px 1px 0 rgba(0,0,0,.14),0 1px 3px 0 rgba(0,0,0,.12)}.banner--full[_ngcontent-%COMP%]{width:100%}.banner--compact[_ngcontent-%COMP%]   .banner-header__content[_ngcontent-%COMP%]{flex-direction:row;align-items:center}.banner--compact[_ngcontent-%COMP%]   .banner-header__type[_ngcontent-%COMP%]{margin-bottom:0}.banner--info[_ngcontent-%COMP%]{border-color:#0087c8}.banner--info[_ngcontent-%COMP%]   .banner-header[_ngcontent-%COMP%]{background-color:#e8f7ff}.banner--info[_ngcontent-%COMP%]   .banner-header__icon[_ngcontent-%COMP%]{color:#02adff}.banner--info[_ngcontent-%COMP%]   .banner-actions[_ngcontent-%COMP%]{border-top-color:#0087c8}.banner--warning[_ngcontent-%COMP%]{border-color:#d1a00c}.banner--warning[_ngcontent-%COMP%]   .banner-header[_ngcontent-%COMP%]{background-color:#fcefc7}.banner--warning[_ngcontent-%COMP%]   .banner-header__icon[_ngcontent-%COMP%]{color:#f2bf25}.banner--warning[_ngcontent-%COMP%]   .banner-actions[_ngcontent-%COMP%]{border-top-color:#d1a00c}.banner-header[_ngcontent-%COMP%]{display:flex;flex-shrink:0;padding:8px;background-color:#ebedf0}.banner-header__content[_ngcontent-%COMP%]{display:flex;flex-flow:column wrap;width:100%}.banner-header__type[_ngcontent-%COMP%]{display:flex;align-items:center;margin-right:5px;margin-bottom:5px;color:#1f2429;font-weight:500}.banner-header__icon[_ngcontent-%COMP%]{flex-shrink:0;width:18px;height:18px;margin-right:8px}.banner-header__message[_ngcontent-%COMP%]{font-size:14px}.banner-header__message[_ngcontent-%COMP%]:not(:first-of-type){width:100%;margin-top:8px}.banner-header__message[_ngcontent-%COMP%] + .banner-list[_ngcontent-%COMP%]{margin-top:8px}.banner-header__close[_ngcontent-%COMP%]{flex-shrink:0;align-self:flex-start;width:16px;height:16px;margin-left:15px;cursor:pointer;opacity:.6;transition:opacity .15s linear}.banner-header__close[_ngcontent-%COMP%]:hover{opacity:1}.banner-list[_ngcontent-%COMP%]{width:100%;padding-left:20px;font-size:14px}.banner-list__item[_ngcontent-%COMP%]{list-style:circle}.banner-list[_ngcontent-%COMP%] + .banner-header__message[_ngcontent-%COMP%]{margin-top:8px}.banner-actions[_ngcontent-%COMP%]:not(:empty){display:flex;justify-content:flex-end;padding:8px;border-top:1px solid #8997a5}.banner-actions[_ngcontent-%COMP%]:not(:empty)     .sda-banner-actions-hook{display:flex;flex:1;justify-content:flex-end;flex-wrap:wrap;align-items:center}.banner-actions[_ngcontent-%COMP%]:not(:empty)     .button{margin-left:10px}"]}),e})()},AujL:function(e,t,i){"use strict";i.d(t,"a",(function(){return a}));var n=i("ofXK"),r=i("NFeN"),s=i("fXoL");let a=(()=>{class e{}return e.\u0275mod=s.Qb({type:e}),e.\u0275inj=s.Pb({factory:function(t){return new(t||e)},imports:[[n.c,r.b]]}),e})()},CRLB:function(e,t,i){"use strict";i.d(t,"a",(function(){return l}));var n=i("ofXK"),r=i("NFeN"),s=i("83Gb"),a=i("vFAW"),o=i("fXoL");let c=(()=>{class e{}return e.\u0275mod=o.Qb({type:e}),e.\u0275inj=o.Pb({factory:function(t){return new(t||e)},imports:[[n.c,a.a,s.a,r.b]]}),e})(),l=(()=>{class e{}return e.\u0275mod=o.Qb({type:e}),e.\u0275inj=o.Pb({factory:function(t){return new(t||e)},imports:[[n.c,c]]}),e})()},GW71:function(e,t,i){"use strict";i.d(t,"a",(function(){return p}));var n=i("R0Ic"),r=i("fXoL"),s=i("WPJx"),a=i("ofXK"),o=i("qKxU");function c(e,t){if(1&e){const e=r.Zb();r.Yb(0,"uxt-icon-button",12),r.hc("click",(function(){return r.Kc(e),r.lc().handleSubmit()})),r.Xb()}}function l(e,t){if(1&e){const e=r.Zb();r.Yb(0,"uxt-icon-button",13),r.hc("click",(function(){return r.Kc(e),r.lc().handleCancel()})),r.Xb()}}function d(e,t){if(1&e){const e=r.Zb();r.Yb(0,"button",14),r.hc("click",(function(){return r.Kc(e),r.lc().handleSubmit()})),r.Uc(1),r.Xb()}if(2&e){const e=r.lc();r.Eb(1),r.Wc(" ",e.submitText," ")}}function h(e,t){if(1&e){const e=r.Zb();r.Yb(0,"button",15),r.hc("click",(function(){return r.Kc(e),r.lc().handleCancel()})),r.Uc(1),r.Xb()}if(2&e){const e=r.lc();r.Eb(1),r.Wc(" ",e.cancelText," ")}}const u=["*"];let p=(()=>{class e{constructor(){this.cancelText="Cancel",this.showCancelButton=!0,this.submitText="Ok",this.enableSubmitButton=!0,this.cancel=new r.o,this.submit=new r.o,this.className=!0}get isOpenClass(){return this.isOpen}handleCancel(){this.cancel.emit()}handleSubmit(){this.submit.emit()}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=r.Mb({type:e,selectors:[["uxt-modal"]],hostVars:4,hostBindings:function(e,t){2&e&&r.Ib("uxt-modal",t.className)("uxt-modal--open",t.isOpenClass)},inputs:{isOpen:"isOpen",cancelText:"cancelText",showCancelButton:"showCancelButton",submitText:"submitText",titleText:"titleText",enableSubmitButton:"enableSubmitButton"},outputs:{cancel:"cancel",submit:"submit"},ngContentSelectors:u,decls:15,vars:9,consts:[[1,"uxt-modal__overlay"],[1,"uxt-modal__window"],["position","top",1,"uxt-modal__header"],["class","uxt-modal__header__button__close uxt-modal__header__button__close__back","iconName","arrow-left",3,"click",4,"ngIf"],["class","uxt-modal__header__button__close uxt-modal__header__button__close__close","iconName","close",3,"click",4,"ngIf"],[1,"uxt-modal__header__title"],["class","uxt-modal__header__button__submit",3,"click",4,"ngIf"],[1,"uxt-modal__content"],[1,"uxt-modal__actions"],[1,"uxt-modal__actions__buttons"],["class","uxt-modal__actions__button uxt-modal__actions__button__cancel",3,"click",4,"ngIf"],[1,"uxt-modal__actions__button","uxt-modal__actions__button__submit",3,"disabled","click"],["iconName","arrow-left",1,"uxt-modal__header__button__close","uxt-modal__header__button__close__back",3,"click"],["iconName","close",1,"uxt-modal__header__button__close","uxt-modal__header__button__close__close",3,"click"],[1,"uxt-modal__header__button__submit",3,"click"],[1,"uxt-modal__actions__button","uxt-modal__actions__button__cancel",3,"click"]],template:function(e,t){1&e&&(r.rc(),r.Tb(0,"div",0),r.Yb(1,"div",1),r.Yb(2,"uxt-toolbar",2),r.Sc(3,c,1,0,"uxt-icon-button",3),r.Sc(4,l,1,0,"uxt-icon-button",4),r.Yb(5,"h1",5),r.Uc(6),r.Xb(),r.Sc(7,d,2,1,"button",6),r.Xb(),r.Yb(8,"div",7),r.qc(9),r.Xb(),r.Yb(10,"uxt-toolbar",8),r.Yb(11,"div",9),r.Sc(12,h,2,1,"button",10),r.Yb(13,"button",11),r.hc("click",(function(){return t.handleSubmit()})),r.Uc(14),r.Xb(),r.Xb(),r.Xb(),r.Xb()),2&e&&(r.sc("@overlay",t.isOpen?"open":"closed"),r.Eb(1),r.sc("@window",t.isOpen?"open":"closed"),r.Eb(2),r.sc("ngIf",!t.showCancelButton),r.Eb(1),r.sc("ngIf",t.showCancelButton),r.Eb(2),r.Wc(" ",t.titleText," "),r.Eb(1),r.sc("ngIf",t.showCancelButton),r.Eb(5),r.sc("ngIf",t.showCancelButton),r.Eb(1),r.sc("disabled",!t.enableSubmitButton),r.Eb(1),r.Wc(" ",t.submitText," "))},directives:[s.a,a.t,o.a],styles:[".uxt-modal{position:fixed;top:0;left:0;right:0;bottom:0;display:flex;align-items:center;justify-content:center;z-index:450}.uxt-modal:not(.uxt-modal--open){pointer-events:none}.uxt-modal__overlay{position:absolute;top:0;left:0;right:0;bottom:0;background-color:#000}.uxt-modal__window{display:flex;flex-direction:column;background-color:#fff;box-shadow:1px 1px 10px rgba(0,0,0,.25)}.uxt-modal__header{display:flex;align-items:center;height:56px;padding-right:8px;padding-left:8px;background-color:#fff!important}.uxt-modal__header__title{font-size:1.25rem;font-weight:500}.uxt-modal__content{display:flex;flex-grow:1;flex-direction:column;width:100%;min-height:100%;padding:16px;overflow-x:hidden;overflow-y:scroll}@media (max-height:300px){.uxt-modal__content{height:140px}}@media (max-width:768px){.uxt-modal__window{position:absolute;top:0;left:0;right:0;bottom:0;width:100%;max-width:none;min-height:inherit}.uxt-modal__header{margin-top:56px;box-shadow:0 2px 5px rgba(0,0,0,.15)}.uxt-modal__header__title{flex-grow:1;margin-left:8px;padding-left:40px!important}.uxt-modal__header__button__close,.uxt-modal__header__button__submit{display:none!important}.uxt-modal__content{min-height:inherit;padding-left:56px}.uxt-modal textarea{overflow-y:scroll}.uxt-modal__actions{border-bottom-left-radius:2px;border-bottom-right-radius:2px;background-color:#fff!important;display:flex!important}.uxt-modal__actions__buttons{display:flex;margin-left:auto}.uxt-modal__actions__button{color:#02adff!important;border:none!important}}@media (min-width:769px){.uxt-modal__window{flex-shrink:1;min-width:420px;max-width:768px;max-height:90vh;border-radius:2px;z-index:451}.uxt-modal__header{border-top-left-radius:2px;border-top-right-radius:2px;padding-right:16px;padding-left:16px}.uxt-modal__header__button__close,.uxt-modal__header__button__submit{display:none!important}.uxt-modal__content{padding-right:24px;padding-left:24px;overflow-y:inherit}.uxt-modal__actions{border-bottom-left-radius:2px;border-bottom-right-radius:2px;background-color:#fff!important}.uxt-modal__actions__buttons{display:flex;margin-left:auto}.uxt-modal__actions__button{color:#02adff!important;border:none!important}}"],encapsulation:2,data:{animation:[Object(n.o)("overlay",[Object(n.l)("open",Object(n.m)({opacity:"0.5"})),Object(n.l)("closed",Object(n.m)({opacity:"0.0"})),Object(n.n)("open <=> closed",Object(n.e)("0.125s ease"))]),Object(n.o)("window",[Object(n.l)("open",Object(n.m)({marginTop:"0px"})),Object(n.l)("closed",Object(n.m)({marginTop:"2000px"})),Object(n.n)("open <=> closed",Object(n.e)("0.250s ease"))])]}}),e})()},ILbM:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),r=i("3Pt+"),s=i("72+7"),a=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=a.Qb({type:e}),e.\u0275inj=a.Pb({factory:function(t){return new(t||e)},imports:[[n.c,r.j,s.a]]}),e})()},PMA5:function(e,t,i){"use strict";i.r(t),i.d(t,"QueryRoutingModule",(function(){return Tt}));var n=i("ofXK"),r=i("3Pt+"),s=i("NFeN"),a=i("7LiV"),o=i("jIHw"),c=i("arFO"),l=i("fXoL"),d=(i("R0Ic"),i("YyRF"),i("tyNb"));let h=(()=>{let e=class{};return e.\u0275mod=l.Qb({type:e}),e.\u0275inj=l.Pb({factory:function(t){return new(t||e)},imports:[[n.c,d.k],d.k]}),e})(),u=(()=>{let e=class{};return e.\u0275mod=l.Qb({type:e}),e.\u0275inj=l.Pb({factory:function(t){return new(t||e)},imports:[[n.c]]}),e})();var p=i("g9iH"),b=i("9Abt"),m=i("z96Q"),g=i("hbwR"),y=i("2RYc"),f=i("xQ71"),_=i("Z5F4"),C=i("qE8o"),v=i("v82b"),x=i("g6on"),O=i("DkN+"),S=i("9his"),I=i("4jMT"),q=i("GDd0"),P=i("2wiT"),E=i("YsCO"),M=i("VG3f"),w=i("CRLB"),D=i("cp0P"),T=i("LRne"),L=i("IzEk"),F=i("lJxs"),N=i("eIep"),k=i("YwUS"),A=i("KkJr"),B=i("UVhF"),X=i("LUpO"),Y=i("c+03"),R=i("J7mc"),U=i("blvr"),j=i("Ejbi"),Q=i("W5cs"),V=i("Phab"),K=i("f8sK"),W=i("YsXg"),z=i("ONOH"),Z=i("QtV5"),H=i("JrsU"),$=i("GW71"),J=i("7zfz"),G=i("HDdC"),ee=i("JIr8"),te=i("+ooB"),ie=i("jNCI"),ne=i("ti2P"),re=i("Vwje"),se=i("6JPj"),ae=i("8ihU"),oe=i("+eYH");let ce=(()=>{class e extends ae.a{constructor(e,t,i,n,s){super(e),this.sdaTranslateService=t,this.queryCrudService=i,this.loadingOverlayService=n,this.contentMenuService=s,this.NAME=this.sdaTranslateService.get("NAME","Name"),this.DESCRIPTION=this.sdaTranslateService.get("DESCRIPTION","Description"),this.QUERY_SAVED=this.sdaTranslateService.get("QUERY_SAVED","Query Saved"),this.QUERY_UPDATED=this.sdaTranslateService.get("QUERY_UPDATED","Query Updated"),this.form=new r.h({queryName:new r.e("",r.D.required),queryDescription:new r.e("")})}get queryName(){return this.form.get("queryName")}get queryDescription(){return this.form.get("queryDescription")}ngOnInit(){this.data=this.getData();const e=this.queryCrudService.selectedQuery||void 0;this.disableOkayButton(),e&&(this.queryName.setValue(e.name||" "),this.queryDescription.setValue(e.displayAs||" "),this.enableOkayButton()),this.queryName.valueChanges.subscribe(e=>e?this.enableOkayButton():this.disableOkayButton())}ngOnDestroy(){this.loadingOverlayService.hideLoadingOverlay()}ok(){this.disableOkayButton(),this.submitQuery()}submitQuery(){const e=this.data.criteria,t=this.data.method,i=this.queryName.value.trim(),n=this.queryDescription.value.trim();switch(this.data.action){case"rename":this.queryCrudService.rename(this.data.obid,i,n,e).pipe(Object(L.a)(1),Object(N.a)(()=>this.queryCrudService.updateQueryComponents({obid:this.data.obid},this.QUERY_UPDATED,{name:i,displayAs:n},!1)),Object(L.a)(1),Object(ee.a)(e=>(this.queryName.setErrors({}),this.queryCrudService.queryException(e),Object(T.a)()))).subscribe(()=>{this.cancel(),this.openQueriesMenu()});break;case"create":this.queryCrudService.create(i,n,e,t).pipe(Object(L.a)(1),Object(N.a)(e=>{const t=new oe.a(e.OBID,e.Name,e.Config,e.Description,e.UID,{url:e.SPFAdvancedSearchCriteria}),i=this.queryCrudService.selectedQuery&&this.queryCrudService.selectedQuery.obid;return i?this.queryCrudService.updateQueryComponents({obid:i,newCreated:t.obid},this.QUERY_SAVED,{},!1):this.queryCrudService.updateQueryComponents(t,this.QUERY_SAVED,t,!1)}),Object(L.a)(1),Object(ee.a)(e=>(this.queryName.setErrors({}),this.queryCrudService.queryException(e),Object(T.a)()))).subscribe(()=>{this.cancel(),this.openQueriesMenu()})}}openQueriesMenu(){this.contentMenuService.isQueriesMenuOpen()||this.contentMenuService.toggleQueriesMenu()}}return e.\u0275fac=function(t){return new(t||e)(l.Sb(ie.a),l.Sb(j.a),l.Sb(re.a),l.Sb(Y.a),l.Sb(se.a))},e.\u0275cmp=l.Mb({type:e,selectors:[["sda-query-save-form"]],features:[l.Bb],decls:10,vars:3,consts:[[1,"query-form",3,"formGroup"],[1,"query-form__form-group"],["for","name",1,"query-form__label","query-form__label--required"],["id","name","type","text","formControlName","queryName","aria-describedby","queryName","autofocus","","placeholder","Query Name","required","",1,"query-form__input"],["for","description",1,"query-form__label"],["id","description","name","description","formControlName","queryDescription",1,"query-form__textarea"]],template:function(e,t){1&e&&(l.Yb(0,"form",0),l.Yb(1,"div",1),l.Yb(2,"label",2),l.Uc(3),l.Xb(),l.Tb(4,"input",3),l.Xb(),l.Yb(5,"div",1),l.Yb(6,"label",4),l.Uc(7),l.Xb(),l.Yb(8,"textarea",5),l.Uc(9,"    "),l.Xb(),l.Xb(),l.Xb()),2&e&&(l.sc("formGroup",t.form),l.Eb(3),l.Wc("",t.NAME,": "),l.Eb(4),l.Wc("",t.DESCRIPTION,": "))},directives:[r.F,r.q,r.i,r.c,r.p,r.g,r.A],styles:['[_nghost-%COMP%]{padding-right:24px;padding-left:24px}.query-form[_ngcontent-%COMP%], [_nghost-%COMP%]{display:flex;flex:1 1 auto;flex-direction:column}.query-form__form-group[_ngcontent-%COMP%]{display:flex;margin-top:20px}.query-form__label[_ngcontent-%COMP%]{min-width:120px;font-weight:500;margin-top:5px}.query-form__label--required[_ngcontent-%COMP%]:after{content:"*";font-size:18px}.query-form__input[_ngcontent-%COMP%]{width:45%}.query-form__textarea[_ngcontent-%COMP%]{width:100%;height:145px}']}),e})();var le=i("m8I0"),de=i("lUp+");let he=(()=>{class e{constructor(e,t,i,n,r,s,a){this.sdaTranslateService=e,this.modalService=t,this.route=i,this.queryCrudService=n,this.loadingOverlayService=r,this.componentFactoryResolver=s,this.injector=a,this.runquery=new l.o,this.rightButtons=new Array,this.SAVE_BUTTON_TEXT=this.sdaTranslateService.get("SAVE_BTN_TXT","SAVE"),this.SAVE_AS_BUTTON_TEXT=this.sdaTranslateService.get("SAVE_AS_BTN_TXT","SAVE AS"),this.RENAME_BUTTON_TEXT=this.sdaTranslateService.get("RENAME_BTN_TXT","RENAME"),this.SEARCH_BUTTON_TEXT=this.sdaTranslateService.get("SEARCH","SEARCH"),this.QUERY_UPDATED=this.sdaTranslateService.get("QUERY_UPDATED","Query Updated"),this.saveAsButton=new ne.a(()=>this.saveAs(),this.SAVE_AS_BUTTON_TEXT),this.saveButton=new ne.a(()=>this.save(),this.SAVE_BUTTON_TEXT),this.renameButton=new ne.a(()=>this.rename(),this.RENAME_BUTTON_TEXT),this.runQueryButton=new ne.a(()=>this.runQuery(),this.SEARCH_BUTTON_TEXT,"",void 0,le.a.Primary),this.SAVE=this.sdaTranslateService.get("SAVE","Save"),this.SAVEAS=this.sdaTranslateService.get("SAVE_AS","Save As"),this.RENAME=this.sdaTranslateService.get("RENAME","Rename"),this.modalTitle=this.SAVE,this.createMode=!1}ngOnInit(){this.routerSubscription=this.route.paramMap.subscribe(e=>{this.queryCrudService.selectedOBID=void 0,this.modalTitle="",this.action="",this.queryCrudService.selectedQuery=void 0,e.has("obid")?e.has("obid")&&(this.queryCrudService.selectedOBID=e.get("obid"),this.queryCrudService.getSelectedFromOBID(this.queryCrudService.selectedOBID).pipe(Object(L.a)(1)).subscribe(e=>{e?(this.queryCrudService.selectedQuery=e,this.setCreateMode(!1)):this.setCreateMode(!0),this.queryCrudService.queryChanged$.next({obid:this.queryCrudService.selectedOBID})})):this.setCreateMode(!0),this.setupButtons()}),this.powerbarUpdateSubscription=this.queryCrudService.updatePowerbar$.subscribe(e=>this.setCreateMode(e))}ngOnDestroy(){this.queryCrudService.selectedQuery=void 0,this.routerSubscription&&this.routerSubscription.unsubscribe(),this.powerbarUpdateSubscription&&this.powerbarUpdateSubscription.unsubscribe()}showSaveQueryModal(e,t){return G.a.create(i=>{const n=new te.a(this.modalTitle,ce,this.componentFactoryResolver,this.injector);n.data={criteria:t,action:this.action,obid:e},n.size="sm-md",n.okBtnText=this.SAVE,this.modalService.showModal(n).then(e=>{i.next(e.ok),i.complete()},e=>this.queryCrudService.queryException(e))})}setupButtons(){this.rightButtons=[this.renameButton,this.saveAsButton,this.saveButton,this.runQueryButton]}setCreateMode(e){this.saveAsButton.isDisabled=e,this.renameButton.isDisabled=e,this.createMode=e}save(){this.modalTitle=this.SAVE,this.createMode?this.showSaveModal():this.queryCrudService.selectedOBID&&(this.action="update",this.loadingOverlayService.showLoadingOverlay(),this.queryCriteria.pipe(Object(L.a)(1)).subscribe(e=>{this.updateQuery(JSON.stringify(e)),this.loadingOverlayService.hideLoadingOverlay()}))}saveAs(){this.modalTitle=this.SAVEAS,this.showSaveModal()}rename(){this.modalTitle=this.RENAME,this.action="rename",this.loadingOverlayService.showLoadingOverlay(),this.queryCriteria.pipe(Object(L.a)(1),Object(N.a)(e=>(this.loadingOverlayService.hideLoadingOverlay(),this.showSaveQueryModal(this.queryCrudService.selectedOBID,JSON.stringify(e))))).subscribe()}runQuery(){this.runquery.emit()}updateQuery(e){this.queryCrudService.update(this.queryCrudService.selectedOBID,e).pipe(Object(N.a)(()=>this.queryCrudService.updateQueryComponents({obid:this.queryCrudService.selectedOBID},this.QUERY_UPDATED,{data:{url:e}},!1)),Object(L.a)(1),Object(ee.a)(e=>Object(T.a)(this.queryCrudService.queryException(e)))).subscribe()}showSaveModal(){this.loadingOverlayService.showLoadingOverlay(),this.action="create",this.queryCriteria.pipe(Object(L.a)(1),Object(N.a)(e=>(this.loadingOverlayService.hideLoadingOverlay(),this.showSaveQueryModal(this.queryCrudService.selectedOBID,JSON.stringify(e))))).subscribe()}}return e.\u0275fac=function(t){return new(t||e)(l.Sb(j.a),l.Sb(ie.a),l.Sb(d.a),l.Sb(re.a),l.Sb(Y.a),l.Sb(l.j),l.Sb(l.s))},e.\u0275cmp=l.Mb({type:e,selectors:[["sda-query-power-bar"]],inputs:{queryCriteria:"queryCriteria"},outputs:{runquery:"runquery"},decls:1,vars:1,consts:[["disableOverflow","true",1,"power-bar",3,"rightControls"]],template:function(e,t){1&e&&l.Tb(0,"sda-power-bar-view",0),2&e&&l.sc("rightControls",t.rightButtons)},directives:[de.a],encapsulation:2}),e})();var ue=i("ORCH"),pe=i("XIp8");class be{constructor(e,t){this.parentPropertyList=e,this.childName=t}}var me=i("QLcs");class ge{constructor(){this.name="",this.origin=""}}var ye=i("IUya");function fe(e,t){if(1&e){const e=l.Zb();l.Yb(0,"uxt-list",2),l.hc("selectedItemChange",(function(t){return l.Kc(e),l.lc().selectedProperty=t}))("selectedItemChange",(function(){return l.Kc(e),l.lc().onItemSelected()})),l.Xb()}if(2&e){const e=l.lc();l.sc("items",e.propertyList)("selectedItem",e.selectedProperty)}}let _e=(()=>{class e extends ae.a{constructor(e,t){super(e),this.modalService=e,this.sdaTranslateService=t,this.propertyList=[]}ngOnInit(){const e=this.getData();this.propertyList=e.parentPropertyList,this.SELECT_PROPERTY_DESC=this.sdaTranslateService.getFormatted("SELECT_PROPERTY_DESC-CHILDNAME","{0} has a dependency on multiple attributes. Choose which one you wish to include in the query",[e.childName])}ok(){this.returnValue(this.selectedProperty)}cancel(){this.returnValue(void 0,!1)}onItemSelected(){this.enableOkayButton()}returnValue(e,t=!0){const i=new ye.a(t);i.setData(e),this.closeModal.next(i)}}return e.\u0275fac=function(t){return new(t||e)(l.Sb(ie.a),l.Sb(j.a))},e.\u0275cmp=l.Mb({type:e,selectors:[["sda-property-selector-modal"]],features:[l.Bb],decls:4,vars:2,consts:[[1,"property-info"],["primaryTextProperty","name",3,"items","selectedItem","selectedItemChange",4,"ngIf"],["primaryTextProperty","name",3,"items","selectedItem","selectedItemChange"]],template:function(e,t){1&e&&(l.Yb(0,"div",0),l.Yb(1,"p"),l.Uc(2),l.Xb(),l.Xb(),l.Sc(3,fe,1,2,"uxt-list",1)),2&e&&(l.Eb(2),l.Wc("",t.SELECT_PROPERTY_DESC,":"),l.Eb(1),l.sc("ngIf",(null==t.propertyList?null:t.propertyList.length)>0))},directives:[n.t,ue.a],styles:["[_nghost-%COMP%]{display:flex;flex-flow:row wrap;max-width:460px}.property-info[_ngcontent-%COMP%]{flex:1 1 auto;padding:0 12px}uxt-list[_ngcontent-%COMP%]{min-height:114px;max-height:190px;border-top:1px solid #ebedf0;border-bottom:1px solid #ebedf0;margin-top:20px}uxt-list[_ngcontent-%COMP%]     .uxt-list__items{padding:0}uxt-list[_ngcontent-%COMP%]     .uxt-list-item--single-line{height:38px}"]}),e})();var Ce=i("1eVd");function ve(e,t){if(1&e){const e=l.Zb();l.Yb(0,"uxt-list",9),l.hc("selectedItemChange",(function(t){return l.Kc(e),l.lc(2).selectedPropL1=t}))("selectedItemChange",(function(t){return l.Kc(e),l.lc(2).dataTypeChangedL1(t)})),l.Xb()}if(2&e){const e=l.lc(2);l.sc("items",e.propL1)("selectedItem",e.selectedPropL1)}}function xe(e,t){if(1&e){const e=l.Zb();l.Yb(0,"uxt-list",9),l.hc("selectedItemChange",(function(t){return l.Kc(e),l.lc(2).selectedPropL2=t}))("selectedItemChange",(function(t){return l.Kc(e),l.lc(2).dataTypeChangedL2(t)})),l.Xb()}if(2&e){const e=l.lc(2);l.sc("items",e.propL2)("selectedItem",e.selectedPropL2)}}function Oe(e,t){if(1&e){const e=l.Zb();l.Yb(0,"uxt-list",9),l.hc("selectedItemChange",(function(t){return l.Kc(e),l.lc(2).selectedPropL3=t}))("selectedItemChange",(function(t){return l.Kc(e),l.lc(2).dataTypeChangedL3(t)})),l.Xb()}if(2&e){const e=l.lc(2);l.sc("items",e.propL3)("selectedItem",e.selectedPropL3)}}function Se(e,t){if(1&e&&(l.Yb(0,"div",7),l.Sc(1,ve,1,2,"uxt-list",8),l.Sc(2,xe,1,2,"uxt-list",8),l.Sc(3,Oe,1,2,"uxt-list",8),l.Xb()),2&e){const e=l.lc();l.Eb(1),l.sc("ngIf",(null==e.propL1?null:e.propL1.length)>0),l.Eb(1),l.sc("ngIf",(null==e.propL2?null:e.propL2.length)>0),l.Eb(1),l.sc("ngIf",(null==e.propL3?null:e.propL3.length)>0)}}function Ie(e,t){if(1&e){const e=l.Zb();l.Yb(0,"div",10),l.Yb(1,"uxt-list",11),l.hc("selectedItemChange",(function(t){return l.Kc(e),l.lc().selectedSearchProperty=t}))("selectedItemChange",(function(){return l.Kc(e),l.lc().setSelectedProperty()})),l.Xb(),l.Xb()}if(2&e){const e=l.lc();l.Eb(1),l.sc("items",e.flatListData)("selectedItem",e.selectedSearchProperty)}}function qe(e,t){if(1&e){const e=l.Zb();l.Yb(0,"button",16),l.hc("click",(function(){return l.Kc(e),l.lc(2).addCriteriaAnd()})),l.Uc(1),l.Xb()}if(2&e){const e=l.lc(2);l.Eb(1),l.Wc(" ",e.ADD," ")}}function Pe(e,t){if(1&e){const e=l.Zb();l.Yb(0,"button",17),l.hc("click",(function(){return l.Kc(e),l.lc(2).addCriteriaAnd()})),l.Uc(1),l.Xb()}if(2&e){const e=l.lc(2);l.Eb(1),l.Wc(" ",e.AND," ")}}function Ee(e,t){if(1&e){const e=l.Zb();l.Yb(0,"button",18),l.hc("click",(function(){return l.Kc(e),l.lc(2).addCriteriaOr()})),l.Uc(1),l.Xb()}if(2&e){const e=l.lc(2);l.Eb(1),l.Wc(" ",e.OR," ")}}function Me(e,t){if(1&e&&(l.Yb(0,"aside",12),l.Sc(1,qe,2,1,"button",13),l.Sc(2,Pe,2,1,"button",14),l.Sc(3,Ee,2,1,"button",15),l.Xb()),2&e){const e=l.lc();l.Eb(1),l.sc("ngIf",0===(null==e.existingCriteria?null:e.existingCriteria.length)),l.Eb(1),l.sc("ngIf",(null==e.existingCriteria?null:e.existingCriteria.length)>0&&e.showAnd),l.Eb(1),l.sc("ngIf",(null==e.existingCriteria?null:e.existingCriteria.length)>0&&e.showOr)}}let we=(()=>{class e{constructor(e,t,i,n,r){this.queryService=e,this.sdaTranslateService=t,this.modalService=i,this.componentFactoryResolver=n,this.injector=r,this.existingCriteria=[],this.addCriteriaEvent=new l.o,this.dataInitialized=new l.o,this.propL1=[],this.propL2=[],this.propL3=[],this.flatListData=[],this.listOfDependants=[],this.AND=this.sdaTranslateService.get("AND","And"),this.OR=this.sdaTranslateService.get("OR","Or"),this.ADD=this.sdaTranslateService.get("ADD","Add"),this.SELECT_PROPERTY=this.sdaTranslateService.get("SELECT_PROPERTY","Select Property"),this.searchPlaceholder=this.sdaTranslateService.get("SEARCH_SIMPLE_PLACEHOLDER","Search for properties"),this.searchString=""}get showAnd(){let e=!0;return this.existingCriteria&&this.existingCriteria.length>1&&"or"===this.existingCriteria[1].logicOperator&&(e=!1),e}get showOr(){let e=!0;return this.existingCriteria&&this.existingCriteria.length>1&&"and"===this.existingCriteria[1].logicOperator&&(e=!1),e}get searchParam(){return this.searchString}set searchParam(e){this.flatListData=this.queryService.allFlatListData.filter(t=>-1!==t.name.toLowerCase().indexOf(e.toLowerCase())),this.searchString=e}ngOnChanges(e){if(e.selectedForm&&this.selectedForm){this.listOfDependants=[],this.queryService.mandatoryCriteria=[];const e=[];if(this.selectedForm.ContainsTabs){if(this.selectedForm.FormSections&&this.selectedForm.FormSections.length>0){const t={DisplayName:this.selectedForm.FormSections[0].DisplayName};t.Children=this.setChildrenSection(this.selectedForm.FormSections),e.push(t)}this.selectedForm.SPFFormTabs.forEach(t=>{const i={DisplayName:t.DisplayName};i.Children=this.setChildrenSection(t.FormSections),e.push(i)})}else this.selectedForm.FormSections.forEach(t=>{this.addDependantItemUIDs(t);const i={DisplayName:t.DisplayName};i.Children=this.setChildrenLines(t.FormDisplayLines,t.DisplayName,t.ComplexLevel),e.push(i)});this.propL1=e,this.propL1&&this.propL1.length>0&&(this.selectedPropL1=this.propL1[0],this.dataTypeChangedL1(this.selectedPropL1),this.propL2&&this.propL2.length>0&&(this.selectedPropL2=this.propL2[0],this.dataTypeChangedL2(this.selectedPropL2),this.selectedPropL2.Children&&this.selectedPropL2.Children.length>0&&(this.selectedPropL3=this.propL3[0],this.dataTypeChangedL3(this.selectedPropL3)))),this.queryService.allFlatListData=[],this.flatListData=[],this.flattenItems(e),this.dataInitialized.emit()}}addDependantItemUIDs(e){e.FormDisplayLines.forEach(e=>{e.FormDisplayItems.forEach(e=>{e.DependentItemUIDs&&e.DependentItemUIDs.length>0&&this.listOfDependants.push(...e.DependentItemUIDs)})})}setSelectedProperty(){this.selectedProperty=this.selectedSearchProperty.displayItem}flattenItems(e){e.forEach(e=>{const t=new ge;e.FormDisplayItem?(t.displayItem=e.FormDisplayItem,t.name=e.FormDisplayItem.DisplayName,t.isDependent=e.IsDependent,this.queryService.allFlatListData.push(t)):(t.origin=e.DisplayName,e.Children.forEach(e=>{this.flattenItem(e,Object(pe.a)(t))}))})}flattenItem(e,t){e.FormDisplayItem?(t.displayItem=e.FormDisplayItem,t.name=this.getDisplayName(e.FormDisplayItem.DisplayName,e.IsDependent),t.isDependent=e.IsDependent,this.queryService.allFlatListData.push(t)):(t.origin&&(t.origin+=" "),t.origin+=e.DisplayName,e.Children&&e.Children.length>0&&e.Children.forEach(e=>{this.flattenItem(e,Object(pe.a)(t))}))}clearSelectedItem(){this.selectedProperty=void 0}setChildrenSection(e){const t=[];return e.forEach(e=>{this.addDependantItemUIDs(e);const i={DisplayName:e.DisplayName};i.Children=this.setChildrenLines(e.FormDisplayLines,e.DisplayName,e.ComplexLevel),t.push(i)}),t}setChildrenLines(e,t,i){const n=[];return e.forEach(e=>(e.FormDisplayItems.forEach(e=>{this.queryService.mandatoryDisplayItems.find(i=>i.key===e.UID&&i.value===t)&&e.Value&&this.queryService.mandatoryCriteria.push(new me.a(e,K.a.AND));const r=-1!==this.listOfDependants.indexOf(this.queryService.getDisplayItemUID(e)),s={DisplayName:this.getDisplayName(e.DisplayName,r),IsDependent:r};e.ComplexLevel=i,s.FormDisplayItem=e,n.push(s)}),n)),n}dataTypeChangedL1(e){e.Children?(this.propL2=e.Children,this.propL3=void 0):(this.propL2=void 0,this.propL3=void 0,this.selectedProperty=e.FormDisplayItem)}dataTypeChangedL2(e){e.Children?this.propL3=e.Children:(this.propL3=void 0,this.selectedProperty=e.FormDisplayItem)}dataTypeChangedL3(e){this.selectedProperty=e.FormDisplayItem}addCriteriaAnd(){this.setQueryCriteria(this.selectedProperty,K.a.AND,void 0)}addCriteriaOr(){this.setQueryCriteria(this.selectedProperty,K.a.OR,void 0)}getDisplayName(e,t){let i=e;return t&&(i=`<${i}>`),i}resetForm(){this.selectedProperty=void 0,this.selectedSearchProperty=void 0,this.selectedPropL1=void 0,this.selectedPropL2=void 0,this.selectedPropL3=void 0,this.propL2=void 0,this.propL3=void 0,this.searchString=""}setQueryCriteria(e,t,i){const n=this.createCriteria(e,t,i),r=[];this.queryService.allFlatListData.forEach(t=>{t.displayItem.DependentItemUIDs&&t.displayItem.DependentItemUIDs.length>0&&-1!==t.displayItem.DependentItemUIDs.indexOf(this.queryService.getDisplayItemUID(e))&&!this.queryService.isSecondaryParent(n.displayItem,t.displayItem)&&r.push(t)}),0===r.length?(this.addLevels([n]),this.addCriteriaEvent.emit(n),this.resetForm()):1===r.length?this.setQueryCriteria(r[0].displayItem,t,n):r.length>1&&this.selectProperty(r,n.displayItem.DisplayName).then(e=>{const i=e.getData();i&&this.setQueryCriteria(i.displayItem,t,n)})}addLevels(e,t=0){e.forEach(e=>{e.level=t,e.dependantCriteria&&e.dependantCriteria.length>0&&this.addLevels(e.dependantCriteria,t+1)})}createCriteria(e,t,i){const n=Object(pe.a)(e),r=new me.a(n,t);return i&&r.dependantCriteria.push(i),r}selectProperty(e,t){const i=new be(e,t),n=new te.a(this.SELECT_PROPERTY,_e,this.componentFactoryResolver,this.injector);return n.data=i,n.disableOk=!0,this.modalService.showModal(n)}}return e.\u0275fac=function(t){return new(t||e)(l.Sb(Z.a),l.Sb(j.a),l.Sb(ie.a),l.Sb(l.j),l.Sb(l.s))},e.\u0275cmp=l.Mb({type:e,selectors:[["sda-query-property"]],inputs:{selectedForm:"selectedForm",existingCriteria:"existingCriteria"},outputs:{addCriteriaEvent:"addCriteriaEvent",dataInitialized:"dataInitialized"},features:[l.Cb],decls:7,vars:7,consts:[[1,"search__inner"],[3,"searchTerm","placeholder","searchTermChange"],[1,"advanced-search-criteria"],[1,"advanced-search-criteria__content"],["class","advanced-search-criteria__list",4,"ngIf"],["class","advanced-search-criteria__list advanced-search-criteria__list--flat",4,"ngIf"],["class","property-action",4,"ngIf"],[1,"advanced-search-criteria__list"],["primaryTextProperty","DisplayName",3,"items","selectedItem","selectedItemChange",4,"ngIf"],["primaryTextProperty","DisplayName",3,"items","selectedItem","selectedItemChange"],[1,"advanced-search-criteria__list","advanced-search-criteria__list--flat"],["primaryTextProperty","name","secondaryTextProperty","origin",3,"items","selectedItem","selectedItemChange"],[1,"property-action"],["class","property-action__button query-button query-button--blue query-button--action","id","query_property_add-btn","type","submit",3,"click",4,"ngIf"],["class","property-action__button query-button query-button--blue query-button--action","id","query_property_and-btn","type","submit",3,"click",4,"ngIf"],["class","property-action__button query-button query-button--blue query-button--action","id","query_property_or-btn","type","submit",3,"click",4,"ngIf"],["id","query_property_add-btn","type","submit",1,"property-action__button","query-button","query-button--blue","query-button--action",3,"click"],["id","query_property_and-btn","type","submit",1,"property-action__button","query-button","query-button--blue","query-button--action",3,"click"],["id","query_property_or-btn","type","submit",1,"property-action__button","query-button","query-button--blue","query-button--action",3,"click"]],template:function(e,t){1&e&&(l.Yb(0,"div",0),l.Yb(1,"sda-simple-search",1),l.hc("searchTermChange",(function(e){return t.searchParam=e})),l.Xb(),l.Yb(2,"div",2),l.Yb(3,"div",3),l.Sc(4,Se,4,3,"div",4),l.Sc(5,Ie,2,2,"div",5),l.Xb(),l.Xb(),l.Xb(),l.Sc(6,Me,4,3,"aside",6)),2&e&&(l.Ib("search-container--active",t.selectedProperty),l.Eb(1),l.sc("searchTerm",t.searchParam)("placeholder",t.searchPlaceholder),l.Eb(3),l.sc("ngIf",!t.searchParam||0==t.searchParam.length),l.Eb(1),l.sc("ngIf",(null==t.searchParam?null:t.searchParam.length)>0),l.Eb(1),l.sc("ngIf",t.selectedProperty))},directives:[Ce.a,n.t,ue.a],styles:['[_nghost-%COMP%]   .advanced-search-criteria__content[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}[_nghost-%COMP%]{display:flex;flex:1;justify-content:space-between}[_nghost-%COMP%]   .search__inner[_ngcontent-%COMP%]{position:relative;display:flex;flex:1 1 auto;flex-flow:row wrap;align-items:center;max-width:calc(100% - 60px);height:auto;padding:20px;line-height:1.2}[_nghost-%COMP%]   .advanced-search-criteria[_ngcontent-%COMP%]{position:static;left:1px;right:1px;display:flex;flex:1 1 100%;width:100px;background-color:#fff;-webkit-transform:translateY(-1px);transform:translateY(-1px);border:1px solid #dce0e5}@media screen and (orientation:portrait) and (-webkit-min-device-pixel-ratio:1.5){[_nghost-%COMP%]   .advanced-search-criteria[_ngcontent-%COMP%]{height:250px}}@media screen and (orientation:landscape) and (-webkit-min-device-pixel-ratio:1.5){[_nghost-%COMP%]   .advanced-search-criteria[_ngcontent-%COMP%]{height:175px}}[_nghost-%COMP%]   .advanced-search-criteria__content[_ngcontent-%COMP%]{position:relative;display:flex;flex-grow:1;flex-direction:column;height:100%}[_nghost-%COMP%]   .advanced-search-criteria__list[_ngcontent-%COMP%]{display:flex;flex:1 0 auto;min-height:80px;max-height:248px}@media screen and (min-width:59.375em){[_nghost-%COMP%]   .advanced-search-criteria__list[_ngcontent-%COMP%]{max-height:269px}}[_nghost-%COMP%]   .advanced-search-criteria__list--flat[_ngcontent-%COMP%]   uxt-list[_ngcontent-%COMP%]:not(:only-child):first-child{border-right:1px solid rgba(0,0,0,.24)}[_nghost-%COMP%]   .advanced-search-criteria__list--flat[_ngcontent-%COMP%]     .uxt-list-item__text{flex-direction:row;font-size:14px}[_nghost-%COMP%]   .advanced-search-criteria__list--flat[_ngcontent-%COMP%]     .uxt-list-item__text__primary-text{font-size:inherit}[_nghost-%COMP%]   .advanced-search-criteria__list--flat[_ngcontent-%COMP%]     .uxt-list-item__text__secondary-text{padding-top:0;font-size:inherit}[_nghost-%COMP%]   .advanced-search-criteria__list--flat[_ngcontent-%COMP%]     .uxt-list-item__text__secondary-text:before{content:"-";margin:0 6px}[_nghost-%COMP%]   .advanced-search-criteria__list[_ngcontent-%COMP%]   .uxt-list[_ngcontent-%COMP%]{width:50%}[_nghost-%COMP%]   .advanced-search-criteria__list[_ngcontent-%COMP%]   .uxt-list[_ngcontent-%COMP%]:not(:only-child):not(:first-child){border-left:1px solid #ebedf0}[_nghost-%COMP%]     .uxt-list__wrapper{overflow-y:hidden}[_nghost-%COMP%]     .uxt-list__items{flex:1 1 auto;height:100%;padding:0;overflow-y:auto}[_nghost-%COMP%]     .uxt-list-item{height:40px;padding:0 10px}@media screen and (min-width:59.375em){[_nghost-%COMP%]     .uxt-list-item{height:29px}}[_nghost-%COMP%]     .query-button--action:not(:only-of-type):first-of-type{margin-bottom:4px}.property-action[_ngcontent-%COMP%]{display:flex;flex:0;flex-direction:column;align-items:flex-end}.property-action__button[_ngcontent-%COMP%]{position:relative;flex:1}']}),e})();var De=i("C8de"),Te=i("TQny"),Le=i("BLbD"),Fe=i("m3Is"),Ne=i("Qs1y"),ke=i("Mswo"),Ae=i("ARL0"),Be=i("N609"),Xe=i("BpZz"),Ye=i("FETs"),Re=i("FhDe"),Ue=i("gFfV"),je=i("6Qo/"),Qe=i("8pNJ");function Ve(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-blanket",7),l.hc("click",(function(){return l.Kc(e),l.lc().closeBlanket()})),l.Xb()}if(2&e){const e=l.lc();l.sc("toggle",e.showBlanket)}}function Ke(e,t){if(1&e&&(l.Yb(0,"option",17),l.Uc(1),l.Xb()),2&e){const e=t.$implicit;l.sc("value",e.odataOperator),l.Eb(1),l.Wc(" ",e.display," ")}}function We(e,t){if(1&e&&l.Tb(0,"sda-boolean-type",26),2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)}}function ze(e,t){if(1&e&&l.Tb(0,"sda-boolean-type",26),2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)}}function Ze(e,t){if(1&e&&l.Tb(0,"sda-form-double-type",26),2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)}}function He(e,t){if(1&e&&l.Tb(0,"sda-string-type",26),2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)}}function $e(e,t){if(1&e&&l.Tb(0,"sda-form-int-type",26),2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)}}function Je(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-enum-type",27),l.hc("valueChanged",(function(t){return l.Kc(e),l.lc(3).onValueChanged(t)})),l.Xb()}if(2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)("showDisabled",!0)}}function Ge(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-relationship-type",28),l.hc("isOpen",(function(t){return l.Kc(e),l.lc(3).showBlanketEvent(t)}))("valueChanged",(function(t){return l.Kc(e),l.lc(3).onValueChanged(t)})),l.Xb()}if(2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)("singleLine",!0)("showEditableValue",e.showBlanket)}}function et(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-relationship-type",28),l.hc("isOpen",(function(t){return l.Kc(e),l.lc(3).showBlanketEvent(t)}))("valueChanged",(function(t){return l.Kc(e),l.lc(3).onValueChanged(t)})),l.Xb()}if(2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)("singleLine",!0)("showEditableValue",e.showBlanket)}}function tt(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-relationship-type",29),l.hc("isOpen",(function(t){return l.Kc(e),l.lc(3).showBlanketEvent(t)}))("valueChanged",(function(t){return l.Kc(e),l.lc(3).onValueChanged(t)})),l.Xb()}if(2&e){const e=l.lc(3);l.sc("isEditable",!0)("singleLine",!0)("field",e.queryCriteria.displayItem)("showEditableValue",e.showBlanket)("resultsOverlay",!0)}}function it(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-relationship-type",30),l.hc("isOpen",(function(t){return l.Kc(e),l.lc(3).showBlanketEvent(t)}))("valueChanged",(function(t){return l.Kc(e),l.lc(3).onValueChanged(t)})),l.Xb()}if(2&e){const e=l.lc(3);l.sc("isEditable",!0)("singleLine",!0)("field",e.queryCriteria.displayItem)("showEditableValue",e.showBlanket)}}function nt(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-relationship-type",30),l.hc("isOpen",(function(t){return l.Kc(e),l.lc(3).showBlanketEvent(t)}))("valueChanged",(function(t){return l.Kc(e),l.lc(3).onValueChanged(t)})),l.Xb()}if(2&e){const e=l.lc(3);l.sc("isEditable",!0)("singleLine",!0)("field",e.queryCriteria.displayItem)("showEditableValue",e.showBlanket)}}function rt(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-relationship-type",28),l.hc("isOpen",(function(t){return l.Kc(e),l.lc(3).showBlanketEvent(t)}))("valueChanged",(function(t){return l.Kc(e),l.lc(3).onValueChanged(t)})),l.Xb()}if(2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)("singleLine",!0)("showEditableValue",e.showBlanket)}}function st(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-relationship-type",28),l.hc("isOpen",(function(t){return l.Kc(e),l.lc(3).showBlanketEvent(t)}))("valueChanged",(function(t){return l.Kc(e),l.lc(3).onValueChanged(t)})),l.Xb()}if(2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)("singleLine",!0)("showEditableValue",e.showBlanket)}}function at(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-relationship-type",28),l.hc("isOpen",(function(t){return l.Kc(e),l.lc(3).showBlanketEvent(t)}))("valueChanged",(function(t){return l.Kc(e),l.lc(3).onValueChanged(t)})),l.Xb()}if(2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)("singleLine",!0)("showEditableValue",e.showBlanket)}}function ot(e,t){if(1&e&&l.Tb(0,"sda-url-type",26),2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)}}function ct(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-enum-list-level-type",31),l.hc("valueChanged",(function(t){return l.Kc(e),l.lc(3).onValueChanged(t)})),l.Xb()}if(2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)}}function lt(e,t){if(1&e&&l.Tb(0,"sda-uom-list-type",26),2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)}}function dt(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-datetime-type",32),l.hc("isOpen",(function(t){return l.Kc(e),l.lc(3).showBlanketEvent(t)})),l.Xb()}if(2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)}}function ht(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-ymd-type",32),l.hc("isOpen",(function(t){return l.Kc(e),l.lc(3).showBlanketEvent(t)})),l.Xb()}if(2&e){const e=l.lc(3);l.sc("isEditable",!0)("field",e.queryCriteria.displayItem)}}function ut(e,t){if(1&e&&(l.Yb(0,"div",18),l.Sc(1,We,1,2,"sda-boolean-type",19),l.Sc(2,ze,1,2,"sda-boolean-type",19),l.Sc(3,Ze,1,2,"sda-form-double-type",19),l.Sc(4,He,1,2,"sda-string-type",19),l.Sc(5,$e,1,2,"sda-form-int-type",19),l.Sc(6,Je,1,3,"sda-enum-type",20),l.Sc(7,Ge,1,4,"sda-relationship-type",21),l.Sc(8,et,1,4,"sda-relationship-type",21),l.Sc(9,tt,1,5,"sda-relationship-type",22),l.Sc(10,it,1,4,"sda-relationship-type",23),l.Sc(11,nt,1,4,"sda-relationship-type",23),l.Sc(12,rt,1,4,"sda-relationship-type",21),l.Sc(13,st,1,4,"sda-relationship-type",21),l.Sc(14,at,1,4,"sda-relationship-type",21),l.Sc(15,ot,1,2,"sda-url-type",19),l.Sc(16,ct,1,2,"sda-enum-list-level-type",24),l.Sc(17,lt,1,2,"sda-uom-list-type",19),l.Sc(18,dt,1,2,"sda-datetime-type",25),l.Sc(19,ht,1,2,"sda-ymd-type",25),l.Xb()),2&e){const e=l.lc(2);l.Ib("criteria-type--active",e.showBlanket),l.sc("ngSwitch",e.queryCriteria.displayItem.DisplayType),l.Eb(1),l.sc("ngSwitchCase","BooleanType"),l.Eb(1),l.sc("ngSwitchCase","InterfaceDef"),l.Eb(1),l.sc("ngSwitchCase","DoubleType"),l.Eb(1),l.sc("ngSwitchCase","StringType"),l.Eb(1),l.sc("ngSwitchCase","IntType"),l.Eb(1),l.sc("ngSwitchCase","EnumListType"),l.Eb(1),l.sc("ngSwitchCase","RelDef"),l.Eb(1),l.sc("ngSwitchCase","RelationshipFind"),l.Eb(1),l.sc("ngSwitchCase","RelationshipFindMultiselect"),l.Eb(1),l.sc("ngSwitchCase","RelationshipMultiQuery"),l.Eb(1),l.sc("ngSwitchCase","RelationshipMultiQueryFind"),l.Eb(1),l.sc("ngSwitchCase","RelationshipNameDesc"),l.Eb(1),l.sc("ngSwitchCase","RelationshipMaintenance"),l.Eb(1),l.sc("ngSwitchCase","None"),l.Eb(1),l.sc("ngSwitchCase","URLType"),l.Eb(1),l.sc("ngSwitchCase","EnumListLevelType"),l.Eb(1),l.sc("ngSwitchCase","UoMListType"),l.Eb(1),l.sc("ngSwitchCase","DateTimeType"),l.Eb(1),l.sc("ngSwitchCase","YMDType")}}function pt(e,t){if(1&e){const e=l.Zb();l.Yb(0,"div",33),l.hc("click",(function(){l.Kc(e);const t=l.lc(2);return t.showDependant(t.queryCriteria.displayItem.DependentItemUIDs)})),l.Tb(1,"mat-icon",34),l.Xb()}if(2&e){const e=l.lc(2);l.tc("title",e.DEPENDENT_BUTTON_TOOLTIP)}}function bt(e,t){if(1&e){const e=l.Zb();l.Yb(0,"div",8),l.Yb(1,"div",9),l.Yb(2,"select",10),l.hc("ngModelChange",(function(t){return l.Kc(e),l.lc().queryCriteria.displayItem.Operator=t})),l.Sc(3,Ke,2,2,"option",11),l.Xb(),l.Sc(4,ut,20,22,"div",12),l.Xb(),l.Yb(5,"div",13),l.Sc(6,pt,2,1,"div",14),l.Yb(7,"div",15),l.hc("click",(function(){return l.Kc(e),l.lc().removeItem()})),l.Tb(8,"mat-icon",16),l.Xb(),l.Xb(),l.Xb()}if(2&e){const e=l.lc();l.Eb(2),l.sc("ngModel",e.queryCriteria.displayItem.Operator)("disabled",e.queryCriteria.displayItem.ReadOnly),l.Eb(1),l.sc("ngForOf",e.operators),l.Eb(1),l.sc("ngIf",!e.queryCriteria.displayItem.Operator.endsWith("notnull")&&!e.queryCriteria.displayItem.Operator.endsWith("null")),l.Eb(2),l.sc("ngIf",e.canShowChildOptionsButton())}}function mt(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-query-criteria-line",37),l.hc("removeItemEvent",(function(t){l.Kc(e);const i=l.lc(2);return i.onDependentRemoveItem(t,i.queryCriteria)}))("valueChanged",(function(){l.Kc(e);const i=t.$implicit;return l.lc(2).onDependentValueChanged(i)})),l.Xb()}2&e&&l.sc("queryCriteria",t.$implicit)}function gt(e,t){if(1&e&&(l.Yb(0,"section",35),l.Sc(1,mt,1,1,"sda-query-criteria-line",36),l.Xb()),2&e){const e=l.lc();l.sc("ngClass","dependancy-item--level-"+(e.queryCriteria.level+1)),l.Eb(1),l.sc("ngForOf",e.queryCriteria.dependantCriteria)}}let yt=(()=>{class e{constructor(e,t,i){this.queryService=e,this.dependentItemsService=t,this.sdaTranslateService=i,this.displayItemType=De.a,this.className="query-item",this.removeItemEvent=new l.o,this.valueChanged=new l.o,this.operators=[],this.dependantProperties=[],this.REMOVE=this.sdaTranslateService.get("REMOVE","Remove"),this.SELECT_PROPERTY=this.sdaTranslateService.get("SELECT_PROPERTY","Select Property"),this.DEPENDENT_BUTTON_TOOLTIP=this.sdaTranslateService.get("DEPENDENT_BUTTON_TOOLTIP","Add a dependent item"),this.OK=this.sdaTranslateService.get("OK","Ok")}ngOnInit(){this.operators=this.queryService.getOperators(this.queryCriteria.displayItem.DisplayType),this.queryCriteria.displayItem.Operator||(this.queryCriteria.displayItem.Operator=this.operators[0].odataOperator)}addCriteriaOr(){const e=Object(pe.a)(this.queryCriteria);e.logicOperator="or",this.queryCriteria.subCriteria.push(e)}addCriteriaAnd(){const e=Object(pe.a)(this.queryCriteria);e.logicOperator="and",this.queryCriteria.subCriteria.push(e)}removeItem(){this.removeItemEvent.emit(this.queryCriteria)}showBlanketEvent(e){this.showBlanket=e}closeBlanket(){this.showBlanket=!1}showDependant(e){const t=this.queryService.allFlatListData.map(e=>e.displayItem);this.dependantProperties=[],e.forEach(e=>{const i=t.find(t=>e===this.queryService.getDisplayItemUID(t));i&&!this.queryService.isSecondaryParent(i,this.queryCriteria.displayItem)&&this.dependantProperties.push(i)}),this.displayModal=!0}onSave(){const e=Object(pe.a)(this.selectedProperty),t={FormDisplayItems:[e]},i={FormDisplayItems:[this.queryCriteria.displayItem]},n=new me.a(e,K.a.AND);n.level=this.queryCriteria.level+1,this.queryCriteria.dependantCriteria.push(n),this.dependentItemsService.DisplayItemsValueChanged(this.queryCriteria.displayItem,{FormDisplayLines:[i,t]}),this.displayModal=!1}onCancel(){this.displayModal=!1}onValueChanged(e){this.valueChanged.emit()}onDependentRemoveItem(e,t){this.queryService.onRemoveDependentItem(e,t.dependantCriteria)}onDependentValueChanged(e){this.queryService.onValueChanged(e)}canShowChildOptionsButton(){let e=!1;return this.queryCriteria.displayItem.DependentItemUIDs&&this.queryCriteria.displayItem.DependentItemUIDs.length>0&&this.queryService.allFlatListData.forEach(t=>{-1!==this.queryCriteria.displayItem.DependentItemUIDs.indexOf(this.queryService.getDisplayItemUID(t.displayItem))&&(this.queryService.isSecondaryParent(t.displayItem,this.queryCriteria.displayItem)||(e=!0))}),e}}return e.\u0275fac=function(t){return new(t||e)(l.Sb(Z.a),l.Sb(Te.a),l.Sb(j.a))},e.\u0275cmp=l.Mb({type:e,selectors:[["sda-query-criteria-line"]],hostVars:2,hostBindings:function(e,t){2&e&&l.Gb(t.className)},inputs:{queryCriteria:"queryCriteria"},outputs:{queryCriteria:"queryCriteria",removeItemEvent:"removeItemEvent",valueChanged:"valueChanged"},decls:8,vars:11,consts:[[3,"toggle","click",4,"ngIf"],[1,"qmodule__criteria-title"],["class","criteria",4,"ngIf"],[1,"qmodal"],[3,"isOpen","submitText","titleText","cancel","submit"],["primaryTextProperty","DisplayName",3,"items","selectedItem","selectedItemChange"],["class","dependancy-item",3,"ngClass",4,"ngIf"],[3,"toggle","click"],[1,"criteria"],[1,"criteria__input"],[1,"criteria__input__select",3,"ngModel","disabled","ngModelChange"],[3,"value",4,"ngFor","ngForOf"],["class","criteria-type",3,"ngSwitch","criteria-type--active",4,"ngIf"],[1,"criteria-actions"],["class","query-button query-button--action query-button--lynch criteria-actions__button--option",3,"title","click",4,"ngIf"],[1,"query-button","query-button--action","query-button--red",3,"click"],["svgIcon","trash",1,"query-button__icon"],[3,"value"],[1,"criteria-type",3,"ngSwitch"],[3,"isEditable","field",4,"ngSwitchCase"],[3,"isEditable","field","showDisabled","valueChanged",4,"ngSwitchCase"],[3,"isEditable","field","singleLine","showEditableValue","isOpen","valueChanged",4,"ngSwitchCase"],[3,"isEditable","singleLine","field","showEditableValue","resultsOverlay","isOpen","valueChanged",4,"ngSwitchCase"],[3,"isEditable","singleLine","field","showEditableValue","isOpen","valueChanged",4,"ngSwitchCase"],[3,"isEditable","field","valueChanged",4,"ngSwitchCase"],[3,"isEditable","field","isOpen",4,"ngSwitchCase"],[3,"isEditable","field"],[3,"isEditable","field","showDisabled","valueChanged"],[3,"isEditable","field","singleLine","showEditableValue","isOpen","valueChanged"],[3,"isEditable","singleLine","field","showEditableValue","resultsOverlay","isOpen","valueChanged"],[3,"isEditable","singleLine","field","showEditableValue","isOpen","valueChanged"],[3,"isEditable","field","valueChanged"],[3,"isEditable","field","isOpen"],[1,"query-button","query-button--action","query-button--lynch","criteria-actions__button--option",3,"title","click"],["svgIcon","sliders",1,"query-button__icon"],[1,"dependancy-item",3,"ngClass"],[3,"queryCriteria","removeItemEvent","valueChanged",4,"ngFor","ngForOf"],[3,"queryCriteria","removeItemEvent","valueChanged"]],template:function(e,t){1&e&&(l.Sc(0,Ve,1,1,"sda-blanket",0),l.Yb(1,"div",1),l.Uc(2),l.Xb(),l.Sc(3,bt,9,5,"div",2),l.Yb(4,"div",3),l.Yb(5,"uxt-modal",4),l.hc("cancel",(function(){return t.onCancel()}))("submit",(function(){return t.onSave()})),l.Yb(6,"uxt-list",5),l.hc("selectedItemChange",(function(e){return t.selectedProperty=e})),l.Xb(),l.Xb(),l.Xb(),l.Sc(7,gt,2,2,"section",6)),2&e&&(l.sc("ngIf",t.showBlanket),l.Eb(2),l.Wc(" ",t.queryCriteria.displayItem.DisplayName,":\n"),l.Eb(1),l.sc("ngIf",null==t.queryCriteria?null:t.queryCriteria.displayItem),l.Eb(1),l.Ib("qmodal--disabled",!t.selectedProperty),l.Eb(1),l.sc("isOpen",t.displayModal)("submitText",t.OK)("titleText",t.SELECT_PROPERTY),l.Eb(1),l.sc("items",t.dependantProperties)("selectedItem",t.selectedProperty),l.Eb(1),l.sc("ngIf",(null==t.queryCriteria.dependantCriteria?null:t.queryCriteria.dependantCriteria.length)>0))},directives:[n.t,$.a,ue.a,Le.a,r.B,r.p,r.s,n.s,s.a,r.u,r.E,n.x,n.y,Fe.a,Ne.a,ke.a,Ae.a,Be.a,Xe.a,Ye.a,Re.a,Ue.a,je.a,Qe.a,n.q,e],styles:["[_nghost-%COMP%]{display:flex;flex:1;flex-flow:row wrap;align-items:center}[_nghost-%COMP%]   .uxt-modal--diabled[_ngcontent-%COMP%]   .uxt-modal__actions__button__submit[_ngcontent-%COMP%]{opacity:.5;pointer-events:none;cursor:not-allowed}@media screen and (max-width:33.0625em){[_nghost-%COMP%]   .query-item[_ngcontent-%COMP%]:not(:only-child):not(:first-of-type){margin-top:16px}}@media screen and (min-width:33.125em){[_nghost-%COMP%]   .query-item[_ngcontent-%COMP%]:not(:only-child):not(:first-of-type){margin-top:20px}}[_nghost-%COMP%]   .query-item__select[_ngcontent-%COMP%], [_nghost-%COMP%]   .query-item__string[_ngcontent-%COMP%]{min-width:180px;height:inherit;outline:0}[_nghost-%COMP%]   .query-item__remove[_ngcontent-%COMP%]{position:absolute;top:50%;right:0;display:flex;align-items:center;justify-content:center;width:26px;height:26px;cursor:pointer;-webkit-user-select:none;-ms-user-select:none;user-select:none;background-color:#db2828;border-radius:50%;-webkit-transform:translate3d(50%,-50%,0);transform:translate3d(50%,-50%,0);transition:background-color .2s linear;z-index:100!important}[_nghost-%COMP%]   .query-item__remove[_ngcontent-%COMP%]:hover{background-color:#bd2020}[_nghost-%COMP%]   .query-item__remove[_ngcontent-%COMP%]   [role=icon][_ngcontent-%COMP%]{display:block;margin:auto}[_nghost-%COMP%]     .string-input{border-radius:0}[_nghost-%COMP%]     .enum-select, [_nghost-%COMP%]     input[type=text]{width:130px;min-width:100px!important}@media screen and (min-width:59.375em){[_nghost-%COMP%]     .enum-select, [_nghost-%COMP%]     input[type=text]{width:150px}}[_nghost-%COMP%]     sda-relationship-type   .list-base{background-color:#fff}[_nghost-%COMP%]     sda-relationship-type   .list-base__items{max-height:204px;padding:0}[_nghost-%COMP%]     sda-relationship-type   .list-base__items .mat-list-item{height:34px}[_nghost-%COMP%]     sda-relationship-type   sda-peek-search{z-index:400!important}[_nghost-%COMP%]     .rel-find__list{position:absolute;bottom:10px;z-index:300!important}[_nghost-%COMP%]     .rel-find__list .list-base{min-width:200px;height:100%;background-color:#fff}[_nghost-%COMP%]     .rel-find__list .list-base__items{height:170px;overflow-y:auto}[_nghost-%COMP%]     .rel-find__list .list-base__items .mat-list-item{height:34px}[_nghost-%COMP%]     .rel-multi .rel-find__list{bottom:55px}[_nghost-%COMP%]     .uxt-toolbar--top{height:42px!important}sda-blanket[_ngcontent-%COMP%]     .blanket{position:fixed;z-index:300!important}sda-blanket[_ngcontent-%COMP%]     .blanket:hover{cursor:pointer}.qmodule__criteria-title[_ngcontent-%COMP%]{display:flex;align-items:center;justify-content:center;flex:0 1 auto;width:100%;height:56px;font-size:14px;font-weight:500;color:#444;background-color:#fff;line-height:1.1;padding:0 10px;border-bottom:1px solid rgba(169,180,190,.5)}@media screen and (min-width:59.375em){.qmodule__criteria-title[_ngcontent-%COMP%]{justify-content:flex-start;width:140px;border-bottom:none}}@media screen and (min-width:75em){.qmodule__criteria-title[_ngcontent-%COMP%]{width:155px}}.criteria[_ngcontent-%COMP%]{position:relative;display:flex;flex:1 1 100%;flex-direction:row;height:56px;background-color:#fff}.criteria__input[_ngcontent-%COMP%]{display:flex;align-items:center;flex:1 1 auto}.criteria__input__select[_ngcontent-%COMP%]{width:100px;height:36px;margin-right:8px;border-color:#cad0d7}@media screen and (min-width:59.375em){.criteria[_ngcontent-%COMP%]{flex-basis:auto}}.criteria-type--active[_ngcontent-%COMP%]{position:relative;display:flex;flex:1;height:56px;z-index:300!important}.criteria-type[_ngcontent-%COMP%]     input, .criteria-type[_ngcontent-%COMP%]     select{height:36px;min-height:36px}.criteria-type[_ngcontent-%COMP%]     .rel-empty{position:absolute!important;bottom:10px;z-index:300!important}.criteria-actions[_ngcontent-%COMP%]{display:flex}.criteria-actions__button--option[_ngcontent-%COMP%]{margin-right:4px}.dependancy-item[_ngcontent-%COMP%]{flex:1 1 100%;margin:20px 0 0}"]}),e})();function ft(e,t){if(1&e){const e=l.Zb();l.Yb(0,"sda-query-power-bar",16),l.hc("runquery",(function(){return l.Kc(e),l.lc().runQuery()})),l.Xb()}if(2&e){const e=l.lc();l.sc("queryCriteria",e.saveCriteria$)}}function _t(e,t){if(1&e){const e=l.Zb();l.Yb(0,"uxt-list",17),l.hc("selectedItemChange",(function(t){return l.Kc(e),l.lc().selectedMethod=t}))("selectedItemChange",(function(t){return l.Kc(e),l.lc().formSelected(t)})),l.Xb()}if(2&e){const e=l.lc();l.sc("items",e.queryService.queryMethods)("selectedItem",e.selectedMethod)}}function Ct(e,t){if(1&e&&(l.Yb(0,"h2",18),l.Uc(1),l.Xb()),2&e){const e=l.lc();l.Eb(1),l.Wc(" ",e.selectedMethod.displayName," ")}}function vt(e,t){if(1&e){const e=l.Zb();l.Yb(0,"div",19),l.hc("click",(function(){return l.Kc(e),l.lc().showQueryTypeList()})),l.Tb(1,"mat-icon",20),l.Xb()}}function xt(e,t){if(1&e){const e=l.Zb();l.Yb(0,"div",25),l.hc("click",(function(){return l.Kc(e),l.lc(2).displayModal=!0})),l.Tb(1,"mat-icon",20),l.Xb()}}function Ot(e,t){if(1&e&&(l.Yb(0,"section",21),l.Yb(1,"div",3),l.Yb(2,"h2",22),l.Uc(3),l.Xb(),l.Xb(),l.Yb(4,"div",5),l.Yb(5,"h2",23),l.Uc(6),l.Xb(),l.Sc(7,xt,2,0,"div",24),l.Xb(),l.Xb()),2&e){const e=l.lc();l.Eb(3),l.Wc(" ",e.CLASSIFICATION," "),l.Eb(3),l.Wc(" ",e.selectedClass.displayName," "),l.Eb(1),l.sc("ngIf",e.selectedMethod)}}function St(e,t){if(1&e){const e=l.Zb();l.Yb(0,"section",26),l.Yb(1,"div",3),l.Yb(2,"h2",27),l.Uc(3),l.Xb(),l.Xb(),l.Yb(4,"div",5),l.Yb(5,"sda-query-property",28),l.hc("addCriteriaEvent",(function(t){return l.Kc(e),l.lc().addCriteria(t)}))("dataInitialized",(function(){return l.Kc(e),l.lc().onDataInitialized()})),l.Xb(),l.Xb(),l.Xb()}if(2&e){const e=l.lc();l.Eb(3),l.Wc(" ",e.CRITERIA," "),l.Eb(2),l.sc("selectedForm",e.queryService.form)("existingCriteria",e.selectedCriteria)}}function It(e,t){1&e&&l.Tb(0,"mat-icon",35)}function qt(e,t){if(1&e&&(l.Yb(0,"h2",36),l.Uc(1),l.Xb()),2&e){const e=l.lc().$implicit;l.Eb(1),l.Wc(" ",e.logicOperator," ")}}function Pt(e,t){if(1&e){const e=l.Zb();l.Yb(0,"section",37),l.Yb(1,"div",3),l.Yb(2,"h2",38),l.Uc(3),l.Xb(),l.Xb(),l.Yb(4,"div",5),l.Yb(5,"sda-query-criteria-line",39),l.hc("removeItemEvent",(function(t){l.Kc(e);const i=l.lc().$implicit;return l.lc().removeItem(t,i.subCriteria)})),l.Xb(),l.Xb(),l.Xb()}if(2&e){const e=t.$implicit;l.Eb(3),l.Vc(e.logicOperator),l.Eb(2),l.sc("queryCriteria",e)}}function Et(e,t){if(1&e){const e=l.Zb();l.Yb(0,"div",29),l.Yb(1,"section",30),l.Yb(2,"div",3),l.Sc(3,It,1,0,"mat-icon",31),l.Sc(4,qt,2,1,"h2",32),l.Xb(),l.Yb(5,"div",5),l.Yb(6,"sda-query-criteria-line",33),l.hc("removeItemEvent",(function(t){l.Kc(e);const i=l.lc();return i.removeItem(t,i.selectedCriteria)}))("valueChanged",(function(){l.Kc(e);const i=t.$implicit;return l.lc().onValueChanged(i)})),l.Xb(),l.Xb(),l.Xb(),l.Sc(7,Pt,6,2,"section",34),l.Xb()}if(2&e){const e=t.$implicit,i=t.index;l.Eb(3),l.sc("ngIf",0==i),l.Eb(1),l.sc("ngIf",0!=i),l.Eb(2),l.sc("queryCriteria",e),l.Eb(1),l.sc("ngForOf",e.subCriteria)}}function Mt(e,t){if(1&e&&(l.Yb(0,"p",40),l.hc("click",(function(){return t.$implicit.expanded=!0})),l.Uc(1),l.Xb()),2&e){const e=t.$implicit,i=l.lc();l.Ib("sda-tree__name--disabled",!e.selectable)("sda-tree__name--selected",i.dialogSelectedClass==e),l.Eb(1),l.Wc(" ",e.displayName," ")}}const wt=[{path:"",component:(()=>{class e{constructor(e,t,i,n,r,s,a,o,c,l,d){this.queryService=e,this.sdaTranslateService=t,this.applicationSettingsService=i,this.formService=n,this.urlFilterFactory=r,this.router=s,this.configService=a,this.route=o,this.loadingOverlayService=c,this.exceptionService=l,this.dataService=d,this.tree=[],this.selectedCriteria=[],this.selectedSettings=[],this.TYPES=this.sdaTranslateService.get("TYPES","Types"),this.SELECT_CLASSIFICATION=this.sdaTranslateService.get("SELECT_CLASSIFICATION","Select classification"),this.CLASSIFICATION=this.sdaTranslateService.get("CLASSIFICATION","Classification"),this.EDIT=this.sdaTranslateService.get("EDIT","Edit"),this.CRITERIA=this.sdaTranslateService.get("CRITERIA","Criteria"),this.AND=this.sdaTranslateService.get("AND","And"),this.OR=this.sdaTranslateService.get("OR","Or"),this.SEARCH=this.sdaTranslateService.get("SEARCH","Search"),this.ADVANCED_SEARCH=this.sdaTranslateService.get("ADVANCED_SEARCH","Advanced Search"),this.selectedQueryOBID="",this.applicationSettingsService.setPageTitle(this.ADVANCED_SEARCH),this.routeSubscription$=this.route.paramMap.subscribe(e=>{this.queryService.isQueryLoading.value||(this.selectedMethod=void 0,this.selectedClass=void 0,this.selectedCriteria=[],this.tree=[],this.queryService.form=void 0,this.complexLevel=void 0,this.queryService.mandatoryCriteria=[],this.selectedSettings=[],this.initialiseQuery(e),this.initialiseSavecriteria(),this.queryService.isQueryLoading.next(!0))})}ngOnInit(){this.selectedMethod=void 0,this.selectedClass=void 0,this.selectedCriteria=[],this.tree=[],this.queryService.form=void 0,this.queryService.mandatoryDisplayItems=[]}ngOnDestroy(){this.routeSubscription$.unsubscribe()}initialiseQuery(e){this.loadingOverlayService.showLoadingOverlay(),this.selectedQueryOBID=e.get("obid")||"",this.queryService.getQueryMethods().pipe(Object(L.a)(1)).subscribe(t=>{this.queryService.queryMethods=t.sort((e,t)=>e.displayName.localeCompare(t.displayName)),e.has("selectedMethodOBID")?(this.selectedMethod=this.queryService.queryMethods.find(t=>t.methodOBID===e.get("selectedMethodOBID")),e.has("selectedClassOBID")&&(this.selectedClassOBID=JSON.parse(e.get("selectedClassOBID"))),this.selectedMethod&&(this.formSelected(this.selectedMethod,this.selectedClassOBID),e.has("selectedSettings")&&(this.selectedSettings=JSON.parse(e.get("selectedSettings"))))):(this.loadingOverlayService.hideLoadingOverlay(),this.queryService.isQueryLoading.next(!1))})}showQueryTypeList(){this.selectedMethod=void 0,this.selectedClass=void 0,this.queryService.form=void 0,this.selectedCriteria=[],this.selectedSettings=[]}formSelected(e,t){if(this.loadingOverlayService.showLoadingOverlay(),this.selectedCriteria=[],this.dialogSelectedClass=void 0,t||(this.selectedClassOBID=void 0),this.queryService.form=void 0,this.queryInterface=e.apiParam5?e.apiParam5:"","QueryClassObj"===e.clientAPI){const t=e.apiParam3;let i=[];if(e.apiParam10){i=e.apiParam10.split("~");const t=i.filter(e=>"lightview"===e.toLowerCase());t.length>0&&i.splice(i.indexOf(t[0]),1)}this.formService.getClassificationTree(t,i).pipe(Object(L.a)(1)).subscribe(e=>{e&&e.length>0&&(e[0].expanded=!0),this.tree=e,e.forEach(e=>{e.object.OBID===this.selectedClassOBID?this.selectedClass=e:e.children.length>0&&this.getClassificationItemFromTree(e.children)}),this.selectedClassOBID?this.selectClassification(this.selectedClassOBID):1===e.length&&0===e[0].children.length?(this.selectClassification(e[0].object.OBID),this.selectedClass=e[0]):(this.displayModal=!0,this.loadingOverlayService.hideLoadingOverlay()),this.queryService.isQueryLoading.next(!1)},e=>{this.queryService.isQueryLoading.next(!1),this.loadingOverlayService.hideLoadingOverlay(),this.exceptionService.handleException(e)})}else this.queryClass=e.apiParam1,Object(D.a)(this.queryService.getComplexLevelForClassDef(this.queryClass),this.formService.getQueryForm(e.methodOBID)).pipe(Object(L.a)(1)).subscribe(([e,t])=>{this.complexLevel=e,this.queryService.mandatoryDisplayItems=[],this.updateMandatoryPropertyOnDisplayItems(t),this.queryService.form=t,this.loadingOverlayService.hideLoadingOverlay(),this.queryService.isQueryLoading.next(!1)})}selectClassification(e){this.loadingOverlayService.showLoadingOverlay(),this.formService.getQueryFormFromClassification(e,this.selectedMethod.apiParam1,this.selectedMethod.methodOBID).pipe(Object(L.a)(1)).subscribe(e=>{this.queryService.mandatoryDisplayItems=[],this.updateMandatoryPropertyOnDisplayItems(e),this.queryService.form=e,this.queryClass=e.ClassDefUID,this.queryService.getComplexLevelForClassDef(this.queryClass).subscribe(e=>{this.complexLevel=e,this.loadingOverlayService.hideLoadingOverlay()})},e=>{this.loadingOverlayService.hideLoadingOverlay(),this.selectedClass=void 0,this.selectedMethod=void 0,this.exceptionService.handleException(e)})}onSave(){this.selectedClass=this.dialogSelectedClass,this.queryService.form=void 0,this.selectedCriteria=[],this.selectedSettings=[],this.selectedClass&&this.selectedClass.selectable&&(this.displayModal=!1,this.selectClassification(this.selectedClass.object.OBID))}onCancel(){this.displayModal=!1,this.dialogSelectedClass=this.selectedClass,this.selectedClass||(this.selectedMethod=void 0)}addCriteria(e){this.selectedCriteria.push(e)}removeItem(e,t){const i=t.indexOf(e);t.splice(i,1)}setFilters(e){const t=new U.a;t.pageSize=Settings.application.defaultPageSize,t.page=1,t.startingUrl="Objects/",t.columnSet=e,t.filters=[];const i=new Q.a;i.logic=K.a.AND;const n=this.setupClassFilter();i.filters=[n];const r=this.extractQueryCriteria();return this.addClassFilter(i),this.addMandatoryCriteria(r),this.setMainFilterClass(i),this.selectedMethod&&this.selectedMethod.apiParam8?this.setPropertyComparison(i,r,t):(r.filters&&r.filters.length>0&&i.filters.push(r),t.filters.push(i),Object(T.a)(t))}runQuery(){this.loadingOverlayService.showLoadingOverlay(),this.saveCriteria$.subscribe(e=>{this.routeSubscription$.unsubscribe(),this.updateUrl().then(()=>{this.router.navigate(["/results",{queryFilter:JSON.stringify(e.run),config:JSON.stringify(this.configService.selectedQueryConfigs),title:this.ADVANCED_SEARCH}])}).then(()=>this.loadingOverlayService.hideLoadingOverlay())},e=>{this.loadingOverlayService.hideLoadingOverlay(),this.exceptionService.handleException(e)})}onDataInitialized(){if(this.selectedSettings&&this.selectedSettings.length){const e=[];this.selectedSettings.forEach(t=>{const i=this.queryService.deserializeSelectedCriteria(t);i&&e.push(i)}),setTimeout(()=>this.selectedCriteria=e)}}removeDependantItem(e,t){this.queryService.onRemoveDependentItem(e,t)}onValueChanged(e){this.queryService.onValueChanged(e)}getRouteData(){const e=[];let t;return this.selectedCriteria.forEach(t=>{e.push(this.queryService.serializeDependentCriteria(t))}),t=this.selectedClass&&this.selectedClass.object?{selectedMethodOBID:this.selectedMethod.methodOBID,selectedSettings:JSON.stringify(e),selectedClassOBID:JSON.stringify(this.selectedClass.object.OBID)}:{selectedMethodOBID:this.selectedMethod.methodOBID,selectedSettings:JSON.stringify(e)},t}setPropertyComparison(e,t,i){return this.convertPropertyComparison(this.selectedMethod.apiParam8).pipe(Object(F.a)(n=>(e.filters.push(n),t.filters&&t.filters.length>0&&e.filters.push(t),i.filters.push(e),i)))}addMandatoryCriteria(e){this.queryService.mandatoryCriteria&&this.queryService.mandatoryCriteria.length>0&&this.queryService.mandatoryCriteria.forEach(t=>{t.displayItem.PropertyUID?e.filters.push(this.urlFilterFactory.createFilter(t.displayItem.PropertyUID,V.a.EQUAL,t.displayItem.Value,K.a.AND)):(t.displayItem.Operator=V.a.EQUAL,this.setRelCriteria(e,t.displayItem,t.displayItem.Value,K.a.AND))})}addClassFilter(e){this.selectedClass&&e.filters.push(this.urlFilterFactory.createFilter(this.queryService.form.ComplexClassDefDetails&&this.queryService.form.ComplexClassDefDetails.length>1?"EDG_VersionMaster/any(y: y/SPFClassifiedLevel"+this.selectedClass.level+"_12/any(x:x/OBID":"SPFClassifiedLevel"+this.selectedClass.level+"_12/any(x:x/OBID",V.a.EQUAL,this.selectedClass.object.OBID,K.a.AND))}setupClassFilter(){const e=new Q.a;return this.queryInterface?(e.field="Interfaces",e.value=this.queryInterface):(e.field="Class",e.value=this.queryClass),e.operator=V.a.EQUAL,e.filters=void 0,e}setMainFilterClass(e){this.selectedMethod&&this.selectedMethod.apiParam7&&"true"===this.selectedMethod.apiParam7.toLowerCase()&&e.filters.push(this.urlFilterFactory.createFilter("Class",V.a.EQUAL,this.queryClass))}initialiseSavecriteria(){this.saveCriteria$=Object(T.a)({}).pipe(Object(L.a)(1),Object(N.a)(()=>{let e="";return this.selectedClass&&this.selectedClass.object&&(e=this.selectedClass.object.UID),this.queryService.getColumnSetUIDForQuery(this.queryInterface,this.queryClass,e)}),Object(N.a)(e=>this.setFilters(e&&e.value?e.value:"CS_SPFObject")),Object(F.a)(e=>({edit:this.getRouteData(),run:e})))}getClassificationItemFromTree(e){e.forEach(e=>{e.object.OBID===this.selectedClassOBID?this.selectedClass=e:e.children.length>0&&this.getClassificationItemFromTree(e.children)})}extractQueryCriteria(){const e=new Q.a;return this.selectedCriteria.length>1&&(e.logic=this.selectedCriteria[1].logicOperator),this.createFilter(e,this.selectedCriteria),e}createFilter(e,t){t&&t.length&&t.forEach((t,i)=>{if(!this.isInvalidSelectedItem(t.displayItem.Value)){if(t.displayItem.NavigationPath)t.displayItem.RelObjects&&t.displayItem.RelObjects.length>0?t.displayItem.RelObjects.forEach(i=>{this.setRelCriteria(e,t.displayItem,i.Key,t.logicOperator)}):this.setRelCriteria(e,t.displayItem,t.displayItem.Operator===V.a.SPF_NULL||t.displayItem.Operator===V.a.SPF_NOT_NULL?"*":"",t.logicOperator);else{const i=this.getStartOfPropRel(t.displayItem.ComplexLevel,this.complexLevel)+t.displayItem.PropertyUID;this.isBlankOrEmpty(t.displayItem.Value)&&(this.isNullVariant(t.displayItem.Operator)||this.isNotNullVariant(t.displayItem.Operator))?e.filters.push(this.urlFilterFactory.createFilter(i,t.displayItem.Operator,"",t.logicOperator)):e.filters.push(this.urlFilterFactory.createFilter(i,t.displayItem.Operator,t.displayItem.Value,t.logicOperator))}t.dependantCriteria&&t.dependantCriteria.length&&this.updateDependentCriteriaWithOR(t,e.filters[e.filters.length-1]),this.createFilter(e,t.subCriteria)}})}setRelCriteria(e,t,i,n){if(!this.isInvalidSelectedItem(t.selectedItem)){const r=this.queryService.lambdaKeyGenerator();let s=this.getStartOfPropRel(t.ComplexLevel,this.complexLevel);t.NavigationPath.startsWith("+")?s+=t.NavigationPath.substring(1)+"_12":s+=t.NavigationPath.substring(1)+"_21",t.Operator===V.a.SPF_NULL||t.Operator===V.a.SPF_NOT_NULL?(s+="/any("+r+":true",t.Operator===V.a.SPF_NULL&&(s="not "+s)):s+="/any("+r+":"+r+"/OBID",e.filters.push(this.urlFilterFactory.createFilter(s,t.Operator,i,n))}}getStartOfPropRel(e,t){const i=this.queryService.lambdaKeyGenerator();let n="";return"NonComplex"!==t&&("$3"!==t&&t?"$2"===t?"$1"===e?n="SPFDocumentRevisions_21/any("+i+":"+i+"/":"$3"===e&&(n="SPFRevisionVersions_12/any("+i+":"+i+"/"):"$1"===t&&"$2"===e&&(n="SPFDocumentRevisions_12/any("+i+":"+i+"/"):"$1"===e?n="EDG_VersionMaster/any("+i+":"+i+"/":"$2"===e&&(n="SPFRevisionVersions_21/any("+i+":"+i+"/")),n}updateDependentCriteriaWithOR(e,t){const i=[];t.filters=[],e.dependantCriteria.forEach(n=>{if(i.indexOf(n.displayItem.UID)<0){const r=e.dependantCriteria.filter(e=>e.displayItem.UID===n.displayItem.UID),s=new Q.a;s.logic=K.a.OR,this.createFilter(s,r),t.filters.push(s),i.push(n.displayItem.UID)}})}updateUrl(){const e=Object.assign({obid:this.selectedQueryOBID},this.getRouteData());return this.router.navigate([".",e])}isBlankOrEmpty(e){return"BLANK"===e||""===e}isNullVariant(e){return e===V.a.SPF_NULL||e===V.a.IS_NULL}isNotNullVariant(e){return e===V.a.SPF_NOT_NULL||e===V.a.IS_NOT_NULL}isInvalidSelectedItem(e){return e===A.b||e===A.c}updateMandatoryPropertyOnDisplayItems(e){e.SPFFormTabs&&e.SPFFormTabs.forEach(e=>{e.FormSections.forEach(e=>{e.FormDisplayLines.forEach(t=>{t.FormDisplayItems.forEach(t=>{t.IsMandatory&&this.queryService.mandatoryDisplayItems.push(new H.a(t.UID,e.DisplayName)),t.IsMandatory=!0})})})}),e.FormSections&&e.FormSections.forEach(e=>{e.FormDisplayLines&&e.FormDisplayLines.forEach(t=>{t.FormDisplayItems&&t.FormDisplayItems.forEach(t=>{t.IsMandatory&&this.queryService.mandatoryDisplayItems.push(new H.a(t.UID,e.DisplayName)),t.IsMandatory=!0})})})}convertPropertyComparison(e){const t=[],i=new Q.a;if(i.filters=[],e){const n=e.split("~");let r=0;for(;r<n.length-1;){const e=n[r];let s="";s=e.startsWith("+")||e.toLocaleUpperCase().startsWith("+EDG_")||e.toLocaleUpperCase().startsWith("EDG_")?"_12":e.startsWith("-")?"_21":"",""!==s?(t.push(this.BuildFilterFromPropComp(n[r]+"~"+n[r+1]+"~"+n[r+2]+"~"+n[r+3]+"~"+n[r+4],!0,s).pipe(Object(F.a)(e=>{i.filters.push(e)}))),r+=5):(t.push(this.BuildFilterFromPropComp(n[r]+"~"+n[r+1]+"~"+n[r+2]+"~"+n[r+3]).pipe(Object(F.a)(e=>{i.filters.push(e)}))),r+=4)}}return t.length?Object(D.a)(t).pipe(Object(F.a)(()=>i)):Object(T.a)(i)}BuildFilterFromPropComp(e,t=!1,i){const n=e.split("~"),r=new Q.a;let s,a,o,c,l;return r.filters=[],t?(s=n[0],s=s.startsWith("+EDG_")?s.substring(1):s.startsWith("+")?s.substring(1)+"_12":s.startsWith("-")?s.substring(1)+"_21":s,a=n[1],o=n[2],l=n[3],c=n[4].split("|"),r.filters.push(this.urlFilterFactory.createFilter(s+"/any(x:x/Interfaces",V.a.EQUAL,a,K.a.AND)),this.createMultiValueFilters(s+"/any(x:x/"+o,l,c).pipe(Object(F.a)(e=>(r.filters.push(e),r)))):(a=n[0],o=n[1],l=n[2],c=n[3].split("|"),r.filters.push(this.urlFilterFactory.createFilter("Interfaces",V.a.EQUAL,a)),this.createMultiValueFilters(o,l,c).pipe(Object(F.a)(e=>(r.filters.push(e),r))))}getOperator(e){switch(e){case"=":return V.a.EQUAL;case"!=":case"NOT IN":return V.a.NOT_EQUAL;case"<":return V.a.LESS_THAN;case"<=":return V.a.LESS_THAN_EQUAL;case">":return V.a.GREATER_THAN;case">=":return V.a.GREATER_THAN_EQUAL;default:return V.a.EQUAL}}createMultiValueFilters(e,t,i){const n=this.getOperator(t),r=new Q.a,s=[];return e&&"objdefuid"===e.toLowerCase()&&(e="Class"),i.length&&(r.logic="NOT IN"!==t?"or":"and",i.forEach(t=>{(t=this.isNowDate(t)).toUpperCase().startsWith("ENV.")?s.push(this.dataService.post("ResolveEnvVariables",JSON.stringify({parrEnvVariables:i})).pipe(Object(F.a)(t=>{t.length&&t[0]&&t[0].ResolvedValues.length>0&&t[0].ResolvedValues.forEach(t=>{r.filters.push(this.urlFilterFactory.createFilter(e,n,t))})}))):r.filters.push(this.urlFilterFactory.createFilter(e,n,t))})),s.length?Object(D.a)(s).pipe(Object(F.a)(()=>r)):Object(T.a)(r)}isNowDate(e){if(new RegExp("\\W*((Now)(\\+|-)(\\d+))\\W*").test(e)){const t=e.charAt(3),i=e.substring(4),n=new Date;return n.setDate("+"===t?n.getDate()+parseInt(i,10):n.getDate()-parseInt(i,10)),n.toISOString()}return e}}return e.\u0275fac=function(t){return new(t||e)(l.Sb(Z.a),l.Sb(j.a),l.Sb(k.a),l.Sb(B.a),l.Sb(W.a),l.Sb(d.g),l.Sb(z.a),l.Sb(d.a),l.Sb(Y.a),l.Sb(X.a),l.Sb(R.a))},e.\u0275cmp=l.Mb({type:e,selectors:[["sda-query"]],decls:18,vars:19,consts:[[3,"queryCriteria","runquery",4,"ngIf"],[1,"query"],[1,"qmodule","query-type"],[1,"qmodule-header"],["id","query_type_title",1,"qmodule-header__title"],[1,"qmodule-content"],["primaryTextProperty","displayName",3,"items","selectedItem","selectedItemChange",4,"ngIf"],["class","qmodule-content__name","id","query_type_selected",4,"ngIf"],["id","query_edit_type-btn","class","qmodule-content__actions query-button query-button--action query-button--blue",3,"click",4,"ngIf"],["class","qmodule query-classification",4,"ngIf"],["class","qmodule query-criteria",4,"ngIf"],["class","query-result",4,"ngFor","ngForOf"],[1,"qmodal"],["submitText","Ok",3,"isOpen","titleText","cancel","submit"],["selectionMode","single",1,"sda-tree",3,"selection","value","styleClass","selectionChange"],["pTemplate","default"],[3,"queryCriteria","runquery"],["primaryTextProperty","displayName",3,"items","selectedItem","selectedItemChange"],["id","query_type_selected",1,"qmodule-content__name"],["id","query_edit_type-btn",1,"qmodule-content__actions","query-button","query-button--action","query-button--blue",3,"click"],["svgIcon","edit",1,"qmodule-content__icon"],[1,"qmodule","query-classification"],["id","query_classification_title",1,"qmodule-header__title"],["id","query_classification_selected",1,"qmodule-content__name"],["id","query_edit_classification-btn","class","qmodule-content__actions query-button query-button--action query-button--blue",3,"click",4,"ngIf"],["id","query_edit_classification-btn",1,"qmodule-content__actions","query-button","query-button--action","query-button--blue",3,"click"],[1,"qmodule","query-criteria"],["id","query_criteria_title",1,"qmodule-header__title"],[3,"selectedForm","existingCriteria","addCriteriaEvent","dataInitialized"],[1,"query-result"],[1,"criterion","qmodule"],["svgIcon","filter","class","qmodule-header__icon",4,"ngIf"],["class","qmodule-header__title","id","qmodule_operator_title",4,"ngIf"],[3,"queryCriteria","removeItemEvent","valueChanged"],["class","qmodule",4,"ngFor","ngForOf"],["svgIcon","filter",1,"qmodule-header__icon"],["id","qmodule_operator_title",1,"qmodule-header__title"],[1,"qmodule"],[1,"qmodule-header__title"],[3,"queryCriteria","removeItemEvent"],[1,"sda-tree__name",3,"click"]],template:function(e,t){1&e&&(l.Sc(0,ft,1,1,"sda-query-power-bar",0),l.Yb(1,"div",1),l.Yb(2,"section",2),l.Yb(3,"div",3),l.Yb(4,"h2",4),l.Uc(5),l.Xb(),l.Xb(),l.Yb(6,"div",5),l.Sc(7,_t,1,2,"uxt-list",6),l.Sc(8,Ct,2,1,"h2",7),l.Sc(9,vt,2,0,"div",8),l.Xb(),l.Xb(),l.Sc(10,Ot,8,3,"section",9),l.Sc(11,St,6,3,"section",10),l.Sc(12,Et,8,4,"div",11),l.Xb(),l.Yb(13,"div",12),l.Yb(14,"uxt-modal",13),l.hc("cancel",(function(){return t.onCancel()}))("submit",(function(){return t.onSave()})),l.Yb(15,"p-tree",14),l.hc("selectionChange",(function(e){return t.dialogSelectedClass=e})),l.Sc(16,Mt,2,5,"ng-template",15),l.Xb(),l.Xb(),l.Tb(17,"div"),l.Xb()),2&e&&(l.sc("ngIf",t.selectedMethod),l.Eb(2),l.Ib("query-type--closed",t.selectedMethod)("query-type--open",!t.selectedMethod),l.Eb(3),l.Wc(" ",t.TYPES," "),l.Eb(2),l.sc("ngIf",t.queryService.queryMethods&&t.queryService.queryMethods.length>0&&!t.selectedMethod),l.Eb(1),l.sc("ngIf",t.selectedMethod),l.Eb(1),l.sc("ngIf",t.selectedMethod),l.Eb(1),l.sc("ngIf",t.selectedClass&&!t.displayModal),l.Eb(1),l.sc("ngIf",t.queryService.form),l.Eb(1),l.sc("ngForOf",t.selectedCriteria),l.Eb(1),l.Ib("qmodal--disabled",!t.dialogSelectedClass),l.Eb(1),l.sc("isOpen",t.displayModal)("titleText",t.SELECT_CLASSIFICATION),l.Eb(1),l.sc("selection",t.dialogSelectedClass)("value",t.tree)("styleClass","sda-tree__node"))},directives:[n.t,n.s,$.a,p.a,J.d,he,ue.a,s.a,we,yt],styles:['.query[_ngcontent-%COMP%]{overflow-x:hidden;overflow-y:auto}.query-type[_ngcontent-%COMP%]     .uxt-list-item--single-line{height:40px!important}@media screen and (min-width:59.375em){.query-type[_ngcontent-%COMP%]     .uxt-list-item--single-line{height:29px!important}}[_nghost-%COMP%]{display:flex;flex:1;flex-direction:column}[_nghost-%COMP%]     .uxt-list:not(.uxt-list--compact) .uxt-list__items{max-width:none;padding-top:0;border:0}[_nghost-%COMP%]     .uxt-list-item--active{background-color:#02adff}[_nghost-%COMP%]     .uxt-list__wrapper{overflow-y:auto}[_nghost-%COMP%]     .query-button{display:inline-flex;align-items:center;justify-content:center;color:#fff;min-width:16px;height:auto;padding:0 1rem;-webkit-tap-highlight-color:transparent;transition:background-color .2s linear;cursor:pointer}[_nghost-%COMP%]     .query-button--blue{background-color:#02adff}[_nghost-%COMP%]     .query-button--blue:hover{background-color:#008bce}[_nghost-%COMP%]     .query-button--red{background-color:#d7142c}[_nghost-%COMP%]     .query-button--red:hover{background-color:#a30f21}[_nghost-%COMP%]     .query-button--green{background-color:#6fbf50}[_nghost-%COMP%]     .query-button--green:hover{background-color:#559d39}[_nghost-%COMP%]     .query-button--lynch{background-color:#607d8b}[_nghost-%COMP%]     .query-button--lynch:hover{background-color:#4b626d}[_nghost-%COMP%]     .query-button--action{width:54px;margin:0;padding:0}[_nghost-%COMP%]     .query-button__icon{width:28px;height:28px}[_nghost-%COMP%]     .qmodal--disabled .uxt-modal__actions__button__submit{opacity:.5;pointer-events:none;cursor:not-allowed;-webkit-user-select:none;-ms-user-select:none;user-select:none}[_nghost-%COMP%]     .qmodal .uxt-modal__content{min-height:inherit;max-height:none}@media screen and (min-width:48.0625em){[_nghost-%COMP%]     .qmodal .uxt-modal__content{height:40vh;min-height:180px;max-height:280px}}[_nghost-%COMP%]     .qmodal .uxt-modal__actions.uxt-toolbar{display:flex;background-color:#fff}[_nghost-%COMP%]     .qmodal .uxt-modal__actions__buttons{display:flex;margin-left:auto}[_nghost-%COMP%]     .qmodal .uxt-toolbar__items button{color:#02adff}[_nghost-%COMP%]     .qmodal .uxt-tree-list{max-width:100%;height:400px}.qmodule[_ngcontent-%COMP%]{position:relative;display:flex;flex:0 0 auto;flex-flow:column nowrap;min-height:50px;margin-bottom:20px;box-shadow:0 2px 3px rgba(0,0,0,.15)}@media screen and (min-width:75em){.qmodule[_ngcontent-%COMP%]{flex-direction:row}}.qmodule[_ngcontent-%COMP%]:not(:first-of-type){margin-top:20px}.qmodule[_ngcontent-%COMP%]:hover   .qmodule-header__title[_ngcontent-%COMP%]{color:#353535}.qmodule-header[_ngcontent-%COMP%]{display:flex;flex:0 0 auto;background-color:#fff}@media screen and (max-width:74.9375em){.qmodule-header[_ngcontent-%COMP%]{display:flex;align-items:center;height:40px;padding:8px 14px;border-bottom:1px solid rgba(169,180,190,.5)}}@media screen and (min-width:75em){.qmodule-header[_ngcontent-%COMP%]{width:180px;padding:8px 15px;border-right:1px solid #e6e6e6}}.qmodule-header__title[_ngcontent-%COMP%]{flex-basis:100%;font-size:18px;text-transform:uppercase}@media screen and (min-width:75em){.qmodule-header__title[_ngcontent-%COMP%]{margin:15px 0 0}}.qmodule-header__title[_ngcontent-%COMP%], .qmodule-header__title[_ngcontent-%COMP%]:visited{color:#484848}.qmodule-content[_ngcontent-%COMP%]{display:flex;flex:1 1 auto;background-color:#fff}.qmodule-content__name[_ngcontent-%COMP%]{flex:1;align-self:center;font-size:18px;font-weight:400;padding:15px 56px 15px 20px}@media screen and (min-width:75em){.qmodule-content__name[_ngcontent-%COMP%]{padding:20px 56px 20px 20px}}.qmodule-content__actions[_ngcontent-%COMP%]{display:flex}.qmodule-content__actions[_ngcontent-%COMP%]   .query-button[_ngcontent-%COMP%]{transition:background-color .3s ease-out}.qmodule-content__icon[_ngcontent-%COMP%]{width:28px;height:28px}.query[_ngcontent-%COMP%]{display:flex;flex:1;flex-direction:column;height:100%;background:linear-gradient(145deg,rgba(169,180,190,.85),rgba(169,180,190,.2));padding:20px 20px 40px}@media screen and (min-width:75em){.query[_ngcontent-%COMP%]{padding:30px}}.query-type--closed[_ngcontent-%COMP%]{height:auto}@media screen and (min-width:75em){.query-type--closed[_ngcontent-%COMP%]{height:70px}}@media screen and (min-width:59.375em){.query-type--open[_ngcontent-%COMP%]{height:300px}}.query-type[_ngcontent-%COMP%]     .uxt-list{padding:20px 46px 20px 20px}.query-classification[_ngcontent-%COMP%]{height:auto}@media screen and (min-width:75em){.query-classification[_ngcontent-%COMP%]{height:70px}}.query-criteria[_ngcontent-%COMP%]   .property-action__button[_ngcontent-%COMP%]:not(:only-of-type){width:54px}.query-criteria[_ngcontent-%COMP%]     .search-panel{z-index:inherit!important}.query-criteria[_ngcontent-%COMP%]     .property-action{flex-basis:60px}.criterion[_ngcontent-%COMP%]{flex-basis:100%;box-shadow:none}.criterion[_ngcontent-%COMP%]:not(:only-of-type):not(:last-of-type):after{top:56px}@media screen and (min-width:75em){.criterion[_ngcontent-%COMP%]:not(:only-of-type):not(:last-of-type):after{left:220px}}.criterion[_ngcontent-%COMP%]   .qmodule-header[_ngcontent-%COMP%]{color:#7c7c7c}.criterion[_ngcontent-%COMP%]   .qmodule-header__icon[_ngcontent-%COMP%]{width:25px;height:25px}@media screen and (min-width:75em){.criterion[_ngcontent-%COMP%]   .qmodule-header[_ngcontent-%COMP%]{width:80px;border-right:1px solid rgba(169,180,190,.5)}}.criterion[_ngcontent-%COMP%]   .qmodule-header__title[_ngcontent-%COMP%]{text-align:center}@media screen and (min-width:75em){.criterion[_ngcontent-%COMP%]   .qmodule-header__title[_ngcontent-%COMP%]{margin-top:8px}}.criterion[_ngcontent-%COMP%]     .criteria__input{padding:0 10px}.criterion[_ngcontent-%COMP%]     .query-button{height:56px}.query-result[_ngcontent-%COMP%]{position:relative;flex-shrink:0}@media screen and (min-width:75em){.query-result[_ngcontent-%COMP%]{padding-left:180px}}.query-result[_ngcontent-%COMP%]:first-of-type{margin-top:20px}.query-result[_ngcontent-%COMP%]:first-of-type   .qmodule-header[_ngcontent-%COMP%]{align-items:center;justify-content:center}@media screen and (min-width:75em){.query-result[_ngcontent-%COMP%]:not(:only-of-type):not(:last-of-type):after{content:"";position:absolute;top:50%;left:220px;bottom:0;display:inline-block;width:4px;height:100%;background-color:rgba(0,0,0,.4);-webkit-transform:translate3d(0,-50%,0);transform:translate3d(0,-50%,0);z-index:-100!important}}.query-result[_ngcontent-%COMP%]     .qmodule-header{height:56px}.query-result[_ngcontent-%COMP%]     .qmodule-content{background-color:initial}']}),e})()}];let Dt=(()=>{class e{}return e.\u0275mod=l.Qb({type:e}),e.\u0275inj=l.Pb({factory:function(t){return new(t||e)},imports:[[d.k.forChild(wt)],d.k]}),e})(),Tt=(()=>{class e{}return e.\u0275mod=l.Qb({type:e}),e.\u0275inj=l.Pb({factory:function(t){return new(t||e)},imports:[[n.c,b.a,Dt,h,u,c.b,o.b,r.j,m.a,g.a,y.a,f.a,_.a,C.a,v.a,x.a,O.a,S.a,I.a,E.a,M.a,w.a,a.b,p.b,q.a,r.z,s.b,P.a]]}),e})()},VG3f:function(e,t,i){"use strict";i.d(t,"a",(function(){return o}));var n=i("ofXK"),r=i("UqQ1"),s=i("9NXz"),a=i("fXoL");let o=(()=>{class e{}return e.\u0275mod=a.Qb({type:e}),e.\u0275inj=a.Pb({factory:function(t){return new(t||e)},imports:[[n.c,r.a,s.a]]}),e})()}}]);